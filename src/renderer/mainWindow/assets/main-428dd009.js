var na=Object.defineProperty;var ra=(e,t,n)=>t in e?na(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Be=(e,t,n)=>(ra(e,typeof t!="symbol"?t+"":t,n),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();const ia="modulepreload",oa=function(e,t){return new URL(e,t).href},lo={},Un=function(t,n,r){if(!n||n.length===0)return t();const i=document.getElementsByTagName("link");return Promise.all(n.map(o=>{if(o=oa(o,r),o in lo)return;lo[o]=!0;const s=o.endsWith(".css"),c=s?'[rel="stylesheet"]':"";if(!!r)for(let f=i.length-1;f>=0;f--){const h=i[f];if(h.href===o&&(!s||h.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${o}"]${c}`))return;const a=document.createElement("link");if(a.rel=s?"stylesheet":ia,s||(a.as="script",a.crossOrigin=""),a.href=o,document.head.appendChild(a),s)return new Promise((f,h)=>{a.addEventListener("load",f),a.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${o}`)))})})).then(()=>t()).catch(o=>{const s=new Event("vite:preloadError",{cancelable:!0});if(s.payload=o,window.dispatchEvent(s),!s.defaultPrevented)throw o})};function Qn(e){return e.split("-")[1]}function Ri(e){return e==="y"?"height":"width"}function Ht(e){return e.split("-")[0]}function Zn(e){return["top","bottom"].includes(Ht(e))?"x":"y"}function fo(e,t,n){let{reference:r,floating:i}=e;const o=r.x+r.width/2-i.width/2,s=r.y+r.height/2-i.height/2,c=Zn(t),l=Ri(c),a=r[l]/2-i[l]/2,f=c==="x";let h;switch(Ht(t)){case"top":h={x:o,y:r.y-i.height};break;case"bottom":h={x:o,y:r.y+r.height};break;case"right":h={x:r.x+r.width,y:s};break;case"left":h={x:r.x-i.width,y:s};break;default:h={x:r.x,y:r.y}}switch(Qn(t)){case"start":h[c]-=a*(n&&f?-1:1);break;case"end":h[c]+=a*(n&&f?-1:1)}return h}const sa=async(e,t,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:o=[],platform:s}=n,c=o.filter(Boolean),l=await(s.isRTL==null?void 0:s.isRTL(t));let a=await s.getElementRects({reference:e,floating:t,strategy:i}),{x:f,y:h}=fo(a,r,l),m=r,g={},w=0;for(let b=0;b<c.length;b++){const{name:S,fn:E}=c[b],{x:A,y:x,data:j,reset:k}=await E({x:f,y:h,initialPlacement:r,placement:m,strategy:i,middlewareData:g,rects:a,platform:s,elements:{reference:e,floating:t}});f=A??f,h=x??h,g={...g,[S]:{...g[S],...j}},k&&w<=50&&(w++,typeof k=="object"&&(k.placement&&(m=k.placement),k.rects&&(a=k.rects===!0?await s.getElementRects({reference:e,floating:t,strategy:i}):k.rects),{x:f,y:h}=fo(a,m,l)),b=-1)}return{x:f,y:h,placement:m,strategy:i,middlewareData:g}};function Bo(e){return typeof e!="number"?function(t){return{top:0,right:0,bottom:0,left:0,...t}}(e):{top:e,right:e,bottom:e,left:e}}function Or(e){return{...e,top:e.y,left:e.x,right:e.x+e.width,bottom:e.y+e.height}}async function Do(e,t){var n;t===void 0&&(t={});const{x:r,y:i,platform:o,rects:s,elements:c,strategy:l}=e,{boundary:a="clippingAncestors",rootBoundary:f="viewport",elementContext:h="floating",altBoundary:m=!1,padding:g=0}=t,w=Bo(g),b=c[m?h==="floating"?"reference":"floating":h],S=Or(await o.getClippingRect({element:(n=await(o.isElement==null?void 0:o.isElement(b)))==null||n?b:b.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(c.floating)),boundary:a,rootBoundary:f,strategy:l})),E=h==="floating"?{...s.floating,x:r,y:i}:s.reference,A=await(o.getOffsetParent==null?void 0:o.getOffsetParent(c.floating)),x=await(o.isElement==null?void 0:o.isElement(A))&&await(o.getScale==null?void 0:o.getScale(A))||{x:1,y:1},j=Or(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({rect:E,offsetParent:A,strategy:l}):E);return{top:(S.top-j.top+w.top)/x.y,bottom:(j.bottom-S.bottom+w.bottom)/x.y,left:(S.left-j.left+w.left)/x.x,right:(j.right-S.right+w.right)/x.x}}const aa=Math.min,ca=Math.max;function oi(e,t,n){return ca(e,aa(t,n))}const ua=e=>({name:"arrow",options:e,async fn(t){const{element:n,padding:r=0}=e||{},{x:i,y:o,placement:s,rects:c,platform:l,elements:a}=t;if(n==null)return{};const f=Bo(r),h={x:i,y:o},m=Zn(s),g=Ri(m),w=await l.getDimensions(n),b=m==="y",S=b?"top":"left",E=b?"bottom":"right",A=b?"clientHeight":"clientWidth",x=c.reference[g]+c.reference[m]-h[m]-c.floating[g],j=h[m]-c.reference[m],k=await(l.getOffsetParent==null?void 0:l.getOffsetParent(n));let N=k?k[A]:0;N&&await(l.isElement==null?void 0:l.isElement(k))||(N=a.floating[A]||c.floating[g]);const C=x/2-j/2,$=f[S],v=N-w[g]-f[E],d=N/2-w[g]/2+C,P=oi($,d,v),T=Qn(s)!=null&&d!=P&&c.reference[g]/2-(d<$?f[S]:f[E])-w[g]/2<0;return{[m]:h[m]-(T?d<$?$-d:v-d:0),data:{[m]:P,centerOffset:d-P}}}}),la=["top","right","bottom","left"];la.reduce((e,t)=>e.concat(t,t+"-start",t+"-end"),[]);const fa={left:"right",right:"left",bottom:"top",top:"bottom"};function Tr(e){return e.replace(/left|right|bottom|top/g,t=>fa[t])}function da(e,t,n){n===void 0&&(n=!1);const r=Qn(e),i=Zn(e),o=Ri(i);let s=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[o]>t.floating[o]&&(s=Tr(s)),{main:s,cross:Tr(s)}}const ha={start:"end",end:"start"};function Gr(e){return e.replace(/start|end/g,t=>ha[t])}const pa=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n;const{placement:r,middlewareData:i,rects:o,initialPlacement:s,platform:c,elements:l}=t,{mainAxis:a=!0,crossAxis:f=!0,fallbackPlacements:h,fallbackStrategy:m="bestFit",fallbackAxisSideDirection:g="none",flipAlignment:w=!0,...b}=e,S=Ht(r),E=Ht(s)===s,A=await(c.isRTL==null?void 0:c.isRTL(l.floating)),x=h||(E||!w?[Tr(s)]:function(P){const T=Tr(P);return[Gr(P),T,Gr(T)]}(s));h||g==="none"||x.push(...function(P,T,Y,W){const oe=Qn(P);let re=function(ie,se,Pe){const ke=["left","right"],Re=["right","left"],Fe=["top","bottom"],Ze=["bottom","top"];switch(ie){case"top":case"bottom":return Pe?se?Re:ke:se?ke:Re;case"left":case"right":return se?Fe:Ze;default:return[]}}(Ht(P),Y==="start",W);return oe&&(re=re.map(ie=>ie+"-"+oe),T&&(re=re.concat(re.map(Gr)))),re}(s,w,g,A));const j=[s,...x],k=await Do(t,b),N=[];let C=((n=i.flip)==null?void 0:n.overflows)||[];if(a&&N.push(k[S]),f){const{main:P,cross:T}=da(r,o,A);N.push(k[P],k[T])}if(C=[...C,{placement:r,overflows:N}],!N.every(P=>P<=0)){var $,v;const P=((($=i.flip)==null?void 0:$.index)||0)+1,T=j[P];if(T)return{data:{index:P,overflows:C},reset:{placement:T}};let Y=(v=C.filter(W=>W.overflows[0]<=0).sort((W,oe)=>W.overflows[1]-oe.overflows[1])[0])==null?void 0:v.placement;if(!Y)switch(m){case"bestFit":{var d;const W=(d=C.map(oe=>[oe.placement,oe.overflows.filter(re=>re>0).reduce((re,ie)=>re+ie,0)]).sort((oe,re)=>oe[1]-re[1])[0])==null?void 0:d[0];W&&(Y=W);break}case"initialPlacement":Y=s}if(r!==Y)return{reset:{placement:Y}}}return{}}}},ya=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){const{x:n,y:r}=t,i=await async function(o,s){const{placement:c,platform:l,elements:a}=o,f=await(l.isRTL==null?void 0:l.isRTL(a.floating)),h=Ht(c),m=Qn(c),g=Zn(c)==="x",w=["left","top"].includes(h)?-1:1,b=f&&g?-1:1,S=typeof s=="function"?s(o):s;let{mainAxis:E,crossAxis:A,alignmentAxis:x}=typeof S=="number"?{mainAxis:S,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...S};return m&&typeof x=="number"&&(A=m==="end"?-1*x:x),g?{x:A*b,y:E*w}:{x:E*w,y:A*b}}(t,e);return{x:n+i.x,y:r+i.y,data:i}}}};function ma(e){return e==="x"?"y":"x"}const ga=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:i}=t,{mainAxis:o=!0,crossAxis:s=!1,limiter:c={fn:S=>{let{x:E,y:A}=S;return{x:E,y:A}}},...l}=e,a={x:n,y:r},f=await Do(t,l),h=Zn(Ht(i)),m=ma(h);let g=a[h],w=a[m];if(o){const S=h==="y"?"bottom":"right";g=oi(g+f[h==="y"?"top":"left"],g,g-f[S])}if(s){const S=m==="y"?"bottom":"right";w=oi(w+f[m==="y"?"top":"left"],w,w-f[S])}const b=c.fn({...t,[h]:g,[m]:w});return{...b,data:{x:b.x-n,y:b.y-r}}}}};function ot(e){var t;return((t=e.ownerDocument)==null?void 0:t.defaultView)||window}function gt(e){return ot(e).getComputedStyle(e)}function Ro(e){return e instanceof ot(e).Node}function Kt(e){return Ro(e)?(e.nodeName||"").toLowerCase():""}let cr;function $o(){if(cr)return cr;const e=navigator.userAgentData;return e&&Array.isArray(e.brands)?(cr=e.brands.map(t=>t.brand+"/"+t.version).join(" "),cr):navigator.userAgent}function bt(e){return e instanceof ot(e).HTMLElement}function st(e){return e instanceof ot(e).Element}function ho(e){return typeof ShadowRoot>"u"?!1:e instanceof ot(e).ShadowRoot||e instanceof ShadowRoot}function Mn(e){const{overflow:t,overflowX:n,overflowY:r,display:i}=gt(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(i)}function va(e){return["table","td","th"].includes(Kt(e))}function si(e){const t=/firefox/i.test($o()),n=gt(e),r=n.backdropFilter||n.WebkitBackdropFilter;return n.transform!=="none"||n.perspective!=="none"||!!r&&r!=="none"||t&&n.willChange==="filter"||t&&!!n.filter&&n.filter!=="none"||["transform","perspective"].some(i=>n.willChange.includes(i))||["paint","layout","strict","content"].some(i=>{const o=n.contain;return o!=null&&o.includes(i)})}function ai(){return/^((?!chrome|android).)*safari/i.test($o())}function Fr(e){return["html","body","#document"].includes(Kt(e))}const po=Math.min,jn=Math.max,Pr=Math.round;function Lo(e){const t=gt(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const i=bt(e),o=i?e.offsetWidth:n,s=i?e.offsetHeight:r,c=Pr(n)!==o||Pr(r)!==s;return c&&(n=o,r=s),{width:n,height:r,fallback:c}}function Ko(e){return st(e)?e:e.contextElement}const Fo={x:1,y:1};function pn(e){const t=Ko(e);if(!bt(t))return Fo;const n=t.getBoundingClientRect(),{width:r,height:i,fallback:o}=Lo(t);let s=(o?Pr(n.width):n.width)/r,c=(o?Pr(n.height):n.height)/i;return s&&Number.isFinite(s)||(s=1),c&&Number.isFinite(c)||(c=1),{x:s,y:c}}function Zt(e,t,n,r){var i,o;t===void 0&&(t=!1),n===void 0&&(n=!1);const s=e.getBoundingClientRect(),c=Ko(e);let l=Fo;t&&(r?st(r)&&(l=pn(r)):l=pn(e));const a=c?ot(c):window,f=ai()&&n;let h=(s.left+(f&&((i=a.visualViewport)==null?void 0:i.offsetLeft)||0))/l.x,m=(s.top+(f&&((o=a.visualViewport)==null?void 0:o.offsetTop)||0))/l.y,g=s.width/l.x,w=s.height/l.y;if(c){const b=ot(c),S=r&&st(r)?ot(r):r;let E=b.frameElement;for(;E&&r&&S!==b;){const A=pn(E),x=E.getBoundingClientRect(),j=getComputedStyle(E);x.x+=(E.clientLeft+parseFloat(j.paddingLeft))*A.x,x.y+=(E.clientTop+parseFloat(j.paddingTop))*A.y,h*=A.x,m*=A.y,g*=A.x,w*=A.y,h+=x.x,m+=x.y,E=ot(E).frameElement}}return Or({width:g,height:w,x:h,y:m})}function Lt(e){return((Ro(e)?e.ownerDocument:e.document)||window.document).documentElement}function Ur(e){return st(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function Uo(e){return Zt(Lt(e)).left+Ur(e).scrollLeft}function wn(e){if(Kt(e)==="html")return e;const t=e.assignedSlot||e.parentNode||ho(e)&&e.host||Lt(e);return ho(t)?t.host:t}function Mo(e){const t=wn(e);return Fr(t)?t.ownerDocument.body:bt(t)&&Mn(t)?t:Mo(t)}function Bn(e,t){var n;t===void 0&&(t=[]);const r=Mo(e),i=r===((n=e.ownerDocument)==null?void 0:n.body),o=ot(r);return i?t.concat(o,o.visualViewport||[],Mn(r)?r:[]):t.concat(r,Bn(r))}function yo(e,t,n){let r;if(t==="viewport")r=function(s,c){const l=ot(s),a=Lt(s),f=l.visualViewport;let h=a.clientWidth,m=a.clientHeight,g=0,w=0;if(f){h=f.width,m=f.height;const b=ai();(!b||b&&c==="fixed")&&(g=f.offsetLeft,w=f.offsetTop)}return{width:h,height:m,x:g,y:w}}(e,n);else if(t==="document")r=function(s){const c=Lt(s),l=Ur(s),a=s.ownerDocument.body,f=jn(c.scrollWidth,c.clientWidth,a.scrollWidth,a.clientWidth),h=jn(c.scrollHeight,c.clientHeight,a.scrollHeight,a.clientHeight);let m=-l.scrollLeft+Uo(s);const g=-l.scrollTop;return gt(a).direction==="rtl"&&(m+=jn(c.clientWidth,a.clientWidth)-f),{width:f,height:h,x:m,y:g}}(Lt(e));else if(st(t))r=function(s,c){const l=Zt(s,!0,c==="fixed"),a=l.top+s.clientTop,f=l.left+s.clientLeft,h=bt(s)?pn(s):{x:1,y:1};return{width:s.clientWidth*h.x,height:s.clientHeight*h.y,x:f*h.x,y:a*h.y}}(t,n);else{const s={...t};if(ai()){var i,o;const c=ot(e);s.x-=((i=c.visualViewport)==null?void 0:i.offsetLeft)||0,s.y-=((o=c.visualViewport)==null?void 0:o.offsetTop)||0}r=s}return Or(r)}function Wo(e,t){const n=wn(e);return!(n===t||!st(n)||Fr(n))&&(gt(n).position==="fixed"||Wo(n,t))}function mo(e,t){return bt(e)&&gt(e).position!=="fixed"?t?t(e):e.offsetParent:null}function go(e,t){const n=ot(e);if(!bt(e))return n;let r=mo(e,t);for(;r&&va(r)&&gt(r).position==="static";)r=mo(r,t);return r&&(Kt(r)==="html"||Kt(r)==="body"&&gt(r).position==="static"&&!si(r))?n:r||function(i){let o=wn(i);for(;bt(o)&&!Fr(o);){if(si(o))return o;o=wn(o)}return null}(e)||n}function ba(e,t,n){const r=bt(t),i=Lt(t),o=Zt(e,!0,n==="fixed",t);let s={scrollLeft:0,scrollTop:0};const c={x:0,y:0};if(r||!r&&n!=="fixed")if((Kt(t)!=="body"||Mn(i))&&(s=Ur(t)),bt(t)){const l=Zt(t,!0);c.x=l.x+t.clientLeft,c.y=l.y+t.clientTop}else i&&(c.x=Uo(i));return{x:o.left+s.scrollLeft-c.x,y:o.top+s.scrollTop-c.y,width:o.width,height:o.height}}const wa={getClippingRect:function(e){let{element:t,boundary:n,rootBoundary:r,strategy:i}=e;const o=n==="clippingAncestors"?function(a,f){const h=f.get(a);if(h)return h;let m=Bn(a).filter(S=>st(S)&&Kt(S)!=="body"),g=null;const w=gt(a).position==="fixed";let b=w?wn(a):a;for(;st(b)&&!Fr(b);){const S=gt(b),E=si(b);E||S.position!=="fixed"||(g=null),(w?!E&&!g:!E&&S.position==="static"&&g&&["absolute","fixed"].includes(g.position)||Mn(b)&&!E&&Wo(a,b))?m=m.filter(A=>A!==b):g=S,b=wn(b)}return f.set(a,m),m}(t,this._c):[].concat(n),s=[...o,r],c=s[0],l=s.reduce((a,f)=>{const h=yo(t,f,i);return a.top=jn(h.top,a.top),a.right=po(h.right,a.right),a.bottom=po(h.bottom,a.bottom),a.left=jn(h.left,a.left),a},yo(t,c,i));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}},convertOffsetParentRelativeRectToViewportRelativeRect:function(e){let{rect:t,offsetParent:n,strategy:r}=e;const i=bt(n),o=Lt(n);if(n===o)return t;let s={scrollLeft:0,scrollTop:0},c={x:1,y:1};const l={x:0,y:0};if((i||!i&&r!=="fixed")&&((Kt(n)!=="body"||Mn(o))&&(s=Ur(n)),bt(n))){const a=Zt(n);c=pn(n),l.x=a.x+n.clientLeft,l.y=a.y+n.clientTop}return{width:t.width*c.x,height:t.height*c.y,x:t.x*c.x-s.scrollLeft*c.x+l.x,y:t.y*c.y-s.scrollTop*c.y+l.y}},isElement:st,getDimensions:function(e){return Lo(e)},getOffsetParent:go,getDocumentElement:Lt,getScale:pn,async getElementRects(e){let{reference:t,floating:n,strategy:r}=e;const i=this.getOffsetParent||go,o=this.getDimensions;return{reference:ba(t,await i(n),r),floating:{x:0,y:0,...await o(n)}}},getClientRects:e=>Array.from(e.getClientRects()),isRTL:e=>gt(e).direction==="rtl"};function _a(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:o=!0,elementResize:s=!0,animationFrame:c=!1}=r,l=i||o?[...st(e)?Bn(e):e.contextElement?Bn(e.contextElement):[],...Bn(t)]:[];l.forEach(m=>{const g=!st(m)&&m.toString().includes("V");!i||c&&!g||m.addEventListener("scroll",n,{passive:!0}),o&&m.addEventListener("resize",n)});let a,f=null;s&&(f=new ResizeObserver(()=>{n()}),st(e)&&!c&&f.observe(e),st(e)||!e.contextElement||c||f.observe(e.contextElement),f.observe(t));let h=c?Zt(e):null;return c&&function m(){const g=Zt(e);!h||g.x===h.x&&g.y===h.y&&g.width===h.width&&g.height===h.height||n(),h=g,a=requestAnimationFrame(m)}(),n(),()=>{var m;l.forEach(g=>{i&&g.removeEventListener("scroll",n),o&&g.removeEventListener("resize",n)}),(m=f)==null||m.disconnect(),f=null,c&&cancelAnimationFrame(a)}}const Sa=(e,t,n)=>{const r=new Map,i={platform:wa,...n},o={...i.platform,_c:r};return sa(e,t,{...i,platform:o})};function qe(){}const Mr=e=>e;function xa(e,t){for(const n in t)e[n]=t[n];return e}function qo(e){return e()}function vo(){return Object.create(null)}function Nt(e){e.forEach(qo)}function nn(e){return typeof e=="function"}function Ea(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}let ur;function Cl(e,t){return ur||(ur=document.createElement("a")),ur.href=t,e===ur.href}function Aa(e){return Object.keys(e).length===0}function $i(e,...t){if(e==null)return qe;const n=e.subscribe(...t);return n.unsubscribe?()=>n.unsubscribe():n}function Vo(e){let t;return $i(e,n=>t=n)(),t}function Il(e,t,n){e.$$.on_destroy.push($i(t,n))}function Nl(e,t,n,r){if(e){const i=Yo(e,t,n,r);return e[0](i)}}function Yo(e,t,n,r){return e[1]&&r?xa(n.ctx.slice(),e[1](r(t))):n.ctx}function jl(e,t,n,r){if(e[2]&&r){const i=e[2](r(n));if(t.dirty===void 0)return i;if(typeof i=="object"){const o=[],s=Math.max(t.dirty.length,i.length);for(let c=0;c<s;c+=1)o[c]=t.dirty[c]|i[c];return o}return t.dirty|i}return t.dirty}function Bl(e,t,n,r,i,o){if(i){const s=Yo(t,n,r,o);e.p(s,i)}}function Dl(e){if(e.ctx.length>32){const t=[],n=e.ctx.length/32;for(let r=0;r<n;r++)t[r]=-1;return t}return-1}function Rl(e){const t={};for(const n in e)n[0]!=="$"&&(t[n]=e[n]);return t}function $l(e,t){const n={};t=new Set(t);for(const r in e)!t.has(r)&&r[0]!=="$"&&(n[r]=e[r]);return n}function Ll(e){const t={};for(const n in e)t[n]=!0;return t}function Kl(e){return e??""}function Fl(e,t,n){return e.set(n),t}function Ul(e){return e&&nn(e.destroy)?e.destroy:qe}function Ml(e){const t=typeof e=="string"&&e.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return t?[parseFloat(t[1]),t[2]||"px"]:[e,"px"]}const zo=typeof window<"u";let Wr=zo?()=>window.performance.now():()=>Date.now(),Li=zo?e=>requestAnimationFrame(e):qe;const yn=new Set;function Jo(e){yn.forEach(t=>{t.c(e)||(yn.delete(t),t.f())}),yn.size!==0&&Li(Jo)}function qr(e){let t;return yn.size===0&&Li(Jo),{promise:new Promise(n=>{yn.add(t={c:e,f:n})}),abort(){yn.delete(t)}}}const Wl=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function Oa(e,t){e.appendChild(t)}function Ho(e){if(!e)return document;const t=e.getRootNode?e.getRootNode():e.ownerDocument;return t&&t.host?t:e.ownerDocument}function Ta(e){const t=Go("style");return Pa(Ho(e),t),t.sheet}function Pa(e,t){return Oa(e.head||e,t),t.sheet}function ka(e,t,n){e.insertBefore(t,n||null)}function Ki(e){e.parentNode&&e.parentNode.removeChild(e)}function ql(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function Go(e){return document.createElement(e)}function Ca(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function Xo(e){return document.createTextNode(e)}function Vl(){return Xo(" ")}function Yl(){return Xo("")}function zl(e,t,n,r){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}function Jl(e){return function(t){return t.preventDefault(),e.call(this,t)}}function Ia(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}const Na=["width","height"];function Hl(e,t){const n=Object.getOwnPropertyDescriptors(e.__proto__);for(const r in t)t[r]==null?e.removeAttribute(r):r==="style"?e.style.cssText=t[r]:r==="__value"?e.value=e[r]=t[r]:n[r]&&n[r].set&&Na.indexOf(r)===-1?e[r]=t[r]:Ia(e,r,t[r])}function Gl(e){let t;return{p(...n){t=n,t.forEach(r=>e.push(r))},r(){t.forEach(n=>e.splice(e.indexOf(n),1))}}}function ja(e){return Array.from(e.childNodes)}function Xl(e,t){t=""+t,e.data!==t&&(e.data=t)}function Ql(e,t){e.value=t??""}function Zl(e,t,n,r){n==null?e.style.removeProperty(t):e.style.setProperty(t,n,r?"important":"")}function ef(e,t,n){for(let r=0;r<e.options.length;r+=1){const i=e.options[r];if(i.__value===t){i.selected=!0;return}}(!n||t!==void 0)&&(e.selectedIndex=-1)}function tf(e,t){for(let n=0;n<e.options.length;n+=1){const r=e.options[n];r.selected=~t.indexOf(r.__value)}}function nf(e){const t=e.querySelector(":checked");return t&&t.__value}function rf(e){return[].map.call(e.querySelectorAll(":checked"),t=>t.__value)}function of(e,t,n){e.classList[n?"add":"remove"](t)}function Qo(e,t,{bubbles:n=!1,cancelable:r=!1}={}){const i=document.createEvent("CustomEvent");return i.initCustomEvent(e,n,r,t),i}class sf{constructor(t=!1){this.is_svg=!1,this.is_svg=t,this.e=this.n=null}c(t){this.h(t)}m(t,n,r=null){this.e||(this.is_svg?this.e=Ca(n.nodeName):this.e=Go(n.nodeType===11?"TEMPLATE":n.nodeName),this.t=n.tagName!=="TEMPLATE"?n:n.content,this.c(t)),this.i(r)}h(t){this.e.innerHTML=t,this.n=Array.from(this.e.nodeName==="TEMPLATE"?this.e.content.childNodes:this.e.childNodes)}i(t){for(let n=0;n<this.n.length;n+=1)ka(this.t,this.n[n],t)}p(t){this.d(),this.h(t),this.i(this.a)}d(){this.n.forEach(Ki)}}function af(e,t){return new e(t)}const kr=new Map;let Cr=0;function Ba(e){let t=5381,n=e.length;for(;n--;)t=(t<<5)-t^e.charCodeAt(n);return t>>>0}function Da(e,t){const n={stylesheet:Ta(t),rules:{}};return kr.set(e,n),n}function Wn(e,t,n,r,i,o,s,c=0){const l=16.666/r;let a=`{
`;for(let S=0;S<=1;S+=l){const E=t+(n-t)*o(S);a+=S*100+`%{${s(E,1-E)}}
`}const f=a+`100% {${s(n,1-n)}}
}`,h=`__svelte_${Ba(f)}_${c}`,m=Ho(e),{stylesheet:g,rules:w}=kr.get(m)||Da(m,e);w[h]||(w[h]=!0,g.insertRule(`@keyframes ${h} ${f}`,g.cssRules.length));const b=e.style.animation||"";return e.style.animation=`${b?`${b}, `:""}${h} ${r}ms linear ${i}ms 1 both`,Cr+=1,h}function qn(e,t){const n=(e.style.animation||"").split(", "),r=n.filter(t?o=>o.indexOf(t)<0:o=>o.indexOf("__svelte")===-1),i=n.length-r.length;i&&(e.style.animation=r.join(", "),Cr-=i,Cr||Ra())}function Ra(){Li(()=>{Cr||(kr.forEach(e=>{const{ownerNode:t}=e.stylesheet;t&&Ki(t)}),kr.clear())})}function cf(e,t,n,r){if(!t)return qe;const i=e.getBoundingClientRect();if(t.left===i.left&&t.right===i.right&&t.top===i.top&&t.bottom===i.bottom)return qe;const{delay:o=0,duration:s=300,easing:c=Mr,start:l=Wr()+o,end:a=l+s,tick:f=qe,css:h}=n(e,{from:t,to:i},r);let m=!0,g=!1,w;function b(){h&&(w=Wn(e,0,1,s,o,c,h)),o||(g=!0)}function S(){h&&qn(e,w),m=!1}return qr(E=>{if(!g&&E>=l&&(g=!0),g&&E>=a&&(f(1,0),S()),!m)return!1;if(g){const A=E-l,x=0+1*c(A/s);f(x,1-x)}return!0}),b(),f(0,1),S}function uf(e){const t=getComputedStyle(e);if(t.position!=="absolute"&&t.position!=="fixed"){const{width:n,height:r}=t,i=e.getBoundingClientRect();e.style.position="absolute",e.style.width=n,e.style.height=r,$a(e,i)}}function $a(e,t){const n=e.getBoundingClientRect();if(t.left!==n.left||t.top!==n.top){const r=getComputedStyle(e),i=r.transform==="none"?"":r.transform;e.style.transform=`${i} translate(${t.left-n.left}px, ${t.top-n.top}px)`}}let Vn;function Dn(e){Vn=e}function er(){if(!Vn)throw new Error("Function called outside component initialization");return Vn}function lf(e){er().$$.on_mount.push(e)}function ff(e){er().$$.on_destroy.push(e)}function df(){const e=er();return(t,n,{cancelable:r=!1}={})=>{const i=e.$$.callbacks[t];if(i){const o=Qo(t,n,{cancelable:r});return i.slice().forEach(s=>{s.call(e,o)}),!o.defaultPrevented}return!0}}function hf(e,t){return er().$$.context.set(e,t),t}function pf(e){return er().$$.context.get(e)}function yf(e,t){const n=e.$$.callbacks[t.type];n&&n.slice().forEach(r=>r.call(this,t))}const fn=[],bo=[];let mn=[];const ci=[],Zo=Promise.resolve();let ui=!1;function es(){ui||(ui=!0,Zo.then(ts))}function mf(){return es(),Zo}function _n(e){mn.push(e)}function gf(e){ci.push(e)}const Xr=new Set;let an=0;function ts(){if(an!==0)return;const e=Vn;do{try{for(;an<fn.length;){const t=fn[an];an++,Dn(t),La(t.$$)}}catch(t){throw fn.length=0,an=0,t}for(Dn(null),fn.length=0,an=0;bo.length;)bo.pop()();for(let t=0;t<mn.length;t+=1){const n=mn[t];Xr.has(n)||(Xr.add(n),n())}mn.length=0}while(fn.length);for(;ci.length;)ci.pop()();ui=!1,Xr.clear(),Dn(e)}function La(e){if(e.fragment!==null){e.update(),Nt(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(_n)}}function Ka(e){const t=[],n=[];mn.forEach(r=>e.indexOf(r)===-1?t.push(r):n.push(r)),n.forEach(r=>r()),mn=t}let Tn;function Fi(){return Tn||(Tn=Promise.resolve(),Tn.then(()=>{Tn=null})),Tn}function Gt(e,t,n){e.dispatchEvent(Qo(`${t?"intro":"outro"}${n}`))}const vr=new Set;let _t;function vf(){_t={r:0,c:[],p:_t}}function bf(){_t.r||Nt(_t.c),_t=_t.p}function ns(e,t){e&&e.i&&(vr.delete(e),e.i(t))}function Fa(e,t,n,r){if(e&&e.o){if(vr.has(e))return;vr.add(e),_t.c.push(()=>{vr.delete(e),r&&(n&&e.d(1),r())}),e.o(t)}else r&&r()}const Ui={duration:0};function wf(e,t,n){const r={direction:"in"};let i=t(e,n,r),o=!1,s,c,l=0;function a(){s&&qn(e,s)}function f(){const{delay:m=0,duration:g=300,easing:w=Mr,tick:b=qe,css:S}=i||Ui;S&&(s=Wn(e,0,1,g,m,w,S,l++)),b(0,1);const E=Wr()+m,A=E+g;c&&c.abort(),o=!0,_n(()=>Gt(e,!0,"start")),c=qr(x=>{if(o){if(x>=A)return b(1,0),Gt(e,!0,"end"),a(),o=!1;if(x>=E){const j=w((x-E)/g);b(j,1-j)}}return o})}let h=!1;return{start(){h||(h=!0,qn(e),nn(i)?(i=i(r),Fi().then(f)):f())},invalidate(){h=!1},end(){o&&(a(),o=!1)}}}function _f(e,t,n){const r={direction:"out"};let i=t(e,n,r),o=!0,s;const c=_t;c.r+=1;function l(){const{delay:a=0,duration:f=300,easing:h=Mr,tick:m=qe,css:g}=i||Ui;g&&(s=Wn(e,1,0,f,a,h,g));const w=Wr()+a,b=w+f;_n(()=>Gt(e,!1,"start")),qr(S=>{if(o){if(S>=b)return m(0,1),Gt(e,!1,"end"),--c.r||Nt(c.c),!1;if(S>=w){const E=h((S-w)/f);m(1-E,E)}}return o})}return nn(i)?Fi().then(()=>{i=i(r),l()}):l(),{end(a){a&&i.tick&&i.tick(1,0),o&&(s&&qn(e,s),o=!1)}}}function Sf(e,t,n,r){const i={direction:"both"};let o=t(e,n,i),s=r?0:1,c=null,l=null,a=null;function f(){a&&qn(e,a)}function h(g,w){const b=g.b-s;return w*=Math.abs(b),{a:s,b:g.b,d:b,duration:w,start:g.start,end:g.start+w,group:g.group}}function m(g){const{delay:w=0,duration:b=300,easing:S=Mr,tick:E=qe,css:A}=o||Ui,x={start:Wr()+w,b:g};g||(x.group=_t,_t.r+=1),c||l?l=x:(A&&(f(),a=Wn(e,s,g,b,w,S,A)),g&&E(0,1),c=h(x,b),_n(()=>Gt(e,g,"start")),qr(j=>{if(l&&j>l.start&&(c=h(l,b),l=null,Gt(e,c.b,"start"),A&&(f(),a=Wn(e,s,c.b,c.duration,0,S,o.css))),c){if(j>=c.end)E(s=c.b,1-s),Gt(e,c.b,"end"),l||(c.b?f():--c.group.r||Nt(c.group.c)),c=null;else if(j>=c.start){const k=j-c.start;s=c.a+c.d*S(k/c.duration),E(s,1-s)}}return!!(c||l)}))}return{run(g){nn(o)?Fi().then(()=>{o=o(i),m(g)}):m(g)},end(){f(),c=l=null}}}function Ua(e,t){e.d(1),t.delete(e.key)}function Ma(e,t){Fa(e,1,1,()=>{t.delete(e.key)})}function xf(e,t){e.f(),Ua(e,t)}function Ef(e,t){e.f(),Ma(e,t)}function Af(e,t,n,r,i,o,s,c,l,a,f,h){let m=e.length,g=o.length,w=m;const b={};for(;w--;)b[e[w].key]=w;const S=[],E=new Map,A=new Map,x=[];for(w=g;w--;){const C=h(i,o,w),$=n(C);let v=s.get($);v?r&&x.push(()=>v.p(C,t)):(v=a($,C),v.c()),E.set($,S[w]=v),$ in b&&A.set($,Math.abs(w-b[$]))}const j=new Set,k=new Set;function N(C){ns(C,1),C.m(c,f),s.set(C.key,C),f=C.first,g--}for(;m&&g;){const C=S[g-1],$=e[m-1],v=C.key,d=$.key;C===$?(f=C.first,m--,g--):E.has(d)?!s.has(v)||j.has(v)?N(C):k.has(d)?m--:A.get(v)>A.get(d)?(k.add(v),N(C)):(j.add(d),m--):(l($,s),m--)}for(;m--;){const C=e[m];E.has(C.key)||l(C,s)}for(;g;)N(S[g-1]);return Nt(x),S}function Of(e,t){const n={},r={},i={$$scope:1};let o=e.length;for(;o--;){const s=e[o],c=t[o];if(c){for(const l in s)l in c||(r[l]=1);for(const l in c)i[l]||(n[l]=c[l],i[l]=1);e[o]=c}else for(const l in s)i[l]=1}for(const s in r)s in n||(n[s]=void 0);return n}function Tf(e){return typeof e=="object"&&e!==null?e:{}}function Pf(e,t,n){const r=e.$$.props[t];r!==void 0&&(e.$$.bound[r]=n,n(e.$$.ctx[r]))}function kf(e){e&&e.c()}function Wa(e,t,n,r){const{fragment:i,after_update:o}=e.$$;i&&i.m(t,n),r||_n(()=>{const s=e.$$.on_mount.map(qo).filter(nn);e.$$.on_destroy?e.$$.on_destroy.push(...s):Nt(s),e.$$.on_mount=[]}),o.forEach(_n)}function qa(e,t){const n=e.$$;n.fragment!==null&&(Ka(n.after_update),Nt(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function Va(e,t){e.$$.dirty[0]===-1&&(fn.push(e),es(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function Cf(e,t,n,r,i,o,s,c=[-1]){const l=Vn;Dn(e);const a=e.$$={fragment:null,ctx:[],props:o,update:qe,not_equal:i,bound:vo(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(l?l.$$.context:[])),callbacks:vo(),dirty:c,skip_bound:!1,root:t.target||l.$$.root};s&&s(a.root);let f=!1;if(a.ctx=n?n(e,t.props||{},(h,m,...g)=>{const w=g.length?g[0]:m;return a.ctx&&i(a.ctx[h],a.ctx[h]=w)&&(!a.skip_bound&&a.bound[h]&&a.bound[h](w),f&&Va(e,h)),m}):[],a.update(),f=!0,Nt(a.before_update),a.fragment=r?r(a.ctx):!1,t.target){if(t.hydrate){const h=ja(t.target);a.fragment&&a.fragment.l(h),h.forEach(Ki)}else a.fragment&&a.fragment.c();t.intro&&ns(e.$$.fragment),Wa(e,t.target,t.anchor,t.customElement),ts()}Dn(l)}class If{$destroy(){qa(this,1),this.$destroy=qe}$on(t,n){if(!nn(n))return qe;const r=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return r.push(n),()=>{const i=r.indexOf(n);i!==-1&&r.splice(i,1)}}$set(t){this.$$set&&!Aa(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const cn=[];function Ya(e,t){return{subscribe:xn(e,t).subscribe}}function xn(e,t=qe){let n;const r=new Set;function i(c){if(Ea(e,c)&&(e=c,n)){const l=!cn.length;for(const a of r)a[1](),cn.push(a,e);if(l){for(let a=0;a<cn.length;a+=2)cn[a][0](cn[a+1]);cn.length=0}}}function o(c){i(c(e))}function s(c,l=qe){const a=[c,l];return r.add(a),r.size===1&&(n=t(i)||qe),c(e),()=>{r.delete(a),r.size===0&&n&&(n(),n=null)}}return{set:i,update:o,subscribe:s}}function Nf(e,t,n){const r=!Array.isArray(e),i=r?[e]:e,o=t.length<2;return Ya(n,s=>{let c=!1;const l=[];let a=0,f=qe;const h=()=>{if(a)return;f();const g=t(r?l[0]:l,s);o?s(g):f=nn(g)?g:qe},m=i.map((g,w)=>$i(g,b=>{l[w]=b,a&=~(1<<w),c&&h()},()=>{a|=1<<w}));return c=!0,h(),function(){Nt(m),f(),c=!1}})}const rs=xn(void 0);function jf(e,t){const{computePosition:n,autoUpdate:r,offset:i,shift:o,flip:s,arrow:c,size:l,autoPlacement:a,hide:f,inline:h}=Vo(rs),m={open:!1,autoUpdateCleanup:()=>{}},g=':is(a[href], button, input, textarea, select, details, [tabindex]):not([tabindex="-1"])';let w;const b="https://www.skeleton.dev/utilities/popups";let S,E;function A(){S=document.querySelector(`[data-popup="${t.target}"]`)??document.createElement("div"),E=S.querySelector(".arrow")??document.createElement("div")}A();function x(){var d,P,T,Y,W,oe,re,ie;if(!S)throw new Error(`The data-popup="${t.target}" element was not found. ${b}`);if(!n)throw new Error(`Floating UI 'computePosition' not found for data-popup="${t.target}". ${b}`);if(!i)throw new Error(`Floating UI 'offset' not found for data-popup="${t.target}". ${b}`);if(!o)throw new Error(`Floating UI 'shift' not found for data-popup="${t.target}". ${b}`);if(!s)throw new Error(`Floating UI 'flip' not found for data-popup="${t.target}". ${b}`);if(!c)throw new Error(`Floating UI 'arrow' not found for data-popup="${t.target}". ${b}`);const v=[];l&&v.push(l((d=t.middleware)==null?void 0:d.size)),a&&v.push(a((P=t.middleware)==null?void 0:P.autoPlacement)),f&&v.push(f((T=t.middleware)==null?void 0:T.hide)),h&&v.push(h((Y=t.middleware)==null?void 0:Y.inline)),n(e,S,{placement:t.placement??"bottom",middleware:[i(((W=t.middleware)==null?void 0:W.offset)??8),o(((oe=t.middleware)==null?void 0:oe.shift)??{padding:8}),s((re=t.middleware)==null?void 0:re.flip),c(((ie=t.middleware)==null?void 0:ie.arrow)??{element:E||null}),...v]}).then(({x:se,y:Pe,placement:ke,middlewareData:Re})=>{if(Object.assign(S.style,{left:`${se}px`,top:`${Pe}px`}),E){const{x:Fe,y:Ze}=Re.arrow,H={top:"bottom",right:"left",bottom:"top",left:"right"}[ke.split("-")[0]];Object.assign(E.style,{left:Fe!=null?`${Fe}px`:"",top:Ze!=null?`${Ze}px`:"",right:"",bottom:"",[H]:"-4px"})}})}function j(){S&&(m.open=!0,t.state&&t.state({state:m.open}),x(),S.style.display="block",S.style.opacity="1",S.style.pointerEvents="auto",S.removeAttribute("inert"),m.autoUpdateCleanup=r(e,S,x),w=Array.from(S==null?void 0:S.querySelectorAll(g)))}function k(v){if(!S)return;const d=parseFloat(window.getComputedStyle(S).transitionDuration.replace("s",""))*1e3;setTimeout(()=>{m.open=!1,t.state&&t.state({state:m.open}),S.style.opacity="0",S.setAttribute("inert",""),m.autoUpdateCleanup&&m.autoUpdateCleanup(),v&&v()},d)}function N(){m.open===!1?j():k()}function C(v){if(m.open===!1||e.contains(v.target))return;if(S&&S.contains(v.target)===!1){k();return}const d=t.closeQuery===void 0?"a[href], button":t.closeQuery,P=S==null?void 0:S.querySelectorAll(d);P==null||P.forEach(T=>{T.contains(v.target)&&k()})}const $=v=>{if(m.open===!1)return;const d=v.key;if(d==="Escape"){v.preventDefault(),e.focus(),k();return}w=Array.from(S==null?void 0:S.querySelectorAll(g)),m.open&&document.activeElement===e&&(d==="ArrowDown"||d==="Tab")&&g.length>0&&w.length>0&&(v.preventDefault(),w[0].focus())};switch(t.event){case"click":e.addEventListener("click",N,!0),window.addEventListener("click",C,!0);break;case"hover":e.addEventListener("mouseover",j,!0),e.addEventListener("mouseleave",()=>k(),!0);break;case"focus-blur":e.addEventListener("focus",N,!0),e.addEventListener("blur",()=>k(),!0);break;case"focus-click":e.addEventListener("focus",j,!0),window.addEventListener("click",C,!0);break;default:throw new Error(`Event value of '${t.event}' is not supported. ${b}`)}return window.addEventListener("keydown",$,!0),x(),{update(v){k(()=>{t=v,x(),A()})},destroy(){e.removeEventListener("click",N,!0),e.removeEventListener("mouseover",j,!0),e.removeEventListener("mouseleave",()=>k(),!0),e.removeEventListener("focus",N,!0),e.removeEventListener("focus",j,!0),e.removeEventListener("blur",()=>k(),!0),window.removeEventListener("click",C,!0),window.removeEventListener("keydown",$,!0)}}}const za={message:"Missing Toast Message",autohide:!0,timeout:5e3};function Ja(){const e=Math.random();return Number(e).toString(32)}function wo(e){if(e.autohide===!0)return setTimeout(()=>{Mi.close(e.id)},e.timeout)}function Ha(){const{subscribe:e,set:t,update:n}=xn([]);return{subscribe:e,trigger:r=>{const i=Ja();return n(o=>{r&&r.callback&&r.callback({id:i,status:"queued"}),r.hideDismiss&&(r.autohide=!0);const s={...za,...r,id:i};return s.timeoutId=wo(s),o.push(s),o}),i},close:r=>n(i=>{if(i.length>0){const o=i.findIndex(c=>c.id===r),s=i[o];s&&(s.callback&&s.callback({id:r,status:"closed"}),s.timeoutId&&clearTimeout(s.timeoutId),i.splice(o,1))}return i}),freeze:r=>n(i=>(i.length>0&&clearTimeout(i[r].timeoutId),i)),unfreeze:r=>n(i=>(i.length>0&&(i[r].timeoutId=wo(i[r])),i)),clear:()=>t([])}}const Mi=Ha(),Qr={};function _o(e){return e==="local"?localStorage:sessionStorage}function Wi(e,t,n){const r=(n==null?void 0:n.serializer)??JSON,i=(n==null?void 0:n.storage)??"local";function o(s,c){_o(i).setItem(s,r.stringify(c))}if(!Qr[e]){const s=xn(t,a=>{const f=_o(i).getItem(e);f&&a(r.parse(f));{const h=m=>{m.key===e&&a(m.newValue?r.parse(m.newValue):null)};return window.addEventListener("storage",h),()=>window.removeEventListener("storage",h)}}),{subscribe:c,set:l}=s;Qr[e]={set(a){o(e,a),l(a)},update(a){const f=a(Vo(s));o(e,f),l(f)},subscribe:c}}return Qr[e]}Wi("modeOsPrefers",!1);Wi("modeUserPrefers",void 0);Wi("modeCurrent",!1);const Ga=""+new URL("octopus-white-14148693.svg",import.meta.url).href;class Xa{constructor(t){Be(this,"prevValue");Be(this,"checker");Be(this,"resolveCallback");Be(this,"rejectCallback");this.prevValue=t.prevValue||"",this.checker=t.checker,this.resolveCallback=t.resolveCallback,this.rejectCallback=t.rejectCallback}handleEvent(t){const n=String(t.target.value);this.checker(n)?this.onResolveInput(n,t):this.onRejectInput(n,t)}onResolveInput(t,n){var r;this.updatePrevValue(t),(r=this.resolveCallback)==null||r.call(this,{event:n,curValue:t,prevValue:this.prevValue})}onRejectInput(t,n){var i;const r=n.target.selectionStart||0;this.restore(n.target,t,r),(i=this.rejectCallback)==null||i.call(this,{event:n,curValue:t,prevValue:this.prevValue})}restore(t,n,r){this.restorePrevValue(t),this.restorePrevCaretPos(t,n,r)}restorePrevValue(t){t.value=this.prevValue}restorePrevCaretPos(t,n,r){const i=n.length,o=r-(i-this.prevValue.length);t.setSelectionRange(o,o)}updatePrevValue(t){this.prevValue=t}getPrevValue(){return this.prevValue}}const Bf=(e,t)=>{let n;return(...r)=>{clearTimeout(n),n=setTimeout(e,t,...r)}},is=`<img class='h-8' src='${Ga}' alt='octa icon'/>`,Qa="break-all bg-red-400 text-white cursor-default !rounded-md [&_.text-base]:flex [&_.text-base]:gap-4 [&_.text-base]:items-center",Za="break-all bg-yellow-500 text-white cursor-default !rounded-md [&_.text-base]:flex [&_.text-base]:gap-4 [&_.text-base]:items-center",Df=e=>`-webkit-mask: url(${e}) no-repeat center / contain; mask: url(${e}) no-repeat center / contain;`,os=e=>JSON.parse(JSON.stringify(e)),Rf=e=>[...e].sort(()=>Math.random()-.5);function*$f(e){const t=e.length;for(let n=0;n<t;n+=1)yield e[n]}const Lf=e=>new Xa(e),Kf=e=>e===0?"bg-slate-400":e<40?"bg-orange-400":e<75?"bg-amber-400":"bg-green-400",Ff=e=>e===0?"bg-slate-300 hover:bg-slate-400 focus:bg-slate-400":e<40?"bg-orange-300 hover:bg-orange-400 focus:bg-orange-400":e<75?"bg-amber-300 hover:bg-amber-400 focus:bg-amber-400":"bg-green-300 hover:bg-green-400 focus:bg-green-400",ss=["January","February","March","April","May","June","July","August","September","October","November","December"],ec=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],Uf={Mon:"Monday",Tue:"Tuesday",Wed:"Wednesday",Thu:"Thursday",Fri:"Friday",Sat:"Saturday",Sun:"Sunday"},Mf=ec.map(e=>e.slice(0,3)),So={Sun:0,Mon:1,Tue:2,Wed:3,Thu:4,Fri:5,Sat:6},Wf=e=>{e.sort((t,n)=>So[t]-So[n])},qf=(e,t)=>{let n=e.indexOf(t);for(;n!==-1;)e.splice(n,1),n=e.indexOf(t,n+1)},Vf=e=>{e.sort(({from:t},{from:n})=>Number(t.replace(":",""))-Number(n.replace(":","")))},Pn=async(e,t)=>{try{return await e(...t)}catch(n){rc(n)}},as=e=>{e.code==="Escape"&&e.stopPropagation()},Yf=()=>{document.addEventListener("keydown",as)},zf=()=>{document.removeEventListener("keydown",as)},tc=e=>{e.preventDefault()},nc=()=>{document.addEventListener("contextmenu",tc)},cs=e=>{Mi.trigger({message:is+`<div>${e}</div>`,background:Qa,autohide:!1})},Jf=e=>{Mi.trigger({message:is+`<div>${e}</div>`,background:Za})},rc=e=>{us("In RunPromiseWithCatch: "+e)},us=async e=>{cs("UnexpectedException: "+e),(await Un(()=>import("./ipcUtils-736aa423.js"),[],import.meta.url)).sendWindowError(e)},ic=async({reason:e})=>{const t=`Unhandledrejection: ${e}`;cs(t),(await Un(()=>import("./ipcUtils-736aa423.js"),[],import.meta.url)).sendWindowError(t)},oc=()=>{window.onerror=us,window.onunhandledrejection=ic},sc=()=>{if(window.electron===void 0)throw"electron API is missing in window"},ac={startWithSystem:!0,openAppWindowAtStart:!0},cc={enabled:!1,soundNotification:!0,daySettings:{general:{interval:"02:00",timeFrames:[]}}},uc={enabled:!1,soundNotification:!0,daySettings:{general:{interval:"02:00",timeFrames:[]}}},lc={basic:ac,practice:{passive:cc,active:uc}},fc=()=>os(lc),dc={practiceTarget:"original",practiceType:"section",sectionLastWordId:null,sectionSize:10},hc=()=>os(dc);class ls{constructor(){Be(this,"totalWordsAmount");Be(this,"addedWordsAmount");Be(this,"deletedWordsAmount");Be(this,"wordTotalPracticeAmount");Be(this,"wordOriginPracticeAmount");Be(this,"wordTranslationPracticeAmount");Be(this,"averagePracticeSuccess");Be(this,"successfulPracticeCount");Be(this,"unsuccessfulPracticeCount");this.totalWordsAmount=0,this.addedWordsAmount=0,this.deletedWordsAmount=0,this.wordTotalPracticeAmount=0,this.wordOriginPracticeAmount=0,this.wordTranslationPracticeAmount=0,this.averagePracticeSuccess=0,this.successfulPracticeCount=0,this.unsuccessfulPracticeCount=0}}const pc=()=>{const e=String(new Date().getFullYear()),t={};return ss.forEach(n=>{t[n]=new ls}),t.year=e,[t]},Oe=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,De=Object.keys,Ye=Array.isArray;function Ge(e,t){return typeof t!="object"||De(t).forEach(function(n){e[n]=t[n]}),e}typeof Promise>"u"||Oe.Promise||(Oe.Promise=Promise);const Yn=Object.getPrototypeOf,yc={}.hasOwnProperty;function at(e,t){return yc.call(e,t)}function Sn(e,t){typeof t=="function"&&(t=t(Yn(e))),(typeof Reflect>"u"?De:Reflect.ownKeys)(t).forEach(n=>{kt(e,n,t[n])})}const fs=Object.defineProperty;function kt(e,t,n,r){fs(e,t,Ge(n&&at(n,"get")&&typeof n.get=="function"?{get:n.get,set:n.set,configurable:!0}:{value:n,configurable:!0,writable:!0},r))}function gn(e){return{from:function(t){return e.prototype=Object.create(t.prototype),kt(e.prototype,"constructor",e),{extend:Sn.bind(null,e.prototype)}}}}const mc=Object.getOwnPropertyDescriptor;function qi(e,t){let n;return mc(e,t)||(n=Yn(e))&&qi(n,t)}const gc=[].slice;function Ir(e,t,n){return gc.call(e,t,n)}function ds(e,t){return t(e)}function Cn(e){if(!e)throw new Error("Assertion Failed")}function hs(e){Oe.setImmediate?setImmediate(e):setTimeout(e,0)}function ps(e,t){return e.reduce((n,r,i)=>{var o=t(r,i);return o&&(n[o[0]]=o[1]),n},{})}function Ct(e,t){if(at(e,t))return e[t];if(!t)return e;if(typeof t!="string"){for(var n=[],r=0,i=t.length;r<i;++r){var o=Ct(e,t[r]);n.push(o)}return n}var s=t.indexOf(".");if(s!==-1){var c=e[t.substr(0,s)];return c===void 0?void 0:Ct(c,t.substr(s+1))}}function vt(e,t,n){if(e&&t!==void 0&&(!("isFrozen"in Object)||!Object.isFrozen(e)))if(typeof t!="string"&&"length"in t){Cn(typeof n!="string"&&"length"in n);for(var r=0,i=t.length;r<i;++r)vt(e,t[r],n[r])}else{var o=t.indexOf(".");if(o!==-1){var s=t.substr(0,o),c=t.substr(o+1);if(c==="")n===void 0?Ye(e)&&!isNaN(parseInt(s))?e.splice(s,1):delete e[s]:e[s]=n;else{var l=e[s];l&&at(e,s)||(l=e[s]={}),vt(l,c,n)}}else n===void 0?Ye(e)&&!isNaN(parseInt(t))?e.splice(t,1):delete e[t]:e[t]=n}}function ys(e){var t={};for(var n in e)at(e,n)&&(t[n]=e[n]);return t}const vc=[].concat;function ms(e){return vc.apply([],e)}const gs="Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(ms([8,16,32,64].map(e=>["Int","Uint","Float"].map(t=>t+e+"Array")))).filter(e=>Oe[e]),bc=gs.map(e=>Oe[e]);ps(gs,e=>[e,!0]);let $t=null;function tr(e){$t=typeof WeakMap<"u"&&new WeakMap;const t=li(e);return $t=null,t}function li(e){if(!e||typeof e!="object")return e;let t=$t&&$t.get(e);if(t)return t;if(Ye(e)){t=[],$t&&$t.set(e,t);for(var n=0,r=e.length;n<r;++n)t.push(li(e[n]))}else if(bc.indexOf(e.constructor)>=0)t=e;else{const o=Yn(e);for(var i in t=o===Object.prototype?{}:Object.create(o),$t&&$t.set(e,t),e)at(e,i)&&(t[i]=li(e[i]))}return t}const{toString:wc}={};function fi(e){return wc.call(e).slice(8,-1)}const di=typeof Symbol<"u"?Symbol.iterator:"@@iterator",_c=typeof di=="symbol"?function(e){var t;return e!=null&&(t=e[di])&&t.apply(e)}:function(){return null},dn={};function Tt(e){var t,n,r,i;if(arguments.length===1){if(Ye(e))return e.slice();if(this===dn&&typeof e=="string")return[e];if(i=_c(e)){for(n=[];!(r=i.next()).done;)n.push(r.value);return n}if(e==null)return[e];if(typeof(t=e.length)=="number"){for(n=new Array(t);t--;)n[t]=e[t];return n}return[e]}for(t=arguments.length,n=new Array(t);t--;)n[t]=arguments[t];return n}const Vi=typeof Symbol<"u"?e=>e[Symbol.toStringTag]==="AsyncFunction":()=>!1;var St=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function vs(e,t){St=e,bs=t}var bs=()=>!0;const Sc=!new Error("").stack;function rn(){if(Sc)try{throw rn.arguments,new Error}catch(e){return e}return new Error}function hi(e,t){var n=e.stack;return n?(t=t||0,n.indexOf(e.name)===0&&(t+=(e.name+e.message).split(`
`).length),n.split(`
`).slice(t).filter(bs).map(r=>`
`+r).join("")):""}var ws=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Yi=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(ws),xc={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function vn(e,t){this._e=rn(),this.name=e,this.message=t}function _s(e,t){return e+". Errors: "+Object.keys(t).map(n=>t[n].toString()).filter((n,r,i)=>i.indexOf(n)===r).join(`
`)}function Nr(e,t,n,r){this._e=rn(),this.failures=t,this.failedKeys=r,this.successCount=n,this.message=_s(e,t)}function Rn(e,t){this._e=rn(),this.name="BulkError",this.failures=Object.keys(t).map(n=>t[n]),this.failuresByPos=t,this.message=_s(e,t)}gn(vn).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+hi(this._e,2))}},toString:function(){return this.name+": "+this.message}}),gn(Nr).from(vn),gn(Rn).from(vn);var zi=Yi.reduce((e,t)=>(e[t]=t+"Error",e),{});const Ec=vn;var ne=Yi.reduce((e,t)=>{var n=t+"Error";function r(i,o){this._e=rn(),this.name=n,i?typeof i=="string"?(this.message=`${i}${o?`
 `+o:""}`,this.inner=o||null):typeof i=="object"&&(this.message=`${i.name} ${i.message}`,this.inner=i):(this.message=xc[t]||n,this.inner=null)}return gn(r).from(Ec),e[t]=r,e},{});ne.Syntax=SyntaxError,ne.Type=TypeError,ne.Range=RangeError;var xo=ws.reduce((e,t)=>(e[t+"Error"]=ne[t],e),{}),br=Yi.reduce((e,t)=>(["Syntax","Type","Range"].indexOf(t)===-1&&(e[t+"Error"]=ne[t]),e),{});function Se(){}function zn(e){return e}function Ac(e,t){return e==null||e===zn?t:function(n){return t(e(n))}}function en(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function Oc(e,t){return e===Se?t:function(){var n=e.apply(this,arguments);n!==void 0&&(arguments[0]=n);var r=this.onsuccess,i=this.onerror;this.onsuccess=null,this.onerror=null;var o=t.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?en(r,this.onsuccess):r),i&&(this.onerror=this.onerror?en(i,this.onerror):i),o!==void 0?o:n}}function Tc(e,t){return e===Se?t:function(){e.apply(this,arguments);var n=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null,t.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?en(n,this.onsuccess):n),r&&(this.onerror=this.onerror?en(r,this.onerror):r)}}function Pc(e,t){return e===Se?t:function(n){var r=e.apply(this,arguments);Ge(n,r);var i=this.onsuccess,o=this.onerror;this.onsuccess=null,this.onerror=null;var s=t.apply(this,arguments);return i&&(this.onsuccess=this.onsuccess?en(i,this.onsuccess):i),o&&(this.onerror=this.onerror?en(o,this.onerror):o),r===void 0?s===void 0?void 0:s:Ge(r,s)}}function kc(e,t){return e===Se?t:function(){return t.apply(this,arguments)!==!1&&e.apply(this,arguments)}}function Ji(e,t){return e===Se?t:function(){var n=e.apply(this,arguments);if(n&&typeof n.then=="function"){for(var r=this,i=arguments.length,o=new Array(i);i--;)o[i]=arguments[i];return n.then(function(){return t.apply(r,o)})}return t.apply(this,arguments)}}br.ModifyError=Nr,br.DexieError=vn,br.BulkError=Rn;var Jn={};const[pi,jr,yi]=typeof Promise>"u"?[]:(()=>{let e=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[e,Yn(e),e];const t=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[t,Yn(t),e]})(),Ss=jr&&jr.then,wr=pi&&pi.constructor,Hi=!!yi;var mi=!1,Cc=yi?()=>{yi.then(lr)}:Oe.setImmediate?setImmediate.bind(null,lr):Oe.MutationObserver?()=>{var e=document.createElement("div");new MutationObserver(()=>{lr(),e=null}).observe(e,{attributes:!0}),e.setAttribute("i","1")}:()=>{setTimeout(lr,0)},$n=function(e,t){In.push([e,t]),Br&&(Cc(),Br=!1)},gi=!0,Br=!0,Xt=[],_r=[],vi=null,bi=zn,bn={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:Ao,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach(e=>{try{Ao(e[0],e[1])}catch{}})}},Q=bn,In=[],Qt=0,Sr=[];function q(e){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this.onuncatched=Se,this._lib=!1;var t=this._PSD=Q;if(St&&(this._stackHolder=rn(),this._prev=null,this._numPrev=0),typeof e!="function"){if(e!==Jn)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&_i(this,this._value))}this._state=null,this._value=null,++t.ref,Es(this,e)}const wi={get:function(){var e=Q,t=Dr;function n(r,i){var o=!e.global&&(e!==Q||t!==Dr);const s=o&&!It();var c=new q((l,a)=>{Gi(this,new xs(Rr(r,e,o,s),Rr(i,e,o,s),l,a,e))});return St&&Ts(c,this),c}return n.prototype=Jn,n},set:function(e){kt(this,"then",e&&e.prototype===Jn?wi:{get:function(){return e},set:wi.set})}};function xs(e,t,n,r,i){this.onFulfilled=typeof e=="function"?e:null,this.onRejected=typeof t=="function"?t:null,this.resolve=n,this.reject=r,this.psd=i}function Es(e,t){try{t(n=>{if(e._state===null){if(n===e)throw new TypeError("A promise cannot be resolved with itself.");var r=e._lib&&nr();n&&typeof n.then=="function"?Es(e,(i,o)=>{n instanceof q?n._then(i,o):n.then(i,o)}):(e._state=!0,e._value=n,As(e)),r&&rr()}},_i.bind(null,e))}catch(n){_i(e,n)}}function _i(e,t){if(_r.push(t),e._state===null){var n=e._lib&&nr();t=bi(t),e._state=!1,e._value=t,St&&t!==null&&typeof t=="object"&&!t._promise&&function(r,i,o){try{r.apply(null,o)}catch(s){i&&i(s)}}(()=>{var r=qi(t,"stack");t._promise=e,kt(t,"stack",{get:()=>mi?r&&(r.get?r.get.apply(t):r.value):e.stack})}),function(r){Xt.some(i=>i._value===r._value)||Xt.push(r)}(e),As(e),n&&rr()}}function As(e){var t=e._listeners;e._listeners=[];for(var n=0,r=t.length;n<r;++n)Gi(e,t[n]);var i=e._PSD;--i.ref||i.finalize(),Qt===0&&(++Qt,$n(()=>{--Qt==0&&Xi()},[]))}function Gi(e,t){if(e._state!==null){var n=e._state?t.onFulfilled:t.onRejected;if(n===null)return(e._state?t.resolve:t.reject)(e._value);++t.psd.ref,++Qt,$n(Ic,[n,e,t])}else e._listeners.push(t)}function Ic(e,t,n){try{vi=t;var r,i=t._value;t._state?r=e(i):(_r.length&&(_r=[]),r=e(i),_r.indexOf(i)===-1&&function(o){for(var s=Xt.length;s;)if(Xt[--s]._value===o._value)return void Xt.splice(s,1)}(t)),n.resolve(r)}catch(o){n.reject(o)}finally{vi=null,--Qt==0&&Xi(),--n.psd.ref||n.psd.finalize()}}function Os(e,t,n){if(t.length===n)return t;var r="";if(e._state===!1){var i,o,s=e._value;s!=null?(i=s.name||"Error",o=s.message||s,r=hi(s,0)):(i=s,o=""),t.push(i+(o?": "+o:"")+r)}return St&&((r=hi(e._stackHolder,2))&&t.indexOf(r)===-1&&t.push(r),e._prev&&Os(e._prev,t,n)),t}function Ts(e,t){var n=t?t._numPrev+1:0;n<100&&(e._prev=t,e._numPrev=n)}function lr(){nr()&&rr()}function nr(){var e=gi;return gi=!1,Br=!1,e}function rr(){var e,t,n;do for(;In.length>0;)for(e=In,In=[],n=e.length,t=0;t<n;++t){var r=e[t];r[0].apply(null,r[1])}while(In.length>0);gi=!0,Br=!0}function Xi(){var e=Xt;Xt=[],e.forEach(r=>{r._PSD.onunhandled.call(null,r._value,r)});for(var t=Sr.slice(0),n=t.length;n;)t[--n]()}function fr(e){return new q(Jn,!1,e)}function Te(e,t){var n=Q;return function(){var r=nr(),i=Q;try{return Ut(n,!0),e.apply(this,arguments)}catch(o){t&&t(o)}finally{Ut(i,!1),r&&rr()}}}Sn(q.prototype,{then:wi,_then:function(e,t){Gi(this,new xs(null,null,e,t,Q))},catch:function(e){if(arguments.length===1)return this.then(null,e);var t=arguments[0],n=arguments[1];return typeof t=="function"?this.then(null,r=>r instanceof t?n(r):fr(r)):this.then(null,r=>r&&r.name===t?n(r):fr(r))},finally:function(e){return this.then(t=>(e(),t),t=>(e(),fr(t)))},stack:{get:function(){if(this._stack)return this._stack;try{mi=!0;var e=Os(this,[],20).join(`
From previous: `);return this._state!==null&&(this._stack=e),e}finally{mi=!1}}},timeout:function(e,t){return e<1/0?new q((n,r)=>{var i=setTimeout(()=>r(new ne.Timeout(t)),e);this.then(n,r).finally(clearTimeout.bind(null,i))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&kt(q.prototype,Symbol.toStringTag,"Dexie.Promise"),bn.env=Ps(),Sn(q,{all:function(){var e=Tt.apply(null,arguments).map(dr);return new q(function(t,n){e.length===0&&t([]);var r=e.length;e.forEach((i,o)=>q.resolve(i).then(s=>{e[o]=s,--r||t(e)},n))})},resolve:e=>{if(e instanceof q)return e;if(e&&typeof e.then=="function")return new q((n,r)=>{e.then(n,r)});var t=new q(Jn,!0,e);return Ts(t,vi),t},reject:fr,race:function(){var e=Tt.apply(null,arguments).map(dr);return new q((t,n)=>{e.map(r=>q.resolve(r).then(t,n))})},PSD:{get:()=>Q,set:e=>Q=e},totalEchoes:{get:()=>Dr},newPSD:Ft,usePSD:An,scheduler:{get:()=>$n,set:e=>{$n=e}},rejectionMapper:{get:()=>bi,set:e=>{bi=e}},follow:(e,t)=>new q((n,r)=>Ft((i,o)=>{var s=Q;s.unhandleds=[],s.onunhandled=o,s.finalize=en(function(){(function(c){function l(){c(),Sr.splice(Sr.indexOf(l),1)}Sr.push(l),++Qt,$n(()=>{--Qt==0&&Xi()},[])})(()=>{this.unhandleds.length===0?i():o(this.unhandleds[0])})},s.finalize),e()},t,n,r))}),wr&&(wr.allSettled&&kt(q,"allSettled",function(){const e=Tt.apply(null,arguments).map(dr);return new q(t=>{e.length===0&&t([]);let n=e.length;const r=new Array(n);e.forEach((i,o)=>q.resolve(i).then(s=>r[o]={status:"fulfilled",value:s},s=>r[o]={status:"rejected",reason:s}).then(()=>--n||t(r)))})}),wr.any&&typeof AggregateError<"u"&&kt(q,"any",function(){const e=Tt.apply(null,arguments).map(dr);return new q((t,n)=>{e.length===0&&n(new AggregateError([]));let r=e.length;const i=new Array(r);e.forEach((o,s)=>q.resolve(o).then(c=>t(c),c=>{i[s]=c,--r||n(new AggregateError(i))}))})}));const Ve={awaits:0,echoes:0,id:0};var Nc=0,xr=[],Zr=0,Dr=0,jc=0;function Ft(e,t,n,r){var i=Q,o=Object.create(i);o.parent=i,o.ref=0,o.global=!1,o.id=++jc;var s=bn.env;o.env=Hi?{Promise:q,PromiseProp:{value:q,configurable:!0,writable:!0},all:q.all,race:q.race,allSettled:q.allSettled,any:q.any,resolve:q.resolve,reject:q.reject,nthen:Eo(s.nthen,o),gthen:Eo(s.gthen,o)}:{},t&&Ge(o,t),++i.ref,o.finalize=function(){--this.parent.ref||this.parent.finalize()};var c=An(o,e,n,r);return o.ref===0&&o.finalize(),c}function En(){return Ve.id||(Ve.id=++Nc),++Ve.awaits,Ve.echoes+=100,Ve.id}function It(){return!!Ve.awaits&&(--Ve.awaits==0&&(Ve.id=0),Ve.echoes=100*Ve.awaits,!0)}function dr(e){return Ve.echoes&&e&&e.constructor===wr?(En(),e.then(t=>(It(),t),t=>(It(),Le(t)))):e}function Bc(e){++Dr,Ve.echoes&&--Ve.echoes!=0||(Ve.echoes=Ve.id=0),xr.push(Q),Ut(e,!0)}function Dc(){var e=xr[xr.length-1];xr.pop(),Ut(e,!1)}function Ut(e,t){var n=Q;if((t?!Ve.echoes||Zr++&&e===Q:!Zr||--Zr&&e===Q)||ks(t?Bc.bind(null,e):Dc),e!==Q&&(Q=e,n===bn&&(bn.env=Ps()),Hi)){var r=bn.env.Promise,i=e.env;jr.then=i.nthen,r.prototype.then=i.gthen,(n.global||e.global)&&(Object.defineProperty(Oe,"Promise",i.PromiseProp),r.all=i.all,r.race=i.race,r.resolve=i.resolve,r.reject=i.reject,i.allSettled&&(r.allSettled=i.allSettled),i.any&&(r.any=i.any))}}function Ps(){var e=Oe.Promise;return Hi?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(Oe,"Promise"),all:e.all,race:e.race,allSettled:e.allSettled,any:e.any,resolve:e.resolve,reject:e.reject,nthen:jr.then,gthen:e.prototype.then}:{}}function An(e,t,n,r,i){var o=Q;try{return Ut(e,!0),t(n,r,i)}finally{Ut(o,!1)}}function ks(e){Ss.call(pi,e)}function Rr(e,t,n,r){return typeof e!="function"?e:function(){var i=Q;n&&En(),Ut(t,!0);try{return e.apply(this,arguments)}finally{Ut(i,!1),r&&ks(It)}}}function Eo(e,t){return function(n,r){return e.call(this,Rr(n,t),Rr(r,t))}}(""+Ss).indexOf("[native code]")===-1&&(En=It=Se);function Ao(e,t){var n;try{n=t.onuncatched(e)}catch{}if(n!==!1)try{var r,i={promise:t,reason:e};if(Oe.document&&document.createEvent?((r=document.createEvent("Event")).initEvent("unhandledrejection",!0,!0),Ge(r,i)):Oe.CustomEvent&&Ge(r=new CustomEvent("unhandledrejection",{detail:i}),i),r&&Oe.dispatchEvent&&(dispatchEvent(r),!Oe.PromiseRejectionEvent&&Oe.onunhandledrejection))try{Oe.onunhandledrejection(r)}catch{}St&&r&&!r.defaultPrevented&&console.warn(`Unhandled rejection: ${e.stack||e}`)}catch{}}var Le=q.reject;function Si(e,t,n,r){if(e.idbdb&&(e._state.openComplete||Q.letThrough||e._vip)){var i=e._createTransaction(t,n,e._dbSchema);try{i.create(),e._state.PR1398_maxLoop=3}catch(o){return o.name===zi.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),e._close(),e.open().then(()=>Si(e,t,n,r))):Le(o)}return i._promise(t,(o,s)=>Ft(()=>(Q.trans=i,r(o,s,i)))).then(o=>i._completion.then(()=>o))}if(e._state.openComplete)return Le(new ne.DatabaseClosed(e._state.dbOpenError));if(!e._state.isBeingOpened){if(!e._options.autoOpen)return Le(new ne.DatabaseClosed);e.open().catch(Se)}return e._state.dbReadyPromise.then(()=>Si(e,t,n,r))}const Jt=String.fromCharCode(65535),At="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Ln=[],Vr=typeof navigator<"u"&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),Rc=Vr,$c=Vr,Cs=e=>!/(dexie\.js|dexie\.min\.js)/.test(e);function tn(e,t){return e?t?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:e:t}const Is={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function hr(e){return typeof e!="string"||/\./.test(e)?t=>t:t=>(t[e]===void 0&&e in t&&delete(t=tr(t))[e],t)}class Lc{_trans(t,n,r){const i=this._tx||Q.trans,o=this.name;function s(l,a,f){if(!f.schema[o])throw new ne.NotFound("Table "+o+" not part of transaction");return n(f.idbtrans,f)}const c=nr();try{return i&&i.db===this.db?i===Q.trans?i._promise(t,s,r):Ft(()=>i._promise(t,s,r),{trans:i,transless:Q.transless||Q}):Si(this.db,t,[this.name],s)}finally{c&&rr()}}get(t,n){return t&&t.constructor===Object?this.where(t).first(n):this._trans("readonly",r=>this.core.get({trans:r,key:t}).then(i=>this.hook.reading.fire(i))).then(n)}where(t){if(typeof t=="string")return new this.db.WhereClause(this,t);if(Ye(t))return new this.db.WhereClause(this,`[${t.join("+")}]`);const n=De(t);if(n.length===1)return this.where(n[0]).equals(t[n[0]]);const r=this.schema.indexes.concat(this.schema.primKey).filter(a=>a.compound&&n.every(f=>a.keyPath.indexOf(f)>=0)&&a.keyPath.every(f=>n.indexOf(f)>=0))[0];if(r&&this.db._maxKey!==Jt)return this.where(r.name).equals(r.keyPath.map(a=>t[a]));!r&&St&&console.warn(`The query ${JSON.stringify(t)} on ${this.name} would benefit of a compound index [${n.join("+")}]`);const{idxByName:i}=this.schema,o=this.db._deps.indexedDB;function s(a,f){try{return o.cmp(a,f)===0}catch{return!1}}const[c,l]=n.reduce(([a,f],h)=>{const m=i[h],g=t[h];return[a||m,a||!m?tn(f,m&&m.multi?w=>{const b=Ct(w,h);return Ye(b)&&b.some(S=>s(g,S))}:w=>s(g,Ct(w,h))):f]},[null,null]);return c?this.where(c.name).equals(t[c.keyPath]).filter(l):r?this.filter(l):this.where(n).equals("")}filter(t){return this.toCollection().and(t)}count(t){return this.toCollection().count(t)}offset(t){return this.toCollection().offset(t)}limit(t){return this.toCollection().limit(t)}each(t){return this.toCollection().each(t)}toArray(t){return this.toCollection().toArray(t)}toCollection(){return new this.db.Collection(new this.db.WhereClause(this))}orderBy(t){return new this.db.Collection(new this.db.WhereClause(this,Ye(t)?`[${t.join("+")}]`:t))}reverse(){return this.toCollection().reverse()}mapToClass(t){this.schema.mappedClass=t;const n=r=>{if(!r)return r;const i=Object.create(t.prototype);for(var o in r)if(at(r,o))try{i[o]=r[o]}catch{}return i};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=n,this.hook("reading",n),t}defineClass(){return this.mapToClass(function(t){Ge(this,t)})}add(t,n){const{auto:r,keyPath:i}=this.schema.primKey;let o=t;return i&&r&&(o=hr(i)(t)),this._trans("readwrite",s=>this.core.mutate({trans:s,type:"add",keys:n!=null?[n]:null,values:[o]})).then(s=>s.numFailures?q.reject(s.failures[0]):s.lastResult).then(s=>{if(i)try{vt(t,i,s)}catch{}return s})}update(t,n){if(typeof t!="object"||Ye(t))return this.where(":id").equals(t).modify(n);{const r=Ct(t,this.schema.primKey.keyPath);if(r===void 0)return Le(new ne.InvalidArgument("Given object does not contain its primary key"));try{typeof n!="function"?De(n).forEach(i=>{vt(t,i,n[i])}):n(t,{value:t,primKey:r})}catch{}return this.where(":id").equals(r).modify(n)}}put(t,n){const{auto:r,keyPath:i}=this.schema.primKey;let o=t;return i&&r&&(o=hr(i)(t)),this._trans("readwrite",s=>this.core.mutate({trans:s,type:"put",values:[o],keys:n!=null?[n]:null})).then(s=>s.numFailures?q.reject(s.failures[0]):s.lastResult).then(s=>{if(i)try{vt(t,i,s)}catch{}return s})}delete(t){return this._trans("readwrite",n=>this.core.mutate({trans:n,type:"delete",keys:[t]})).then(n=>n.numFailures?q.reject(n.failures[0]):void 0)}clear(){return this._trans("readwrite",t=>this.core.mutate({trans:t,type:"deleteRange",range:Is})).then(t=>t.numFailures?q.reject(t.failures[0]):void 0)}bulkGet(t){return this._trans("readonly",n=>this.core.getMany({keys:t,trans:n}).then(r=>r.map(i=>this.hook.reading.fire(i))))}bulkAdd(t,n,r){const i=Array.isArray(n)?n:void 0,o=(r=r||(i?void 0:n))?r.allKeys:void 0;return this._trans("readwrite",s=>{const{auto:c,keyPath:l}=this.schema.primKey;if(l&&i)throw new ne.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(i&&i.length!==t.length)throw new ne.InvalidArgument("Arguments objects and keys must have the same length");const a=t.length;let f=l&&c?t.map(hr(l)):t;return this.core.mutate({trans:s,type:"add",keys:i,values:f,wantResults:o}).then(({numFailures:h,results:m,lastResult:g,failures:w})=>{if(h===0)return o?m:g;throw new Rn(`${this.name}.bulkAdd(): ${h} of ${a} operations failed`,w)})})}bulkPut(t,n,r){const i=Array.isArray(n)?n:void 0,o=(r=r||(i?void 0:n))?r.allKeys:void 0;return this._trans("readwrite",s=>{const{auto:c,keyPath:l}=this.schema.primKey;if(l&&i)throw new ne.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(i&&i.length!==t.length)throw new ne.InvalidArgument("Arguments objects and keys must have the same length");const a=t.length;let f=l&&c?t.map(hr(l)):t;return this.core.mutate({trans:s,type:"put",keys:i,values:f,wantResults:o}).then(({numFailures:h,results:m,lastResult:g,failures:w})=>{if(h===0)return o?m:g;throw new Rn(`${this.name}.bulkPut(): ${h} of ${a} operations failed`,w)})})}bulkDelete(t){const n=t.length;return this._trans("readwrite",r=>this.core.mutate({trans:r,type:"delete",keys:t})).then(({numFailures:r,lastResult:i,failures:o})=>{if(r===0)return i;throw new Rn(`${this.name}.bulkDelete(): ${r} of ${n} operations failed`,o)})}}function Kn(e){var t={},n=function(c,l){if(l){for(var a=arguments.length,f=new Array(a-1);--a;)f[a-1]=arguments[a];return t[c].subscribe.apply(null,f),e}if(typeof c=="string")return t[c]};n.addEventType=o;for(var r=1,i=arguments.length;r<i;++r)o(arguments[r]);return n;function o(c,l,a){if(typeof c=="object")return s(c);l||(l=kc),a||(a=Se);var f={subscribers:[],fire:a,subscribe:function(h){f.subscribers.indexOf(h)===-1&&(f.subscribers.push(h),f.fire=l(f.fire,h))},unsubscribe:function(h){f.subscribers=f.subscribers.filter(function(m){return m!==h}),f.fire=f.subscribers.reduce(l,a)}};return t[c]=n[c]=f,f}function s(c){De(c).forEach(function(l){var a=c[l];if(Ye(a))o(l,c[l][0],c[l][1]);else{if(a!=="asap")throw new ne.InvalidArgument("Invalid event config");var f=o(l,zn,function(){for(var h=arguments.length,m=new Array(h);h--;)m[h]=arguments[h];f.subscribers.forEach(function(g){hs(function(){g.apply(null,m)})})})}})}}function kn(e,t){return gn(t).from({prototype:e}),t}function un(e,t){return!(e.filter||e.algorithm||e.or)&&(t?e.justLimit:!e.replayFilter)}function ei(e,t){e.filter=tn(e.filter,t)}function ti(e,t,n){var r=e.replayFilter;e.replayFilter=r?()=>tn(r(),t()):t,e.justLimit=n&&!r}function Er(e,t){if(e.isPrimKey)return t.primaryKey;const n=t.getIndexByKeyPath(e.index);if(!n)throw new ne.Schema("KeyPath "+e.index+" on object store "+t.name+" is not indexed");return n}function Oo(e,t,n){const r=Er(e,t.schema);return t.openCursor({trans:n,values:!e.keysOnly,reverse:e.dir==="prev",unique:!!e.unique,query:{index:r,range:e.range}})}function pr(e,t,n,r){const i=e.replayFilter?tn(e.filter,e.replayFilter()):e.filter;if(e.or){const o={},s=(c,l,a)=>{if(!i||i(l,a,m=>l.stop(m),m=>l.fail(m))){var f=l.primaryKey,h=""+f;h==="[object ArrayBuffer]"&&(h=""+new Uint8Array(f)),at(o,h)||(o[h]=!0,t(c,l,a))}};return Promise.all([e.or._iterate(s,n),To(Oo(e,r,n),e.algorithm,s,!e.keysOnly&&e.valueMapper)])}return To(Oo(e,r,n),tn(e.algorithm,i),t,!e.keysOnly&&e.valueMapper)}function To(e,t,n,r){var i=Te(r?(o,s,c)=>n(r(o),s,c):n);return e.then(o=>{if(o)return o.start(()=>{var s=()=>o.continue();t&&!t(o,c=>s=c,c=>{o.stop(c),s=Se},c=>{o.fail(c),s=Se})||i(o.value,o,c=>s=c),s()})})}function He(e,t){try{const n=Po(e),r=Po(t);if(n!==r)return n==="Array"?1:r==="Array"?-1:n==="binary"?1:r==="binary"?-1:n==="string"?1:r==="string"?-1:n==="Date"?1:r!=="Date"?NaN:-1;switch(n){case"number":case"Date":case"string":return e>t?1:e<t?-1:0;case"binary":return function(i,o){const s=i.length,c=o.length,l=s<c?s:c;for(let a=0;a<l;++a)if(i[a]!==o[a])return i[a]<o[a]?-1:1;return s===c?0:s<c?-1:1}(ko(e),ko(t));case"Array":return function(i,o){const s=i.length,c=o.length,l=s<c?s:c;for(let a=0;a<l;++a){const f=He(i[a],o[a]);if(f!==0)return f}return s===c?0:s<c?-1:1}(e,t)}}catch{}return NaN}function Po(e){const t=typeof e;if(t!=="object")return t;if(ArrayBuffer.isView(e))return"binary";const n=fi(e);return n==="ArrayBuffer"?"binary":n}function ko(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}class Kc{_read(t,n){var r=this._ctx;return r.error?r.table._trans(null,Le.bind(null,r.error)):r.table._trans("readonly",t).then(n)}_write(t){var n=this._ctx;return n.error?n.table._trans(null,Le.bind(null,n.error)):n.table._trans("readwrite",t,"locked")}_addAlgorithm(t){var n=this._ctx;n.algorithm=tn(n.algorithm,t)}_iterate(t,n){return pr(this._ctx,t,n,this._ctx.table.core)}clone(t){var n=Object.create(this.constructor.prototype),r=Object.create(this._ctx);return t&&Ge(r,t),n._ctx=r,n}raw(){return this._ctx.valueMapper=null,this}each(t){var n=this._ctx;return this._read(r=>pr(n,t,r,n.table.core))}count(t){return this._read(n=>{const r=this._ctx,i=r.table.core;if(un(r,!0))return i.count({trans:n,query:{index:Er(r,i.schema),range:r.range}}).then(s=>Math.min(s,r.limit));var o=0;return pr(r,()=>(++o,!1),n,i).then(()=>o)}).then(t)}sortBy(t,n){const r=t.split(".").reverse(),i=r[0],o=r.length-1;function s(a,f){return f?s(a[r[f]],f-1):a[i]}var c=this._ctx.dir==="next"?1:-1;function l(a,f){var h=s(a,o),m=s(f,o);return h<m?-c:h>m?c:0}return this.toArray(function(a){return a.sort(l)}).then(n)}toArray(t){return this._read(n=>{var r=this._ctx;if(r.dir==="next"&&un(r,!0)&&r.limit>0){const{valueMapper:i}=r,o=Er(r,r.table.core.schema);return r.table.core.query({trans:n,limit:r.limit,values:!0,query:{index:o,range:r.range}}).then(({result:s})=>i?s.map(i):s)}{const i=[];return pr(r,o=>i.push(o),n,r.table.core).then(()=>i)}},t)}offset(t){var n=this._ctx;return t<=0||(n.offset+=t,un(n)?ti(n,()=>{var r=t;return(i,o)=>r===0||(r===1?(--r,!1):(o(()=>{i.advance(r),r=0}),!1))}):ti(n,()=>{var r=t;return()=>--r<0})),this}limit(t){return this._ctx.limit=Math.min(this._ctx.limit,t),ti(this._ctx,()=>{var n=t;return function(r,i,o){return--n<=0&&i(o),n>=0}},!0),this}until(t,n){return ei(this._ctx,function(r,i,o){return!t(r.value)||(i(o),n)}),this}first(t){return this.limit(1).toArray(function(n){return n[0]}).then(t)}last(t){return this.reverse().first(t)}filter(t){var n,r;return ei(this._ctx,function(i){return t(i.value)}),n=this._ctx,r=t,n.isMatch=tn(n.isMatch,r),this}and(t){return this.filter(t)}or(t){return new this.db.WhereClause(this._ctx.table,t,this)}reverse(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this}desc(){return this.reverse()}eachKey(t){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(r,i){t(i.key,i)})}eachUniqueKey(t){return this._ctx.unique="unique",this.eachKey(t)}eachPrimaryKey(t){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(r,i){t(i.primaryKey,i)})}keys(t){var n=this._ctx;n.keysOnly=!n.isMatch;var r=[];return this.each(function(i,o){r.push(o.key)}).then(function(){return r}).then(t)}primaryKeys(t){var n=this._ctx;if(n.dir==="next"&&un(n,!0)&&n.limit>0)return this._read(i=>{var o=Er(n,n.table.core.schema);return n.table.core.query({trans:i,values:!1,limit:n.limit,query:{index:o,range:n.range}})}).then(({result:i})=>i).then(t);n.keysOnly=!n.isMatch;var r=[];return this.each(function(i,o){r.push(o.primaryKey)}).then(function(){return r}).then(t)}uniqueKeys(t){return this._ctx.unique="unique",this.keys(t)}firstKey(t){return this.limit(1).keys(function(n){return n[0]}).then(t)}lastKey(t){return this.reverse().firstKey(t)}distinct(){var t=this._ctx,n=t.index&&t.table.schema.idxByName[t.index];if(!n||!n.multi)return this;var r={};return ei(this._ctx,function(i){var o=i.primaryKey.toString(),s=at(r,o);return r[o]=!0,!s}),this}modify(t){var n=this._ctx;return this._write(r=>{var i;if(typeof t=="function")i=t;else{var o=De(t),s=o.length;i=function(b){for(var S=!1,E=0;E<s;++E){var A=o[E],x=t[A];Ct(b,A)!==x&&(vt(b,A,x),S=!0)}return S}}const c=n.table.core,{outbound:l,extractKey:a}=c.schema.primaryKey,f=this.db._options.modifyChunkSize||200,h=[];let m=0;const g=[],w=(b,S)=>{const{failures:E,numFailures:A}=S;m+=b-A;for(let x of De(E))h.push(E[x])};return this.clone().primaryKeys().then(b=>{const S=E=>{const A=Math.min(f,b.length-E);return c.getMany({trans:r,keys:b.slice(E,E+A),cache:"immutable"}).then(x=>{const j=[],k=[],N=l?[]:null,C=[];for(let v=0;v<A;++v){const d=x[v],P={value:tr(d),primKey:b[E+v]};i.call(P,P.value,P)!==!1&&(P.value==null?C.push(b[E+v]):l||He(a(d),a(P.value))===0?(k.push(P.value),l&&N.push(b[E+v])):(C.push(b[E+v]),j.push(P.value)))}const $=un(n)&&n.limit===1/0&&(typeof t!="function"||t===ni)&&{index:n.index,range:n.range};return Promise.resolve(j.length>0&&c.mutate({trans:r,type:"add",values:j}).then(v=>{for(let d in v.failures)C.splice(parseInt(d),1);w(j.length,v)})).then(()=>(k.length>0||$&&typeof t=="object")&&c.mutate({trans:r,type:"put",keys:N,values:k,criteria:$,changeSpec:typeof t!="function"&&t}).then(v=>w(k.length,v))).then(()=>(C.length>0||$&&t===ni)&&c.mutate({trans:r,type:"delete",keys:C,criteria:$}).then(v=>w(C.length,v))).then(()=>b.length>E+A&&S(E+f))})};return S(0).then(()=>{if(h.length>0)throw new Nr("Error modifying one or more objects",h,m,g);return b.length})})})}delete(){var t=this._ctx,n=t.range;return un(t)&&(t.isPrimKey&&!$c||n.type===3)?this._write(r=>{const{primaryKey:i}=t.table.core.schema,o=n;return t.table.core.count({trans:r,query:{index:i,range:o}}).then(s=>t.table.core.mutate({trans:r,type:"deleteRange",range:o}).then(({failures:c,lastResult:l,results:a,numFailures:f})=>{if(f)throw new Nr("Could not delete some values",Object.keys(c).map(h=>c[h]),s-f);return s-f}))}):this.modify(ni)}}const ni=(e,t)=>t.value=null;function Fc(e,t){return e<t?-1:e===t?0:1}function Uc(e,t){return e>t?-1:e===t?0:1}function it(e,t,n){var r=e instanceof js?new e.Collection(e):e;return r._ctx.error=n?new n(t):new TypeError(t),r}function ln(e){return new e.Collection(e,()=>Ns("")).limit(0)}function Mc(e,t,n,r,i,o){for(var s=Math.min(e.length,r.length),c=-1,l=0;l<s;++l){var a=t[l];if(a!==r[l])return i(e[l],n[l])<0?e.substr(0,l)+n[l]+n.substr(l+1):i(e[l],r[l])<0?e.substr(0,l)+r[l]+n.substr(l+1):c>=0?e.substr(0,c)+t[c]+n.substr(c+1):null;i(e[l],a)<0&&(c=l)}return s<r.length&&o==="next"?e+n.substr(e.length):s<e.length&&o==="prev"?e.substr(0,n.length):c<0?null:e.substr(0,c)+r[c]+n.substr(c+1)}function yr(e,t,n,r){var i,o,s,c,l,a,f,h=n.length;if(!n.every(b=>typeof b=="string"))return it(e,"String expected.");function m(b){i=function(E){return E==="next"?A=>A.toUpperCase():A=>A.toLowerCase()}(b),o=function(E){return E==="next"?A=>A.toLowerCase():A=>A.toUpperCase()}(b),s=b==="next"?Fc:Uc;var S=n.map(function(E){return{lower:o(E),upper:i(E)}}).sort(function(E,A){return s(E.lower,A.lower)});c=S.map(function(E){return E.upper}),l=S.map(function(E){return E.lower}),a=b,f=b==="next"?"":r}m("next");var g=new e.Collection(e,()=>Rt(c[0],l[h-1]+r));g._ondirectionchange=function(b){m(b)};var w=0;return g._addAlgorithm(function(b,S,E){var A=b.key;if(typeof A!="string")return!1;var x=o(A);if(t(x,l,w))return!0;for(var j=null,k=w;k<h;++k){var N=Mc(A,x,c[k],l[k],s,a);N===null&&j===null?w=k+1:(j===null||s(j,N)>0)&&(j=N)}return S(j!==null?function(){b.continue(j+f)}:E),!1}),g}function Rt(e,t,n,r){return{type:2,lower:e,upper:t,lowerOpen:n,upperOpen:r}}function Ns(e){return{type:1,lower:e,upper:e}}class js{get Collection(){return this._ctx.table.db.Collection}between(t,n,r,i){r=r!==!1,i=i===!0;try{return this._cmp(t,n)>0||this._cmp(t,n)===0&&(r||i)&&(!r||!i)?ln(this):new this.Collection(this,()=>Rt(t,n,!r,!i))}catch{return it(this,At)}}equals(t){return t==null?it(this,At):new this.Collection(this,()=>Ns(t))}above(t){return t==null?it(this,At):new this.Collection(this,()=>Rt(t,void 0,!0))}aboveOrEqual(t){return t==null?it(this,At):new this.Collection(this,()=>Rt(t,void 0,!1))}below(t){return t==null?it(this,At):new this.Collection(this,()=>Rt(void 0,t,!1,!0))}belowOrEqual(t){return t==null?it(this,At):new this.Collection(this,()=>Rt(void 0,t))}startsWith(t){return typeof t!="string"?it(this,"String expected."):this.between(t,t+Jt,!0,!0)}startsWithIgnoreCase(t){return t===""?this.startsWith(t):yr(this,(n,r)=>n.indexOf(r[0])===0,[t],Jt)}equalsIgnoreCase(t){return yr(this,(n,r)=>n===r[0],[t],"")}anyOfIgnoreCase(){var t=Tt.apply(dn,arguments);return t.length===0?ln(this):yr(this,(n,r)=>r.indexOf(n)!==-1,t,"")}startsWithAnyOfIgnoreCase(){var t=Tt.apply(dn,arguments);return t.length===0?ln(this):yr(this,(n,r)=>r.some(i=>n.indexOf(i)===0),t,Jt)}anyOf(){const t=Tt.apply(dn,arguments);let n=this._cmp;try{t.sort(n)}catch{return it(this,At)}if(t.length===0)return ln(this);const r=new this.Collection(this,()=>Rt(t[0],t[t.length-1]));r._ondirectionchange=o=>{n=o==="next"?this._ascending:this._descending,t.sort(n)};let i=0;return r._addAlgorithm((o,s,c)=>{const l=o.key;for(;n(l,t[i])>0;)if(++i,i===t.length)return s(c),!1;return n(l,t[i])===0||(s(()=>{o.continue(t[i])}),!1)}),r}notEqual(t){return this.inAnyRange([[-(1/0),t],[t,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})}noneOf(){const t=Tt.apply(dn,arguments);if(t.length===0)return new this.Collection(this);try{t.sort(this._ascending)}catch{return it(this,At)}const n=t.reduce((r,i)=>r?r.concat([[r[r.length-1][1],i]]):[[-(1/0),i]],null);return n.push([t[t.length-1],this.db._maxKey]),this.inAnyRange(n,{includeLowers:!1,includeUppers:!1})}inAnyRange(t,n){const r=this._cmp,i=this._ascending,o=this._descending,s=this._min,c=this._max;if(t.length===0)return ln(this);if(!t.every(A=>A[0]!==void 0&&A[1]!==void 0&&i(A[0],A[1])<=0))return it(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",ne.InvalidArgument);const l=!n||n.includeLowers!==!1,a=n&&n.includeUppers===!0;let f,h=i;function m(A,x){return h(A[0],x[0])}try{f=t.reduce(function(A,x){let j=0,k=A.length;for(;j<k;++j){const N=A[j];if(r(x[0],N[1])<0&&r(x[1],N[0])>0){N[0]=s(N[0],x[0]),N[1]=c(N[1],x[1]);break}}return j===k&&A.push(x),A},[]),f.sort(m)}catch{return it(this,At)}let g=0;const w=a?A=>i(A,f[g][1])>0:A=>i(A,f[g][1])>=0,b=l?A=>o(A,f[g][0])>0:A=>o(A,f[g][0])>=0;let S=w;const E=new this.Collection(this,()=>Rt(f[0][0],f[f.length-1][1],!l,!a));return E._ondirectionchange=A=>{A==="next"?(S=w,h=i):(S=b,h=o),f.sort(m)},E._addAlgorithm((A,x,j)=>{for(var k=A.key;S(k);)if(++g,g===f.length)return x(j),!1;return!!function(N){return!w(N)&&!b(N)}(k)||(this._cmp(k,f[g][1])===0||this._cmp(k,f[g][0])===0||x(()=>{h===i?A.continue(f[g][0]):A.continue(f[g][1])}),!1)}),E}startsWithAnyOf(){const t=Tt.apply(dn,arguments);return t.every(n=>typeof n=="string")?t.length===0?ln(this):this.inAnyRange(t.map(n=>[n,n+Jt])):it(this,"startsWithAnyOf() only works with strings")}}function wt(e){return Te(function(t){return Hn(t),e(t.target.error),!1})}function Hn(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}const Mt=Kn(null,"storagemutated");class Wc{_lock(){return Cn(!Q.global),++this._reculock,this._reculock!==1||Q.global||(Q.lockOwnerFor=this),this}_unlock(){if(Cn(!Q.global),--this._reculock==0)for(Q.global||(Q.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var t=this._blockedFuncs.shift();try{An(t[1],t[0])}catch{}}return this}_locked(){return this._reculock&&Q.lockOwnerFor!==this}create(t){if(!this.mode)return this;const n=this.db.idbdb,r=this.db._state.dbOpenError;if(Cn(!this.idbtrans),!t&&!n)switch(r&&r.name){case"DatabaseClosedError":throw new ne.DatabaseClosed(r);case"MissingAPIError":throw new ne.MissingAPI(r.message,r);default:throw new ne.OpenFailed(r)}if(!this.active)throw new ne.TransactionInactive;return Cn(this._completion._state===null),(t=this.idbtrans=t||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):n.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}))).onerror=Te(i=>{Hn(i),this._reject(t.error)}),t.onabort=Te(i=>{Hn(i),this.active&&this._reject(new ne.Abort(t.error)),this.active=!1,this.on("abort").fire(i)}),t.oncomplete=Te(()=>{this.active=!1,this._resolve(),"mutatedParts"in t&&Mt.storagemutated.fire(t.mutatedParts)}),this}_promise(t,n,r){if(t==="readwrite"&&this.mode!=="readwrite")return Le(new ne.ReadOnly("Transaction is readonly"));if(!this.active)return Le(new ne.TransactionInactive);if(this._locked())return new q((o,s)=>{this._blockedFuncs.push([()=>{this._promise(t,n,r).then(o,s)},Q])});if(r)return Ft(()=>{var o=new q((s,c)=>{this._lock();const l=n(s,c,this);l&&l.then&&l.then(s,c)});return o.finally(()=>this._unlock()),o._lib=!0,o});var i=new q((o,s)=>{var c=n(o,s,this);c&&c.then&&c.then(o,s)});return i._lib=!0,i}_root(){return this.parent?this.parent._root():this}waitFor(t){var n=this._root();const r=q.resolve(t);if(n._waitingFor)n._waitingFor=n._waitingFor.then(()=>r);else{n._waitingFor=r,n._waitingQueue=[];var i=n.idbtrans.objectStore(n.storeNames[0]);(function s(){for(++n._spinCount;n._waitingQueue.length;)n._waitingQueue.shift()();n._waitingFor&&(i.get(-1/0).onsuccess=s)})()}var o=n._waitingFor;return new q((s,c)=>{r.then(l=>n._waitingQueue.push(Te(s.bind(null,l))),l=>n._waitingQueue.push(Te(c.bind(null,l)))).finally(()=>{n._waitingFor===o&&(n._waitingFor=null)})})}abort(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new ne.Abort))}table(t){const n=this._memoizedTables||(this._memoizedTables={});if(at(n,t))return n[t];const r=this.schema[t];if(!r)throw new ne.NotFound("Table "+t+" not part of transaction");const i=new this.db.Table(t,r,this);return i.core=this.db.core.table(t),n[t]=i,i}}function xi(e,t,n,r,i,o,s){return{name:e,keyPath:t,unique:n,multi:r,auto:i,compound:o,src:(n&&!s?"&":"")+(r?"*":"")+(i?"++":"")+Bs(t)}}function Bs(e){return typeof e=="string"?e:e?"["+[].join.call(e,"+")+"]":""}function Ds(e,t,n){return{name:e,primKey:t,indexes:n,mappedClass:null,idxByName:ps(n,r=>[r.name,r])}}let Gn=e=>{try{return e.only([[]]),Gn=()=>[[]],[[]]}catch{return Gn=()=>Jt,Jt}};function Ei(e){return e==null?()=>{}:typeof e=="string"?function(t){return t.split(".").length===1?n=>n[t]:n=>Ct(n,t)}(e):t=>Ct(t,e)}function Co(e){return[].slice.call(e)}let qc=0;function Fn(e){return e==null?":id":typeof e=="string"?e:`[${e.join("+")}]`}function Vc(e,t,n){function r(l){if(l.type===3)return null;if(l.type===4)throw new Error("Cannot convert never type to IDBKeyRange");const{lower:a,upper:f,lowerOpen:h,upperOpen:m}=l;return a===void 0?f===void 0?null:t.upperBound(f,!!m):f===void 0?t.lowerBound(a,!!h):t.bound(a,f,!!h,!!m)}const{schema:i,hasGetAll:o}=function(l,a){const f=Co(l.objectStoreNames);return{schema:{name:l.name,tables:f.map(h=>a.objectStore(h)).map(h=>{const{keyPath:m,autoIncrement:g}=h,w=Ye(m),b=m==null,S={},E={name:h.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:b,compound:w,keyPath:m,autoIncrement:g,unique:!0,extractKey:Ei(m)},indexes:Co(h.indexNames).map(A=>h.index(A)).map(A=>{const{name:x,unique:j,multiEntry:k,keyPath:N}=A,C={name:x,compound:Ye(N),keyPath:N,unique:j,multiEntry:k,extractKey:Ei(N)};return S[Fn(N)]=C,C}),getIndexByKeyPath:A=>S[Fn(A)]};return S[":id"]=E.primaryKey,m!=null&&(S[Fn(m)]=E.primaryKey),E})},hasGetAll:f.length>0&&"getAll"in a.objectStore(f[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}(e,n),s=i.tables.map(l=>function(a){const f=a.name;return{name:f,schema:a,mutate:function({trans:h,type:m,keys:g,values:w,range:b}){return new Promise((S,E)=>{S=Te(S);const A=h.objectStore(f),x=A.keyPath==null,j=m==="put"||m==="add";if(!j&&m!=="delete"&&m!=="deleteRange")throw new Error("Invalid operation type: "+m);const{length:k}=g||w||{length:1};if(g&&w&&g.length!==w.length)throw new Error("Given keys array must have same length as given values array.");if(k===0)return S({numFailures:0,failures:{},results:[],lastResult:void 0});let N;const C=[],$=[];let v=0;const d=T=>{++v,Hn(T)};if(m==="deleteRange"){if(b.type===4)return S({numFailures:v,failures:$,results:[],lastResult:void 0});b.type===3?C.push(N=A.clear()):C.push(N=A.delete(r(b)))}else{const[T,Y]=j?x?[w,g]:[w,null]:[g,null];if(j)for(let W=0;W<k;++W)C.push(N=Y&&Y[W]!==void 0?A[m](T[W],Y[W]):A[m](T[W])),N.onerror=d;else for(let W=0;W<k;++W)C.push(N=A[m](T[W])),N.onerror=d}const P=T=>{const Y=T.target.result;C.forEach((W,oe)=>W.error!=null&&($[oe]=W.error)),S({numFailures:v,failures:$,results:m==="delete"?g:C.map(W=>W.result),lastResult:Y})};N.onerror=T=>{d(T),P(T)},N.onsuccess=P})},getMany:({trans:h,keys:m})=>new Promise((g,w)=>{g=Te(g);const b=h.objectStore(f),S=m.length,E=new Array(S);let A,x=0,j=0;const k=C=>{const $=C.target;E[$._pos]=$.result,++j===x&&g(E)},N=wt(w);for(let C=0;C<S;++C)m[C]!=null&&(A=b.get(m[C]),A._pos=C,A.onsuccess=k,A.onerror=N,++x);x===0&&g(E)}),get:({trans:h,key:m})=>new Promise((g,w)=>{g=Te(g);const b=h.objectStore(f).get(m);b.onsuccess=S=>g(S.target.result),b.onerror=wt(w)}),query:function(h){return m=>new Promise((g,w)=>{g=Te(g);const{trans:b,values:S,limit:E,query:A}=m,x=E===1/0?void 0:E,{index:j,range:k}=A,N=b.objectStore(f),C=j.isPrimaryKey?N:N.index(j.name),$=r(k);if(E===0)return g({result:[]});if(h){const v=S?C.getAll($,x):C.getAllKeys($,x);v.onsuccess=d=>g({result:d.target.result}),v.onerror=wt(w)}else{let v=0;const d=S||!("openKeyCursor"in C)?C.openCursor($):C.openKeyCursor($),P=[];d.onsuccess=T=>{const Y=d.result;return Y?(P.push(S?Y.value:Y.primaryKey),++v===E?g({result:P}):void Y.continue()):g({result:P})},d.onerror=wt(w)}})}(o),openCursor:function({trans:h,values:m,query:g,reverse:w,unique:b}){return new Promise((S,E)=>{S=Te(S);const{index:A,range:x}=g,j=h.objectStore(f),k=A.isPrimaryKey?j:j.index(A.name),N=w?b?"prevunique":"prev":b?"nextunique":"next",C=m||!("openKeyCursor"in k)?k.openCursor(r(x),N):k.openKeyCursor(r(x),N);C.onerror=wt(E),C.onsuccess=Te($=>{const v=C.result;if(!v)return void S(null);v.___id=++qc,v.done=!1;const d=v.continue.bind(v);let P=v.continuePrimaryKey;P&&(P=P.bind(v));const T=v.advance.bind(v),Y=()=>{throw new Error("Cursor not stopped")};v.trans=h,v.stop=v.continue=v.continuePrimaryKey=v.advance=()=>{throw new Error("Cursor not started")},v.fail=Te(E),v.next=function(){let W=1;return this.start(()=>W--?this.continue():this.stop()).then(()=>this)},v.start=W=>{const oe=new Promise((ie,se)=>{ie=Te(ie),C.onerror=wt(se),v.fail=se,v.stop=Pe=>{v.stop=v.continue=v.continuePrimaryKey=v.advance=Y,ie(Pe)}}),re=()=>{if(C.result)try{W()}catch(ie){v.fail(ie)}else v.done=!0,v.start=()=>{throw new Error("Cursor behind last entry")},v.stop()};return C.onsuccess=Te(ie=>{C.onsuccess=re,re()}),v.continue=d,v.continuePrimaryKey=P,v.advance=T,re(),oe},S(v)},E)})},count({query:h,trans:m}){const{index:g,range:w}=h;return new Promise((b,S)=>{const E=m.objectStore(f),A=g.isPrimaryKey?E:E.index(g.name),x=r(w),j=x?A.count(x):A.count();j.onsuccess=Te(k=>b(k.target.result)),j.onerror=wt(S)})}}}(l)),c={};return s.forEach(l=>c[l.name]=l),{stack:"dbcore",transaction:e.transaction.bind(e),table(l){if(!c[l])throw new Error(`Table '${l}' not found`);return c[l]},MIN_KEY:-1/0,MAX_KEY:Gn(t),schema:i}}function Ai({_novip:e},t){const n=t.db,r=function(i,o,{IDBKeyRange:s,indexedDB:c},l){return{dbcore:function(f,h){return h.reduce((m,{create:g})=>({...m,...g(m)}),f)}(Vc(o,s,l),i.dbcore)}}(e._middlewares,n,e._deps,t);e.core=r.dbcore,e.tables.forEach(i=>{const o=i.name;e.core.schema.tables.some(s=>s.name===o)&&(i.core=e.core.table(o),e[o]instanceof e.Table&&(e[o].core=i.core))})}function $r({_novip:e},t,n,r){n.forEach(i=>{const o=r[i];t.forEach(s=>{const c=qi(s,i);(!c||"value"in c&&c.value===void 0)&&(s===e.Transaction.prototype||s instanceof e.Transaction?kt(s,i,{get(){return this.table(i)},set(l){fs(this,i,{value:l,writable:!0,configurable:!0,enumerable:!0})}}):s[i]=new e.Table(i,o))})})}function Oi({_novip:e},t){t.forEach(n=>{for(let r in n)n[r]instanceof e.Table&&delete n[r]})}function Yc(e,t){return e._cfg.version-t._cfg.version}function zc(e,t,n,r){const i=e._dbSchema,o=e._createTransaction("readwrite",e._storeNames,i);o.create(n),o._completion.catch(r);const s=o._reject.bind(o),c=Q.transless||Q;Ft(()=>{Q.trans=o,Q.transless=c,t===0?(De(i).forEach(l=>{ri(n,l,i[l].primKey,i[l].indexes)}),Ai(e,n),q.follow(()=>e.on.populate.fire(o)).catch(s)):function({_novip:l},a,f,h){const m=[],g=l._versions;let w=l._dbSchema=Pi(l,l.idbdb,h),b=!1;function S(){return m.length?q.resolve(m.shift()(f.idbtrans)).then(S):q.resolve()}return g.filter(E=>E._cfg.version>=a).forEach(E=>{m.push(()=>{const A=w,x=E._cfg.dbschema;ki(l,A,h),ki(l,x,h),w=l._dbSchema=x;const j=Rs(A,x);j.add.forEach(N=>{ri(h,N[0],N[1].primKey,N[1].indexes)}),j.change.forEach(N=>{if(N.recreate)throw new ne.Upgrade("Not yet support for changing primary key");{const C=h.objectStore(N.name);N.add.forEach($=>Ti(C,$)),N.change.forEach($=>{C.deleteIndex($.name),Ti(C,$)}),N.del.forEach($=>C.deleteIndex($))}});const k=E._cfg.contentUpgrade;if(k&&E._cfg.version>a){Ai(l,h),f._memoizedTables={},b=!0;let N=ys(x);j.del.forEach(d=>{N[d]=A[d]}),Oi(l,[l.Transaction.prototype]),$r(l,[l.Transaction.prototype],De(N),N),f.schema=N;const C=Vi(k);let $;C&&En();const v=q.follow(()=>{if($=k(f),$&&C){var d=It.bind(null,null);$.then(d,d)}});return $&&typeof $.then=="function"?q.resolve($):v.then(()=>$)}}),m.push(A=>{(!b||!Rc)&&function(x,j){[].slice.call(j.db.objectStoreNames).forEach(k=>x[k]==null&&j.db.deleteObjectStore(k))}(E._cfg.dbschema,A),Oi(l,[l.Transaction.prototype]),$r(l,[l.Transaction.prototype],l._storeNames,l._dbSchema),f.schema=l._dbSchema})}),S().then(()=>{var E,A;A=h,De(E=w).forEach(x=>{A.db.objectStoreNames.contains(x)||ri(A,x,E[x].primKey,E[x].indexes)})})}(e,t,o,n).catch(s)})}function Rs(e,t){const n={del:[],add:[],change:[]};let r;for(r in e)t[r]||n.del.push(r);for(r in t){const i=e[r],o=t[r];if(i){const s={name:r,def:o,recreate:!1,del:[],add:[],change:[]};if(""+(i.primKey.keyPath||"")!=""+(o.primKey.keyPath||"")||i.primKey.auto!==o.primKey.auto&&!Vr)s.recreate=!0,n.change.push(s);else{const c=i.idxByName,l=o.idxByName;let a;for(a in c)l[a]||s.del.push(a);for(a in l){const f=c[a],h=l[a];f?f.src!==h.src&&s.change.push(h):s.add.push(h)}(s.del.length>0||s.add.length>0||s.change.length>0)&&n.change.push(s)}}else n.add.push([r,o])}return n}function ri(e,t,n,r){const i=e.db.createObjectStore(t,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return r.forEach(o=>Ti(i,o)),i}function Ti(e,t){e.createIndex(t.name,t.keyPath,{unique:t.unique,multiEntry:t.multi})}function Pi(e,t,n){const r={};return Ir(t.objectStoreNames,0).forEach(i=>{const o=n.objectStore(i);let s=o.keyPath;const c=xi(Bs(s),s||"",!1,!1,!!o.autoIncrement,s&&typeof s!="string",!0),l=[];for(let f=0;f<o.indexNames.length;++f){const h=o.index(o.indexNames[f]);s=h.keyPath;var a=xi(h.name,s,!!h.unique,!!h.multiEntry,!1,s&&typeof s!="string",!1);l.push(a)}r[i]=Ds(i,c,l)}),r}function ki({_novip:e},t,n){const r=n.db.objectStoreNames;for(let i=0;i<r.length;++i){const o=r[i],s=n.objectStore(o);e._hasGetAll="getAll"in s;for(let c=0;c<s.indexNames.length;++c){const l=s.indexNames[c],a=s.index(l).keyPath,f=typeof a=="string"?a:"["+Ir(a).join("+")+"]";if(t[o]){const h=t[o].idxByName[f];h&&(h.name=l,delete t[o].idxByName[f],t[o].idxByName[l]=h)}}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&Oe.WorkerGlobalScope&&Oe instanceof Oe.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(e._hasGetAll=!1)}class Jc{_parseStoresSpec(t,n){De(t).forEach(r=>{if(t[r]!==null){var i=t[r].split(",").map((s,c)=>{const l=(s=s.trim()).replace(/([&*]|\+\+)/g,""),a=/^\[/.test(l)?l.match(/^\[(.*)\]$/)[1].split("+"):l;return xi(l,a||null,/\&/.test(s),/\*/.test(s),/\+\+/.test(s),Ye(a),c===0)}),o=i.shift();if(o.multi)throw new ne.Schema("Primary key cannot be multi-valued");i.forEach(s=>{if(s.auto)throw new ne.Schema("Only primary key can be marked as autoIncrement (++)");if(!s.keyPath)throw new ne.Schema("Index must have a name and cannot be an empty string")}),n[r]=Ds(r,o,i)}})}stores(t){const n=this.db;this._cfg.storesSource=this._cfg.storesSource?Ge(this._cfg.storesSource,t):t;const r=n._versions,i={};let o={};return r.forEach(s=>{Ge(i,s._cfg.storesSource),o=s._cfg.dbschema={},s._parseStoresSpec(i,o)}),n._dbSchema=o,Oi(n,[n._allTables,n,n.Transaction.prototype]),$r(n,[n._allTables,n,n.Transaction.prototype,this._cfg.tables],De(o),o),n._storeNames=De(o),this}upgrade(t){return this._cfg.contentUpgrade=Ji(this._cfg.contentUpgrade||Se,t),this}}function Qi(e,t){let n=e._dbNamesDB;return n||(n=e._dbNamesDB=new Ce("__dbnames",{addons:[],indexedDB:e,IDBKeyRange:t}),n.version(1).stores({dbnames:"name"})),n.table("dbnames")}function Zi(e){return e&&typeof e.databases=="function"}function Ci(e){return Ft(function(){return Q.letThrough=!0,e()})}function Hc(){var e;return!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(t){var n=function(){return indexedDB.databases().finally(t)};e=setInterval(n,100),n()}).finally(function(){return clearInterval(e)}):Promise.resolve()}function Gc(e){const t=e._state,{indexedDB:n}=e._deps;if(t.isBeingOpened||e.idbdb)return t.dbReadyPromise.then(()=>t.dbOpenError?Le(t.dbOpenError):e);St&&(t.openCanceller._stackHolder=rn()),t.isBeingOpened=!0,t.dbOpenError=null,t.openComplete=!1;const r=t.openCanceller;function i(){if(t.openCanceller!==r)throw new ne.DatabaseClosed("db.open() was cancelled")}let o=t.dbReadyResolve,s=null,c=!1;return q.race([r,(typeof navigator>"u"?q.resolve():Hc()).then(()=>new q((l,a)=>{if(i(),!n)throw new ne.MissingAPI;const f=e.name,h=t.autoSchema?n.open(f):n.open(f,Math.round(10*e.verno));if(!h)throw new ne.MissingAPI;h.onerror=wt(a),h.onblocked=Te(e._fireOnBlocked),h.onupgradeneeded=Te(m=>{if(s=h.transaction,t.autoSchema&&!e._options.allowEmptyDB){h.onerror=Hn,s.abort(),h.result.close();const w=n.deleteDatabase(f);w.onsuccess=w.onerror=Te(()=>{a(new ne.NoSuchDatabase(`Database ${f} doesnt exist`))})}else{s.onerror=wt(a);var g=m.oldVersion>Math.pow(2,62)?0:m.oldVersion;c=g<1,e._novip.idbdb=h.result,zc(e,g/10,s,a)}},a),h.onsuccess=Te(()=>{s=null;const m=e._novip.idbdb=h.result,g=Ir(m.objectStoreNames);if(g.length>0)try{const b=m.transaction((w=g).length===1?w[0]:w,"readonly");t.autoSchema?function({_novip:S},E,A){S.verno=E.version/10;const x=S._dbSchema=Pi(0,E,A);S._storeNames=Ir(E.objectStoreNames,0),$r(S,[S._allTables],De(x),x)}(e,m,b):(ki(e,e._dbSchema,b),function(S,E){const A=Rs(Pi(0,S.idbdb,E),S._dbSchema);return!(A.add.length||A.change.some(x=>x.add.length||x.change.length))}(e,b)||console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Some queries may fail.")),Ai(e,b)}catch{}var w;Ln.push(e),m.onversionchange=Te(b=>{t.vcFired=!0,e.on("versionchange").fire(b)}),m.onclose=Te(b=>{e.on("close").fire(b)}),c&&function({indexedDB:b,IDBKeyRange:S},E){!Zi(b)&&E!=="__dbnames"&&Qi(b,S).put({name:E}).catch(Se)}(e._deps,f),l()},a)}))]).then(()=>(i(),t.onReadyBeingFired=[],q.resolve(Ci(()=>e.on.ready.fire(e.vip))).then(function l(){if(t.onReadyBeingFired.length>0){let a=t.onReadyBeingFired.reduce(Ji,Se);return t.onReadyBeingFired=[],q.resolve(Ci(()=>a(e.vip))).then(l)}}))).finally(()=>{t.onReadyBeingFired=null,t.isBeingOpened=!1}).then(()=>e).catch(l=>{t.dbOpenError=l;try{s&&s.abort()}catch{}return r===t.openCanceller&&e._close(),Le(l)}).finally(()=>{t.openComplete=!0,o()})}function Ii(e){var t=o=>e.next(o),n=i(t),r=i(o=>e.throw(o));function i(o){return s=>{var c=o(s),l=c.value;return c.done?l:l&&typeof l.then=="function"?l.then(n,r):Ye(l)?Promise.all(l).then(n,r):n(l)}}return i(t)()}function Xc(e,t,n){var r=arguments.length;if(r<2)throw new ne.InvalidArgument("Too few arguments");for(var i=new Array(r-1);--r;)i[r-1]=arguments[r];n=i.pop();var o=ms(i);return[e,o,n]}function $s(e,t,n,r,i){return q.resolve().then(()=>{const o=Q.transless||Q,s=e._createTransaction(t,n,e._dbSchema,r),c={trans:s,transless:o};if(r)s.idbtrans=r.idbtrans;else try{s.create(),e._state.PR1398_maxLoop=3}catch(h){return h.name===zi.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),e._close(),e.open().then(()=>$s(e,t,n,null,i))):Le(h)}const l=Vi(i);let a;l&&En();const f=q.follow(()=>{if(a=i.call(s,s),a)if(l){var h=It.bind(null,null);a.then(h,h)}else typeof a.next=="function"&&typeof a.throw=="function"&&(a=Ii(a))},c);return(a&&typeof a.then=="function"?q.resolve(a).then(h=>s.active?h:Le(new ne.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))):f.then(()=>a)).then(h=>(r&&s._resolve(),s._completion.then(()=>h))).catch(h=>(s._reject(h),Le(h)))})}function mr(e,t,n){const r=Ye(e)?e.slice():[e];for(let i=0;i<n;++i)r.push(t);return r}const Qc={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(e){return{...e,table(t){const n=e.table(t),{schema:r}=n,i={},o=[];function s(f,h,m){const g=Fn(f),w=i[g]=i[g]||[],b=f==null?0:typeof f=="string"?1:f.length,S=h>0,E={...m,isVirtual:S,keyTail:h,keyLength:b,extractKey:Ei(f),unique:!S&&m.unique};return w.push(E),E.isPrimaryKey||o.push(E),b>1&&s(b===2?f[0]:f.slice(0,b-1),h+1,m),w.sort((A,x)=>A.keyTail-x.keyTail),E}const c=s(r.primaryKey.keyPath,0,r.primaryKey);i[":id"]=[c];for(const f of r.indexes)s(f.keyPath,0,f);function l(f){const h=f.query.index;return h.isVirtual?{...f,query:{index:h,range:(m=f.query.range,g=h.keyTail,{type:m.type===1?2:m.type,lower:mr(m.lower,m.lowerOpen?e.MAX_KEY:e.MIN_KEY,g),lowerOpen:!0,upper:mr(m.upper,m.upperOpen?e.MIN_KEY:e.MAX_KEY,g),upperOpen:!0})}}:f;var m,g}return{...n,schema:{...r,primaryKey:c,indexes:o,getIndexByKeyPath:function(f){const h=i[Fn(f)];return h&&h[0]}},count:f=>n.count(l(f)),query:f=>n.query(l(f)),openCursor(f){const{keyTail:h,isVirtual:m,keyLength:g}=f.query.index;return m?n.openCursor(l(f)).then(w=>w&&function(b){return Object.create(b,{continue:{value:function(E){E!=null?b.continue(mr(E,f.reverse?e.MAX_KEY:e.MIN_KEY,h)):f.unique?b.continue(b.key.slice(0,g).concat(f.reverse?e.MIN_KEY:e.MAX_KEY,h)):b.continue()}},continuePrimaryKey:{value(E,A){b.continuePrimaryKey(mr(E,e.MAX_KEY,h),A)}},primaryKey:{get:()=>b.primaryKey},key:{get(){const E=b.key;return g===1?E[0]:E.slice(0,g)}},value:{get:()=>b.value}})}(w)):n.openCursor(f)}}}}}};function eo(e,t,n,r){return n=n||{},r=r||"",De(e).forEach(i=>{if(at(t,i)){var o=e[i],s=t[i];if(typeof o=="object"&&typeof s=="object"&&o&&s){const c=fi(o);c!==fi(s)?n[r+i]=t[i]:c==="Object"?eo(o,s,n,r+i+"."):o!==s&&(n[r+i]=t[i])}else o!==s&&(n[r+i]=t[i])}else n[r+i]=void 0}),De(t).forEach(i=>{at(e,i)||(n[r+i]=t[i])}),n}const Zc={stack:"dbcore",name:"HooksMiddleware",level:2,create:e=>({...e,table(t){const n=e.table(t),{primaryKey:r}=n.schema;return{...n,mutate(o){const s=Q.trans,{deleting:c,creating:l,updating:a}=s.table(t).hook;switch(o.type){case"add":if(l.fire===Se)break;return s._promise("readwrite",()=>f(o),!0);case"put":if(l.fire===Se&&a.fire===Se)break;return s._promise("readwrite",()=>f(o),!0);case"delete":if(c.fire===Se)break;return s._promise("readwrite",()=>f(o),!0);case"deleteRange":if(c.fire===Se)break;return s._promise("readwrite",()=>function(m){return h(m.trans,m.range,1e4)}(o),!0)}return n.mutate(o);function f(m){const g=Q.trans,w=m.keys||function(b,S){return S.type==="delete"?S.keys:S.keys||S.values.map(b.extractKey)}(r,m);if(!w)throw new Error("Keys missing");return(m=m.type==="add"||m.type==="put"?{...m,keys:w}:{...m}).type!=="delete"&&(m.values=[...m.values]),m.keys&&(m.keys=[...m.keys]),function(b,S,E){return S.type==="add"?Promise.resolve([]):b.getMany({trans:S.trans,keys:E,cache:"immutable"})}(n,m,w).then(b=>{const S=w.map((E,A)=>{const x=b[A],j={onerror:null,onsuccess:null};if(m.type==="delete")c.fire.call(j,E,x,g);else if(m.type==="add"||x===void 0){const k=l.fire.call(j,E,m.values[A],g);E==null&&k!=null&&(E=k,m.keys[A]=E,r.outbound||vt(m.values[A],r.keyPath,E))}else{const k=eo(x,m.values[A]),N=a.fire.call(j,k,E,x,g);if(N){const C=m.values[A];Object.keys(N).forEach($=>{at(C,$)?C[$]=N[$]:vt(C,$,N[$])})}}return j});return n.mutate(m).then(({failures:E,results:A,numFailures:x,lastResult:j})=>{for(let k=0;k<w.length;++k){const N=A?A[k]:w[k],C=S[k];N==null?C.onerror&&C.onerror(E[k]):C.onsuccess&&C.onsuccess(m.type==="put"&&b[k]?m.values[k]:N)}return{failures:E,results:A,numFailures:x,lastResult:j}}).catch(E=>(S.forEach(A=>A.onerror&&A.onerror(E)),Promise.reject(E)))})}function h(m,g,w){return n.query({trans:m,values:!1,query:{index:r,range:g},limit:w}).then(({result:b})=>f({type:"delete",keys:b,trans:m}).then(S=>S.numFailures>0?Promise.reject(S.failures[0]):b.length<w?{failures:[],numFailures:0,lastResult:void 0}:h(m,{...g,lower:b[b.length-1],lowerOpen:!0},w)))}}}}})};function Ls(e,t,n){try{if(!t||t.keys.length<e.length)return null;const r=[];for(let i=0,o=0;i<t.keys.length&&o<e.length;++i)He(t.keys[i],e[o])===0&&(r.push(n?tr(t.values[i]):t.values[i]),++o);return r.length===e.length?r:null}catch{return null}}const eu={stack:"dbcore",level:-1,create:e=>({table:t=>{const n=e.table(t);return{...n,getMany:r=>{if(!r.cache)return n.getMany(r);const i=Ls(r.keys,r.trans._cache,r.cache==="clone");return i?q.resolve(i):n.getMany(r).then(o=>(r.trans._cache={keys:r.keys,values:r.cache==="clone"?tr(o):o},o))},mutate:r=>(r.type!=="add"&&(r.trans._cache=null),n.mutate(r))}}})};function to(e){return!("from"in e)}const Ot=function(e,t){if(!this){const n=new Ot;return e&&"d"in e&&Ge(n,e),n}Ge(this,arguments.length?{d:1,from:e,to:arguments.length>1?t:e}:{d:0})};function Xn(e,t,n){const r=He(t,n);if(isNaN(r))return;if(r>0)throw RangeError();if(to(e))return Ge(e,{from:t,to:n,d:1});const i=e.l,o=e.r;if(He(n,e.from)<0)return i?Xn(i,t,n):e.l={from:t,to:n,d:1,l:null,r:null},Io(e);if(He(t,e.to)>0)return o?Xn(o,t,n):e.r={from:t,to:n,d:1,l:null,r:null},Io(e);He(t,e.from)<0&&(e.from=t,e.l=null,e.d=o?o.d+1:1),He(n,e.to)>0&&(e.to=n,e.r=null,e.d=e.l?e.l.d+1:1);const s=!e.r;i&&!e.l&&Lr(e,i),o&&s&&Lr(e,o)}function Lr(e,t){to(t)||function n(r,{from:i,to:o,l:s,r:c}){Xn(r,i,o),s&&n(r,s),c&&n(r,c)}(e,t)}function tu(e,t){const n=Ni(t);let r=n.next();if(r.done)return!1;let i=r.value;const o=Ni(e);let s=o.next(i.from),c=s.value;for(;!r.done&&!s.done;){if(He(c.from,i.to)<=0&&He(c.to,i.from)>=0)return!0;He(i.from,c.from)<0?i=(r=n.next(c.from)).value:c=(s=o.next(i.from)).value}return!1}function Ni(e){let t=to(e)?null:{s:0,n:e};return{next(n){const r=arguments.length>0;for(;t;)switch(t.s){case 0:if(t.s=1,r)for(;t.n.l&&He(n,t.n.from)<0;)t={up:t,n:t.n.l,s:1};else for(;t.n.l;)t={up:t,n:t.n.l,s:1};case 1:if(t.s=2,!r||He(n,t.n.to)<=0)return{value:t.n,done:!1};case 2:if(t.n.r){t.s=3,t={up:t,n:t.n.r,s:0};continue}case 3:t=t.up}return{done:!0}}}}function Io(e){var t,n;const r=(((t=e.r)===null||t===void 0?void 0:t.d)||0)-(((n=e.l)===null||n===void 0?void 0:n.d)||0),i=r>1?"r":r<-1?"l":"";if(i){const o=i==="r"?"l":"r",s={...e},c=e[i];e.from=c.from,e.to=c.to,e[i]=c[i],s[i]=c[o],e[o]=s,s.d=No(s)}e.d=No(e)}function No({r:e,l:t}){return(e?t?Math.max(e.d,t.d):e.d:t?t.d:0)+1}Sn(Ot.prototype,{add(e){return Lr(this,e),this},addKey(e){return Xn(this,e,e),this},addKeys(e){return e.forEach(t=>Xn(this,t,t)),this},[di](){return Ni(this)}});const nu={stack:"dbcore",level:0,create:e=>{const t=e.schema.name,n=new Ot(e.MIN_KEY,e.MAX_KEY);return{...e,table:r=>{const i=e.table(r),{schema:o}=i,{primaryKey:s}=o,{extractKey:c,outbound:l}=s,a={...i,mutate:m=>{const g=m.trans,w=g.mutatedParts||(g.mutatedParts={}),b=N=>{const C=`idb://${t}/${r}/${N}`;return w[C]||(w[C]=new Ot)},S=b(""),E=b(":dels"),{type:A}=m;let[x,j]=m.type==="deleteRange"?[m.range]:m.type==="delete"?[m.keys]:m.values.length<50?[[],m.values]:[];const k=m.trans._cache;return i.mutate(m).then(N=>{if(Ye(x)){A!=="delete"&&(x=N.results),S.addKeys(x);const C=Ls(x,k);C||A==="add"||E.addKeys(x),(C||j)&&function($,v,d,P){function T(Y){const W=$(Y.name||"");function oe(ie){return ie!=null?Y.extractKey(ie):null}const re=ie=>Y.multiEntry&&Ye(ie)?ie.forEach(se=>W.addKey(se)):W.addKey(ie);(d||P).forEach((ie,se)=>{const Pe=d&&oe(d[se]),ke=P&&oe(P[se]);He(Pe,ke)!==0&&(Pe!=null&&re(Pe),ke!=null&&re(ke))})}v.indexes.forEach(T)}(b,o,C,j)}else if(x){const C={from:x.lower,to:x.upper};E.add(C),S.add(C)}else S.add(n),E.add(n),o.indexes.forEach(C=>b(C.name).add(n));return N})}},f=({query:{index:m,range:g}})=>{var w,b;return[m,new Ot((w=g.lower)!==null&&w!==void 0?w:e.MIN_KEY,(b=g.upper)!==null&&b!==void 0?b:e.MAX_KEY)]},h={get:m=>[s,new Ot(m.key)],getMany:m=>[s,new Ot().addKeys(m.keys)],count:f,query:f,openCursor:f};return De(h).forEach(m=>{a[m]=function(g){const{subscr:w}=Q;if(w){const b=j=>{const k=`idb://${t}/${r}/${j}`;return w[k]||(w[k]=new Ot)},S=b(""),E=b(":dels"),[A,x]=h[m](g);if(b(A.name||"").add(x),!A.isPrimaryKey){if(m!=="count"){const j=m==="query"&&l&&g.values&&i.query({...g,values:!1});return i[m].apply(this,arguments).then(k=>{if(m==="query"){if(l&&g.values)return j.then(({result:C})=>(S.addKeys(C),k));const N=g.values?k.result.map(c):k.result;g.values?S.addKeys(N):E.addKeys(N)}else if(m==="openCursor"){const N=k,C=g.values;return N&&Object.create(N,{key:{get:()=>(E.addKey(N.primaryKey),N.key)},primaryKey:{get(){const $=N.primaryKey;return E.addKey($),$}},value:{get:()=>(C&&S.addKey(N.primaryKey),N.value)}})}return k})}E.add(n)}}return i[m].apply(this,arguments)}}),a}}}};class Ce{constructor(t,n){this._middlewares={},this.verno=0;const r=Ce.dependencies;this._options=n={addons:Ce.addons,autoOpen:!0,indexedDB:r.indexedDB,IDBKeyRange:r.IDBKeyRange,...n},this._deps={indexedDB:n.indexedDB,IDBKeyRange:n.IDBKeyRange};const{addons:i}=n;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;const o={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:Se,dbReadyPromise:null,cancelOpen:Se,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3};var s;o.dbReadyPromise=new q(c=>{o.dbReadyResolve=c}),o.openCanceller=new q((c,l)=>{o.cancelOpen=l}),this._state=o,this.name=t,this.on=Kn(this,"populate","blocked","versionchange","close",{ready:[Ji,Se]}),this.on.ready.subscribe=ds(this.on.ready.subscribe,c=>(l,a)=>{Ce.vip(()=>{const f=this._state;if(f.openComplete)f.dbOpenError||q.resolve().then(l),a&&c(l);else if(f.onReadyBeingFired)f.onReadyBeingFired.push(l),a&&c(l);else{c(l);const h=this;a||c(function m(){h.on.ready.unsubscribe(l),h.on.ready.unsubscribe(m)})}})}),this.Collection=(s=this,kn(Kc.prototype,function(c,l){this.db=s;let a=Is,f=null;if(l)try{a=l()}catch(w){f=w}const h=c._ctx,m=h.table,g=m.hook.reading.fire;this._ctx={table:m,index:h.index,isPrimKey:!h.index||m.schema.primKey.keyPath&&h.index===m.schema.primKey.name,range:a,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:f,or:h.or,valueMapper:g!==zn?g:null}})),this.Table=function(c){return kn(Lc.prototype,function(l,a,f){this.db=c,this._tx=f,this.name=l,this.schema=a,this.hook=c._allTables[l]?c._allTables[l].hook:Kn(null,{creating:[Oc,Se],reading:[Ac,zn],updating:[Pc,Se],deleting:[Tc,Se]})})}(this),this.Transaction=function(c){return kn(Wc.prototype,function(l,a,f,h,m){this.db=c,this.mode=l,this.storeNames=a,this.schema=f,this.chromeTransactionDurability=h,this.idbtrans=null,this.on=Kn(this,"complete","error","abort"),this.parent=m||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new q((g,w)=>{this._resolve=g,this._reject=w}),this._completion.then(()=>{this.active=!1,this.on.complete.fire()},g=>{var w=this.active;return this.active=!1,this.on.error.fire(g),this.parent?this.parent._reject(g):w&&this.idbtrans&&this.idbtrans.abort(),Le(g)})})}(this),this.Version=function(c){return kn(Jc.prototype,function(l){this.db=c,this._cfg={version:l,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})}(this),this.WhereClause=function(c){return kn(js.prototype,function(l,a,f){this.db=c,this._ctx={table:l,index:a===":id"?null:a,or:f};const h=c._deps.indexedDB;if(!h)throw new ne.MissingAPI;this._cmp=this._ascending=h.cmp.bind(h),this._descending=(m,g)=>h.cmp(g,m),this._max=(m,g)=>h.cmp(m,g)>0?m:g,this._min=(m,g)=>h.cmp(m,g)<0?m:g,this._IDBKeyRange=c._deps.IDBKeyRange})}(this),this.on("versionchange",c=>{c.newVersion>0?console.warn(`Another connection wants to upgrade database '${this.name}'. Closing db now to resume the upgrade.`):console.warn(`Another connection wants to delete database '${this.name}'. Closing db now to resume the delete request.`),this.close()}),this.on("blocked",c=>{!c.newVersion||c.newVersion<c.oldVersion?console.warn(`Dexie.delete('${this.name}') was blocked`):console.warn(`Upgrade '${this.name}' blocked by other connection holding version ${c.oldVersion/10}`)}),this._maxKey=Gn(n.IDBKeyRange),this._createTransaction=(c,l,a,f)=>new this.Transaction(c,l,a,this._options.chromeTransactionDurability,f),this._fireOnBlocked=c=>{this.on("blocked").fire(c),Ln.filter(l=>l.name===this.name&&l!==this&&!l._state.vcFired).map(l=>l.on("versionchange").fire(c))},this.use(Qc),this.use(Zc),this.use(nu),this.use(eu),this.vip=Object.create(this,{_vip:{value:!0}}),i.forEach(c=>c(this))}version(t){if(isNaN(t)||t<.1)throw new ne.Type("Given version is not a positive number");if(t=Math.round(10*t)/10,this.idbdb||this._state.isBeingOpened)throw new ne.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,t);const n=this._versions;var r=n.filter(i=>i._cfg.version===t)[0];return r||(r=new this.Version(t),n.push(r),n.sort(Yc),r.stores({}),this._state.autoSchema=!1,r)}_whenReady(t){return this.idbdb&&(this._state.openComplete||Q.letThrough||this._vip)?t():new q((n,r)=>{if(this._state.openComplete)return r(new ne.DatabaseClosed(this._state.dbOpenError));if(!this._state.isBeingOpened){if(!this._options.autoOpen)return void r(new ne.DatabaseClosed);this.open().catch(Se)}this._state.dbReadyPromise.then(n,r)}).then(t)}use({stack:t,create:n,level:r,name:i}){i&&this.unuse({stack:t,name:i});const o=this._middlewares[t]||(this._middlewares[t]=[]);return o.push({stack:t,create:n,level:r??10,name:i}),o.sort((s,c)=>s.level-c.level),this}unuse({stack:t,name:n,create:r}){return t&&this._middlewares[t]&&(this._middlewares[t]=this._middlewares[t].filter(i=>r?i.create!==r:!!n&&i.name!==n)),this}open(){return Gc(this)}_close(){const t=this._state,n=Ln.indexOf(this);if(n>=0&&Ln.splice(n,1),this.idbdb){try{this.idbdb.close()}catch{}this._novip.idbdb=null}t.dbReadyPromise=new q(r=>{t.dbReadyResolve=r}),t.openCanceller=new q((r,i)=>{t.cancelOpen=i})}close(){this._close();const t=this._state;this._options.autoOpen=!1,t.dbOpenError=new ne.DatabaseClosed,t.isBeingOpened&&t.cancelOpen(t.dbOpenError)}delete(){const t=arguments.length>0,n=this._state;return new q((r,i)=>{const o=()=>{this.close();var s=this._deps.indexedDB.deleteDatabase(this.name);s.onsuccess=Te(()=>{(function({indexedDB:c,IDBKeyRange:l},a){!Zi(c)&&a!=="__dbnames"&&Qi(c,l).delete(a).catch(Se)})(this._deps,this.name),r()}),s.onerror=wt(i),s.onblocked=this._fireOnBlocked};if(t)throw new ne.InvalidArgument("Arguments not allowed in db.delete()");n.isBeingOpened?n.dbReadyPromise.then(o):o()})}backendDB(){return this.idbdb}isOpen(){return this.idbdb!==null}hasBeenClosed(){const t=this._state.dbOpenError;return t&&t.name==="DatabaseClosed"}hasFailed(){return this._state.dbOpenError!==null}dynamicallyOpened(){return this._state.autoSchema}get tables(){return De(this._allTables).map(t=>this._allTables[t])}transaction(){const t=Xc.apply(this,arguments);return this._transaction.apply(this,t)}_transaction(t,n,r){let i=Q.trans;i&&i.db===this&&t.indexOf("!")===-1||(i=null);const o=t.indexOf("?")!==-1;let s,c;t=t.replace("!","").replace("?","");try{if(c=n.map(a=>{var f=a instanceof this.Table?a.name:a;if(typeof f!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return f}),t=="r"||t==="readonly")s="readonly";else{if(t!="rw"&&t!="readwrite")throw new ne.InvalidArgument("Invalid transaction mode: "+t);s="readwrite"}if(i){if(i.mode==="readonly"&&s==="readwrite"){if(!o)throw new ne.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");i=null}i&&c.forEach(a=>{if(i&&i.storeNames.indexOf(a)===-1){if(!o)throw new ne.SubTransaction("Table "+a+" not included in parent transaction.");i=null}}),o&&i&&!i.active&&(i=null)}}catch(a){return i?i._promise(null,(f,h)=>{h(a)}):Le(a)}const l=$s.bind(null,this,s,c,i,r);return i?i._promise(s,l,"lock"):Q.trans?An(Q.transless,()=>this._whenReady(l)):this._whenReady(l)}table(t){if(!at(this._allTables,t))throw new ne.InvalidTable(`Table ${t} does not exist`);return this._allTables[t]}}const ru=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable";class iu{constructor(t){this._subscribe=t}subscribe(t,n,r){return this._subscribe(t&&typeof t!="function"?t:{next:t,error:n,complete:r})}[ru](){return this}}function Ks(e,t){return De(t).forEach(n=>{Lr(e[n]||(e[n]=new Ot),t[n])}),e}function ou(e){return new iu(t=>{const n=Vi(e);let r=!1,i={},o={};const s={get closed(){return r},unsubscribe:()=>{r=!0,Mt.storagemutated.unsubscribe(f)}};t.start&&t.start(s);let c=!1,l=!1;function a(){return De(o).some(m=>i[m]&&tu(i[m],o[m]))}const f=m=>{Ks(i,m),a()&&h()},h=()=>{if(c||r)return;i={};const m={},g=function(w){n&&En();const b=()=>Ft(e,{subscr:w,trans:null}),S=Q.trans?An(Q.transless,b):b();return n&&S.then(It,It),S}(m);l||(Mt("storagemutated",f),l=!0),c=!0,Promise.resolve(g).then(w=>{c=!1,r||(a()?h():(i={},o=m,t.next&&t.next(w)))},w=>{c=!1,t.error&&t.error(w),s.unsubscribe()})};return h(),s})}let ji;try{ji={indexedDB:Oe.indexedDB||Oe.mozIndexedDB||Oe.webkitIndexedDB||Oe.msIndexedDB,IDBKeyRange:Oe.IDBKeyRange||Oe.webkitIDBKeyRange}}catch{ji={indexedDB:null,IDBKeyRange:null}}const zt=Ce;function Ar(e){let t=Pt;try{Pt=!0,Mt.storagemutated.fire(e)}finally{Pt=t}}Sn(zt,{...br,delete:e=>new zt(e,{addons:[]}).delete(),exists:e=>new zt(e,{addons:[]}).open().then(t=>(t.close(),!0)).catch("NoSuchDatabaseError",()=>!1),getDatabaseNames(e){try{return function({indexedDB:t,IDBKeyRange:n}){return Zi(t)?Promise.resolve(t.databases()).then(r=>r.map(i=>i.name).filter(i=>i!=="__dbnames")):Qi(t,n).toCollection().primaryKeys()}(zt.dependencies).then(e)}catch{return Le(new ne.MissingAPI)}},defineClass:()=>function(e){Ge(this,e)},ignoreTransaction:e=>Q.trans?An(Q.transless,e):e(),vip:Ci,async:function(e){return function(){try{var t=Ii(e.apply(this,arguments));return t&&typeof t.then=="function"?t:q.resolve(t)}catch(n){return Le(n)}}},spawn:function(e,t,n){try{var r=Ii(e.apply(n,t||[]));return r&&typeof r.then=="function"?r:q.resolve(r)}catch(i){return Le(i)}},currentTransaction:{get:()=>Q.trans||null},waitFor:function(e,t){const n=q.resolve(typeof e=="function"?zt.ignoreTransaction(e):e).timeout(t||6e4);return Q.trans?Q.trans.waitFor(n):n},Promise:q,debug:{get:()=>St,set:e=>{vs(e,e==="dexie"?()=>!0:Cs)}},derive:gn,extend:Ge,props:Sn,override:ds,Events:Kn,on:Mt,liveQuery:ou,extendObservabilitySet:Ks,getByKeyPath:Ct,setByKeyPath:vt,delByKeyPath:function(e,t){typeof t=="string"?vt(e,t,void 0):"length"in t&&[].map.call(t,function(n){vt(e,n,void 0)})},shallowClone:ys,deepClone:tr,getObjectDiff:eo,cmp:He,asap:hs,minKey:-(1/0),addons:[],connections:Ln,errnames:zi,dependencies:ji,semVer:"3.2.3",version:"3.2.3".split(".").map(e=>parseInt(e)).reduce((e,t,n)=>e+t/Math.pow(10,2*n))}),zt.maxKey=Gn(zt.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(Mt("storagemutated",e=>{if(!Pt){let t;Vr?(t=document.createEvent("CustomEvent"),t.initCustomEvent("x-storagemutated-1",!0,!0,e)):t=new CustomEvent("x-storagemutated-1",{detail:e}),Pt=!0,dispatchEvent(t),Pt=!1}}),addEventListener("x-storagemutated-1",({detail:e})=>{Pt||Ar(e)}));let Pt=!1;if(typeof BroadcastChannel<"u"){const e=new BroadcastChannel("x-storagemutated-1");typeof e.unref=="function"&&e.unref(),Mt("storagemutated",t=>{Pt||e.postMessage(t)}),e.onmessage=t=>{t.data&&Ar(t.data)}}else if(typeof self<"u"&&typeof navigator<"u"){Mt("storagemutated",t=>{try{Pt||(typeof localStorage<"u"&&localStorage.setItem("x-storagemutated-1",JSON.stringify({trig:Math.random(),changedParts:t})),typeof self.clients=="object"&&[...self.clients.matchAll({includeUncontrolled:!0})].forEach(n=>n.postMessage({type:"x-storagemutated-1",changedParts:t})))}catch{}}),typeof addEventListener<"u"&&addEventListener("storage",t=>{if(t.key==="x-storagemutated-1"){const n=JSON.parse(t.newValue);n&&Ar(n.changedParts)}});const e=self.document&&navigator.serviceWorker;e&&e.addEventListener("message",function({data:t}){t&&t.type==="x-storagemutated-1"&&Ar(t.changedParts)})}q.rejectionMapper=function(e,t){if(!e||e instanceof vn||e instanceof TypeError||e instanceof SyntaxError||!e.name||!xo[e.name])return e;var n=new xo[e.name](t||e.message,e);return"stack"in e&&kt(n,"stack",{get:function(){return this.inner.stack}}),n},vs(St,Cs);/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function Wt(e,t,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function c(f){try{a(r.next(f))}catch(h){s(h)}}function l(f){try{a(r.throw(f))}catch(h){s(h)}}function a(f){f.done?o(f.value):i(f.value).then(c,l)}a((r=r.apply(e,t||[])).next())})}function mt(e,t){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,s;return s={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function c(a){return function(f){return l([a,f])}}function l(a){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(o=a[0]&2?i.return:a[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,a[1])).done)return o;switch(i=0,o&&(a=[a[0]&2,o.value]),a[0]){case 0:case 1:o=a;break;case 4:return n.label++,{value:a[1],done:!1};case 5:n.label++,i=a[1],a=[0];continue;case 7:a=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(a[0]===6||a[0]===2)){n=0;continue}if(a[0]===3&&(!o||a[1]>o[0]&&a[1]<o[3])){n.label=a[1];break}if(a[0]===6&&n.label<o[1]){n.label=o[1],o=a;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(a);break}o[2]&&n.ops.pop(),n.trys.pop();continue}a=t.call(e,n)}catch(f){a=[6,f],i=0}finally{r=o=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}}function su(e){var t=[e.schema.primKey].concat(e.schema.indexes);return t.map(function(n){return n.src}).join(",")}function au(e){for(var t={},n=0,r=e.tables;n<r.length;n++){var i=r[n];t[i.name]=i.schema}return t}function Fs(e,t){return new Promise(function(n,r){var i=new FileReader;i.onabort=function(o){return r(new Error("file read aborted"))},i.onerror=function(o){return r(o.target.error)},i.onload=function(o){return n(o.target.result)},t==="binary"?i.readAsArrayBuffer(e):i.readAsText(e)})}function Us(e,t){if(typeof FileReaderSync>"u")throw new Error("FileReaderSync missing. Reading blobs synchronously requires code to run from within a web worker. Use TSON.encapsulateAsync() to do it from the main thread.");var n=new FileReaderSync,r=t==="binary"?n.readAsArrayBuffer(e):n.readAsText(e);return r}var Bi=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function no(e,t){return t={exports:{}},e(t,t.exports),t.exports}var Yr=no(function(e,t){(function(n,r){e.exports=r()})(Bi,function(){function n(I){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?n=function(B){return typeof B}:n=function(B){return B&&typeof Symbol=="function"&&B.constructor===Symbol&&B!==Symbol.prototype?"symbol":typeof B},n(I)}function r(I,B,D,R,U,de,ye){try{var fe=I[de](ye),G=fe.value}catch(Me){D(Me);return}fe.done?B(G):Promise.resolve(G).then(R,U)}function i(I){return function(){var B=this,D=arguments;return new Promise(function(R,U){var de=I.apply(B,D);function ye(G){r(de,R,U,ye,fe,"next",G)}function fe(G){r(de,R,U,ye,fe,"throw",G)}ye(void 0)})}}function o(I,B){if(!(I instanceof B))throw new TypeError("Cannot call a class as a function")}function s(I,B){for(var D=0;D<B.length;D++){var R=B[D];R.enumerable=R.enumerable||!1,R.configurable=!0,"value"in R&&(R.writable=!0),Object.defineProperty(I,R.key,R)}}function c(I,B,D){return B&&s(I.prototype,B),D&&s(I,D),I}function l(I,B,D){return B in I?Object.defineProperty(I,B,{value:D,enumerable:!0,configurable:!0,writable:!0}):I[B]=D,I}function a(I,B){var D=Object.keys(I);if(Object.getOwnPropertySymbols){var R=Object.getOwnPropertySymbols(I);B&&(R=R.filter(function(U){return Object.getOwnPropertyDescriptor(I,U).enumerable})),D.push.apply(D,R)}return D}function f(I){for(var B=1;B<arguments.length;B++){var D=arguments[B]!=null?arguments[B]:{};B%2?a(Object(D),!0).forEach(function(R){l(I,R,D[R])}):Object.getOwnPropertyDescriptors?Object.defineProperties(I,Object.getOwnPropertyDescriptors(D)):a(Object(D)).forEach(function(R){Object.defineProperty(I,R,Object.getOwnPropertyDescriptor(D,R))})}return I}function h(I,B){return w(I)||S(I,B)||A()}function m(I){return g(I)||b(I)||E()}function g(I){if(Array.isArray(I)){for(var B=0,D=new Array(I.length);B<I.length;B++)D[B]=I[B];return D}}function w(I){if(Array.isArray(I))return I}function b(I){if(Symbol.iterator in Object(I)||Object.prototype.toString.call(I)==="[object Arguments]")return Array.from(I)}function S(I,B){if(Symbol.iterator in Object(I)||Object.prototype.toString.call(I)==="[object Arguments]"){var D=[],R=!0,U=!1,de=void 0;try{for(var ye=I[Symbol.iterator](),fe;!(R=(fe=ye.next()).done)&&(D.push(fe.value),!(B&&D.length===B));R=!0);}catch(G){U=!0,de=G}finally{try{!R&&ye.return!=null&&ye.return()}finally{if(U)throw de}}return D}}function E(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function A(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}var x=function I(B){o(this,I),this.p=new Promise(B)};x.__typeson__type__="TypesonPromise",typeof Symbol<"u"&&(x.prototype[Symbol.toStringTag]="TypesonPromise"),x.prototype.then=function(I,B){var D=this;return new x(function(R,U){D.p.then(function(de){R(I?I(de):de)}).catch(function(de){return B?B(de):Promise.reject(de)}).then(R,U)})},x.prototype.catch=function(I){return this.then(null,I)},x.resolve=function(I){return new x(function(B){B(I)})},x.reject=function(I){return new x(function(B,D){D(I)})},["all","race"].forEach(function(I){x[I]=function(B){return new x(function(D,R){Promise[I](B.map(function(U){return U&&U.constructor&&U.constructor.__typeson__type__==="TypesonPromise"?U.p:U})).then(D,R)})}});var j={},k=j.toString,N={}.hasOwnProperty,C=Object.getPrototypeOf,$=N.toString;function v(I,B){return W(I)&&typeof I.then=="function"&&(!B||typeof I.catch=="function")}function d(I){return k.call(I).slice(8,-1)}function P(I,B){if(!I||n(I)!=="object")return!1;var D=C(I);if(!D)return B===null;var R=N.call(D,"constructor")&&D.constructor;return typeof R!="function"?B===null:B===R||B!==null&&$.call(R)===$.call(B)||typeof B=="function"&&typeof R.__typeson__type__=="string"&&R.__typeson__type__===B.__typeson__type__}function T(I){if(!I||d(I)!=="Object")return!1;var B=C(I);return B?P(I,Object):!0}function Y(I){if(!I||d(I)!=="Object")return!1;var B=C(I);return B?P(I,Object)||Y(B):!0}function W(I){return I&&n(I)==="object"}function oe(I){return I.replace(/~/g,"~0").replace(/\./g,"~1")}function re(I){return I.replace(/~1/g,".").replace(/~0/g,"~")}function ie(I,B){if(B==="")return I;var D=B.indexOf(".");if(D>-1){var R=I[re(B.slice(0,D))];return R===void 0?void 0:ie(R,B.slice(D+1))}return I[re(B)]}function se(I,B,D){if(B==="")return D;var R=B.indexOf(".");if(R>-1){var U=I[re(B.slice(0,R))];return se(U,B.slice(R+1),D)}return I[re(B)]=D,I}function Pe(I){return I===null?"null":Array.isArray(I)?"array":n(I)}var ke=Object.keys,Re=Array.isArray,Fe={}.hasOwnProperty,Ze=["type","replaced","iterateIn","iterateUnsetNumeric"];function H(I,B){if(I.keypath==="")return-1;var D=I.keypath.match(/\./g)||0,R=B.keypath.match(/\./g)||0;return D&&(D=D.length),R&&(R=R.length),D>R?-1:D<R?1:I.keypath<B.keypath?-1:I.keypath>B.keypath}var ve=function(){function I(B){o(this,I),this.options=B,this.plainObjectReplacers=[],this.nonplainObjectReplacers=[],this.revivers={},this.types={}}return c(I,[{key:"stringify",value:function(D,R,U,de){de=f({},this.options,{},de,{stringification:!0});var ye=this.encapsulate(D,null,de);return Re(ye)?JSON.stringify(ye[0],R,U):ye.then(function(fe){return JSON.stringify(fe,R,U)})}},{key:"stringifySync",value:function(D,R,U,de){return this.stringify(D,R,U,f({throwOnBadSyncType:!0},de,{sync:!0}))}},{key:"stringifyAsync",value:function(D,R,U,de){return this.stringify(D,R,U,f({throwOnBadSyncType:!0},de,{sync:!1}))}},{key:"parse",value:function(D,R,U){return U=f({},this.options,{},U,{parse:!0}),this.revive(JSON.parse(D,R),U)}},{key:"parseSync",value:function(D,R,U){return this.parse(D,R,f({throwOnBadSyncType:!0},U,{sync:!0}))}},{key:"parseAsync",value:function(D,R,U){return this.parse(D,R,f({throwOnBadSyncType:!0},U,{sync:!1}))}},{key:"specialTypeNames",value:function(D,R){var U=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return U.returnTypeNames=!0,this.encapsulate(D,R,U)}},{key:"rootTypeName",value:function(D,R){var U=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return U.iterateNone=!0,this.encapsulate(D,R,U)}},{key:"encapsulate",value:function(D,R,U){U=f({sync:!0},this.options,{},U);var de=U,ye=de.sync,fe=this,G={},Me=[],Xe=[],et=[],ft="cyclic"in U?U.cyclic:!0,dt=U,xt=dt.encapsulateObserver,tt=we("",D,ft,R||{},et);function ht(z){var y=Object.values(G);if(U.iterateNone)return y.length?y[0]:I.getJSONType(z);if(y.length){if(U.returnTypeNames)return m(new Set(y));!z||!T(z)||Fe.call(z,"$types")?z={$:z,$types:{$:G}}:z.$types=G}else W(z)&&Fe.call(z,"$types")&&(z={$:z,$types:!0});return U.returnTypeNames?!1:z}function Ie(z,y){return be.apply(this,arguments)}function be(){return be=i(regeneratorRuntime.mark(function z(y,u){var p;return regeneratorRuntime.wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return O.next=2,Promise.all(u.map(function(L){return L[1].p}));case 2:return p=O.sent,O.next=5,Promise.all(p.map(function(){var L=i(regeneratorRuntime.mark(function F(J){var M,ee,ce,ue,ge,pe,he,xe,Ee,ae,We,V,K,Z;return regeneratorRuntime.wrap(function(te){for(;;)switch(te.prev=te.next){case 0:if(M=[],ee=u.splice(0,1),ce=h(ee,1),ue=ce[0],ge=h(ue,7),pe=ge[0],he=ge[2],xe=ge[3],Ee=ge[4],ae=ge[5],We=ge[6],V=we(pe,J,he,xe,M,!0,We),K=P(V,x),!(pe&&K)){te.next=11;break}return te.next=8,V.p;case 8:return Z=te.sent,Ee[ae]=Z,te.abrupt("return",Ie(y,M));case 11:return pe?Ee[ae]=V:K?y=V.p:y=V,te.abrupt("return",Ie(y,M));case 13:case"end":return te.stop()}},F)}));return function(F){return L.apply(this,arguments)}}()));case 5:return O.abrupt("return",y);case 6:case"end":return O.stop()}},z)})),be.apply(this,arguments)}function me(z,y,u){Object.assign(z,y);var p=Ze.map(function(_){var O=z[_];return delete z[_],O});u(),Ze.forEach(function(_,O){z[_]=p[O]})}function we(z,y,u,p,_,O,L){var F,J={},M=n(y),ee=xt?function(K){var Z=L||p.type||I.getJSONType(y);xt(Object.assign(K||J,{keypath:z,value:y,cyclic:u,stateObj:p,promisesData:_,resolvingTypesonPromise:O,awaitingTypesonPromise:P(y,x)},{type:Z}))}:null;if(["string","boolean","number","undefined"].includes(M))return y===void 0||M==="number"&&(isNaN(y)||y===-1/0||y===1/0)?(p.replaced?F=y:F=Ne(z,y,p,_,!1,O,ee),F!==y&&(J={replaced:F})):F=y,ee&&ee(),F;if(y===null)return ee&&ee(),y;if(u&&!p.iterateIn&&!p.iterateUnsetNumeric&&y&&n(y)==="object"){var ce=Me.indexOf(y);if(ce<0)u===!0&&(Me.push(y),Xe.push(z));else return G[z]="#",ee&&ee({cyclicKeypath:Xe[ce]}),"#"+Xe[ce]}var ue=T(y),ge=Re(y),pe=(ue||ge)&&(!fe.plainObjectReplacers.length||p.replaced)||p.iterateIn?y:Ne(z,y,p,_,ue||ge,null,ee),he;if(pe!==y?(F=pe,J={replaced:pe}):z===""&&P(y,x)?(_.push([z,y,u,p,void 0,void 0,p.type]),F=y):ge&&p.iterateIn!=="object"||p.iterateIn==="array"?(he=new Array(y.length),J={clone:he}):!["function","symbol"].includes(n(y))&&!("toJSON"in y)&&!P(y,x)&&!P(y,Promise)&&!P(y,ArrayBuffer)||ue||p.iterateIn==="object"?(he={},p.addLength&&(he.length=y.length),J={clone:he}):F=y,ee&&ee(),U.iterateNone)return he||F;if(!he)return F;if(p.iterateIn){var xe=function(Z){var X={ownKeys:Fe.call(y,Z)};me(p,X,function(){var te=z+(z?".":"")+oe(Z),le=we(te,y[Z],!!u,p,_,O);P(le,x)?_.push([te,le,!!u,p,he,Z,p.type]):le!==void 0&&(he[Z]=le)})};for(var Ee in y)xe(Ee);ee&&ee({endIterateIn:!0,end:!0})}else ke(y).forEach(function(K){var Z=z+(z?".":"")+oe(K),X={ownKeys:!0};me(p,X,function(){var te=we(Z,y[K],!!u,p,_,O);P(te,x)?_.push([Z,te,!!u,p,he,K,p.type]):te!==void 0&&(he[K]=te)})}),ee&&ee({endIterateOwn:!0,end:!0});if(p.iterateUnsetNumeric){for(var ae=y.length,We=function(Z){if(!(Z in y)){var X=z+(z?".":"")+Z,te={ownKeys:!1};me(p,te,function(){var le=we(X,void 0,!!u,p,_,O);P(le,x)?_.push([X,le,!!u,p,he,Z,p.type]):le!==void 0&&(he[Z]=le)})}},V=0;V<ae;V++)We(V);ee&&ee({endIterateUnsetNumeric:!0,end:!0})}return he}function Ne(z,y,u,p,_,O,L){for(var F=_?fe.plainObjectReplacers:fe.nonplainObjectReplacers,J=F.length;J--;){var M=F[J];if(M.test(y,u)){var ee=M.type;if(fe.revivers[ee]){var ce=G[z];G[z]=ce?[ee].concat(ce):ee}if(Object.assign(u,{type:ee,replaced:!0}),(ye||!M.replaceAsync)&&!M.replace)return L&&L({typeDetected:!0}),we(z,y,ft&&"readonly",u,p,O,ee);L&&L({replacing:!0});var ue=ye||!M.replaceAsync?"replace":"replaceAsync";return we(z,M[ue](y,u),ft&&"readonly",u,p,O,ee)}}return y}return et.length?ye&&U.throwOnBadSyncType?function(){throw new TypeError("Sync method requested but async result obtained")}():Promise.resolve(Ie(tt,et)).then(ht):!ye&&U.throwOnBadSyncType?function(){throw new TypeError("Async method requested but sync result obtained")}():U.stringification&&ye?[ht(tt)]:ye?ht(tt):Promise.resolve(ht(tt))}},{key:"encapsulateSync",value:function(D,R,U){return this.encapsulate(D,R,f({throwOnBadSyncType:!0},U,{sync:!0}))}},{key:"encapsulateAsync",value:function(D,R,U){return this.encapsulate(D,R,f({throwOnBadSyncType:!0},U,{sync:!1}))}},{key:"revive",value:function(D,R){var U=D&&D.$types;if(!U)return D;if(U===!0)return D.$;R=f({sync:!0},this.options,{},R);var de=R,ye=de.sync,fe=[],G={},Me=!0;U.$&&T(U.$)&&(D=D.$,U=U.$,Me=!1);var Xe=this;function et(be,me){var we=Xe.revivers[be]||[],Ne=h(we,1),z=Ne[0];if(!z)throw new Error("Unregistered type: "+be);return ye&&!("revive"in z)?me:z[ye&&z.revive?"revive":!ye&&z.reviveAsync?"reviveAsync":"revive"](me,G)}function ft(){var be=[];if(Object.entries(U).forEach(function(me){var we=h(me,2),Ne=we[0],z=we[1];z!=="#"&&[].concat(z).forEach(function(y){var u=Xe.revivers[y]||[null,{}],p=h(u,2),_=p[1].plain;_&&(be.push({keypath:Ne,type:y}),delete U[Ne])})}),!!be.length)return be.sort(H).reduce(function me(we,Ne){var z=Ne.keypath,y=Ne.type;if(v(we))return we.then(function(_){return me(_,{keypath:z,type:y})});var u=ie(D,z);if(u=et(y,u),P(u,x))return u.then(function(_){var O=se(D,z,_);O===_&&(D=O)});var p=se(D,z,u);p===u&&(D=p)},void 0)}var dt=[];function xt(be,me,we,Ne,z){if(!(Me&&be==="$types")){var y=U[be],u=Re(me);if(u||T(me)){var p=u?new Array(me.length):{};for(ke(me).forEach(function(ce){var ue=xt(be+(be?".":"")+oe(ce),me[ce],we||p,p,ce),ge=function(he){return P(he,Ue)?p[ce]=void 0:he!==void 0&&(p[ce]=he),he};P(ue,x)?dt.push(ue.then(function(pe){return ge(pe)})):ge(ue)}),me=p;fe.length;){var _=h(fe[0],4),O=_[0],L=_[1],F=_[2],J=_[3],M=ie(O,L);if(M!==void 0)F[J]=M;else break;fe.splice(0,1)}}if(!y)return me;if(y==="#"){var ee=ie(we,me.slice(1));return ee===void 0&&fe.push([we,me.slice(1),Ne,z]),ee}return[].concat(y).reduce(function ce(ue,ge){return P(ue,x)?ue.then(function(pe){return ce(pe,ge)}):et(ge,ue)},me)}}function tt(be){return P(be,Ue)?void 0:be}var ht=ft(),Ie;return P(ht,x)?Ie=ht.then(function(){return D}):(Ie=xt("",D,null),dt.length&&(Ie=x.resolve(Ie).then(function(be){return x.all([be].concat(dt))}).then(function(be){var me=h(be,1),we=me[0];return we}))),v(Ie)?ye&&R.throwOnBadSyncType?function(){throw new TypeError("Sync method requested but async result obtained")}():P(Ie,x)?Ie.p.then(tt):Ie:!ye&&R.throwOnBadSyncType?function(){throw new TypeError("Async method requested but sync result obtained")}():ye?tt(Ie):Promise.resolve(tt(Ie))}},{key:"reviveSync",value:function(D,R){return this.revive(D,f({throwOnBadSyncType:!0},R,{sync:!0}))}},{key:"reviveAsync",value:function(D,R){return this.revive(D,f({throwOnBadSyncType:!0},R,{sync:!1}))}},{key:"register",value:function(D,R){return R=R||{},[].concat(D).forEach(function U(de){var ye=this;if(Re(de))return de.map(function(fe){return U.call(ye,fe)});de&&ke(de).forEach(function(fe){if(fe==="#")throw new TypeError("# cannot be used as a type name as it is reserved for cyclic objects");if(I.JSON_TYPES.includes(fe))throw new TypeError("Plain JSON object types are reserved as type names");var G=de[fe],Me=G&&G.testPlainObjects?this.plainObjectReplacers:this.nonplainObjectReplacers,Xe=Me.filter(function(we){return we.type===fe});if(Xe.length&&(Me.splice(Me.indexOf(Xe[0]),1),delete this.revivers[fe],delete this.types[fe]),typeof G=="function"){var et=G;G={test:function(Ne){return Ne&&Ne.constructor===et},replace:function(Ne){return f({},Ne)},revive:function(Ne){return Object.assign(Object.create(et.prototype),Ne)}}}else if(Re(G)){var ft=G,dt=h(ft,3),xt=dt[0],tt=dt[1],ht=dt[2];G={test:xt,replace:tt,revive:ht}}if(!(!G||!G.test)){var Ie={type:fe,test:G.test.bind(G)};G.replace&&(Ie.replace=G.replace.bind(G)),G.replaceAsync&&(Ie.replaceAsync=G.replaceAsync.bind(G));var be=typeof R.fallback=="number"?R.fallback:R.fallback?0:1/0;if(G.testPlainObjects?this.plainObjectReplacers.splice(be,0,Ie):this.nonplainObjectReplacers.splice(be,0,Ie),G.revive||G.reviveAsync){var me={};G.revive&&(me.revive=G.revive.bind(G)),G.reviveAsync&&(me.reviveAsync=G.reviveAsync.bind(G)),this.revivers[fe]=[me,{plain:G.testPlainObjects}]}this.types[fe]=G}},this)},this),this}}]),I}(),Ue=function I(){o(this,I)};return Ue.__typeson__type__="TypesonUndefined",ve.Undefined=Ue,ve.Promise=x,ve.isThenable=v,ve.toStringTag=d,ve.hasConstructorOf=P,ve.isObject=W,ve.isPlainObject=T,ve.isUserObject=Y,ve.escapeKeyPathComponent=oe,ve.unescapeKeyPathComponent=re,ve.getByKeyPath=ie,ve.getJSONType=Pe,ve.JSON_TYPES=["null","boolean","number","string","array","object"],ve})}),cu=no(function(e,t){(function(n,r){e.exports=r()})(Bi,function(){function n(y){return(n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(u){return typeof u}:function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u})(y)}function r(y,u){if(!(y instanceof u))throw new TypeError("Cannot call a class as a function")}function i(y,u){for(var p=0;p<u.length;p++){var _=u[p];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(y,_.key,_)}}function o(y,u,p){return u in y?Object.defineProperty(y,u,{value:p,enumerable:!0,configurable:!0,writable:!0}):y[u]=p,y}function s(y,u){var p=Object.keys(y);if(Object.getOwnPropertySymbols){var _=Object.getOwnPropertySymbols(y);u&&(_=_.filter(function(O){return Object.getOwnPropertyDescriptor(y,O).enumerable})),p.push.apply(p,_)}return p}function c(y){return function(p){if(Array.isArray(p))return l(p)}(y)||function(p){if(typeof Symbol<"u"&&Symbol.iterator in Object(p))return Array.from(p)}(y)||function(p,_){if(p){if(typeof p=="string")return l(p,_);var O=Object.prototype.toString.call(p).slice(8,-1);if(O==="Object"&&p.constructor&&(O=p.constructor.name),O==="Map"||O==="Set")return Array.from(p);if(O==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(O))return l(p,_)}}(y)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function l(y,u){(u==null||u>y.length)&&(u=y.length);for(var p=0,_=new Array(u);p<u;p++)_[p]=y[p];return _}function a(y){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(p){return typeof p}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p})(y)}function f(y,u){if(!(y instanceof u))throw new TypeError("Cannot call a class as a function")}function h(y,u){for(var p=0;p<u.length;p++){var _=u[p];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(y,_.key,_)}}function m(y,u,p){return u in y?Object.defineProperty(y,u,{value:p,enumerable:!0,configurable:!0,writable:!0}):y[u]=p,y}function g(y,u){var p=Object.keys(y);if(Object.getOwnPropertySymbols){var _=Object.getOwnPropertySymbols(y);u&&(_=_.filter(function(O){return Object.getOwnPropertyDescriptor(y,O).enumerable})),p.push.apply(p,_)}return p}function w(y){for(var u=1;u<arguments.length;u++){var p=arguments[u]!=null?arguments[u]:{};u%2?g(Object(p),!0).forEach(function(_){m(y,_,p[_])}):Object.getOwnPropertyDescriptors?Object.defineProperties(y,Object.getOwnPropertyDescriptors(p)):g(Object(p)).forEach(function(_){Object.defineProperty(y,_,Object.getOwnPropertyDescriptor(p,_))})}return y}function b(y,u){return function(_){if(Array.isArray(_))return _}(y)||function(_,O){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(_)))){var L=[],F=!0,J=!1,M=void 0;try{for(var ee,ce=_[Symbol.iterator]();!(F=(ee=ce.next()).done)&&(L.push(ee.value),!O||L.length!==O);F=!0);}catch(ue){J=!0,M=ue}finally{try{F||ce.return==null||ce.return()}finally{if(J)throw M}}return L}}(y,u)||E(y,u)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function S(y){return function(p){if(Array.isArray(p))return A(p)}(y)||function(p){if(typeof Symbol<"u"&&Symbol.iterator in Object(p))return Array.from(p)}(y)||E(y)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function E(y,u){if(y){if(typeof y=="string")return A(y,u);var p=Object.prototype.toString.call(y).slice(8,-1);return p==="Object"&&y.constructor&&(p=y.constructor.name),p==="Map"||p==="Set"?Array.from(y):p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p)?A(y,u):void 0}}function A(y,u){(u==null||u>y.length)&&(u=y.length);for(var p=0,_=new Array(u);p<u;p++)_[p]=y[p];return _}var x=function y(u){f(this,y),this.p=new Promise(u)};x.__typeson__type__="TypesonPromise",typeof Symbol<"u"&&(x.prototype[Symbol.toStringTag]="TypesonPromise"),x.prototype.then=function(y,u){var p=this;return new x(function(_,O){p.p.then(function(L){_(y?y(L):L)}).catch(function(L){return u?u(L):Promise.reject(L)}).then(_,O)})},x.prototype.catch=function(y){return this.then(null,y)},x.resolve=function(y){return new x(function(u){u(y)})},x.reject=function(y){return new x(function(u,p){p(y)})},["all","race"].forEach(function(y){x[y]=function(u){return new x(function(p,_){Promise[y](u.map(function(O){return O&&O.constructor&&O.constructor.__typeson__type__==="TypesonPromise"?O.p:O})).then(p,_)})}});var j={}.toString,k={}.hasOwnProperty,N=Object.getPrototypeOf,C=k.toString;function $(y,u){return T(y)&&typeof y.then=="function"&&(!u||typeof y.catch=="function")}function v(y){return j.call(y).slice(8,-1)}function d(y,u){if(!y||a(y)!=="object")return!1;var p=N(y);if(!p)return u===null;var _=k.call(p,"constructor")&&p.constructor;return typeof _!="function"?u===null:u===_||u!==null&&C.call(_)===C.call(u)||typeof u=="function"&&typeof _.__typeson__type__=="string"&&_.__typeson__type__===u.__typeson__type__}function P(y){return!(!y||v(y)!=="Object")&&(!N(y)||d(y,Object))}function T(y){return y&&a(y)==="object"}function Y(y){return y.replace(/~/g,"~0").replace(/\./g,"~1")}function W(y){return y.replace(/~1/g,".").replace(/~0/g,"~")}function oe(y,u){if(u==="")return y;var p=u.indexOf(".");if(p>-1){var _=y[W(u.slice(0,p))];return _===void 0?void 0:oe(_,u.slice(p+1))}return y[W(u)]}function re(y,u,p){if(u==="")return p;var _=u.indexOf(".");return _>-1?re(y[W(u.slice(0,_))],u.slice(_+1),p):(y[W(u)]=p,y)}function ie(y,u,p){return p?u?u(y):y:(y&&y.then||(y=Promise.resolve(y)),u?y.then(u):y)}var se=Object.keys,Pe=Array.isArray,ke={}.hasOwnProperty,Re=["type","replaced","iterateIn","iterateUnsetNumeric"];function Fe(y){return function(){for(var u=[],p=0;p<arguments.length;p++)u[p]=arguments[p];try{return Promise.resolve(y.apply(this,u))}catch(_){return Promise.reject(_)}}}function Ze(y,u){if(y.keypath==="")return-1;var p=y.keypath.match(/\./g)||0,_=u.keypath.match(/\./g)||0;return p&&(p=p.length),_&&(_=_.length),p>_?-1:p<_?1:y.keypath<u.keypath?-1:y.keypath>u.keypath}var H=function(){function y(u){f(this,y),this.options=u,this.plainObjectReplacers=[],this.nonplainObjectReplacers=[],this.revivers={},this.types={}}return function(p,_,O){return _&&h(p.prototype,_),O&&h(p,O),p}(y,[{key:"stringify",value:function(p,_,O,L){L=w(w(w({},this.options),L),{},{stringification:!0});var F=this.encapsulate(p,null,L);return Pe(F)?JSON.stringify(F[0],_,O):F.then(function(J){return JSON.stringify(J,_,O)})}},{key:"stringifySync",value:function(p,_,O,L){return this.stringify(p,_,O,w(w({throwOnBadSyncType:!0},L),{},{sync:!0}))}},{key:"stringifyAsync",value:function(p,_,O,L){return this.stringify(p,_,O,w(w({throwOnBadSyncType:!0},L),{},{sync:!1}))}},{key:"parse",value:function(p,_,O){return O=w(w(w({},this.options),O),{},{parse:!0}),this.revive(JSON.parse(p,_),O)}},{key:"parseSync",value:function(p,_,O){return this.parse(p,_,w(w({throwOnBadSyncType:!0},O),{},{sync:!0}))}},{key:"parseAsync",value:function(p,_,O){return this.parse(p,_,w(w({throwOnBadSyncType:!0},O),{},{sync:!1}))}},{key:"specialTypeNames",value:function(p,_){var O=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return O.returnTypeNames=!0,this.encapsulate(p,_,O)}},{key:"rootTypeName",value:function(p,_){var O=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return O.iterateNone=!0,this.encapsulate(p,_,O)}},{key:"encapsulate",value:function(p,_,O){var L=Fe(function(V,K){return ie(Promise.all(K.map(function(Z){return Z[1].p})),function(Z){return ie(Promise.all(Z.map(Fe(function(X){var te=!1,le=[],nt=b(K.splice(0,1),1),je=b(nt[0],7),Qe=je[0],ct=je[2],_e=je[3],ut=je[4],Ae=je[5],rt=je[6],ze=ae(Qe,X,ct,_e,le,!0,rt),pt=d(ze,x);return function(Jr,sr){var sn=Jr();return sn&&sn.then?sn.then(sr):sr(sn)}(function(){if(Qe&&pt)return ie(ze.p,function(yt){return ut[Ae]=yt,te=!0,L(V,le)})},function(yt){return te?yt:(Qe?ut[Ae]=ze:V=pt?ze.p:ze,L(V,le))})}))),function(){return V})})}),F=(O=w(w({sync:!0},this.options),O)).sync,J=this,M={},ee=[],ce=[],ue=[],ge=!("cyclic"in O)||O.cyclic,pe=O.encapsulateObserver,he=ae("",p,ge,_||{},ue);function xe(V){var K=Object.values(M);if(O.iterateNone)return K.length?K[0]:y.getJSONType(V);if(K.length){if(O.returnTypeNames)return S(new Set(K));V&&P(V)&&!ke.call(V,"$types")?V.$types=M:V={$:V,$types:{$:M}}}else T(V)&&ke.call(V,"$types")&&(V={$:V,$types:!0});return!O.returnTypeNames&&V}function Ee(V,K,Z){Object.assign(V,K);var X=Re.map(function(te){var le=V[te];return delete V[te],le});Z(),Re.forEach(function(te,le){V[te]=X[le]})}function ae(V,K,Z,X,te,le,nt){var je,Qe={},ct=a(K),_e=pe?function(Dt){var Je=nt||X.type||y.getJSONType(K);pe(Object.assign(Dt||Qe,{keypath:V,value:K,cyclic:Z,stateObj:X,promisesData:te,resolvingTypesonPromise:le,awaitingTypesonPromise:d(K,x)},{type:Je}))}:null;if(["string","boolean","number","undefined"].includes(ct))return K===void 0||Number.isNaN(K)||K===Number.NEGATIVE_INFINITY||K===Number.POSITIVE_INFINITY?(je=X.replaced?K:We(V,K,X,te,!1,le,_e))!==K&&(Qe={replaced:je}):je=K,_e&&_e(),je;if(K===null)return _e&&_e(),K;if(Z&&!X.iterateIn&&!X.iterateUnsetNumeric&&K&&a(K)==="object"){var ut=ee.indexOf(K);if(!(ut<0))return M[V]="#",_e&&_e({cyclicKeypath:ce[ut]}),"#"+ce[ut];Z===!0&&(ee.push(K),ce.push(V))}var Ae,rt=P(K),ze=Pe(K),pt=(rt||ze)&&(!J.plainObjectReplacers.length||X.replaced)||X.iterateIn?K:We(V,K,X,te,rt||ze,null,_e);if(pt!==K?(je=pt,Qe={replaced:pt}):V===""&&d(K,x)?(te.push([V,K,Z,X,void 0,void 0,X.type]),je=K):ze&&X.iterateIn!=="object"||X.iterateIn==="array"?(Ae=new Array(K.length),Qe={clone:Ae}):(["function","symbol"].includes(a(K))||"toJSON"in K||d(K,x)||d(K,Promise)||d(K,ArrayBuffer))&&!rt&&X.iterateIn!=="object"?je=K:(Ae={},X.addLength&&(Ae.length=K.length),Qe={clone:Ae}),_e&&_e(),O.iterateNone)return Ae||je;if(!Ae)return je;if(X.iterateIn){var yt=function(Je){var Et={ownKeys:ke.call(K,Je)};Ee(X,Et,function(){var Yt=V+(V?".":"")+Y(Je),ar=ae(Yt,K[Je],!!Z,X,te,le);d(ar,x)?te.push([Yt,ar,!!Z,X,Ae,Je,X.type]):ar!==void 0&&(Ae[Je]=ar)})};for(var Jr in K)yt(Jr);_e&&_e({endIterateIn:!0,end:!0})}else se(K).forEach(function(Dt){var Je=V+(V?".":"")+Y(Dt);Ee(X,{ownKeys:!0},function(){var Et=ae(Je,K[Dt],!!Z,X,te,le);d(Et,x)?te.push([Je,Et,!!Z,X,Ae,Dt,X.type]):Et!==void 0&&(Ae[Dt]=Et)})}),_e&&_e({endIterateOwn:!0,end:!0});if(X.iterateUnsetNumeric){for(var sr=K.length,sn=function(Je){if(!(Je in K)){var Et=V+(V?".":"")+Je;Ee(X,{ownKeys:!1},function(){var Yt=ae(Et,void 0,!!Z,X,te,le);d(Yt,x)?te.push([Et,Yt,!!Z,X,Ae,Je,X.type]):Yt!==void 0&&(Ae[Je]=Yt)})}},Hr=0;Hr<sr;Hr++)sn(Hr);_e&&_e({endIterateUnsetNumeric:!0,end:!0})}return Ae}function We(V,K,Z,X,te,le,nt){for(var je=te?J.plainObjectReplacers:J.nonplainObjectReplacers,Qe=je.length;Qe--;){var ct=je[Qe];if(ct.test(K,Z)){var _e=ct.type;if(J.revivers[_e]){var ut=M[V];M[V]=ut?[_e].concat(ut):_e}return Object.assign(Z,{type:_e,replaced:!0}),!F&&ct.replaceAsync||ct.replace?(nt&&nt({replacing:!0}),ae(V,ct[F||!ct.replaceAsync?"replace":"replaceAsync"](K,Z),ge&&"readonly",Z,X,le,_e)):(nt&&nt({typeDetected:!0}),ae(V,K,ge&&"readonly",Z,X,le,_e))}}return K}return ue.length?F&&O.throwOnBadSyncType?function(){throw new TypeError("Sync method requested but async result obtained")}():Promise.resolve(L(he,ue)).then(xe):!F&&O.throwOnBadSyncType?function(){throw new TypeError("Async method requested but sync result obtained")}():O.stringification&&F?[xe(he)]:F?xe(he):Promise.resolve(xe(he))}},{key:"encapsulateSync",value:function(p,_,O){return this.encapsulate(p,_,w(w({throwOnBadSyncType:!0},O),{},{sync:!0}))}},{key:"encapsulateAsync",value:function(p,_,O){return this.encapsulate(p,_,w(w({throwOnBadSyncType:!0},O),{},{sync:!1}))}},{key:"revive",value:function(p,_){var O=p&&p.$types;if(!O)return p;if(O===!0)return p.$;var L=(_=w(w({sync:!0},this.options),_)).sync,F=[],J={},M=!0;O.$&&P(O.$)&&(p=p.$,O=O.$,M=!1);var ee=this;function ce(xe,Ee){var ae=b(ee.revivers[xe]||[],1)[0];if(!ae)throw new Error("Unregistered type: "+xe);return L&&!("revive"in ae)?Ee:ae[L&&ae.revive?"revive":!L&&ae.reviveAsync?"reviveAsync":"revive"](Ee,J)}var ue=[];function ge(xe){return d(xe,ve)?void 0:xe}var pe,he=function(){var Ee=[];if(Object.entries(O).forEach(function(ae){var We=b(ae,2),V=We[0],K=We[1];K!=="#"&&[].concat(K).forEach(function(Z){b(ee.revivers[Z]||[null,{}],2)[1].plain&&(Ee.push({keypath:V,type:Z}),delete O[V])})}),Ee.length)return Ee.sort(Ze).reduce(function ae(We,V){var K=V.keypath,Z=V.type;if($(We))return We.then(function(le){return ae(le,{keypath:K,type:Z})});var X=oe(p,K);if(d(X=ce(Z,X),x))return X.then(function(le){var nt=re(p,K,le);nt===le&&(p=nt)});var te=re(p,K,X);te===X&&(p=te)},void 0)}();return d(he,x)?pe=he.then(function(){return p}):(pe=function xe(Ee,ae,We,V,K){if(!M||Ee!=="$types"){var Z=O[Ee],X=Pe(ae);if(X||P(ae)){var te=X?new Array(ae.length):{};for(se(ae).forEach(function(Ae){var rt=xe(Ee+(Ee?".":"")+Y(Ae),ae[Ae],We||te,te,Ae),ze=function(yt){return d(yt,ve)?te[Ae]=void 0:yt!==void 0&&(te[Ae]=yt),yt};d(rt,x)?ue.push(rt.then(function(pt){return ze(pt)})):ze(rt)}),ae=te;F.length;){var le=b(F[0],4),nt=le[0],je=le[1],Qe=le[2],ct=le[3],_e=oe(nt,je);if(_e===void 0)break;Qe[ct]=_e,F.splice(0,1)}}if(!Z)return ae;if(Z==="#"){var ut=oe(We,ae.slice(1));return ut===void 0&&F.push([We,ae.slice(1),V,K]),ut}return[].concat(Z).reduce(function Ae(rt,ze){return d(rt,x)?rt.then(function(pt){return Ae(pt,ze)}):ce(ze,rt)},ae)}}("",p,null),ue.length&&(pe=x.resolve(pe).then(function(xe){return x.all([xe].concat(ue))}).then(function(xe){return b(xe,1)[0]}))),$(pe)?L&&_.throwOnBadSyncType?function(){throw new TypeError("Sync method requested but async result obtained")}():d(pe,x)?pe.p.then(ge):pe:!L&&_.throwOnBadSyncType?function(){throw new TypeError("Async method requested but sync result obtained")}():L?ge(pe):Promise.resolve(ge(pe))}},{key:"reviveSync",value:function(p,_){return this.revive(p,w(w({throwOnBadSyncType:!0},_),{},{sync:!0}))}},{key:"reviveAsync",value:function(p,_){return this.revive(p,w(w({throwOnBadSyncType:!0},_),{},{sync:!1}))}},{key:"register",value:function(p,_){return _=_||{},[].concat(p).forEach(function O(L){var F=this;if(Pe(L))return L.map(function(J){return O.call(F,J)});L&&se(L).forEach(function(J){if(J==="#")throw new TypeError("# cannot be used as a type name as it is reserved for cyclic objects");if(y.JSON_TYPES.includes(J))throw new TypeError("Plain JSON object types are reserved as type names");var M=L[J],ee=M&&M.testPlainObjects?this.plainObjectReplacers:this.nonplainObjectReplacers,ce=ee.filter(function(Ee){return Ee.type===J});if(ce.length&&(ee.splice(ee.indexOf(ce[0]),1),delete this.revivers[J],delete this.types[J]),typeof M=="function"){var ue=M;M={test:function(ae){return ae&&ae.constructor===ue},replace:function(ae){return w({},ae)},revive:function(ae){return Object.assign(Object.create(ue.prototype),ae)}}}else if(Pe(M)){var ge=b(M,3);M={test:ge[0],replace:ge[1],revive:ge[2]}}if(M&&M.test){var pe={type:J,test:M.test.bind(M)};M.replace&&(pe.replace=M.replace.bind(M)),M.replaceAsync&&(pe.replaceAsync=M.replaceAsync.bind(M));var he=typeof _.fallback=="number"?_.fallback:_.fallback?0:Number.POSITIVE_INFINITY;if(M.testPlainObjects?this.plainObjectReplacers.splice(he,0,pe):this.nonplainObjectReplacers.splice(he,0,pe),M.revive||M.reviveAsync){var xe={};M.revive&&(xe.revive=M.revive.bind(M)),M.reviveAsync&&(xe.reviveAsync=M.reviveAsync.bind(M)),this.revivers[J]=[xe,{plain:M.testPlainObjects}]}this.types[J]=M}},this)},this),this}}]),y}(),ve=function y(){f(this,y)};ve.__typeson__type__="TypesonUndefined",H.Undefined=ve,H.Promise=x,H.isThenable=$,H.toStringTag=v,H.hasConstructorOf=d,H.isObject=T,H.isPlainObject=P,H.isUserObject=function y(u){if(!u||v(u)!=="Object")return!1;var p=N(u);return!p||d(u,Object)||y(p)},H.escapeKeyPathComponent=Y,H.unescapeKeyPathComponent=W,H.getByKeyPath=oe,H.getJSONType=function(u){return u===null?"null":Array.isArray(u)?"array":a(u)},H.JSON_TYPES=["null","boolean","number","string","array","object"];for(var Ue={userObject:{test:function(u,p){return H.isUserObject(u)},replace:function(u){return function(_){for(var O=1;O<arguments.length;O++){var L=arguments[O]!=null?arguments[O]:{};O%2?s(Object(L),!0).forEach(function(F){o(_,F,L[F])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_,Object.getOwnPropertyDescriptors(L)):s(Object(L)).forEach(function(F){Object.defineProperty(_,F,Object.getOwnPropertyDescriptor(L,F))})}return _}({},u)},revive:function(u){return u}}},I=[{arrayNonindexKeys:{testPlainObjects:!0,test:function(u,p){return!!Array.isArray(u)&&(Object.keys(u).some(function(_){return String(Number.parseInt(_))!==_})&&(p.iterateIn="object",p.addLength=!0),!0)},replace:function(u,p){return p.iterateUnsetNumeric=!0,u},revive:function(u){if(Array.isArray(u))return u;var p=[];return Object.keys(u).forEach(function(_){var O=u[_];p[_]=O}),p}}},{sparseUndefined:{test:function(u,p){return u===void 0&&p.ownKeys===!1},replace:function(u){return 0},revive:function(u){}}}],B={undef:{test:function(u,p){return u===void 0&&(p.ownKeys||!("ownKeys"in p))},replace:function(u){return 0},revive:function(u){return new H.Undefined}}},D={StringObject:{test:function(u){return H.toStringTag(u)==="String"&&n(u)==="object"},replace:function(u){return String(u)},revive:function(u){return new String(u)}},BooleanObject:{test:function(u){return H.toStringTag(u)==="Boolean"&&n(u)==="object"},replace:function(u){return!!u},revive:function(u){return new Boolean(u)}},NumberObject:{test:function(u){return H.toStringTag(u)==="Number"&&n(u)==="object"},replace:function(u){return Number(u)},revive:function(u){return new Number(u)}}},R=[{nan:{test:function(u){return Number.isNaN(u)},replace:function(u){return"NaN"},revive:function(u){return Number.NaN}}},{infinity:{test:function(u){return u===Number.POSITIVE_INFINITY},replace:function(u){return"Infinity"},revive:function(u){return Number.POSITIVE_INFINITY}}},{negativeInfinity:{test:function(u){return u===Number.NEGATIVE_INFINITY},replace:function(u){return"-Infinity"},revive:function(u){return Number.NEGATIVE_INFINITY}}}],U={date:{test:function(u){return H.toStringTag(u)==="Date"},replace:function(u){var p=u.getTime();return Number.isNaN(p)?"NaN":p},revive:function(u){return u==="NaN"?new Date(Number.NaN):new Date(u)}}},de={regexp:{test:function(u){return H.toStringTag(u)==="RegExp"},replace:function(u){return{source:u.source,flags:(u.global?"g":"")+(u.ignoreCase?"i":"")+(u.multiline?"m":"")+(u.sticky?"y":"")+(u.unicode?"u":"")}},revive:function(u){var p=u.source,_=u.flags;return new RegExp(p,_)}}},ye={map:{test:function(u){return H.toStringTag(u)==="Map"},replace:function(u){return c(u.entries())},revive:function(u){return new Map(u)}}},fe={set:{test:function(u){return H.toStringTag(u)==="Set"},replace:function(u){return c(u.values())},revive:function(u){return new Set(u)}}},G="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Me=new Uint8Array(256),Xe=0;Xe<G.length;Xe++)Me[G.charCodeAt(Xe)]=Xe;var et=function(u,p,_){_==null&&(_=u.byteLength);for(var O=new Uint8Array(u,p||0,_),L=O.length,F="",J=0;J<L;J+=3)F+=G[O[J]>>2],F+=G[(3&O[J])<<4|O[J+1]>>4],F+=G[(15&O[J+1])<<2|O[J+2]>>6],F+=G[63&O[J+2]];return L%3==2?F=F.slice(0,-1)+"=":L%3==1&&(F=F.slice(0,-2)+"=="),F},ft=function(u){var p,_,O,L,F=u.length,J=.75*u.length,M=0;u[u.length-1]==="="&&(J--,u[u.length-2]==="="&&J--);for(var ee=new ArrayBuffer(J),ce=new Uint8Array(ee),ue=0;ue<F;ue+=4)p=Me[u.charCodeAt(ue)],_=Me[u.charCodeAt(ue+1)],O=Me[u.charCodeAt(ue+2)],L=Me[u.charCodeAt(ue+3)],ce[M++]=p<<2|_>>4,ce[M++]=(15&_)<<4|O>>2,ce[M++]=(3&O)<<6|63&L;return ee},dt={arraybuffer:{test:function(u){return H.toStringTag(u)==="ArrayBuffer"},replace:function(u,p){p.buffers||(p.buffers=[]);var _=p.buffers.indexOf(u);return _>-1?{index:_}:(p.buffers.push(u),et(u))},revive:function(u,p){if(p.buffers||(p.buffers=[]),n(u)==="object")return p.buffers[u.index];var _=ft(u);return p.buffers.push(_),_}}},xt=typeof self>"u"?Bi:self,tt={};["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array"].forEach(function(y){var u=y,p=xt[u];p&&(tt[y.toLowerCase()]={test:function(O){return H.toStringTag(O)===u},replace:function(O,L){var F=O.buffer,J=O.byteOffset,M=O.length;L.buffers||(L.buffers=[]);var ee=L.buffers.indexOf(F);return ee>-1?{index:ee,byteOffset:J,length:M}:(L.buffers.push(F),{encoded:et(F),byteOffset:J,length:M})},revive:function(O,L){L.buffers||(L.buffers=[]);var F,J=O.byteOffset,M=O.length,ee=O.encoded,ce=O.index;return"index"in O?F=L.buffers[ce]:(F=ft(ee),L.buffers.push(F)),new p(F,J,M)}})});var ht={dataview:{test:function(u){return H.toStringTag(u)==="DataView"},replace:function(u,p){var _=u.buffer,O=u.byteOffset,L=u.byteLength;p.buffers||(p.buffers=[]);var F=p.buffers.indexOf(_);return F>-1?{index:F,byteOffset:O,byteLength:L}:(p.buffers.push(_),{encoded:et(_),byteOffset:O,byteLength:L})},revive:function(u,p){p.buffers||(p.buffers=[]);var _,O=u.byteOffset,L=u.byteLength,F=u.encoded,J=u.index;return"index"in u?_=p.buffers[J]:(_=ft(F),p.buffers.push(_)),new DataView(_,O,L)}}},Ie={IntlCollator:{test:function(u){return H.hasConstructorOf(u,Intl.Collator)},replace:function(u){return u.resolvedOptions()},revive:function(u){return new Intl.Collator(u.locale,u)}},IntlDateTimeFormat:{test:function(u){return H.hasConstructorOf(u,Intl.DateTimeFormat)},replace:function(u){return u.resolvedOptions()},revive:function(u){return new Intl.DateTimeFormat(u.locale,u)}},IntlNumberFormat:{test:function(u){return H.hasConstructorOf(u,Intl.NumberFormat)},replace:function(u){return u.resolvedOptions()},revive:function(u){return new Intl.NumberFormat(u.locale,u)}}};function be(y){for(var u=new Uint8Array(y.length),p=0;p<y.length;p++)u[p]=y.charCodeAt(p);return u.buffer}var me={file:{test:function(u){return H.toStringTag(u)==="File"},replace:function(u){var p=new XMLHttpRequest;if(p.overrideMimeType("text/plain; charset=x-user-defined"),p.open("GET",URL.createObjectURL(u),!1),p.send(),p.status!==200&&p.status!==0)throw new Error("Bad File access: "+p.status);return{type:u.type,stringContents:p.responseText,name:u.name,lastModified:u.lastModified}},revive:function(u){var p=u.name,_=u.type,O=u.stringContents,L=u.lastModified;return new File([be(O)],p,{type:_,lastModified:L})},replaceAsync:function(u){return new H.Promise(function(p,_){var O=new FileReader;O.addEventListener("load",function(){p({type:u.type,stringContents:O.result,name:u.name,lastModified:u.lastModified})}),O.addEventListener("error",function(){_(O.error)}),O.readAsBinaryString(u)})}}},we={bigint:{test:function(u){return typeof u=="bigint"},replace:function(u){return String(u)},revive:function(u){return BigInt(u)}}},Ne={bigintObject:{test:function(u){return n(u)==="object"&&H.hasConstructorOf(u,BigInt)},replace:function(u){return String(u)},revive:function(u){return new Object(BigInt(u))}}},z={cryptokey:{test:function(u){return H.toStringTag(u)==="CryptoKey"&&u.extractable},replaceAsync:function(u){return new H.Promise(function(p,_){crypto.subtle.exportKey("jwk",u).catch(function(O){_(O)}).then(function(O){p({jwk:O,algorithm:u.algorithm,usages:u.usages})})})},revive:function(u){var p=u.jwk,_=u.algorithm,O=u.usages;return crypto.subtle.importKey("jwk",p,_,!0,O)}}};return[Ue,B,I,D,R,U,de,{imagedata:{test:function(u){return H.toStringTag(u)==="ImageData"},replace:function(u){return{array:c(u.data),width:u.width,height:u.height}},revive:function(u){return new ImageData(new Uint8ClampedArray(u.array),u.width,u.height)}}},{imagebitmap:{test:function(u){return H.toStringTag(u)==="ImageBitmap"||u&&u.dataset&&u.dataset.toStringTag==="ImageBitmap"},replace:function(u){var p=document.createElement("canvas");return p.getContext("2d").drawImage(u,0,0),p.toDataURL()},revive:function(u){var p=document.createElement("canvas"),_=p.getContext("2d"),O=document.createElement("img");return O.addEventListener("load",function(){_.drawImage(O,0,0)}),O.src=u,p},reviveAsync:function(u){var p=document.createElement("canvas"),_=p.getContext("2d"),O=document.createElement("img");return O.addEventListener("load",function(){_.drawImage(O,0,0)}),O.src=u,createImageBitmap(p)}}},me,{file:me.file,filelist:{test:function(u){return H.toStringTag(u)==="FileList"},replace:function(u){for(var p=[],_=0;_<u.length;_++)p[_]=u.item(_);return p},revive:function(u){return new(function(){function p(){r(this,p),this._files=arguments[0],this.length=this._files.length}return function(O,L,F){return L&&i(O.prototype,L),F&&i(O,F),O}(p,[{key:"item",value:function(O){return this._files[O]}},{key:Symbol.toStringTag,get:function(){return"FileList"}}]),p}())(u)}}},{blob:{test:function(u){return H.toStringTag(u)==="Blob"},replace:function(u){var p=new XMLHttpRequest;if(p.overrideMimeType("text/plain; charset=x-user-defined"),p.open("GET",URL.createObjectURL(u),!1),p.send(),p.status!==200&&p.status!==0)throw new Error("Bad Blob access: "+p.status);return{type:u.type,stringContents:p.responseText}},revive:function(u){var p=u.type,_=u.stringContents;return new Blob([be(_)],{type:p})},replaceAsync:function(u){return new H.Promise(function(p,_){var O=new FileReader;O.addEventListener("load",function(){p({type:u.type,stringContents:O.result})}),O.addEventListener("error",function(){_(O.error)}),O.readAsBinaryString(u)})}}}].concat(typeof Map=="function"?ye:[],typeof Set=="function"?fe:[],typeof ArrayBuffer=="function"?dt:[],typeof Uint8Array=="function"?tt:[],typeof DataView=="function"?ht:[],typeof Intl<"u"?Ie:[],typeof crypto<"u"?z:[],typeof BigInt<"u"?[we,Ne]:[])})}),hn="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Nn=new Uint8Array(256);for(var gr=0;gr<hn.length;gr++)Nn[hn.codePointAt(gr)]=gr;var Di=function(t,n,r){r==null&&(r=t.byteLength);for(var i=new Uint8Array(t,n||0,r),o=i.length,s="",c=0;c<o;c+=3)s+=hn[i[c]>>2],s+=hn[(i[c]&3)<<4|i[c+1]>>4],s+=hn[(i[c+1]&15)<<2|i[c+2]>>6],s+=hn[i[c+2]&63];return o%3===2?s=s.slice(0,-1)+"=":o%3===1&&(s=s.slice(0,-2)+"=="),s},Ms=function(t){var n=t.length,r=t.length*.75,i=0,o,s,c,l;t[t.length-1]==="="&&(r--,t[t.length-2]==="="&&r--);for(var a=new ArrayBuffer(r),f=new Uint8Array(a),h=0;h<n;h+=4)o=Nn[t.codePointAt(h)],s=Nn[t.codePointAt(h+1)],c=Nn[t.codePointAt(h+2)],l=Nn[t.codePointAt(h+3)],f[i++]=o<<2|s>>4,f[i++]=(s&15)<<4|c>>2,f[i++]=(c&3)<<6|l&63;return a},uu=typeof self>"u"?global:self,Ws={};["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array"].forEach(function(e){var t=e,n=uu[t];n&&(Ws[e.toLowerCase()+"2"]={test:function(r){return Yr.toStringTag(r)===t},replace:function(r){var i=r.buffer,o=r.byteOffset,s=r.length;return{buffer:i,byteOffset:o,length:s}},revive:function(r){var i=r.buffer,o=r.byteOffset,s=r.length;return new n(i,o,s)}})});var lu={arraybuffer:{test:function(e){return Yr.toStringTag(e)==="ArrayBuffer"},replace:function(e){return Di(e,0,e.byteLength)},revive:function(e){var t=Ms(e);return t}}},lt=new Yr().register(cu),fu="FileReaderSync"in self,Kr=[],ii=0;lt.register([lu,Ws,{blob2:{test:function(e){return Yr.toStringTag(e)==="Blob"},replace:function(e){if(e.isClosed)throw new Error("The Blob is closed");if(fu){var t=Us(e,"binary"),n=Di(t,0,t.byteLength);return{type:e.type,data:n}}else{Kr.push(e);var r={type:e.type,data:{start:ii,end:ii+e.size}};return ii+=e.size,r}},finalize:function(e,t){e.data=Di(t,0,t.byteLength)},revive:function(e){var t=e.type,n=e.data;return new Blob([Ms(n)],{type:t})}}}]);lt.mustFinalize=function(){return Kr.length>0};lt.finalize=function(e){return Wt(void 0,void 0,void 0,function(){var t,n,r,i,o,s,c,l,a,f;return mt(this,function(h){switch(h.label){case 0:return[4,Fs(new Blob(Kr),"binary")];case 1:if(t=h.sent(),e){for(n=0,r=e;n<r.length;n++)if(i=r[n],i.$types){o=i.$types,s=o.$,s&&(o=o.$);for(c in o)l=o[c],a=lt.types[l],a&&a.finalize&&(f=Ce.getByKeyPath(i,s?"$."+c:c),a.finalize(f,t.slice(f.start,f.end)))}}return Kr=[],[2]}})})};var du=2e3;function qs(e,t){return Wt(this,void 0,void 0,function(){function n(){return Wt(this,void 0,void 0,function(){var a,f,h,m,g,w,b,S,E;return mt(this,function(A){switch(A.label){case 0:return[4,Promise.all(e.tables.map(function(x){return x.count()}))];case 1:a=A.sent(),a.forEach(function(x,j){return i[j].rowCount=x}),l.totalRows=a.reduce(function(x,j){return x+j}),f=JSON.stringify(s,void 0,o?2:void 0),h=f.lastIndexOf("]"),m=f.substring(0,h),r.push(m),g=t.filter,w=function(x){var j,k,N,C,$,v,d,P,T,Y,W,oe;return mt(this,function(re){switch(re.label){case 0:j=e.table(x),k=j.schema.primKey,N=!!k.keyPath,C=t.numRowsPerChunk||du,$=N?{tableName:j.name,inbound:!0,rows:[]}:{tableName:j.name,inbound:!1,rows:[]},v=JSON.stringify($,void 0,o?2:void 0),o&&(v=v.split(`
`).join(`
    `)),d=v.lastIndexOf("]"),r.push(v.substring(0,d)),P=null,T=0,Y=!0,W=function(){var ie,se,Pe,ke,H,Re,Fe,Ze,H;return mt(this,function(ve){switch(ve.label){case 0:return c&&Ce.ignoreTransaction(function(){return c(l)}),ie=P==null?j.limit(C):j.where(":id").above(P).limit(C),[4,ie.toArray()];case 1:return se=ve.sent(),se.length===0?[2,"break"]:(P!=null&&T>0&&(r.push(","),o&&r.push(`
      `)),Y=se.length===C,N?(Pe=g?se.filter(function(Ue){return g(x,Ue)}):se,ke=Pe.map(function(Ue){return lt.encapsulate(Ue)}),lt.mustFinalize()?[4,Ce.waitFor(lt.finalize(ke))]:[3,3]):[3,4]);case 2:ve.sent(),ve.label=3;case 3:return H=JSON.stringify(ke,void 0,o?2:void 0),o&&(H=H.split(`
`).join(`
      `)),r.push(new Blob([H.substring(1,H.length-1)])),T=Pe.length,P=se.length>0?Ce.getByKeyPath(se[se.length-1],k.keyPath):null,[3,8];case 4:return[4,ie.primaryKeys()];case 5:return Re=ve.sent(),Fe=Re.map(function(Ue,I){return[Ue,se[I]]}),g&&(Fe=Fe.filter(function(Ue){var I=Ue[0],B=Ue[1];return g(x,B,I)})),Ze=Fe.map(function(Ue){return lt.encapsulate(Ue)}),lt.mustFinalize()?[4,Ce.waitFor(lt.finalize(Ze))]:[3,7];case 6:ve.sent(),ve.label=7;case 7:H=JSON.stringify(Ze,void 0,o?2:void 0),o&&(H=H.split(`
`).join(`
      `)),r.push(new Blob([H.substring(1,H.length-1)])),T=Fe.length,P=Re.length>0?Re[Re.length-1]:null,ve.label=8;case 8:return l.completedRows+=se.length,[2]}})},re.label=1;case 1:return Y?[5,W()]:[3,3];case 2:return oe=re.sent(),oe==="break"?[3,3]:[3,1];case 3:return r.push(v.substr(d)),l.completedTables+=1,l.completedTables<l.totalTables&&r.push(","),[2]}})},b=0,S=i,A.label=2;case 2:return b<S.length?(E=S[b].name,[5,w(E)]):[3,5];case 3:A.sent(),A.label=4;case 4:return b++,[3,2];case 5:return r.push(f.substr(h)),l.done=!0,c&&Ce.ignoreTransaction(function(){return c(l)}),[2]}})})}var r,i,o,s,c,l;return mt(this,function(a){switch(a.label){case 0:t=t||{},r=[],i=e.tables.map(function(f){return{name:f.name,schema:su(f),rowCount:0}}),o=t.prettyJson,s={formatName:"dexie",formatVersion:1,data:{databaseName:e.name,databaseVersion:e.verno,tables:i,data:[]}},c=t.progressCallback,l={done:!1,completedRows:0,completedTables:0,totalRows:NaN,totalTables:e.tables.length},a.label=1;case 1:return a.trys.push([1,,6,7]),t.noTransaction?[4,n()]:[3,3];case 2:return a.sent(),[3,5];case 3:return[4,e.transaction("r",e.tables,n)];case 4:a.sent(),a.label=5;case 5:return[3,7];case 6:return lt.finalize(),[7];case 7:return[2,new Blob(r,{type:"text/json"})]}})})}var hu=1,pu={Stream:function(){}},yu=no(function(e,t){(function(n){var r=typeof process=="object"&&process.env?process.env:self;n.parser=function(v){return new g(v)},n.CParser=g,n.CStream=b,n.createStream=w,n.MAX_BUFFER_LENGTH=10*1024*1024,n.DEBUG=r.CDEBUG==="debug",n.INFO=r.CDEBUG==="debug"||r.CDEBUG==="info",n.EVENTS=["value","string","key","openobject","closeobject","openarray","closearray","error","end","ready"];var i={textNode:void 0,numberNode:""},o=n.EVENTS.filter(function(v){return v!=="error"&&v!=="end"}),s=0,c;n.STATE={BEGIN:s++,VALUE:s++,OPEN_OBJECT:s++,CLOSE_OBJECT:s++,OPEN_ARRAY:s++,CLOSE_ARRAY:s++,TEXT_ESCAPE:s++,STRING:s++,BACKSLASH:s++,END:s++,OPEN_KEY:s++,CLOSE_KEY:s++,TRUE:s++,TRUE2:s++,TRUE3:s++,FALSE:s++,FALSE2:s++,FALSE3:s++,FALSE4:s++,NULL:s++,NULL2:s++,NULL3:s++,NUMBER_DECIMAL_POINT:s++,NUMBER_DIGIT:s++};for(var l in n.STATE)n.STATE[n.STATE[l]]=l;s=n.STATE;const a={tab:9,lineFeed:10,carriageReturn:13,space:32,doubleQuote:34,plus:43,comma:44,minus:45,period:46,_0:48,_9:57,colon:58,E:69,openBracket:91,backslash:92,closeBracket:93,a:97,b:98,e:101,f:102,l:108,n:110,r:114,s:115,t:116,u:117,openBrace:123,closeBrace:125};Object.create||(Object.create=function(v){function d(){this.__proto__=v}return d.prototype=v,new d}),Object.getPrototypeOf||(Object.getPrototypeOf=function(v){return v.__proto__}),Object.keys||(Object.keys=function(v){var d=[];for(var P in v)v.hasOwnProperty(P)&&d.push(P);return d});function f(v){var d=Math.max(n.MAX_BUFFER_LENGTH,10),P=0;for(var T in i){var Y=v[T]===void 0?0:v[T].length;if(Y>d)switch(T){case"text":closeText(v);break;default:k(v,"Max buffer length exceeded: "+T)}P=Math.max(P,Y)}v.bufferCheckPosition=n.MAX_BUFFER_LENGTH-P+v.position}function h(v){for(var d in i)v[d]=i[d]}var m=/[\\"\n]/g;function g(v){if(!(this instanceof g))return new g(v);var d=this;h(d),d.bufferCheckPosition=n.MAX_BUFFER_LENGTH,d.q=d.c=d.p="",d.opt=v||{},d.closed=d.closedRoot=d.sawRoot=!1,d.tag=d.error=null,d.state=s.BEGIN,d.stack=new Array,d.position=d.column=0,d.line=1,d.slashed=!1,d.unicodeI=0,d.unicodeS=null,d.depth=0,S(d,"onready")}g.prototype={end:function(){N(this)},write:$,resume:function(){return this.error=null,this},close:function(){return this.write(null)}};try{c=pu.Stream}catch{c=function(){}}function w(v){return new b(v)}function b(v){if(!(this instanceof b))return new b(v);this._parser=new g(v),this.writable=!0,this.readable=!0,this.bytes_remaining=0,this.bytes_in_sequence=0,this.temp_buffs={2:new Buffer(2),3:new Buffer(3),4:new Buffer(4)},this.string="";var d=this;c.apply(d),this._parser.onend=function(){d.emit("end")},this._parser.onerror=function(P){d.emit("error",P),d._parser.error=null},o.forEach(function(P){Object.defineProperty(d,"on"+P,{get:function(){return d._parser["on"+P]},set:function(T){if(!T)return d.removeAllListeners(P),d._parser["on"+P]=T,T;d.on(P,T)},enumerable:!0,configurable:!1})})}b.prototype=Object.create(c.prototype,{constructor:{value:b}}),b.prototype.write=function(v){v=new Buffer(v);for(var d=0;d<v.length;d++){var P=v[d];if(this.bytes_remaining>0){for(var T=0;T<this.bytes_remaining;T++)this.temp_buffs[this.bytes_in_sequence][this.bytes_in_sequence-this.bytes_remaining+T]=v[T];this.string=this.temp_buffs[this.bytes_in_sequence].toString(),this.bytes_in_sequence=this.bytes_remaining=0,d=d+T-1,this._parser.write(this.string),this.emit("data",this.string);continue}if(this.bytes_remaining===0&&P>=128)if(P>=194&&P<=223&&(this.bytes_in_sequence=2),P>=224&&P<=239&&(this.bytes_in_sequence=3),P>=240&&P<=244&&(this.bytes_in_sequence=4),this.bytes_in_sequence+d>v.length){for(var Y=0;Y<=v.length-1-d;Y++)this.temp_buffs[this.bytes_in_sequence][Y]=v[d+Y];return this.bytes_remaining=d+this.bytes_in_sequence-v.length,!0}else{this.string=v.slice(d,d+this.bytes_in_sequence).toString(),d=d+this.bytes_in_sequence-1,this._parser.write(this.string),this.emit("data",this.string);continue}for(var W=d;W<v.length&&!(v[W]>=128);W++);this.string=v.slice(d,W).toString(),this._parser.write(this.string),this.emit("data",this.string),d=W-1}},b.prototype.end=function(v){return v&&v.length&&this._parser.write(v.toString()),this._parser.end(),!0},b.prototype.on=function(v,d){var P=this;return!P._parser["on"+v]&&o.indexOf(v)!==-1&&(P._parser["on"+v]=function(){var T=arguments.length===1?[arguments[0]]:Array.apply(null,arguments);T.splice(0,0,v),P.emit.apply(P,T)}),c.prototype.on.call(P,v,d)},b.prototype.destroy=function(){h(this._parser),this.emit("close")};function S(v,d,P){n.INFO&&console.log("-- emit",d,P),v[d]&&v[d](P)}function E(v,d,P){A(v),S(v,d,P)}function A(v,d){v.textNode=j(v.opt,v.textNode),v.textNode!==void 0&&S(v,d||"onvalue",v.textNode),v.textNode=void 0}function x(v){v.numberNode&&S(v,"onvalue",parseFloat(v.numberNode)),v.numberNode=""}function j(v,d){return d===void 0||(v.trim&&(d=d.trim()),v.normalize&&(d=d.replace(/\s+/g," "))),d}function k(v,d){return A(v),d+=`
Line: `+v.line+`
Column: `+v.column+`
Char: `+v.c,d=new Error(d),v.error=d,S(v,"onerror",d),v}function N(v){return(v.state!==s.VALUE||v.depth!==0)&&k(v,"Unexpected end"),A(v),v.c="",v.closed=!0,S(v,"onend"),g.call(v,v.opt),v}function C(v){return v===a.carriageReturn||v===a.lineFeed||v===a.space||v===a.tab}function $(v){var d=this;if(this.error)throw this.error;if(d.closed)return k(d,"Cannot write after close. Assign an onready handler.");if(v===null)return N(d);var P=0,T=v.charCodeAt(0),Y=d.p;for(n.DEBUG&&console.log("write -> ["+v+"]");T&&(Y=T,d.c=T=v.charCodeAt(P++),Y!==T?d.p=Y:Y=d.p,!!T);)switch(n.DEBUG&&console.log(P,T,n.STATE[d.state]),d.position++,T===a.lineFeed?(d.line++,d.column=0):d.column++,d.state){case s.BEGIN:T===a.openBrace?d.state=s.OPEN_OBJECT:T===a.openBracket?d.state=s.OPEN_ARRAY:C(T)||k(d,"Non-whitespace before {[.");continue;case s.OPEN_KEY:case s.OPEN_OBJECT:if(C(T))continue;if(d.state===s.OPEN_KEY)d.stack.push(s.CLOSE_KEY);else if(T===a.closeBrace){S(d,"onopenobject"),this.depth++,S(d,"oncloseobject"),this.depth--,d.state=d.stack.pop()||s.VALUE;continue}else d.stack.push(s.CLOSE_OBJECT);T===a.doubleQuote?d.state=s.STRING:k(d,'Malformed object key should start with "');continue;case s.CLOSE_KEY:case s.CLOSE_OBJECT:if(C(T))continue;d.state,s.CLOSE_KEY,T===a.colon?(d.state===s.CLOSE_OBJECT?(d.stack.push(s.CLOSE_OBJECT),A(d,"onopenobject"),this.depth++):A(d,"onkey"),d.state=s.VALUE):T===a.closeBrace?(E(d,"oncloseobject"),this.depth--,d.state=d.stack.pop()||s.VALUE):T===a.comma?(d.state===s.CLOSE_OBJECT&&d.stack.push(s.CLOSE_OBJECT),A(d),d.state=s.OPEN_KEY):k(d,"Bad object");continue;case s.OPEN_ARRAY:case s.VALUE:if(C(T))continue;if(d.state===s.OPEN_ARRAY)if(S(d,"onopenarray"),this.depth++,d.state=s.VALUE,T===a.closeBracket){S(d,"onclosearray"),this.depth--,d.state=d.stack.pop()||s.VALUE;continue}else d.stack.push(s.CLOSE_ARRAY);T===a.doubleQuote?d.state=s.STRING:T===a.openBrace?d.state=s.OPEN_OBJECT:T===a.openBracket?d.state=s.OPEN_ARRAY:T===a.t?d.state=s.TRUE:T===a.f?d.state=s.FALSE:T===a.n?d.state=s.NULL:T===a.minus?d.numberNode+="-":a._0<=T&&T<=a._9?(d.numberNode+=String.fromCharCode(T),d.state=s.NUMBER_DIGIT):k(d,"Bad value");continue;case s.CLOSE_ARRAY:if(T===a.comma)d.stack.push(s.CLOSE_ARRAY),A(d,"onvalue"),d.state=s.VALUE;else if(T===a.closeBracket)E(d,"onclosearray"),this.depth--,d.state=d.stack.pop()||s.VALUE;else{if(C(T))continue;k(d,"Bad array")}continue;case s.STRING:d.textNode===void 0&&(d.textNode="");var W=P-1,oe=d.slashed,re=d.unicodeI;e:for(;;){for(n.DEBUG&&console.log(P,T,n.STATE[d.state],oe);re>0;)if(d.unicodeS+=String.fromCharCode(T),T=v.charCodeAt(P++),d.position++,re===4?(d.textNode+=String.fromCharCode(parseInt(d.unicodeS,16)),re=0,W=P-1):re++,!T)break e;if(T===a.doubleQuote&&!oe){d.state=d.stack.pop()||s.VALUE,d.textNode+=v.substring(W,P-1),d.position+=P-1-W;break}if(T===a.backslash&&!oe&&(oe=!0,d.textNode+=v.substring(W,P-1),d.position+=P-1-W,T=v.charCodeAt(P++),d.position++,!T))break;if(oe){if(oe=!1,T===a.n?d.textNode+=`
`:T===a.r?d.textNode+="\r":T===a.t?d.textNode+="	":T===a.f?d.textNode+="\f":T===a.b?d.textNode+="\b":T===a.u?(re=1,d.unicodeS=""):d.textNode+=String.fromCharCode(T),T=v.charCodeAt(P++),d.position++,W=P-1,T)continue;break}m.lastIndex=P;var ie=m.exec(v);if(ie===null){P=v.length+1,d.textNode+=v.substring(W,P-1),d.position+=P-1-W;break}if(P=ie.index+1,T=v.charCodeAt(ie.index),!T){d.textNode+=v.substring(W,P-1),d.position+=P-1-W;break}}d.slashed=oe,d.unicodeI=re;continue;case s.TRUE:T===a.r?d.state=s.TRUE2:k(d,"Invalid true started with t"+T);continue;case s.TRUE2:T===a.u?d.state=s.TRUE3:k(d,"Invalid true started with tr"+T);continue;case s.TRUE3:T===a.e?(S(d,"onvalue",!0),d.state=d.stack.pop()||s.VALUE):k(d,"Invalid true started with tru"+T);continue;case s.FALSE:T===a.a?d.state=s.FALSE2:k(d,"Invalid false started with f"+T);continue;case s.FALSE2:T===a.l?d.state=s.FALSE3:k(d,"Invalid false started with fa"+T);continue;case s.FALSE3:T===a.s?d.state=s.FALSE4:k(d,"Invalid false started with fal"+T);continue;case s.FALSE4:T===a.e?(S(d,"onvalue",!1),d.state=d.stack.pop()||s.VALUE):k(d,"Invalid false started with fals"+T);continue;case s.NULL:T===a.u?d.state=s.NULL2:k(d,"Invalid null started with n"+T);continue;case s.NULL2:T===a.l?d.state=s.NULL3:k(d,"Invalid null started with nu"+T);continue;case s.NULL3:T===a.l?(S(d,"onvalue",null),d.state=d.stack.pop()||s.VALUE):k(d,"Invalid null started with nul"+T);continue;case s.NUMBER_DECIMAL_POINT:T===a.period?(d.numberNode+=".",d.state=s.NUMBER_DIGIT):k(d,"Leading zero not followed by .");continue;case s.NUMBER_DIGIT:a._0<=T&&T<=a._9?d.numberNode+=String.fromCharCode(T):T===a.period?(d.numberNode.indexOf(".")!==-1&&k(d,"Invalid number has two dots"),d.numberNode+="."):T===a.e||T===a.E?((d.numberNode.indexOf("e")!==-1||d.numberNode.indexOf("E")!==-1)&&k(d,"Invalid number has two exponential"),d.numberNode+="e"):T===a.plus||T===a.minus?(Y===a.e||Y===a.E||k(d,"Invalid symbol in number"),d.numberNode+=String.fromCharCode(T)):(x(d),P--,d.state=d.stack.pop()||s.VALUE);continue;default:k(d,"Unknown state: "+d.state)}return d.position>=d.bufferCheckPosition&&f(d),d}})(t)});function mu(e){var t=0,n=gu(!0),r={pullAsync:function(i){return Wt(this,void 0,void 0,function(){var o,s,c;return mt(this,function(l){switch(l.label){case 0:return o=e.slice(t,t+i),t+=i,[4,Fs(o,"text")];case 1:return s=l.sent(),c=n.write(s),r.result=c||{},[2,c]}})})},pullSync:function(i){var o=e.slice(t,t+i);t+=i;var s=Us(o,"text"),c=n.write(s);return r.result=c||{},c},done:function(){return n.done()},eof:function(){return t>=e.size},result:{}};return r}function gu(e){var t=yu.parser(),n=0,r,i=[],o,s,c=!1,l=!1;return t.onopenobject=function(a){var f={};f.incomplete=!0,r||(r=f),o&&(i.push([s,o,l]),e&&(l?o.push(f):o[s]=f)),o=f,s=a,l=!1,++n},t.onkey=function(a){return s=a},t.onvalue=function(a){return l?o.push(a):o[s]=a},t.oncloseobject=function(){var a;if(delete o.incomplete,s=null,--n===0)c=!0;else{var f=o;a=i.pop(),s=a[0],o=a[1],l=a[2],e||(l?o.push(f):o[s]=f)}},t.onopenarray=function(){var a=[];a.incomplete=!0,r||(r=a),o&&(i.push([s,o,l]),e&&(l?o.push(a):o[s]=a)),o=a,l=!0,s=null,++n},t.onclosearray=function(){var a;if(delete o.incomplete,s=null,--n===0)c=!0;else{var f=o;a=i.pop(),s=a[0],o=a[1],l=a[2],e||(l?o.push(f):o[s]=f)}},{write:function(a){return t.write(a),r},done:function(){return c}}}var Vs=1024;function vu(e,t){return Wt(this,void 0,void 0,function(){var n,r,i,o;return mt(this,function(s){switch(s.label){case 0:return t=t||{},n=t.chunkSizeBytes||Vs*1024,[4,zs(e,n)];case 1:return r=s.sent(),i=r.result.data,o=new Ce(i.databaseName),o.version(i.databaseVersion).stores(au(i)),[4,Ys(o,r,t)];case 2:return s.sent(),[2,o]}})})}function Ys(e,t,n){return Wt(this,void 0,void 0,function(){function r(){return Wt(this,void 0,void 0,function(){var w,b,S,E,A;return mt(this,function(x){switch(x.label){case 0:w=function(j){var k,N,C,$,v,d,P,T,Y,W,oe,re;return mt(this,function(ie){switch(ie.label){case 0:if(!j.rows)return[2,"break"];if(!j.rows.incomplete&&j.rows.length===0)return[2,"continue"];if(a&&Ce.ignoreTransaction(function(){return a(f)}),k=j.tableName,N=e.table(k),C=l.tables.filter(function(se){return se.name===k})[0].schema,!N){if(n.acceptMissingTables)return[2,"continue"];throw new Error("Exported table ".concat(j.tableName," is missing in installed database"))}if(!n.acceptChangedPrimaryKey&&C.split(",")[0]!=N.schema.primKey.src)throw new Error("Primary key differs for table ".concat(j.tableName,". "));for($=j.rows,v=[],d=0;d<$.length&&(P=$[d],!P.incomplete);d++)v.push(lt.revive(P));return T=n.filter,Y=T?j.inbound?v.filter(function(se){return T(k,se)}):v.filter(function(se){var Pe=se[0],ke=se[1];return T(k,ke,Pe)}):v,W=j.inbound?[void 0,Y]:[Y.map(function(se){return se[0]}),v.map(function(se){return se[1]})],oe=W[0],re=W[1],n.overwriteValues?[4,N.bulkPut(re,oe)]:[3,2];case 1:return ie.sent(),[3,4];case 2:return[4,N.bulkAdd(re,oe)];case 3:ie.sent(),ie.label=4;case 4:return f.completedRows+=v.length,v.incomplete||(f.completedTables+=1),$.splice(0,v.length),[2]}})},b=0,S=l.data,x.label=1;case 1:return b<S.length?(E=S[b],[5,w(E)]):[3,4];case 2:if(A=x.sent(),A==="break")return[3,4];x.label=3;case 3:return b++,[3,1];case 4:for(;l.data.length>0&&l.data[0].rows&&!l.data[0].rows.incomplete;)l.data.splice(0,1);return!o.done()&&!o.eof()?c?(o.pullSync(i),[3,7]):[3,5]:[3,8];case 5:return[4,Ce.waitFor(o.pullAsync(i))];case 6:x.sent(),x.label=7;case 7:return[3,9];case 8:return[3,10];case 9:return[3,0];case 10:return[2]}})})}var i,o,s,c,l,a,f,h,m,g;return mt(this,function(w){switch(w.label){case 0:return n=n||{},i=n.chunkSizeBytes||Vs*1024,[4,zs(t,i)];case 1:if(o=w.sent(),s=o.result,c="FileReaderSync"in self,l=s.data,!n.acceptNameDiff&&e.name!==l.databaseName)throw new Error("Name differs. Current database name is ".concat(e.name," but export is ").concat(l.databaseName));if(!n.acceptVersionDiff&&e.verno!==l.databaseVersion)throw new Error("Database version differs. Current database is in version ".concat(e.verno," but export is ").concat(l.databaseVersion));if(a=n.progressCallback,f={done:!1,completedRows:0,completedTables:0,totalRows:l.tables.reduce(function(b,S){return b+S.rowCount},0),totalTables:l.tables.length},a&&Ce.ignoreTransaction(function(){return a(f)}),!n.clearTablesBeforeImport)return[3,5];h=0,m=e.tables,w.label=2;case 2:return h<m.length?(g=m[h],[4,g.clear()]):[3,5];case 3:w.sent(),w.label=4;case 4:return h++,[3,2];case 5:return n.noTransaction?[4,r()]:[3,7];case 6:return w.sent(),[3,9];case 7:return[4,e.transaction("rw",e.tables,r)];case 8:w.sent(),w.label=9;case 9:return f.done=!0,a&&Ce.ignoreTransaction(function(){return a(f)}),[2]}})})}function zs(e,t){return Wt(this,void 0,void 0,function(){var n,r;return mt(this,function(i){switch(i.label){case 0:n="slice"in e?mu(e):e,i.label=1;case 1:return n.eof()?[3,3]:[4,n.pullAsync(t)];case 2:return i.sent(),n.result.data&&n.result.data.data?[3,3]:[3,1];case 3:if(r=n.result,!r||r.formatName!="dexie")throw new Error("Given file is not a dexie export");if(r.formatVersion>hu)throw new Error("Format version ".concat(r.formatVersion," not supported"));if(!r.data)throw new Error("No data in export file");if(!r.data.databaseName)throw new Error("Missing databaseName in export file");if(!r.data.databaseVersion)throw new Error("Missing databaseVersion in export file");if(!r.data.tables)throw new Error("Missing tables in export file");return[2,n]}})})}Ce.prototype.export=function(e){return qs(this,e)};Ce.prototype.import=function(e,t){return Ys(this,e,t)};Ce.import=function(e,t){return vu(e,t)};class Js extends Ce{constructor(){super("AppDB");Be(this,"dictionary");Be(this,"practiceSettings");Be(this,"statistic");Be(this,"appSettings");this.version(1).stores({dictionary:"id",practiceSettings:"",statistic:"year",appSettings:""})}static recreateFromImport(n){Ke=n}}let Ke=new Js;const Hf=e=>Ke.dictionary.add({...e}),Gf=e=>Ke.dictionary.put(e),Xf=e=>Ke.dictionary.delete(e),bu=()=>Ke.dictionary.toArray(),Qf=()=>Ke.dictionary.clear(),ro=0,wu=()=>Ke.practiceSettings.get(ro),Zf=e=>Ke.practiceSettings.add({...e},ro),ed=e=>Ke.practiceSettings.update(ro,e),td=e=>Ke.statistic.put(e),_u=()=>Ke.statistic.toArray(),nd=async e=>Ke.statistic.add({...e}),rd=()=>Ke.statistic.clear(),Su=async()=>qs(Ke),id=async e=>{await Ke.delete(),Js.recreateFromImport(await Ce.import(e))},io=0,xu=()=>Ke.appSettings.get(io),od=e=>Ke.appSettings.add({...e},io),sd=e=>Ke.appSettings.update(io,e),ad=()=>Ke.appSettings.clear(),$e=new Map,Eu=()=>{$e.set("getDictionaryDataAsArray",(...e)=>Pn(bu,e)),$e.set("getPracticeData",(...e)=>Pn(wu,e)),$e.set("getStatisticDataAsArray",(...e)=>Pn(_u,e)),$e.set("exportAppDBData",(...e)=>Pn(Su,e)),$e.set("getAppSettings",(...e)=>Pn(xu,e))},Au=async()=>{Eu(),(await Un(()=>import("./utilsWithCatchSetupForDesktopBuild-010a6092.js"),[],import.meta.url)).initUtilsWithCatchSetupForDesktopBuild()},Ou=async()=>{let[e,t,n,r]=await Promise.all([$e.get("getDictionaryDataAsArray")(),$e.get("getPracticeData")(),$e.get("getStatisticDataAsArray")(),$e.get("getAppSettings")()]);return t===void 0&&(t=hc(),$e.get("initPracticeData")(t)),n.length===0&&(n=pc(),$e.get("initStatisticData")(n[0])),r===void 0&&(r=fc(),$e.get("initAppSettingsData")(r)),[e,t,n,r]};class Hs{constructor(t){Be(this,"value");Be(this,"subscriptions",[]);this.value=t}subscribe(t){return t(this.value),this.subscriptions.push(t),()=>this.unsubscribe(t)}update(t){this.set(t(this.value))}set(t){this.value=t,this.broadcast()}get(){return this.value}broadcast(){this.subscriptions.forEach(t=>t(this.value))}unsubscribe(t){this.subscriptions=this.subscriptions.filter(n=>n!==t)}}const on=(e,t)=>{const n=new Hs(e);return Object.assign(n,t),n},Tu=on(),Pu=(e,t)=>{t.daySettings[e]={enabled:!1,interval:"00:00",timeFrames:[]}},ku=(e,t)=>{jt.update(n=>(n.daySettings[e].interval=t,n))},Cu=(e,t)=>{jt.update(n=>(n.daySettings[e].enabled=t,n))},Iu=e=>{jt.update(t=>(Pu(e,t),t))},Nu=e=>{jt.update(t=>(delete t.daySettings[e],t))},ju=(e,t)=>{jt.update(n=>(n.daySettings[e].timeFrames=t,n))},Bu=(e,t)=>{jt.update(n=>{const{enabled:r,interval:i,timeFrames:o}=n.daySettings[t];return n.daySettings[e]={enabled:r,interval:i,timeFrames:o.map(({from:s,to:c})=>({from:s,to:c}))},Tu.set(e),n})},Du=e=>{jt.set(e)},Ru=e=>{jt=on(e,{updateSettingKeyIntervalProp:ku,updateSettingKeyEnabledProp:Cu,addSettingKey:Iu,removeSettingKey:Nu,updateTimeFrames:ju,copySettingsForDay:Bu,reInit:Du})};let jt,Gs;const $u=e=>{Gs=xn(e)},Lu=on(),Ku=(e,t)=>{t.daySettings[e]={enabled:!1,interval:"00:00",timeFrames:[]}},Fu=(e,t)=>{Bt.update(n=>(n.daySettings[e].interval=t,n))},Uu=(e,t)=>{Bt.update(n=>(n.daySettings[e].enabled=t,n))},Mu=e=>{Bt.update(t=>(Ku(e,t),t))},Wu=e=>{Bt.update(t=>(delete t.daySettings[e],t))},qu=(e,t)=>{Bt.update(n=>(n.daySettings[e].timeFrames=t,n))},Vu=(e,t)=>{Bt.update(n=>{const{enabled:r,interval:i,timeFrames:o}=n.daySettings[t];return n.daySettings[e]={enabled:r,interval:i,timeFrames:o.map(({from:s,to:c})=>({from:s,to:c}))},Lu.set(e),n})},Yu=e=>{Bt.set(e)},zu=e=>{Bt=on(e,{updateSettingKeyIntervalProp:Fu,updateSettingKeyEnabledProp:Uu,addSettingKey:Mu,removeSettingKey:Wu,updateTimeFrames:qu,copySettingsForDay:Vu,reInit:Yu})};let Bt;const Ju=e=>{On.update(t=>(t.practice.passive={...e},t))},Hu=e=>{On.update(t=>(t.practice.active={...e},t))},Gu=e=>{On.update(t=>({...t,basic:{...e}}))},Xu=()=>{Bt.subscribe(Ju),jt.subscribe(Hu),Gs.subscribe(Gu)};let On;const Qu=e=>{On.value=e},Zu=e=>{On=on(e,{reInit:Qu}),Xu()},el=e=>{$e.get("updateAppSettingsData")(e)},tl=()=>{On.subscribe(el)},nl=e=>{oo=xn({...e})};let oo;const rl=e=>{$e.get("updatePracticeData")(e)},il=()=>{oo.subscribe(rl)};class ol extends Hs{subscribe(t){return this.subscriptions.push(t),()=>this.unsubscribe(t)}}const so=(e,t)=>{const n=new ol(e);return Object.assign(n,t),n},zr=so(),sl=e=>{$e.get("updateStatistic")(e)},al=()=>{zr.subscribe(sl)},qt=so();let Xs;const cl=()=>{Xs={add:$e.get("onAddWord"),edit:$e.get("onEditWord"),delete:$e.get("onDeleteWord")}},ul=([e,t])=>{Xs[e](t)},ll=()=>{cl(),qt.subscribe(ul)},fl=e=>{const t={...e,learnSuccess:0,practiceCount:0,successfulPracticeCount:0};ir(t),qt.set(["edit",t])},ir=e=>{Vt.update(t=>t.set(e.id,e))},ao=e=>Vt.value.get(e),dl=e=>{const n={id:String(new Date().getTime()),learnSuccess:0,practiceCount:0,successfulPracticeCount:0,...e};ir(n),qt.set(["add",n])},hl=(e,t)=>{const{learnSuccess:n,practiceCount:r,successfulPracticeCount:i}=e,o={id:e.id,learnSuccess:n,practiceCount:r,successfulPracticeCount:i,...t};ir(o),qt.set(["edit",o])},pl=e=>{Vt.update(t=>(t.delete(e),t)),qt.set(["delete",e])},Qs=2,yl=e=>{const t=ao(e),n=t.practiceCount+1,r=t.successfulPracticeCount*100/n,i=Number(r.toFixed(Qs)),o={...t,practiceCount:n,learnSuccess:i};ir(o),qt.set(["edit",o])},ml=e=>{const t=ao(e),n=t.practiceCount+1,r=t.successfulPracticeCount+1,i=r*100/n,o=Number(i.toFixed(Qs)),s={...t,practiceCount:n,successfulPracticeCount:r,learnSuccess:o};ir(s),qt.set(["edit",s])},gl=()=>{Vt.value.clear()},cd=async()=>{const e=await $e.get("getDictionaryDataAsArray")();Vt.value=Zs(e)},Zs=e=>{const t=new Map;return e.forEach(({id:n,...r})=>{t.set(n,{id:n,...r})}),t},vl=e=>{Vt=on(Zs(e),{getById:ao,removeWord:pl,resetWordPractice:fl,editWord:hl,addWord:dl,onUnsuccessfulPractice:yl,onSuccessfulPractice:ml,clear:gl})};let Vt;const bl=so();let ea;const wl=({practiceTarget:e})=>{ea=e},_l=e=>{const t={};return ss.forEach(n=>{t[n]=new ls}),t.year=e,t},co=(e,t)=>e.has(t)?e.get(t):_l(t),uo=()=>new Date().toLocaleString("en-US",{month:"long",year:"numeric"}).split(" "),Sl=([e,t])=>{e in jo&&jo[e](t)},xl=()=>{or.update(e=>{const[t,n]=uo(),r=co(e,n);return r[t].totalWordsAmount=Vt.value.size,r[t].deletedWordsAmount+=1,e.set(n,r),zr.set(r),e})},El=()=>{or.update(e=>{const[t,n]=uo(),r=co(e,n);return r[t].totalWordsAmount=Vt.value.size,r[t].addedWordsAmount+=1,e.set(n,r),zr.set(r),e})},jo={add:El,delete:xl},Al=e=>{or.update(t=>{const[n,r]=uo(),i=co(t,r);return e==="successful"?i[n].successfulPracticeCount+=1:i[n].unsuccessfulPracticeCount+=1,ea==="original"?i[n].wordOriginPracticeAmount+=1:i[n].wordTranslationPracticeAmount+=1,i[n].wordTotalPracticeAmount+=1,i[n].averagePracticeSuccess=Number((i[n].successfulPracticeCount/i[n].wordTotalPracticeAmount).toFixed(2))*100,t.set(r,i),zr.set(i),t})},Ol=()=>{oo.subscribe(wl),qt.subscribe(Sl),bl.subscribe(Al)};let or;const ta=e=>{const t=new Map;return e.forEach(n=>{t.set(n.year,n)}),t},Tl=e=>{or.value=ta(e)},Pl=e=>{or=on(ta(e),{reInit:Tl}),Ol()};rs.set({computePosition:Sa,autoUpdate:_a,offset:ya,shift:ga,flip:pa,arrow:ua});oc();Au().then(Ou).then(async([e,t,n,r])=>{vl(e),nl(t),Pl(n),zu(r.practice.passive),Ru(r.practice.active),$u(r.basic),Zu(r),ll(),il(),al(),tl(),nc(),(await Un(()=>import("./ipcUtils-736aa423.js"),[],import.meta.url)).initDesktopActionListeners();const i=(await Un(()=>import("./App-24db3926.js"),["./App-24db3926.js","./App-0daa165f.css"],import.meta.url)).default;new i({target:document.getElementById("app")}),sc()});export{ef as $,Nt as A,Ll as B,df as C,pf as D,_n as E,Sf as F,qe as G,$i as H,yf as I,Xo as J,Hl as K,of as L,Of as M,$l as N,tf as O,Ql as P,ql as Q,lf as R,If as S,Xl as T,Af as U,Ef as V,uf as W,cf as X,bo as Y,rf as Z,Gl as _,xn as a,Xf as a$,nf as a0,Yl as a1,Il as a2,Ul as a3,af as a4,kf as a5,Wa as a6,Tf as a7,qa as a8,Cl as a9,Yf as aA,zf as aB,$e as aC,pc as aD,fc as aE,On as aF,Bt as aG,jt as aH,cd as aI,Mf as aJ,xf as aK,Uf as aL,Zl as aM,Ma as aN,mf as aO,Kl as aP,Vf as aQ,jf as aR,qf as aS,Wf as aT,Lu as aU,Tu as aV,Ga as aW,Kf as aX,Pn as aY,Hf as aZ,Gf as a_,sf as aa,Wl as ab,wf as ac,_f as ad,Mi as ae,$a as af,Df as ag,Jl as ah,ff as ai,Pf as aj,gf as ak,Fl as al,Bf as am,Nf as an,Ff as ao,oo as ap,Lf as aq,Ua as ar,$f as as,Rf as at,Vo as au,bl as av,Jf as aw,or as ax,ss as ay,Gs as az,Ia as b,Qf as b0,nd as b1,rd as b2,Zf as b3,ed as b4,td as b5,od as b6,sd as b7,ad as b8,id as b9,Nl as c,ka as d,Go as e,jl as f,Dl as g,Fa as h,Cf as i,Ki as j,hf as k,xa as l,Rl as m,Mr as n,Ml as o,nn as p,Vl as q,Ca as r,Ea as s,ns as t,Bl as u,Oa as v,Vt as w,zl as x,vf as y,bf as z};

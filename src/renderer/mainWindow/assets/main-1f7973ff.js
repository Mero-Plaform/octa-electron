var Qa=Object.defineProperty;var Za=(e,t,n)=>t in e?Qa(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Oe=(e,t,n)=>(Za(e,typeof t!="symbol"?t+"":t,n),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();const ec="modulepreload",tc=function(e,t){return new URL(e,t).href},Ko={},an=function(t,n,r){if(!n||n.length===0)return t();const i=document.getElementsByTagName("link");return Promise.all(n.map(o=>{if(o=tc(o,r),o in Ko)return;Ko[o]=!0;const s=o.endsWith(".css"),c=s?'[rel="stylesheet"]':"";if(!!r)for(let f=i.length-1;f>=0;f--){const y=i[f];if(y.href===o&&(!s||y.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${o}"]${c}`))return;const a=document.createElement("link");if(a.rel=s?"stylesheet":ec,s||(a.as="script",a.crossOrigin=""),a.href=o,document.head.appendChild(a),s)return new Promise((f,y)=>{a.addEventListener("load",f),a.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${o}`)))})})).then(()=>t()).catch(o=>{const s=new Event("vite:preloadError",{cancelable:!0});if(s.payload=o,window.dispatchEvent(s),!s.defaultPrevented)throw o})},kn=Math.min,nn=Math.max,Lr=Math.round,br=Math.floor,Yt=e=>({x:e,y:e}),nc={left:"right",right:"left",bottom:"top",top:"bottom"},rc={start:"end",end:"start"};function wi(e,t,n){return nn(e,kn(t,n))}function ar(e,t){return typeof e=="function"?e(t):e}function cn(e){return e.split("-")[0]}function cr(e){return e.split("-")[1]}function ls(e){return e==="x"?"y":"x"}function Xi(e){return e==="y"?"height":"width"}function Zr(e){return["top","bottom"].includes(cn(e))?"y":"x"}function Qi(e){return ls(Zr(e))}function ic(e,t,n){n===void 0&&(n=!1);const r=cr(e),i=Qi(e),o=Xi(i);let s=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[o]>t.floating[o]&&(s=Fr(s)),[s,Fr(s)]}function oc(e){const t=Fr(e);return[_i(e),t,_i(t)]}function _i(e){return e.replace(/start|end/g,t=>rc[t])}function sc(e,t,n){const r=["left","right"],i=["right","left"],o=["top","bottom"],s=["bottom","top"];switch(e){case"top":case"bottom":return n?t?i:r:t?r:i;case"left":case"right":return t?o:s;default:return[]}}function ac(e,t,n,r){const i=cr(e);let o=sc(cn(e),n==="start",r);return i&&(o=o.map(s=>s+"-"+i),t&&(o=o.concat(o.map(_i)))),o}function Fr(e){return e.replace(/left|right|bottom|top/g,t=>nc[t])}function cc(e){return{top:0,right:0,bottom:0,left:0,...e}}function fs(e){return typeof e!="number"?cc(e):{top:e,right:e,bottom:e,left:e}}function Mr(e){return{...e,top:e.y,left:e.x,right:e.x+e.width,bottom:e.y+e.height}}function $o(e,t,n){let{reference:r,floating:i}=e;const o=Zr(t),s=Qi(t),c=Xi(s),l=cn(t),a=o==="y",f=r.x+r.width/2-i.width/2,y=r.y+r.height/2-i.height/2,m=r[c]/2-i[c]/2;let g;switch(l){case"top":g={x:f,y:r.y-i.height};break;case"bottom":g={x:f,y:r.y+r.height};break;case"right":g={x:r.x+r.width,y};break;case"left":g={x:r.x-i.width,y};break;default:g={x:r.x,y:r.y}}switch(cr(t)){case"start":g[s]-=m*(n&&a?-1:1);break;case"end":g[s]+=m*(n&&a?-1:1);break}return g}const uc=async(e,t,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:o=[],platform:s}=n,c=o.filter(Boolean),l=await(s.isRTL==null?void 0:s.isRTL(t));let a=await s.getElementRects({reference:e,floating:t,strategy:i}),{x:f,y}=$o(a,r,l),m=r,g={},b=0;for(let w=0;w<c.length;w++){const{name:S,fn:A}=c[w],{x:E,y:x,data:N,reset:k}=await A({x:f,y,initialPlacement:r,placement:m,strategy:i,middlewareData:g,rects:a,platform:s,elements:{reference:e,floating:t}});if(f=E??f,y=x??y,g={...g,[S]:{...g[S],...N}},k&&b<=50){b++,typeof k=="object"&&(k.placement&&(m=k.placement),k.rects&&(a=k.rects===!0?await s.getElementRects({reference:e,floating:t,strategy:i}):k.rects),{x:f,y}=$o(a,m,l)),w=-1;continue}}return{x:f,y,placement:m,strategy:i,middlewareData:g}};async function ds(e,t){var n;t===void 0&&(t={});const{x:r,y:i,platform:o,rects:s,elements:c,strategy:l}=e,{boundary:a="clippingAncestors",rootBoundary:f="viewport",elementContext:y="floating",altBoundary:m=!1,padding:g=0}=ar(t,e),b=fs(g),S=c[m?y==="floating"?"reference":"floating":y],A=Mr(await o.getClippingRect({element:(n=await(o.isElement==null?void 0:o.isElement(S)))==null||n?S:S.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(c.floating)),boundary:a,rootBoundary:f,strategy:l})),E=y==="floating"?{...s.floating,x:r,y:i}:s.reference,x=await(o.getOffsetParent==null?void 0:o.getOffsetParent(c.floating)),N=await(o.isElement==null?void 0:o.isElement(x))?await(o.getScale==null?void 0:o.getScale(x))||{x:1,y:1}:{x:1,y:1},k=Mr(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({rect:E,offsetParent:x,strategy:l}):E);return{top:(A.top-k.top+b.top)/N.y,bottom:(k.bottom-A.bottom+b.bottom)/N.y,left:(A.left-k.left+b.left)/N.x,right:(k.right-A.right+b.right)/N.x}}const lc=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:i,rects:o,platform:s,elements:c,middlewareData:l}=t,{element:a,padding:f=0}=ar(e,t)||{};if(a==null)return{};const y=fs(f),m={x:n,y:r},g=Qi(i),b=Xi(g),w=await s.getDimensions(a),S=g==="y",A=S?"top":"left",E=S?"bottom":"right",x=S?"clientHeight":"clientWidth",N=o.reference[b]+o.reference[g]-m[g]-o.floating[b],k=m[g]-o.reference[g],D=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a));let P=D?D[x]:0;(!P||!await(s.isElement==null?void 0:s.isElement(D)))&&(P=c.floating[x]||o.floating[b]);const L=N/2-k/2,v=P/2-w[b]/2-1,d=kn(y[A],v),C=kn(y[E],v),T=d,z=P-w[b]-C,$=P/2-w[b]/2+L,ie=wi(T,$,z),oe=!l.arrow&&cr(i)!=null&&$!=ie&&o.reference[b]/2-($<T?d:C)-w[b]/2<0,ee=oe?$<T?$-T:$-z:0;return{[g]:m[g]+ee,data:{[g]:ie,centerOffset:$-ie-ee,...oe&&{alignmentOffset:ee}},reset:oe}}}),fc=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:i,middlewareData:o,rects:s,initialPlacement:c,platform:l,elements:a}=t,{mainAxis:f=!0,crossAxis:y=!0,fallbackPlacements:m,fallbackStrategy:g="bestFit",fallbackAxisSideDirection:b="none",flipAlignment:w=!0,...S}=ar(e,t);if((n=o.arrow)!=null&&n.alignmentOffset)return{};const A=cn(i),E=cn(c)===c,x=await(l.isRTL==null?void 0:l.isRTL(a.floating)),N=m||(E||!w?[Fr(c)]:oc(c));!m&&b!=="none"&&N.push(...ac(c,w,b,x));const k=[c,...N],D=await ds(t,S),P=[];let L=((r=o.flip)==null?void 0:r.overflows)||[];if(f&&P.push(D[A]),y){const T=ic(i,s,x);P.push(D[T[0]],D[T[1]])}if(L=[...L,{placement:i,overflows:P}],!P.every(T=>T<=0)){var v,d;const T=(((v=o.flip)==null?void 0:v.index)||0)+1,z=k[T];if(z)return{data:{index:T,overflows:L},reset:{placement:z}};let $=(d=L.filter(ie=>ie.overflows[0]<=0).sort((ie,oe)=>ie.overflows[1]-oe.overflows[1])[0])==null?void 0:d.placement;if(!$)switch(g){case"bestFit":{var C;const ie=(C=L.map(oe=>[oe.placement,oe.overflows.filter(ee=>ee>0).reduce((ee,se)=>ee+se,0)]).sort((oe,ee)=>oe[1]-ee[1])[0])==null?void 0:C[0];ie&&($=ie);break}case"initialPlacement":$=c;break}if(i!==$)return{reset:{placement:$}}}return{}}}};async function dc(e,t){const{placement:n,platform:r,elements:i}=e,o=await(r.isRTL==null?void 0:r.isRTL(i.floating)),s=cn(n),c=cr(n),l=Zr(n)==="y",a=["left","top"].includes(s)?-1:1,f=o&&l?-1:1,y=ar(t,e);let{mainAxis:m,crossAxis:g,alignmentAxis:b}=typeof y=="number"?{mainAxis:y,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...y};return c&&typeof b=="number"&&(g=c==="end"?b*-1:b),l?{x:g*f,y:m*a}:{x:m*a,y:g*f}}const hc=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:i,y:o,placement:s,middlewareData:c}=t,l=await dc(t,e);return s===((n=c.offset)==null?void 0:n.placement)&&(r=c.arrow)!=null&&r.alignmentOffset?{}:{x:i+l.x,y:o+l.y,data:{...l,placement:s}}}}},pc=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:i}=t,{mainAxis:o=!0,crossAxis:s=!1,limiter:c={fn:S=>{let{x:A,y:E}=S;return{x:A,y:E}}},...l}=ar(e,t),a={x:n,y:r},f=await ds(t,l),y=Zr(cn(i)),m=ls(y);let g=a[m],b=a[y];if(o){const S=m==="y"?"top":"left",A=m==="y"?"bottom":"right",E=g+f[S],x=g-f[A];g=wi(E,g,x)}if(s){const S=y==="y"?"top":"left",A=y==="y"?"bottom":"right",E=b+f[S],x=b-f[A];b=wi(E,b,x)}const w=c.fn({...t,[m]:g,[y]:b});return{...w,data:{x:w.x-n,y:w.y-r}}}}};function zt(e){return hs(e)?(e.nodeName||"").toLowerCase():"#document"}function ot(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Mt(e){var t;return(t=(hs(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function hs(e){return e instanceof Node||e instanceof ot(e).Node}function Lt(e){return e instanceof Element||e instanceof ot(e).Element}function Ot(e){return e instanceof HTMLElement||e instanceof ot(e).HTMLElement}function Uo(e){return typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof ot(e).ShadowRoot}function ur(e){const{overflow:t,overflowX:n,overflowY:r,display:i}=lt(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(i)}function yc(e){return["table","td","th"].includes(zt(e))}function Zi(e){const t=eo(),n=lt(e);return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function mc(e){let t=Cn(e);for(;Ot(t)&&!ei(t);){if(Zi(t))return t;t=Cn(t)}return null}function eo(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function ei(e){return["html","body","#document"].includes(zt(e))}function lt(e){return ot(e).getComputedStyle(e)}function ti(e){return Lt(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function Cn(e){if(zt(e)==="html")return e;const t=e.assignedSlot||e.parentNode||Uo(e)&&e.host||Mt(e);return Uo(t)?t.host:t}function ps(e){const t=Cn(e);return ei(t)?e.ownerDocument?e.ownerDocument.body:e.body:Ot(t)&&ur(t)?t:ps(t)}function Xn(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const i=ps(e),o=i===((r=e.ownerDocument)==null?void 0:r.body),s=ot(i);return o?t.concat(s,s.visualViewport||[],ur(i)?i:[],s.frameElement&&n?Xn(s.frameElement):[]):t.concat(i,Xn(i,[],n))}function ys(e){const t=lt(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const i=Ot(e),o=i?e.offsetWidth:n,s=i?e.offsetHeight:r,c=Lr(n)!==o||Lr(r)!==s;return c&&(n=o,r=s),{width:n,height:r,$:c}}function to(e){return Lt(e)?e:e.contextElement}function Sn(e){const t=to(e);if(!Ot(t))return Yt(1);const n=t.getBoundingClientRect(),{width:r,height:i,$:o}=ys(t);let s=(o?Lr(n.width):n.width)/r,c=(o?Lr(n.height):n.height)/i;return(!s||!Number.isFinite(s))&&(s=1),(!c||!Number.isFinite(c))&&(c=1),{x:s,y:c}}const gc=Yt(0);function ms(e){const t=ot(e);return!eo()||!t.visualViewport?gc:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function vc(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==ot(e)?!1:t}function un(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const i=e.getBoundingClientRect(),o=to(e);let s=Yt(1);t&&(r?Lt(r)&&(s=Sn(r)):s=Sn(e));const c=vc(o,n,r)?ms(o):Yt(0);let l=(i.left+c.x)/s.x,a=(i.top+c.y)/s.y,f=i.width/s.x,y=i.height/s.y;if(o){const m=ot(o),g=r&&Lt(r)?ot(r):r;let b=m.frameElement;for(;b&&r&&g!==m;){const w=Sn(b),S=b.getBoundingClientRect(),A=lt(b),E=S.left+(b.clientLeft+parseFloat(A.paddingLeft))*w.x,x=S.top+(b.clientTop+parseFloat(A.paddingTop))*w.y;l*=w.x,a*=w.y,f*=w.x,y*=w.y,l+=E,a+=x,b=ot(b).frameElement}}return Mr({width:f,height:y,x:l,y:a})}function bc(e){let{rect:t,offsetParent:n,strategy:r}=e;const i=Ot(n),o=Mt(n);if(n===o)return t;let s={scrollLeft:0,scrollTop:0},c=Yt(1);const l=Yt(0);if((i||!i&&r!=="fixed")&&((zt(n)!=="body"||ur(o))&&(s=ti(n)),Ot(n))){const a=un(n);c=Sn(n),l.x=a.x+n.clientLeft,l.y=a.y+n.clientTop}return{width:t.width*c.x,height:t.height*c.y,x:t.x*c.x-s.scrollLeft*c.x+l.x,y:t.y*c.y-s.scrollTop*c.y+l.y}}function wc(e){return Array.from(e.getClientRects())}function gs(e){return un(Mt(e)).left+ti(e).scrollLeft}function _c(e){const t=Mt(e),n=ti(e),r=e.ownerDocument.body,i=nn(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),o=nn(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let s=-n.scrollLeft+gs(e);const c=-n.scrollTop;return lt(r).direction==="rtl"&&(s+=nn(t.clientWidth,r.clientWidth)-i),{width:i,height:o,x:s,y:c}}function Sc(e,t){const n=ot(e),r=Mt(e),i=n.visualViewport;let o=r.clientWidth,s=r.clientHeight,c=0,l=0;if(i){o=i.width,s=i.height;const a=eo();(!a||a&&t==="fixed")&&(c=i.offsetLeft,l=i.offsetTop)}return{width:o,height:s,x:c,y:l}}function Ac(e,t){const n=un(e,!0,t==="fixed"),r=n.top+e.clientTop,i=n.left+e.clientLeft,o=Ot(e)?Sn(e):Yt(1),s=e.clientWidth*o.x,c=e.clientHeight*o.y,l=i*o.x,a=r*o.y;return{width:s,height:c,x:l,y:a}}function Wo(e,t,n){let r;if(t==="viewport")r=Sc(e,n);else if(t==="document")r=_c(Mt(e));else if(Lt(t))r=Ac(t,n);else{const i=ms(e);r={...t,x:t.x-i.x,y:t.y-i.y}}return Mr(r)}function vs(e,t){const n=Cn(e);return n===t||!Lt(n)||ei(n)?!1:lt(n).position==="fixed"||vs(n,t)}function xc(e,t){const n=t.get(e);if(n)return n;let r=Xn(e,[],!1).filter(c=>Lt(c)&&zt(c)!=="body"),i=null;const o=lt(e).position==="fixed";let s=o?Cn(e):e;for(;Lt(s)&&!ei(s);){const c=lt(s),l=Zi(s);!l&&c.position==="fixed"&&(i=null),(o?!l&&!i:!l&&c.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||ur(s)&&!l&&vs(e,s))?r=r.filter(f=>f!==s):i=c,s=Cn(s)}return t.set(e,r),r}function Ec(e){let{element:t,boundary:n,rootBoundary:r,strategy:i}=e;const s=[...n==="clippingAncestors"?xc(t,this._c):[].concat(n),r],c=s[0],l=s.reduce((a,f)=>{const y=Wo(t,f,i);return a.top=nn(y.top,a.top),a.right=kn(y.right,a.right),a.bottom=kn(y.bottom,a.bottom),a.left=nn(y.left,a.left),a},Wo(t,c,i));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function Oc(e){const{width:t,height:n}=ys(e);return{width:t,height:n}}function Tc(e,t,n){const r=Ot(t),i=Mt(t),o=n==="fixed",s=un(e,!0,o,t);let c={scrollLeft:0,scrollTop:0};const l=Yt(0);if(r||!r&&!o)if((zt(t)!=="body"||ur(i))&&(c=ti(t)),r){const a=un(t,!0,o,t);l.x=a.x+t.clientLeft,l.y=a.y+t.clientTop}else i&&(l.x=gs(i));return{x:s.left+c.scrollLeft-l.x,y:s.top+c.scrollTop-l.y,width:s.width,height:s.height}}function Vo(e,t){return!Ot(e)||lt(e).position==="fixed"?null:t?t(e):e.offsetParent}function bs(e,t){const n=ot(e);if(!Ot(e))return n;let r=Vo(e,t);for(;r&&yc(r)&&lt(r).position==="static";)r=Vo(r,t);return r&&(zt(r)==="html"||zt(r)==="body"&&lt(r).position==="static"&&!Zi(r))?n:r||mc(e)||n}const kc=async function(e){let{reference:t,floating:n,strategy:r}=e;const i=this.getOffsetParent||bs,o=this.getDimensions;return{reference:Tc(t,await i(n),r),floating:{x:0,y:0,...await o(n)}}};function Cc(e){return lt(e).direction==="rtl"}const Pc={convertOffsetParentRelativeRectToViewportRelativeRect:bc,getDocumentElement:Mt,getClippingRect:Ec,getOffsetParent:bs,getElementRects:kc,getClientRects:wc,getDimensions:Oc,getScale:Sn,isElement:Lt,isRTL:Cc};function Ic(e,t){let n=null,r;const i=Mt(e);function o(){clearTimeout(r),n&&n.disconnect(),n=null}function s(c,l){c===void 0&&(c=!1),l===void 0&&(l=1),o();const{left:a,top:f,width:y,height:m}=e.getBoundingClientRect();if(c||t(),!y||!m)return;const g=br(f),b=br(i.clientWidth-(a+y)),w=br(i.clientHeight-(f+m)),S=br(a),E={rootMargin:-g+"px "+-b+"px "+-w+"px "+-S+"px",threshold:nn(0,kn(1,l))||1};let x=!0;function N(k){const D=k[0].intersectionRatio;if(D!==l){if(!x)return s();D?s(!1,D):r=setTimeout(()=>{s(!1,1e-7)},100)}x=!1}try{n=new IntersectionObserver(N,{...E,root:i.ownerDocument})}catch{n=new IntersectionObserver(N,E)}n.observe(e)}return s(!0),o}function Dc(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:o=!0,elementResize:s=typeof ResizeObserver=="function",layoutShift:c=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,a=to(e),f=i||o?[...a?Xn(a):[],...Xn(t)]:[];f.forEach(A=>{i&&A.addEventListener("scroll",n,{passive:!0}),o&&A.addEventListener("resize",n)});const y=a&&c?Ic(a,n):null;let m=-1,g=null;s&&(g=new ResizeObserver(A=>{let[E]=A;E&&E.target===a&&g&&(g.unobserve(t),cancelAnimationFrame(m),m=requestAnimationFrame(()=>{g&&g.observe(t)})),n()}),a&&!l&&g.observe(a),g.observe(t));let b,w=l?un(e):null;l&&S();function S(){const A=un(e);w&&(A.x!==w.x||A.y!==w.y||A.width!==w.width||A.height!==w.height)&&n(),w=A,b=requestAnimationFrame(S)}return n(),()=>{f.forEach(A=>{i&&A.removeEventListener("scroll",n),o&&A.removeEventListener("resize",n)}),y&&y(),g&&g.disconnect(),g=null,l&&cancelAnimationFrame(b)}}const Nc=pc,Bc=fc,Rc=lc,jc=(e,t,n)=>{const r=new Map,i={platform:Pc,...n},o={...i.platform,_c:r};return uc(e,t,{...i,platform:o})};function Ue(){}const ni=e=>e;function Lc(e,t){for(const n in t)e[n]=t[n];return e}function ws(e){return e()}function qo(){return Object.create(null)}function Kt(e){e.forEach(ws)}function dn(e){return typeof e=="function"}function Fc(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}let wr;function Vd(e,t){return wr||(wr=document.createElement("a")),wr.href=t,e===wr.href}function Mc(e){return Object.keys(e).length===0}function no(e,...t){if(e==null)return Ue;const n=e.subscribe(...t);return n.unsubscribe?()=>n.unsubscribe():n}function Pn(e){let t;return no(e,n=>t=n)(),t}function qd(e,t,n){e.$$.on_destroy.push(no(t,n))}function Yd(e,t,n,r){if(e){const i=_s(e,t,n,r);return e[0](i)}}function _s(e,t,n,r){return e[1]&&r?Lc(n.ctx.slice(),e[1](r(t))):n.ctx}function zd(e,t,n,r){if(e[2]&&r){const i=e[2](r(n));if(t.dirty===void 0)return i;if(typeof i=="object"){const o=[],s=Math.max(t.dirty.length,i.length);for(let c=0;c<s;c+=1)o[c]=t.dirty[c]|i[c];return o}return t.dirty|i}return t.dirty}function Hd(e,t,n,r,i,o){if(i){const s=_s(t,n,r,o);e.p(s,i)}}function Jd(e){if(e.ctx.length>32){const t=[],n=e.ctx.length/32;for(let r=0;r<n;r++)t[r]=-1;return t}return-1}function Gd(e){const t={};for(const n in e)n[0]!=="$"&&(t[n]=e[n]);return t}function Xd(e,t){const n={};t=new Set(t);for(const r in e)!t.has(r)&&r[0]!=="$"&&(n[r]=e[r]);return n}function Qd(e){const t={};for(const n in e)t[n]=!0;return t}function Zd(e){return e??""}function eh(e,t,n){return e.set(n),t}function th(e){return e&&dn(e.destroy)?e.destroy:Ue}function nh(e){const t=typeof e=="string"&&e.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return t?[parseFloat(t[1]),t[2]||"px"]:[e,"px"]}const Ss=typeof window<"u";let ri=Ss?()=>window.performance.now():()=>Date.now(),ro=Ss?e=>requestAnimationFrame(e):Ue;const An=new Set;function As(e){An.forEach(t=>{t.c(e)||(An.delete(t),t.f())}),An.size!==0&&ro(As)}function ii(e){let t;return An.size===0&&ro(As),{promise:new Promise(n=>{An.add(t={c:e,f:n})}),abort(){An.delete(t)}}}const rh=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function Kc(e,t){e.appendChild(t)}function xs(e){if(!e)return document;const t=e.getRootNode?e.getRootNode():e.ownerDocument;return t&&t.host?t:e.ownerDocument}function $c(e){const t=Es("style");return Uc(xs(e),t),t.sheet}function Uc(e,t){return Kc(e.head||e,t),t.sheet}function Wc(e,t,n){e.insertBefore(t,n||null)}function io(e){e.parentNode&&e.parentNode.removeChild(e)}function ih(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function Es(e){return document.createElement(e)}function Vc(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function Os(e){return document.createTextNode(e)}function oh(){return Os(" ")}function sh(){return Os("")}function ah(e,t,n,r){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}function ch(e){return function(t){return t.preventDefault(),e.call(this,t)}}function qc(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}const Yc=["width","height"];function uh(e,t){const n=Object.getOwnPropertyDescriptors(e.__proto__);for(const r in t)t[r]==null?e.removeAttribute(r):r==="style"?e.style.cssText=t[r]:r==="__value"?e.value=e[r]=t[r]:n[r]&&n[r].set&&Yc.indexOf(r)===-1?e[r]=t[r]:qc(e,r,t[r])}function lh(e){let t;return{p(...n){t=n,t.forEach(r=>e.push(r))},r(){t.forEach(n=>e.splice(e.indexOf(n),1))}}}function zc(e){return Array.from(e.childNodes)}function fh(e,t){t=""+t,e.data!==t&&(e.data=t)}function dh(e,t){e.value=t??""}function hh(e,t,n,r){n==null?e.style.removeProperty(t):e.style.setProperty(t,n,r?"important":"")}function ph(e,t,n){for(let r=0;r<e.options.length;r+=1){const i=e.options[r];if(i.__value===t){i.selected=!0;return}}(!n||t!==void 0)&&(e.selectedIndex=-1)}function yh(e,t){for(let n=0;n<e.options.length;n+=1){const r=e.options[n];r.selected=~t.indexOf(r.__value)}}function mh(e){const t=e.querySelector(":checked");return t&&t.__value}function gh(e){return[].map.call(e.querySelectorAll(":checked"),t=>t.__value)}function vh(e,t,n){e.classList[n?"add":"remove"](t)}function Ts(e,t,{bubbles:n=!1,cancelable:r=!1}={}){const i=document.createEvent("CustomEvent");return i.initCustomEvent(e,n,r,t),i}class bh{constructor(t=!1){this.is_svg=!1,this.is_svg=t,this.e=this.n=null}c(t){this.h(t)}m(t,n,r=null){this.e||(this.is_svg?this.e=Vc(n.nodeName):this.e=Es(n.nodeType===11?"TEMPLATE":n.nodeName),this.t=n.tagName!=="TEMPLATE"?n:n.content,this.c(t)),this.i(r)}h(t){this.e.innerHTML=t,this.n=Array.from(this.e.nodeName==="TEMPLATE"?this.e.content.childNodes:this.e.childNodes)}i(t){for(let n=0;n<this.n.length;n+=1)Wc(this.t,this.n[n],t)}p(t){this.d(),this.h(t),this.i(this.a)}d(){this.n.forEach(io)}}function wh(e,t){return new e(t)}const Kr=new Map;let $r=0;function Hc(e){let t=5381,n=e.length;for(;n--;)t=(t<<5)-t^e.charCodeAt(n);return t>>>0}function Jc(e,t){const n={stylesheet:$c(t),rules:{}};return Kr.set(e,n),n}function Qn(e,t,n,r,i,o,s,c=0){const l=16.666/r;let a=`{
`;for(let S=0;S<=1;S+=l){const A=t+(n-t)*o(S);a+=S*100+`%{${s(A,1-A)}}
`}const f=a+`100% {${s(n,1-n)}}
}`,y=`__svelte_${Hc(f)}_${c}`,m=xs(e),{stylesheet:g,rules:b}=Kr.get(m)||Jc(m,e);b[y]||(b[y]=!0,g.insertRule(`@keyframes ${y} ${f}`,g.cssRules.length));const w=e.style.animation||"";return e.style.animation=`${w?`${w}, `:""}${y} ${r}ms linear ${i}ms 1 both`,$r+=1,y}function Zn(e,t){const n=(e.style.animation||"").split(", "),r=n.filter(t?o=>o.indexOf(t)<0:o=>o.indexOf("__svelte")===-1),i=n.length-r.length;i&&(e.style.animation=r.join(", "),$r-=i,$r||Gc())}function Gc(){ro(()=>{$r||(Kr.forEach(e=>{const{ownerNode:t}=e.stylesheet;t&&io(t)}),Kr.clear())})}function _h(e,t,n,r){if(!t)return Ue;const i=e.getBoundingClientRect();if(t.left===i.left&&t.right===i.right&&t.top===i.top&&t.bottom===i.bottom)return Ue;const{delay:o=0,duration:s=300,easing:c=ni,start:l=ri()+o,end:a=l+s,tick:f=Ue,css:y}=n(e,{from:t,to:i},r);let m=!0,g=!1,b;function w(){y&&(b=Qn(e,0,1,s,o,c,y)),o||(g=!0)}function S(){y&&Zn(e,b),m=!1}return ii(A=>{if(!g&&A>=l&&(g=!0),g&&A>=a&&(f(1,0),S()),!m)return!1;if(g){const E=A-l,x=0+1*c(E/s);f(x,1-x)}return!0}),w(),f(0,1),S}function Sh(e){const t=getComputedStyle(e);if(t.position!=="absolute"&&t.position!=="fixed"){const{width:n,height:r}=t,i=e.getBoundingClientRect();e.style.position="absolute",e.style.width=n,e.style.height=r,Xc(e,i)}}function Xc(e,t){const n=e.getBoundingClientRect();if(t.left!==n.left||t.top!==n.top){const r=getComputedStyle(e),i=r.transform==="none"?"":r.transform;e.style.transform=`${i} translate(${t.left-n.left}px, ${t.top-n.top}px)`}}let er;function qn(e){er=e}function lr(){if(!er)throw new Error("Function called outside component initialization");return er}function Ah(e){lr().$$.on_mount.push(e)}function xh(e){lr().$$.on_destroy.push(e)}function Eh(){const e=lr();return(t,n,{cancelable:r=!1}={})=>{const i=e.$$.callbacks[t];if(i){const o=Ts(t,n,{cancelable:r});return i.slice().forEach(s=>{s.call(e,o)}),!o.defaultPrevented}return!0}}function Oh(e,t){return lr().$$.context.set(e,t),t}function Th(e){return lr().$$.context.get(e)}function kh(e,t){const n=e.$$.callbacks[t.type];n&&n.slice().forEach(r=>r.call(this,t))}const bn=[],Yo=[];let xn=[];const Si=[],ks=Promise.resolve();let Ai=!1;function Cs(){Ai||(Ai=!0,ks.then(Ps))}function Ch(){return Cs(),ks}function In(e){xn.push(e)}function Ph(e){Si.push(e)}const di=new Set;let yn=0;function Ps(){if(yn!==0)return;const e=er;do{try{for(;yn<bn.length;){const t=bn[yn];yn++,qn(t),Qc(t.$$)}}catch(t){throw bn.length=0,yn=0,t}for(qn(null),bn.length=0,yn=0;Yo.length;)Yo.pop()();for(let t=0;t<xn.length;t+=1){const n=xn[t];di.has(n)||(di.add(n),n())}xn.length=0}while(bn.length);for(;Si.length;)Si.pop()();Ai=!1,di.clear(),qn(e)}function Qc(e){if(e.fragment!==null){e.update(),Kt(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(In)}}function Zc(e){const t=[],n=[];xn.forEach(r=>e.indexOf(r)===-1?t.push(r):n.push(r)),n.forEach(r=>r()),xn=t}let Ln;function oo(){return Ln||(Ln=Promise.resolve(),Ln.then(()=>{Ln=null})),Ln}function rn(e,t,n){e.dispatchEvent(Ts(`${t?"intro":"outro"}${n}`))}const Cr=new Set;let Et;function Ih(){Et={r:0,c:[],p:Et}}function Dh(){Et.r||Kt(Et.c),Et=Et.p}function Is(e,t){e&&e.i&&(Cr.delete(e),e.i(t))}function eu(e,t,n,r){if(e&&e.o){if(Cr.has(e))return;Cr.add(e),Et.c.push(()=>{Cr.delete(e),r&&(n&&e.d(1),r())}),e.o(t)}else r&&r()}const so={duration:0};function Nh(e,t,n){const r={direction:"in"};let i=t(e,n,r),o=!1,s,c,l=0;function a(){s&&Zn(e,s)}function f(){const{delay:m=0,duration:g=300,easing:b=ni,tick:w=Ue,css:S}=i||so;S&&(s=Qn(e,0,1,g,m,b,S,l++)),w(0,1);const A=ri()+m,E=A+g;c&&c.abort(),o=!0,In(()=>rn(e,!0,"start")),c=ii(x=>{if(o){if(x>=E)return w(1,0),rn(e,!0,"end"),a(),o=!1;if(x>=A){const N=b((x-A)/g);w(N,1-N)}}return o})}let y=!1;return{start(){y||(y=!0,Zn(e),dn(i)?(i=i(r),oo().then(f)):f())},invalidate(){y=!1},end(){o&&(a(),o=!1)}}}function Bh(e,t,n){const r={direction:"out"};let i=t(e,n,r),o=!0,s;const c=Et;c.r+=1;function l(){const{delay:a=0,duration:f=300,easing:y=ni,tick:m=Ue,css:g}=i||so;g&&(s=Qn(e,1,0,f,a,y,g));const b=ri()+a,w=b+f;In(()=>rn(e,!1,"start")),ii(S=>{if(o){if(S>=w)return m(0,1),rn(e,!1,"end"),--c.r||Kt(c.c),!1;if(S>=b){const A=y((S-b)/f);m(1-A,A)}}return o})}return dn(i)?oo().then(()=>{i=i(r),l()}):l(),{end(a){a&&i.tick&&i.tick(1,0),o&&(s&&Zn(e,s),o=!1)}}}function Rh(e,t,n,r){const i={direction:"both"};let o=t(e,n,i),s=r?0:1,c=null,l=null,a=null;function f(){a&&Zn(e,a)}function y(g,b){const w=g.b-s;return b*=Math.abs(w),{a:s,b:g.b,d:w,duration:b,start:g.start,end:g.start+b,group:g.group}}function m(g){const{delay:b=0,duration:w=300,easing:S=ni,tick:A=Ue,css:E}=o||so,x={start:ri()+b,b:g};g||(x.group=Et,Et.r+=1),c||l?l=x:(E&&(f(),a=Qn(e,s,g,w,b,S,E)),g&&A(0,1),c=y(x,w),In(()=>rn(e,g,"start")),ii(N=>{if(l&&N>l.start&&(c=y(l,w),l=null,rn(e,c.b,"start"),E&&(f(),a=Qn(e,s,c.b,c.duration,0,S,o.css))),c){if(N>=c.end)A(s=c.b,1-s),rn(e,c.b,"end"),l||(c.b?f():--c.group.r||Kt(c.group.c)),c=null;else if(N>=c.start){const k=N-c.start;s=c.a+c.d*S(k/c.duration),A(s,1-s)}}return!!(c||l)}))}return{run(g){dn(o)?oo().then(()=>{o=o(i),m(g)}):m(g)},end(){f(),c=l=null}}}function tu(e,t){e.d(1),t.delete(e.key)}function nu(e,t){eu(e,1,1,()=>{t.delete(e.key)})}function jh(e,t){e.f(),tu(e,t)}function Lh(e,t){e.f(),nu(e,t)}function Fh(e,t,n,r,i,o,s,c,l,a,f,y){let m=e.length,g=o.length,b=m;const w={};for(;b--;)w[e[b].key]=b;const S=[],A=new Map,E=new Map,x=[];for(b=g;b--;){const P=y(i,o,b),L=n(P);let v=s.get(L);v?r&&x.push(()=>v.p(P,t)):(v=a(L,P),v.c()),A.set(L,S[b]=v),L in w&&E.set(L,Math.abs(b-w[L]))}const N=new Set,k=new Set;function D(P){Is(P,1),P.m(c,f),s.set(P.key,P),f=P.first,g--}for(;m&&g;){const P=S[g-1],L=e[m-1],v=P.key,d=L.key;P===L?(f=P.first,m--,g--):A.has(d)?!s.has(v)||N.has(v)?D(P):k.has(d)?m--:E.get(v)>E.get(d)?(k.add(v),D(P)):(N.add(d),m--):(l(L,s),m--)}for(;m--;){const P=e[m];A.has(P.key)||l(P,s)}for(;g;)D(S[g-1]);return Kt(x),S}function Mh(e,t){const n={},r={},i={$$scope:1};let o=e.length;for(;o--;){const s=e[o],c=t[o];if(c){for(const l in s)l in c||(r[l]=1);for(const l in c)i[l]||(n[l]=c[l],i[l]=1);e[o]=c}else for(const l in s)i[l]=1}for(const s in r)s in n||(n[s]=void 0);return n}function Kh(e){return typeof e=="object"&&e!==null?e:{}}function $h(e,t,n){const r=e.$$.props[t];r!==void 0&&(e.$$.bound[r]=n,n(e.$$.ctx[r]))}function Uh(e){e&&e.c()}function ru(e,t,n,r){const{fragment:i,after_update:o}=e.$$;i&&i.m(t,n),r||In(()=>{const s=e.$$.on_mount.map(ws).filter(dn);e.$$.on_destroy?e.$$.on_destroy.push(...s):Kt(s),e.$$.on_mount=[]}),o.forEach(In)}function iu(e,t){const n=e.$$;n.fragment!==null&&(Zc(n.after_update),Kt(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function ou(e,t){e.$$.dirty[0]===-1&&(bn.push(e),Cs(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function Wh(e,t,n,r,i,o,s,c=[-1]){const l=er;qn(e);const a=e.$$={fragment:null,ctx:[],props:o,update:Ue,not_equal:i,bound:qo(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(l?l.$$.context:[])),callbacks:qo(),dirty:c,skip_bound:!1,root:t.target||l.$$.root};s&&s(a.root);let f=!1;if(a.ctx=n?n(e,t.props||{},(y,m,...g)=>{const b=g.length?g[0]:m;return a.ctx&&i(a.ctx[y],a.ctx[y]=b)&&(!a.skip_bound&&a.bound[y]&&a.bound[y](b),f&&ou(e,y)),m}):[],a.update(),f=!0,Kt(a.before_update),a.fragment=r?r(a.ctx):!1,t.target){if(t.hydrate){const y=zc(t.target);a.fragment&&a.fragment.l(y),y.forEach(io)}else a.fragment&&a.fragment.c();t.intro&&Is(e.$$.fragment),ru(e,t.target,t.anchor,t.customElement),Ps()}qn(l)}class Vh{$destroy(){iu(this,1),this.$destroy=Ue}$on(t,n){if(!dn(n))return Ue;const r=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return r.push(n),()=>{const i=r.indexOf(n);i!==-1&&r.splice(i,1)}}$set(t){this.$$set&&!Mc(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const mn=[];function su(e,t){return{subscribe:Ze(e,t).subscribe}}function Ze(e,t=Ue){let n;const r=new Set;function i(c){if(Fc(e,c)&&(e=c,n)){const l=!mn.length;for(const a of r)a[1](),mn.push(a,e);if(l){for(let a=0;a<mn.length;a+=2)mn[a][0](mn[a+1]);mn.length=0}}}function o(c){i(c(e))}function s(c,l=Ue){const a=[c,l];return r.add(a),r.size===1&&(n=t(i)||Ue),c(e),()=>{r.delete(a),r.size===0&&n&&(n(),n=null)}}return{set:i,update:o,subscribe:s}}function au(e,t,n){const r=!Array.isArray(e),i=r?[e]:e,o=t.length<2;return su(n,s=>{let c=!1;const l=[];let a=0,f=Ue;const y=()=>{if(a)return;f();const g=t(r?l[0]:l,s);o?s(g):f=dn(g)?g:Ue},m=i.map((g,b)=>no(g,w=>{l[b]=w,a&=~(1<<b),c&&y()},()=>{a|=1<<b}));return c=!0,y(),function(){Kt(m),f(),c=!1}})}const Ds=Ze(void 0);function qh(e,t){const{computePosition:n,autoUpdate:r,offset:i,shift:o,flip:s,arrow:c,size:l,autoPlacement:a,hide:f,inline:y}=Pn(Ds),m={open:!1,autoUpdateCleanup:()=>{}},g=':is(a[href], button, input, textarea, select, details, [tabindex]):not([tabindex="-1"])';let b;const w="https://www.skeleton.dev/utilities/popups";let S,A;function E(){S=document.querySelector(`[data-popup="${t.target}"]`)??document.createElement("div"),A=S.querySelector(".arrow")??document.createElement("div")}E();function x(){var d,C,T,z,$,ie,oe,ee;if(!S)throw new Error(`The data-popup="${t.target}" element was not found. ${w}`);if(!n)throw new Error(`Floating UI 'computePosition' not found for data-popup="${t.target}". ${w}`);if(!i)throw new Error(`Floating UI 'offset' not found for data-popup="${t.target}". ${w}`);if(!o)throw new Error(`Floating UI 'shift' not found for data-popup="${t.target}". ${w}`);if(!s)throw new Error(`Floating UI 'flip' not found for data-popup="${t.target}". ${w}`);if(!c)throw new Error(`Floating UI 'arrow' not found for data-popup="${t.target}". ${w}`);const v=[];l&&v.push(l((d=t.middleware)==null?void 0:d.size)),a&&v.push(a((C=t.middleware)==null?void 0:C.autoPlacement)),f&&v.push(f((T=t.middleware)==null?void 0:T.hide)),y&&v.push(y((z=t.middleware)==null?void 0:z.inline)),n(e,S,{placement:t.placement??"bottom",middleware:[i((($=t.middleware)==null?void 0:$.offset)??8),o(((ie=t.middleware)==null?void 0:ie.shift)??{padding:8}),s((oe=t.middleware)==null?void 0:oe.flip),c(((ee=t.middleware)==null?void 0:ee.arrow)??{element:A||null}),...v]}).then(({x:se,y:Ie,placement:Le,middlewareData:We})=>{if(Object.assign(S.style,{left:`${se}px`,top:`${Ie}px`}),A){const{x:Ye,y:ft}=We.arrow,J={top:"bottom",right:"left",bottom:"top",left:"right"}[Le.split("-")[0]];Object.assign(A.style,{left:Ye!=null?`${Ye}px`:"",top:ft!=null?`${ft}px`:"",right:"",bottom:"",[J]:"-4px"})}})}function N(){S&&(m.open=!0,t.state&&t.state({state:m.open}),x(),S.style.display="block",S.style.opacity="1",S.style.pointerEvents="auto",S.removeAttribute("inert"),m.autoUpdateCleanup=r(e,S,x),b=Array.from(S==null?void 0:S.querySelectorAll(g)))}function k(v){if(!S)return;const d=parseFloat(window.getComputedStyle(S).transitionDuration.replace("s",""))*1e3;setTimeout(()=>{m.open=!1,t.state&&t.state({state:m.open}),S.style.opacity="0",S.setAttribute("inert",""),m.autoUpdateCleanup&&m.autoUpdateCleanup(),v&&v()},d)}function D(){m.open===!1?N():k()}function P(v){if(m.open===!1||e.contains(v.target))return;if(S&&S.contains(v.target)===!1){k();return}const d=t.closeQuery===void 0?"a[href], button":t.closeQuery,C=S==null?void 0:S.querySelectorAll(d);C==null||C.forEach(T=>{T.contains(v.target)&&k()})}const L=v=>{if(m.open===!1)return;const d=v.key;if(d==="Escape"){v.preventDefault(),e.focus(),k();return}b=Array.from(S==null?void 0:S.querySelectorAll(g)),m.open&&document.activeElement===e&&(d==="ArrowDown"||d==="Tab")&&g.length>0&&b.length>0&&(v.preventDefault(),b[0].focus())};switch(t.event){case"click":e.addEventListener("click",D,!0),window.addEventListener("click",P,!0);break;case"hover":e.addEventListener("mouseover",N,!0),e.addEventListener("mouseleave",()=>k(),!0);break;case"focus-blur":e.addEventListener("focus",D,!0),e.addEventListener("blur",()=>k(),!0);break;case"focus-click":e.addEventListener("focus",N,!0),window.addEventListener("click",P,!0);break;default:throw new Error(`Event value of '${t.event}' is not supported. ${w}`)}return window.addEventListener("keydown",L,!0),x(),{update(v){k(()=>{t=v,x(),E()})},destroy(){e.removeEventListener("click",D,!0),e.removeEventListener("mouseover",N,!0),e.removeEventListener("mouseleave",()=>k(),!0),e.removeEventListener("focus",D,!0),e.removeEventListener("focus",N,!0),e.removeEventListener("blur",()=>k(),!0),window.removeEventListener("click",P,!0),window.removeEventListener("keydown",L,!0)}}}function cu(){const{subscribe:e,set:t,update:n}=Ze({});return{subscribe:e,set:t,update:n,open:r=>n(()=>({open:!0,...r})),close:()=>n(r=>(r.open=!1,r))}}const Ns=cu();function uu(){const{subscribe:e,set:t,update:n}=Ze([]);return{subscribe:e,set:t,update:n,trigger:r=>n(i=>(i.push(r),i)),close:()=>n(r=>(r.length>0&&r.shift(),r)),clear:()=>t([])}}const bt=uu(),lu={message:"Missing Toast Message",autohide:!0,timeout:5e3};function fu(){const e=Math.random();return Number(e).toString(32)}function zo(e){if(e.autohide===!0)return setTimeout(()=>{oi.close(e.id)},e.timeout)}function du(){const{subscribe:e,set:t,update:n}=Ze([]);return{subscribe:e,trigger:r=>{const i=fu();return n(o=>{r&&r.callback&&r.callback({id:i,status:"queued"}),r.hideDismiss&&(r.autohide=!0);const s={...lu,...r,id:i};return s.timeoutId=zo(s),o.push(s),o}),i},close:r=>n(i=>{if(i.length>0){const o=i.findIndex(c=>c.id===r),s=i[o];s&&(s.callback&&s.callback({id:r,status:"closed"}),s.timeoutId&&clearTimeout(s.timeoutId),i.splice(o,1))}return i}),freeze:r=>n(i=>(i.length>0&&clearTimeout(i[r].timeoutId),i)),unfreeze:r=>n(i=>(i.length>0&&(i[r].timeoutId=zo(i[r])),i)),clear:()=>t([])}}const oi=du(),hi={};function Ho(e){return e==="local"?localStorage:sessionStorage}function ao(e,t,n){const r=(n==null?void 0:n.serializer)??JSON,i=(n==null?void 0:n.storage)??"local";function o(s,c){Ho(i).setItem(s,r.stringify(c))}if(!hi[e]){const s=Ze(t,a=>{const f=Ho(i).getItem(e);f&&a(r.parse(f));{const y=m=>{m.key===e&&a(m.newValue?r.parse(m.newValue):null)};return window.addEventListener("storage",y),()=>window.removeEventListener("storage",y)}}),{subscribe:c,set:l}=s;hi[e]={set(a){o(e,a),l(a)},update(a){const f=a(Pn(s));o(e,f),l(f)},subscribe:c}}return hi[e]}ao("modeOsPrefers",!1);ao("modeUserPrefers",void 0);ao("modeCurrent",!1);const ke=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,je=Object.keys,qe=Array.isArray;function Ge(e,t){return typeof t!="object"||je(t).forEach(function(n){e[n]=t[n]}),e}typeof Promise>"u"||ke.Promise||(ke.Promise=Promise);const tr=Object.getPrototypeOf,hu={}.hasOwnProperty;function st(e,t){return hu.call(e,t)}function Dn(e,t){typeof t=="function"&&(t=t(tr(e))),(typeof Reflect>"u"?je:Reflect.ownKeys)(t).forEach(n=>{Rt(e,n,t[n])})}const Bs=Object.defineProperty;function Rt(e,t,n,r){Bs(e,t,Ge(n&&st(n,"get")&&typeof n.get=="function"?{get:n.get,set:n.set,configurable:!0}:{value:n,configurable:!0,writable:!0},r))}function En(e){return{from:function(t){return e.prototype=Object.create(t.prototype),Rt(e.prototype,"constructor",e),{extend:Dn.bind(null,e.prototype)}}}}const pu=Object.getOwnPropertyDescriptor;function co(e,t){let n;return pu(e,t)||(n=tr(e))&&co(n,t)}const yu=[].slice;function Ur(e,t,n){return yu.call(e,t,n)}function Rs(e,t){return t(e)}function Mn(e){if(!e)throw new Error("Assertion Failed")}function js(e){ke.setImmediate?setImmediate(e):setTimeout(e,0)}function Ls(e,t){return e.reduce((n,r,i)=>{var o=t(r,i);return o&&(n[o[0]]=o[1]),n},{})}function jt(e,t){if(st(e,t))return e[t];if(!t)return e;if(typeof t!="string"){for(var n=[],r=0,i=t.length;r<i;++r){var o=jt(e,t[r]);n.push(o)}return n}var s=t.indexOf(".");if(s!==-1){var c=e[t.substr(0,s)];return c===void 0?void 0:jt(c,t.substr(s+1))}}function vt(e,t,n){if(e&&t!==void 0&&(!("isFrozen"in Object)||!Object.isFrozen(e)))if(typeof t!="string"&&"length"in t){Mn(typeof n!="string"&&"length"in n);for(var r=0,i=t.length;r<i;++r)vt(e,t[r],n[r])}else{var o=t.indexOf(".");if(o!==-1){var s=t.substr(0,o),c=t.substr(o+1);if(c==="")n===void 0?qe(e)&&!isNaN(parseInt(s))?e.splice(s,1):delete e[s]:e[s]=n;else{var l=e[s];l&&st(e,s)||(l=e[s]={}),vt(l,c,n)}}else n===void 0?qe(e)&&!isNaN(parseInt(t))?e.splice(t,1):delete e[t]:e[t]=n}}function Fs(e){var t={};for(var n in e)st(e,n)&&(t[n]=e[n]);return t}const mu=[].concat;function Ms(e){return mu.apply([],e)}const Ks="Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(Ms([8,16,32,64].map(e=>["Int","Uint","Float"].map(t=>t+e+"Array")))).filter(e=>ke[e]),gu=Ks.map(e=>ke[e]);Ls(Ks,e=>[e,!0]);let qt=null;function fr(e){qt=typeof WeakMap<"u"&&new WeakMap;const t=xi(e);return qt=null,t}function xi(e){if(!e||typeof e!="object")return e;let t=qt&&qt.get(e);if(t)return t;if(qe(e)){t=[],qt&&qt.set(e,t);for(var n=0,r=e.length;n<r;++n)t.push(xi(e[n]))}else if(gu.indexOf(e.constructor)>=0)t=e;else{const o=tr(e);for(var i in t=o===Object.prototype?{}:Object.create(o),qt&&qt.set(e,t),e)st(e,i)&&(t[i]=xi(e[i]))}return t}const{toString:vu}={};function Ei(e){return vu.call(e).slice(8,-1)}const Oi=typeof Symbol<"u"?Symbol.iterator:"@@iterator",bu=typeof Oi=="symbol"?function(e){var t;return e!=null&&(t=e[Oi])&&t.apply(e)}:function(){return null},wn={};function Nt(e){var t,n,r,i;if(arguments.length===1){if(qe(e))return e.slice();if(this===wn&&typeof e=="string")return[e];if(i=bu(e)){for(n=[];!(r=i.next()).done;)n.push(r.value);return n}if(e==null)return[e];if(typeof(t=e.length)=="number"){for(n=new Array(t);t--;)n[t]=e[t];return n}return[e]}for(t=arguments.length,n=new Array(t);t--;)n[t]=arguments[t];return n}const uo=typeof Symbol<"u"?e=>e[Symbol.toStringTag]==="AsyncFunction":()=>!1;var kt=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function $s(e,t){kt=e,Us=t}var Us=()=>!0;const wu=!new Error("").stack;function hn(){if(wu)try{throw hn.arguments,new Error}catch(e){return e}return new Error}function Ti(e,t){var n=e.stack;return n?(t=t||0,n.indexOf(e.name)===0&&(t+=(e.name+e.message).split(`
`).length),n.split(`
`).slice(t).filter(Us).map(r=>`
`+r).join("")):""}var Ws=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],lo=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(Ws),_u={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function On(e,t){this._e=hn(),this.name=e,this.message=t}function Vs(e,t){return e+". Errors: "+Object.keys(t).map(n=>t[n].toString()).filter((n,r,i)=>i.indexOf(n)===r).join(`
`)}function Wr(e,t,n,r){this._e=hn(),this.failures=t,this.failedKeys=r,this.successCount=n,this.message=Vs(e,t)}function Yn(e,t){this._e=hn(),this.name="BulkError",this.failures=Object.keys(t).map(n=>t[n]),this.failuresByPos=t,this.message=Vs(e,t)}En(On).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+Ti(this._e,2))}},toString:function(){return this.name+": "+this.message}}),En(Wr).from(On),En(Yn).from(On);var fo=lo.reduce((e,t)=>(e[t]=t+"Error",e),{});const Su=On;var re=lo.reduce((e,t)=>{var n=t+"Error";function r(i,o){this._e=hn(),this.name=n,i?typeof i=="string"?(this.message=`${i}${o?`
 `+o:""}`,this.inner=o||null):typeof i=="object"&&(this.message=`${i.name} ${i.message}`,this.inner=i):(this.message=_u[t]||n,this.inner=null)}return En(r).from(Su),e[t]=r,e},{});re.Syntax=SyntaxError,re.Type=TypeError,re.Range=RangeError;var Jo=Ws.reduce((e,t)=>(e[t+"Error"]=re[t],e),{}),Pr=lo.reduce((e,t)=>(["Syntax","Type","Range"].indexOf(t)===-1&&(e[t+"Error"]=re[t]),e),{});function Ae(){}function nr(e){return e}function Au(e,t){return e==null||e===nr?t:function(n){return t(e(n))}}function ln(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function xu(e,t){return e===Ae?t:function(){var n=e.apply(this,arguments);n!==void 0&&(arguments[0]=n);var r=this.onsuccess,i=this.onerror;this.onsuccess=null,this.onerror=null;var o=t.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?ln(r,this.onsuccess):r),i&&(this.onerror=this.onerror?ln(i,this.onerror):i),o!==void 0?o:n}}function Eu(e,t){return e===Ae?t:function(){e.apply(this,arguments);var n=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null,t.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?ln(n,this.onsuccess):n),r&&(this.onerror=this.onerror?ln(r,this.onerror):r)}}function Ou(e,t){return e===Ae?t:function(n){var r=e.apply(this,arguments);Ge(n,r);var i=this.onsuccess,o=this.onerror;this.onsuccess=null,this.onerror=null;var s=t.apply(this,arguments);return i&&(this.onsuccess=this.onsuccess?ln(i,this.onsuccess):i),o&&(this.onerror=this.onerror?ln(o,this.onerror):o),r===void 0?s===void 0?void 0:s:Ge(r,s)}}function Tu(e,t){return e===Ae?t:function(){return t.apply(this,arguments)!==!1&&e.apply(this,arguments)}}function ho(e,t){return e===Ae?t:function(){var n=e.apply(this,arguments);if(n&&typeof n.then=="function"){for(var r=this,i=arguments.length,o=new Array(i);i--;)o[i]=arguments[i];return n.then(function(){return t.apply(r,o)})}return t.apply(this,arguments)}}Pr.ModifyError=Wr,Pr.DexieError=On,Pr.BulkError=Yn;var rr={};const[ki,Vr,Ci]=typeof Promise>"u"?[]:(()=>{let e=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[e,tr(e),e];const t=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[t,tr(t),e]})(),qs=Vr&&Vr.then,Ir=ki&&ki.constructor,po=!!Ci;var Pi=!1,ku=Ci?()=>{Ci.then(_r)}:ke.setImmediate?setImmediate.bind(null,_r):ke.MutationObserver?()=>{var e=document.createElement("div");new MutationObserver(()=>{_r(),e=null}).observe(e,{attributes:!0}),e.setAttribute("i","1")}:()=>{setTimeout(_r,0)},zn=function(e,t){Kn.push([e,t]),qr&&(ku(),qr=!1)},Ii=!0,qr=!0,on=[],Dr=[],Di=null,Ni=nr,Tn={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:Xo,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach(e=>{try{Xo(e[0],e[1])}catch{}})}},Q=Tn,Kn=[],sn=0,Nr=[];function V(e){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this.onuncatched=Ae,this._lib=!1;var t=this._PSD=Q;if(kt&&(this._stackHolder=hn(),this._prev=null,this._numPrev=0),typeof e!="function"){if(e!==rr)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&Ri(this,this._value))}this._state=null,this._value=null,++t.ref,zs(this,e)}const Bi={get:function(){var e=Q,t=Yr;function n(r,i){var o=!e.global&&(e!==Q||t!==Yr);const s=o&&!Ft();var c=new V((l,a)=>{yo(this,new Ys(zr(r,e,o,s),zr(i,e,o,s),l,a,e))});return kt&&Gs(c,this),c}return n.prototype=rr,n},set:function(e){Rt(this,"then",e&&e.prototype===rr?Bi:{get:function(){return e},set:Bi.set})}};function Ys(e,t,n,r,i){this.onFulfilled=typeof e=="function"?e:null,this.onRejected=typeof t=="function"?t:null,this.resolve=n,this.reject=r,this.psd=i}function zs(e,t){try{t(n=>{if(e._state===null){if(n===e)throw new TypeError("A promise cannot be resolved with itself.");var r=e._lib&&dr();n&&typeof n.then=="function"?zs(e,(i,o)=>{n instanceof V?n._then(i,o):n.then(i,o)}):(e._state=!0,e._value=n,Hs(e)),r&&hr()}},Ri.bind(null,e))}catch(n){Ri(e,n)}}function Ri(e,t){if(Dr.push(t),e._state===null){var n=e._lib&&dr();t=Ni(t),e._state=!1,e._value=t,kt&&t!==null&&typeof t=="object"&&!t._promise&&function(r,i,o){try{r.apply(null,o)}catch(s){i&&i(s)}}(()=>{var r=co(t,"stack");t._promise=e,Rt(t,"stack",{get:()=>Pi?r&&(r.get?r.get.apply(t):r.value):e.stack})}),function(r){on.some(i=>i._value===r._value)||on.push(r)}(e),Hs(e),n&&hr()}}function Hs(e){var t=e._listeners;e._listeners=[];for(var n=0,r=t.length;n<r;++n)yo(e,t[n]);var i=e._PSD;--i.ref||i.finalize(),sn===0&&(++sn,zn(()=>{--sn==0&&mo()},[]))}function yo(e,t){if(e._state!==null){var n=e._state?t.onFulfilled:t.onRejected;if(n===null)return(e._state?t.resolve:t.reject)(e._value);++t.psd.ref,++sn,zn(Cu,[n,e,t])}else e._listeners.push(t)}function Cu(e,t,n){try{Di=t;var r,i=t._value;t._state?r=e(i):(Dr.length&&(Dr=[]),r=e(i),Dr.indexOf(i)===-1&&function(o){for(var s=on.length;s;)if(on[--s]._value===o._value)return void on.splice(s,1)}(t)),n.resolve(r)}catch(o){n.reject(o)}finally{Di=null,--sn==0&&mo(),--n.psd.ref||n.psd.finalize()}}function Js(e,t,n){if(t.length===n)return t;var r="";if(e._state===!1){var i,o,s=e._value;s!=null?(i=s.name||"Error",o=s.message||s,r=Ti(s,0)):(i=s,o=""),t.push(i+(o?": "+o:"")+r)}return kt&&((r=Ti(e._stackHolder,2))&&t.indexOf(r)===-1&&t.push(r),e._prev&&Js(e._prev,t,n)),t}function Gs(e,t){var n=t?t._numPrev+1:0;n<100&&(e._prev=t,e._numPrev=n)}function _r(){dr()&&hr()}function dr(){var e=Ii;return Ii=!1,qr=!1,e}function hr(){var e,t,n;do for(;Kn.length>0;)for(e=Kn,Kn=[],n=e.length,t=0;t<n;++t){var r=e[t];r[0].apply(null,r[1])}while(Kn.length>0);Ii=!0,qr=!0}function mo(){var e=on;on=[],e.forEach(r=>{r._PSD.onunhandled.call(null,r._value,r)});for(var t=Nr.slice(0),n=t.length;n;)t[--n]()}function Sr(e){return new V(rr,!1,e)}function Ce(e,t){var n=Q;return function(){var r=dr(),i=Q;try{return Jt(n,!0),e.apply(this,arguments)}catch(o){t&&t(o)}finally{Jt(i,!1),r&&hr()}}}Dn(V.prototype,{then:Bi,_then:function(e,t){yo(this,new Ys(null,null,e,t,Q))},catch:function(e){if(arguments.length===1)return this.then(null,e);var t=arguments[0],n=arguments[1];return typeof t=="function"?this.then(null,r=>r instanceof t?n(r):Sr(r)):this.then(null,r=>r&&r.name===t?n(r):Sr(r))},finally:function(e){return this.then(t=>(e(),t),t=>(e(),Sr(t)))},stack:{get:function(){if(this._stack)return this._stack;try{Pi=!0;var e=Js(this,[],20).join(`
From previous: `);return this._state!==null&&(this._stack=e),e}finally{Pi=!1}}},timeout:function(e,t){return e<1/0?new V((n,r)=>{var i=setTimeout(()=>r(new re.Timeout(t)),e);this.then(n,r).finally(clearTimeout.bind(null,i))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&Rt(V.prototype,Symbol.toStringTag,"Dexie.Promise"),Tn.env=Xs(),Dn(V,{all:function(){var e=Nt.apply(null,arguments).map(Ar);return new V(function(t,n){e.length===0&&t([]);var r=e.length;e.forEach((i,o)=>V.resolve(i).then(s=>{e[o]=s,--r||t(e)},n))})},resolve:e=>{if(e instanceof V)return e;if(e&&typeof e.then=="function")return new V((n,r)=>{e.then(n,r)});var t=new V(rr,!0,e);return Gs(t,Di),t},reject:Sr,race:function(){var e=Nt.apply(null,arguments).map(Ar);return new V((t,n)=>{e.map(r=>V.resolve(r).then(t,n))})},PSD:{get:()=>Q,set:e=>Q=e},totalEchoes:{get:()=>Yr},newPSD:Ht,usePSD:Bn,scheduler:{get:()=>zn,set:e=>{zn=e}},rejectionMapper:{get:()=>Ni,set:e=>{Ni=e}},follow:(e,t)=>new V((n,r)=>Ht((i,o)=>{var s=Q;s.unhandleds=[],s.onunhandled=o,s.finalize=ln(function(){(function(c){function l(){c(),Nr.splice(Nr.indexOf(l),1)}Nr.push(l),++sn,zn(()=>{--sn==0&&mo()},[])})(()=>{this.unhandleds.length===0?i():o(this.unhandleds[0])})},s.finalize),e()},t,n,r))}),Ir&&(Ir.allSettled&&Rt(V,"allSettled",function(){const e=Nt.apply(null,arguments).map(Ar);return new V(t=>{e.length===0&&t([]);let n=e.length;const r=new Array(n);e.forEach((i,o)=>V.resolve(i).then(s=>r[o]={status:"fulfilled",value:s},s=>r[o]={status:"rejected",reason:s}).then(()=>--n||t(r)))})}),Ir.any&&typeof AggregateError<"u"&&Rt(V,"any",function(){const e=Nt.apply(null,arguments).map(Ar);return new V((t,n)=>{e.length===0&&n(new AggregateError([]));let r=e.length;const i=new Array(r);e.forEach((o,s)=>V.resolve(o).then(c=>t(c),c=>{i[s]=c,--r||n(new AggregateError(i))}))})}));const Ve={awaits:0,echoes:0,id:0};var Pu=0,Br=[],pi=0,Yr=0,Iu=0;function Ht(e,t,n,r){var i=Q,o=Object.create(i);o.parent=i,o.ref=0,o.global=!1,o.id=++Iu;var s=Tn.env;o.env=po?{Promise:V,PromiseProp:{value:V,configurable:!0,writable:!0},all:V.all,race:V.race,allSettled:V.allSettled,any:V.any,resolve:V.resolve,reject:V.reject,nthen:Go(s.nthen,o),gthen:Go(s.gthen,o)}:{},t&&Ge(o,t),++i.ref,o.finalize=function(){--this.parent.ref||this.parent.finalize()};var c=Bn(o,e,n,r);return o.ref===0&&o.finalize(),c}function Nn(){return Ve.id||(Ve.id=++Pu),++Ve.awaits,Ve.echoes+=100,Ve.id}function Ft(){return!!Ve.awaits&&(--Ve.awaits==0&&(Ve.id=0),Ve.echoes=100*Ve.awaits,!0)}function Ar(e){return Ve.echoes&&e&&e.constructor===Ir?(Nn(),e.then(t=>(Ft(),t),t=>(Ft(),Fe(t)))):e}function Du(e){++Yr,Ve.echoes&&--Ve.echoes!=0||(Ve.echoes=Ve.id=0),Br.push(Q),Jt(e,!0)}function Nu(){var e=Br[Br.length-1];Br.pop(),Jt(e,!1)}function Jt(e,t){var n=Q;if((t?!Ve.echoes||pi++&&e===Q:!pi||--pi&&e===Q)||Qs(t?Du.bind(null,e):Nu),e!==Q&&(Q=e,n===Tn&&(Tn.env=Xs()),po)){var r=Tn.env.Promise,i=e.env;Vr.then=i.nthen,r.prototype.then=i.gthen,(n.global||e.global)&&(Object.defineProperty(ke,"Promise",i.PromiseProp),r.all=i.all,r.race=i.race,r.resolve=i.resolve,r.reject=i.reject,i.allSettled&&(r.allSettled=i.allSettled),i.any&&(r.any=i.any))}}function Xs(){var e=ke.Promise;return po?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(ke,"Promise"),all:e.all,race:e.race,allSettled:e.allSettled,any:e.any,resolve:e.resolve,reject:e.reject,nthen:Vr.then,gthen:e.prototype.then}:{}}function Bn(e,t,n,r,i){var o=Q;try{return Jt(e,!0),t(n,r,i)}finally{Jt(o,!1)}}function Qs(e){qs.call(ki,e)}function zr(e,t,n,r){return typeof e!="function"?e:function(){var i=Q;n&&Nn(),Jt(t,!0);try{return e.apply(this,arguments)}finally{Jt(i,!1),r&&Qs(Ft)}}}function Go(e,t){return function(n,r){return e.call(this,zr(n,t),zr(r,t))}}(""+qs).indexOf("[native code]")===-1&&(Nn=Ft=Ae);function Xo(e,t){var n;try{n=t.onuncatched(e)}catch{}if(n!==!1)try{var r,i={promise:t,reason:e};if(ke.document&&document.createEvent?((r=document.createEvent("Event")).initEvent("unhandledrejection",!0,!0),Ge(r,i)):ke.CustomEvent&&Ge(r=new CustomEvent("unhandledrejection",{detail:i}),i),r&&ke.dispatchEvent&&(dispatchEvent(r),!ke.PromiseRejectionEvent&&ke.onunhandledrejection))try{ke.onunhandledrejection(r)}catch{}kt&&r&&!r.defaultPrevented&&console.warn(`Unhandled rejection: ${e.stack||e}`)}catch{}}var Fe=V.reject;function ji(e,t,n,r){if(e.idbdb&&(e._state.openComplete||Q.letThrough||e._vip)){var i=e._createTransaction(t,n,e._dbSchema);try{i.create(),e._state.PR1398_maxLoop=3}catch(o){return o.name===fo.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),e._close(),e.open().then(()=>ji(e,t,n,r))):Fe(o)}return i._promise(t,(o,s)=>Ht(()=>(Q.trans=i,r(o,s,i)))).then(o=>i._completion.then(()=>o))}if(e._state.openComplete)return Fe(new re.DatabaseClosed(e._state.dbOpenError));if(!e._state.isBeingOpened){if(!e._options.autoOpen)return Fe(new re.DatabaseClosed);e.open().catch(Ae)}return e._state.dbReadyPromise.then(()=>ji(e,t,n,r))}const tn=String.fromCharCode(65535),It="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Hn=[],si=typeof navigator<"u"&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),Bu=si,Ru=si,Zs=e=>!/(dexie\.js|dexie\.min\.js)/.test(e);function fn(e,t){return e?t?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:e:t}const ea={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function xr(e){return typeof e!="string"||/\./.test(e)?t=>t:t=>(t[e]===void 0&&e in t&&delete(t=fr(t))[e],t)}class ju{_trans(t,n,r){const i=this._tx||Q.trans,o=this.name;function s(l,a,f){if(!f.schema[o])throw new re.NotFound("Table "+o+" not part of transaction");return n(f.idbtrans,f)}const c=dr();try{return i&&i.db===this.db?i===Q.trans?i._promise(t,s,r):Ht(()=>i._promise(t,s,r),{trans:i,transless:Q.transless||Q}):ji(this.db,t,[this.name],s)}finally{c&&hr()}}get(t,n){return t&&t.constructor===Object?this.where(t).first(n):this._trans("readonly",r=>this.core.get({trans:r,key:t}).then(i=>this.hook.reading.fire(i))).then(n)}where(t){if(typeof t=="string")return new this.db.WhereClause(this,t);if(qe(t))return new this.db.WhereClause(this,`[${t.join("+")}]`);const n=je(t);if(n.length===1)return this.where(n[0]).equals(t[n[0]]);const r=this.schema.indexes.concat(this.schema.primKey).filter(a=>a.compound&&n.every(f=>a.keyPath.indexOf(f)>=0)&&a.keyPath.every(f=>n.indexOf(f)>=0))[0];if(r&&this.db._maxKey!==tn)return this.where(r.name).equals(r.keyPath.map(a=>t[a]));!r&&kt&&console.warn(`The query ${JSON.stringify(t)} on ${this.name} would benefit of a compound index [${n.join("+")}]`);const{idxByName:i}=this.schema,o=this.db._deps.indexedDB;function s(a,f){try{return o.cmp(a,f)===0}catch{return!1}}const[c,l]=n.reduce(([a,f],y)=>{const m=i[y],g=t[y];return[a||m,a||!m?fn(f,m&&m.multi?b=>{const w=jt(b,y);return qe(w)&&w.some(S=>s(g,S))}:b=>s(g,jt(b,y))):f]},[null,null]);return c?this.where(c.name).equals(t[c.keyPath]).filter(l):r?this.filter(l):this.where(n).equals("")}filter(t){return this.toCollection().and(t)}count(t){return this.toCollection().count(t)}offset(t){return this.toCollection().offset(t)}limit(t){return this.toCollection().limit(t)}each(t){return this.toCollection().each(t)}toArray(t){return this.toCollection().toArray(t)}toCollection(){return new this.db.Collection(new this.db.WhereClause(this))}orderBy(t){return new this.db.Collection(new this.db.WhereClause(this,qe(t)?`[${t.join("+")}]`:t))}reverse(){return this.toCollection().reverse()}mapToClass(t){this.schema.mappedClass=t;const n=r=>{if(!r)return r;const i=Object.create(t.prototype);for(var o in r)if(st(r,o))try{i[o]=r[o]}catch{}return i};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=n,this.hook("reading",n),t}defineClass(){return this.mapToClass(function(t){Ge(this,t)})}add(t,n){const{auto:r,keyPath:i}=this.schema.primKey;let o=t;return i&&r&&(o=xr(i)(t)),this._trans("readwrite",s=>this.core.mutate({trans:s,type:"add",keys:n!=null?[n]:null,values:[o]})).then(s=>s.numFailures?V.reject(s.failures[0]):s.lastResult).then(s=>{if(i)try{vt(t,i,s)}catch{}return s})}update(t,n){if(typeof t!="object"||qe(t))return this.where(":id").equals(t).modify(n);{const r=jt(t,this.schema.primKey.keyPath);if(r===void 0)return Fe(new re.InvalidArgument("Given object does not contain its primary key"));try{typeof n!="function"?je(n).forEach(i=>{vt(t,i,n[i])}):n(t,{value:t,primKey:r})}catch{}return this.where(":id").equals(r).modify(n)}}put(t,n){const{auto:r,keyPath:i}=this.schema.primKey;let o=t;return i&&r&&(o=xr(i)(t)),this._trans("readwrite",s=>this.core.mutate({trans:s,type:"put",values:[o],keys:n!=null?[n]:null})).then(s=>s.numFailures?V.reject(s.failures[0]):s.lastResult).then(s=>{if(i)try{vt(t,i,s)}catch{}return s})}delete(t){return this._trans("readwrite",n=>this.core.mutate({trans:n,type:"delete",keys:[t]})).then(n=>n.numFailures?V.reject(n.failures[0]):void 0)}clear(){return this._trans("readwrite",t=>this.core.mutate({trans:t,type:"deleteRange",range:ea})).then(t=>t.numFailures?V.reject(t.failures[0]):void 0)}bulkGet(t){return this._trans("readonly",n=>this.core.getMany({keys:t,trans:n}).then(r=>r.map(i=>this.hook.reading.fire(i))))}bulkAdd(t,n,r){const i=Array.isArray(n)?n:void 0,o=(r=r||(i?void 0:n))?r.allKeys:void 0;return this._trans("readwrite",s=>{const{auto:c,keyPath:l}=this.schema.primKey;if(l&&i)throw new re.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(i&&i.length!==t.length)throw new re.InvalidArgument("Arguments objects and keys must have the same length");const a=t.length;let f=l&&c?t.map(xr(l)):t;return this.core.mutate({trans:s,type:"add",keys:i,values:f,wantResults:o}).then(({numFailures:y,results:m,lastResult:g,failures:b})=>{if(y===0)return o?m:g;throw new Yn(`${this.name}.bulkAdd(): ${y} of ${a} operations failed`,b)})})}bulkPut(t,n,r){const i=Array.isArray(n)?n:void 0,o=(r=r||(i?void 0:n))?r.allKeys:void 0;return this._trans("readwrite",s=>{const{auto:c,keyPath:l}=this.schema.primKey;if(l&&i)throw new re.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(i&&i.length!==t.length)throw new re.InvalidArgument("Arguments objects and keys must have the same length");const a=t.length;let f=l&&c?t.map(xr(l)):t;return this.core.mutate({trans:s,type:"put",keys:i,values:f,wantResults:o}).then(({numFailures:y,results:m,lastResult:g,failures:b})=>{if(y===0)return o?m:g;throw new Yn(`${this.name}.bulkPut(): ${y} of ${a} operations failed`,b)})})}bulkDelete(t){const n=t.length;return this._trans("readwrite",r=>this.core.mutate({trans:r,type:"delete",keys:t})).then(({numFailures:r,lastResult:i,failures:o})=>{if(r===0)return i;throw new Yn(`${this.name}.bulkDelete(): ${r} of ${n} operations failed`,o)})}}function Jn(e){var t={},n=function(c,l){if(l){for(var a=arguments.length,f=new Array(a-1);--a;)f[a-1]=arguments[a];return t[c].subscribe.apply(null,f),e}if(typeof c=="string")return t[c]};n.addEventType=o;for(var r=1,i=arguments.length;r<i;++r)o(arguments[r]);return n;function o(c,l,a){if(typeof c=="object")return s(c);l||(l=Tu),a||(a=Ae);var f={subscribers:[],fire:a,subscribe:function(y){f.subscribers.indexOf(y)===-1&&(f.subscribers.push(y),f.fire=l(f.fire,y))},unsubscribe:function(y){f.subscribers=f.subscribers.filter(function(m){return m!==y}),f.fire=f.subscribers.reduce(l,a)}};return t[c]=n[c]=f,f}function s(c){je(c).forEach(function(l){var a=c[l];if(qe(a))o(l,c[l][0],c[l][1]);else{if(a!=="asap")throw new re.InvalidArgument("Invalid event config");var f=o(l,nr,function(){for(var y=arguments.length,m=new Array(y);y--;)m[y]=arguments[y];f.subscribers.forEach(function(g){js(function(){g.apply(null,m)})})})}})}}function Fn(e,t){return En(t).from({prototype:e}),t}function gn(e,t){return!(e.filter||e.algorithm||e.or)&&(t?e.justLimit:!e.replayFilter)}function yi(e,t){e.filter=fn(e.filter,t)}function mi(e,t,n){var r=e.replayFilter;e.replayFilter=r?()=>fn(r(),t()):t,e.justLimit=n&&!r}function Rr(e,t){if(e.isPrimKey)return t.primaryKey;const n=t.getIndexByKeyPath(e.index);if(!n)throw new re.Schema("KeyPath "+e.index+" on object store "+t.name+" is not indexed");return n}function Qo(e,t,n){const r=Rr(e,t.schema);return t.openCursor({trans:n,values:!e.keysOnly,reverse:e.dir==="prev",unique:!!e.unique,query:{index:r,range:e.range}})}function Er(e,t,n,r){const i=e.replayFilter?fn(e.filter,e.replayFilter()):e.filter;if(e.or){const o={},s=(c,l,a)=>{if(!i||i(l,a,m=>l.stop(m),m=>l.fail(m))){var f=l.primaryKey,y=""+f;y==="[object ArrayBuffer]"&&(y=""+new Uint8Array(f)),st(o,y)||(o[y]=!0,t(c,l,a))}};return Promise.all([e.or._iterate(s,n),Zo(Qo(e,r,n),e.algorithm,s,!e.keysOnly&&e.valueMapper)])}return Zo(Qo(e,r,n),fn(e.algorithm,i),t,!e.keysOnly&&e.valueMapper)}function Zo(e,t,n,r){var i=Ce(r?(o,s,c)=>n(r(o),s,c):n);return e.then(o=>{if(o)return o.start(()=>{var s=()=>o.continue();t&&!t(o,c=>s=c,c=>{o.stop(c),s=Ae},c=>{o.fail(c),s=Ae})||i(o.value,o,c=>s=c),s()})})}function Je(e,t){try{const n=es(e),r=es(t);if(n!==r)return n==="Array"?1:r==="Array"?-1:n==="binary"?1:r==="binary"?-1:n==="string"?1:r==="string"?-1:n==="Date"?1:r!=="Date"?NaN:-1;switch(n){case"number":case"Date":case"string":return e>t?1:e<t?-1:0;case"binary":return function(i,o){const s=i.length,c=o.length,l=s<c?s:c;for(let a=0;a<l;++a)if(i[a]!==o[a])return i[a]<o[a]?-1:1;return s===c?0:s<c?-1:1}(ts(e),ts(t));case"Array":return function(i,o){const s=i.length,c=o.length,l=s<c?s:c;for(let a=0;a<l;++a){const f=Je(i[a],o[a]);if(f!==0)return f}return s===c?0:s<c?-1:1}(e,t)}}catch{}return NaN}function es(e){const t=typeof e;if(t!=="object")return t;if(ArrayBuffer.isView(e))return"binary";const n=Ei(e);return n==="ArrayBuffer"?"binary":n}function ts(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}class Lu{_read(t,n){var r=this._ctx;return r.error?r.table._trans(null,Fe.bind(null,r.error)):r.table._trans("readonly",t).then(n)}_write(t){var n=this._ctx;return n.error?n.table._trans(null,Fe.bind(null,n.error)):n.table._trans("readwrite",t,"locked")}_addAlgorithm(t){var n=this._ctx;n.algorithm=fn(n.algorithm,t)}_iterate(t,n){return Er(this._ctx,t,n,this._ctx.table.core)}clone(t){var n=Object.create(this.constructor.prototype),r=Object.create(this._ctx);return t&&Ge(r,t),n._ctx=r,n}raw(){return this._ctx.valueMapper=null,this}each(t){var n=this._ctx;return this._read(r=>Er(n,t,r,n.table.core))}count(t){return this._read(n=>{const r=this._ctx,i=r.table.core;if(gn(r,!0))return i.count({trans:n,query:{index:Rr(r,i.schema),range:r.range}}).then(s=>Math.min(s,r.limit));var o=0;return Er(r,()=>(++o,!1),n,i).then(()=>o)}).then(t)}sortBy(t,n){const r=t.split(".").reverse(),i=r[0],o=r.length-1;function s(a,f){return f?s(a[r[f]],f-1):a[i]}var c=this._ctx.dir==="next"?1:-1;function l(a,f){var y=s(a,o),m=s(f,o);return y<m?-c:y>m?c:0}return this.toArray(function(a){return a.sort(l)}).then(n)}toArray(t){return this._read(n=>{var r=this._ctx;if(r.dir==="next"&&gn(r,!0)&&r.limit>0){const{valueMapper:i}=r,o=Rr(r,r.table.core.schema);return r.table.core.query({trans:n,limit:r.limit,values:!0,query:{index:o,range:r.range}}).then(({result:s})=>i?s.map(i):s)}{const i=[];return Er(r,o=>i.push(o),n,r.table.core).then(()=>i)}},t)}offset(t){var n=this._ctx;return t<=0||(n.offset+=t,gn(n)?mi(n,()=>{var r=t;return(i,o)=>r===0||(r===1?(--r,!1):(o(()=>{i.advance(r),r=0}),!1))}):mi(n,()=>{var r=t;return()=>--r<0})),this}limit(t){return this._ctx.limit=Math.min(this._ctx.limit,t),mi(this._ctx,()=>{var n=t;return function(r,i,o){return--n<=0&&i(o),n>=0}},!0),this}until(t,n){return yi(this._ctx,function(r,i,o){return!t(r.value)||(i(o),n)}),this}first(t){return this.limit(1).toArray(function(n){return n[0]}).then(t)}last(t){return this.reverse().first(t)}filter(t){var n,r;return yi(this._ctx,function(i){return t(i.value)}),n=this._ctx,r=t,n.isMatch=fn(n.isMatch,r),this}and(t){return this.filter(t)}or(t){return new this.db.WhereClause(this._ctx.table,t,this)}reverse(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this}desc(){return this.reverse()}eachKey(t){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(r,i){t(i.key,i)})}eachUniqueKey(t){return this._ctx.unique="unique",this.eachKey(t)}eachPrimaryKey(t){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(r,i){t(i.primaryKey,i)})}keys(t){var n=this._ctx;n.keysOnly=!n.isMatch;var r=[];return this.each(function(i,o){r.push(o.key)}).then(function(){return r}).then(t)}primaryKeys(t){var n=this._ctx;if(n.dir==="next"&&gn(n,!0)&&n.limit>0)return this._read(i=>{var o=Rr(n,n.table.core.schema);return n.table.core.query({trans:i,values:!1,limit:n.limit,query:{index:o,range:n.range}})}).then(({result:i})=>i).then(t);n.keysOnly=!n.isMatch;var r=[];return this.each(function(i,o){r.push(o.primaryKey)}).then(function(){return r}).then(t)}uniqueKeys(t){return this._ctx.unique="unique",this.keys(t)}firstKey(t){return this.limit(1).keys(function(n){return n[0]}).then(t)}lastKey(t){return this.reverse().firstKey(t)}distinct(){var t=this._ctx,n=t.index&&t.table.schema.idxByName[t.index];if(!n||!n.multi)return this;var r={};return yi(this._ctx,function(i){var o=i.primaryKey.toString(),s=st(r,o);return r[o]=!0,!s}),this}modify(t){var n=this._ctx;return this._write(r=>{var i;if(typeof t=="function")i=t;else{var o=je(t),s=o.length;i=function(w){for(var S=!1,A=0;A<s;++A){var E=o[A],x=t[E];jt(w,E)!==x&&(vt(w,E,x),S=!0)}return S}}const c=n.table.core,{outbound:l,extractKey:a}=c.schema.primaryKey,f=this.db._options.modifyChunkSize||200,y=[];let m=0;const g=[],b=(w,S)=>{const{failures:A,numFailures:E}=S;m+=w-E;for(let x of je(A))y.push(A[x])};return this.clone().primaryKeys().then(w=>{const S=A=>{const E=Math.min(f,w.length-A);return c.getMany({trans:r,keys:w.slice(A,A+E),cache:"immutable"}).then(x=>{const N=[],k=[],D=l?[]:null,P=[];for(let v=0;v<E;++v){const d=x[v],C={value:fr(d),primKey:w[A+v]};i.call(C,C.value,C)!==!1&&(C.value==null?P.push(w[A+v]):l||Je(a(d),a(C.value))===0?(k.push(C.value),l&&D.push(w[A+v])):(P.push(w[A+v]),N.push(C.value)))}const L=gn(n)&&n.limit===1/0&&(typeof t!="function"||t===gi)&&{index:n.index,range:n.range};return Promise.resolve(N.length>0&&c.mutate({trans:r,type:"add",values:N}).then(v=>{for(let d in v.failures)P.splice(parseInt(d),1);b(N.length,v)})).then(()=>(k.length>0||L&&typeof t=="object")&&c.mutate({trans:r,type:"put",keys:D,values:k,criteria:L,changeSpec:typeof t!="function"&&t}).then(v=>b(k.length,v))).then(()=>(P.length>0||L&&t===gi)&&c.mutate({trans:r,type:"delete",keys:P,criteria:L}).then(v=>b(P.length,v))).then(()=>w.length>A+E&&S(A+f))})};return S(0).then(()=>{if(y.length>0)throw new Wr("Error modifying one or more objects",y,m,g);return w.length})})})}delete(){var t=this._ctx,n=t.range;return gn(t)&&(t.isPrimKey&&!Ru||n.type===3)?this._write(r=>{const{primaryKey:i}=t.table.core.schema,o=n;return t.table.core.count({trans:r,query:{index:i,range:o}}).then(s=>t.table.core.mutate({trans:r,type:"deleteRange",range:o}).then(({failures:c,lastResult:l,results:a,numFailures:f})=>{if(f)throw new Wr("Could not delete some values",Object.keys(c).map(y=>c[y]),s-f);return s-f}))}):this.modify(gi)}}const gi=(e,t)=>t.value=null;function Fu(e,t){return e<t?-1:e===t?0:1}function Mu(e,t){return e>t?-1:e===t?0:1}function it(e,t,n){var r=e instanceof na?new e.Collection(e):e;return r._ctx.error=n?new n(t):new TypeError(t),r}function vn(e){return new e.Collection(e,()=>ta("")).limit(0)}function Ku(e,t,n,r,i,o){for(var s=Math.min(e.length,r.length),c=-1,l=0;l<s;++l){var a=t[l];if(a!==r[l])return i(e[l],n[l])<0?e.substr(0,l)+n[l]+n.substr(l+1):i(e[l],r[l])<0?e.substr(0,l)+r[l]+n.substr(l+1):c>=0?e.substr(0,c)+t[c]+n.substr(c+1):null;i(e[l],a)<0&&(c=l)}return s<r.length&&o==="next"?e+n.substr(e.length):s<e.length&&o==="prev"?e.substr(0,n.length):c<0?null:e.substr(0,c)+r[c]+n.substr(c+1)}function Or(e,t,n,r){var i,o,s,c,l,a,f,y=n.length;if(!n.every(w=>typeof w=="string"))return it(e,"String expected.");function m(w){i=function(A){return A==="next"?E=>E.toUpperCase():E=>E.toLowerCase()}(w),o=function(A){return A==="next"?E=>E.toLowerCase():E=>E.toUpperCase()}(w),s=w==="next"?Fu:Mu;var S=n.map(function(A){return{lower:o(A),upper:i(A)}}).sort(function(A,E){return s(A.lower,E.lower)});c=S.map(function(A){return A.upper}),l=S.map(function(A){return A.lower}),a=w,f=w==="next"?"":r}m("next");var g=new e.Collection(e,()=>Vt(c[0],l[y-1]+r));g._ondirectionchange=function(w){m(w)};var b=0;return g._addAlgorithm(function(w,S,A){var E=w.key;if(typeof E!="string")return!1;var x=o(E);if(t(x,l,b))return!0;for(var N=null,k=b;k<y;++k){var D=Ku(E,x,c[k],l[k],s,a);D===null&&N===null?b=k+1:(N===null||s(N,D)>0)&&(N=D)}return S(N!==null?function(){w.continue(N+f)}:A),!1}),g}function Vt(e,t,n,r){return{type:2,lower:e,upper:t,lowerOpen:n,upperOpen:r}}function ta(e){return{type:1,lower:e,upper:e}}class na{get Collection(){return this._ctx.table.db.Collection}between(t,n,r,i){r=r!==!1,i=i===!0;try{return this._cmp(t,n)>0||this._cmp(t,n)===0&&(r||i)&&(!r||!i)?vn(this):new this.Collection(this,()=>Vt(t,n,!r,!i))}catch{return it(this,It)}}equals(t){return t==null?it(this,It):new this.Collection(this,()=>ta(t))}above(t){return t==null?it(this,It):new this.Collection(this,()=>Vt(t,void 0,!0))}aboveOrEqual(t){return t==null?it(this,It):new this.Collection(this,()=>Vt(t,void 0,!1))}below(t){return t==null?it(this,It):new this.Collection(this,()=>Vt(void 0,t,!1,!0))}belowOrEqual(t){return t==null?it(this,It):new this.Collection(this,()=>Vt(void 0,t))}startsWith(t){return typeof t!="string"?it(this,"String expected."):this.between(t,t+tn,!0,!0)}startsWithIgnoreCase(t){return t===""?this.startsWith(t):Or(this,(n,r)=>n.indexOf(r[0])===0,[t],tn)}equalsIgnoreCase(t){return Or(this,(n,r)=>n===r[0],[t],"")}anyOfIgnoreCase(){var t=Nt.apply(wn,arguments);return t.length===0?vn(this):Or(this,(n,r)=>r.indexOf(n)!==-1,t,"")}startsWithAnyOfIgnoreCase(){var t=Nt.apply(wn,arguments);return t.length===0?vn(this):Or(this,(n,r)=>r.some(i=>n.indexOf(i)===0),t,tn)}anyOf(){const t=Nt.apply(wn,arguments);let n=this._cmp;try{t.sort(n)}catch{return it(this,It)}if(t.length===0)return vn(this);const r=new this.Collection(this,()=>Vt(t[0],t[t.length-1]));r._ondirectionchange=o=>{n=o==="next"?this._ascending:this._descending,t.sort(n)};let i=0;return r._addAlgorithm((o,s,c)=>{const l=o.key;for(;n(l,t[i])>0;)if(++i,i===t.length)return s(c),!1;return n(l,t[i])===0||(s(()=>{o.continue(t[i])}),!1)}),r}notEqual(t){return this.inAnyRange([[-(1/0),t],[t,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})}noneOf(){const t=Nt.apply(wn,arguments);if(t.length===0)return new this.Collection(this);try{t.sort(this._ascending)}catch{return it(this,It)}const n=t.reduce((r,i)=>r?r.concat([[r[r.length-1][1],i]]):[[-(1/0),i]],null);return n.push([t[t.length-1],this.db._maxKey]),this.inAnyRange(n,{includeLowers:!1,includeUppers:!1})}inAnyRange(t,n){const r=this._cmp,i=this._ascending,o=this._descending,s=this._min,c=this._max;if(t.length===0)return vn(this);if(!t.every(E=>E[0]!==void 0&&E[1]!==void 0&&i(E[0],E[1])<=0))return it(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",re.InvalidArgument);const l=!n||n.includeLowers!==!1,a=n&&n.includeUppers===!0;let f,y=i;function m(E,x){return y(E[0],x[0])}try{f=t.reduce(function(E,x){let N=0,k=E.length;for(;N<k;++N){const D=E[N];if(r(x[0],D[1])<0&&r(x[1],D[0])>0){D[0]=s(D[0],x[0]),D[1]=c(D[1],x[1]);break}}return N===k&&E.push(x),E},[]),f.sort(m)}catch{return it(this,It)}let g=0;const b=a?E=>i(E,f[g][1])>0:E=>i(E,f[g][1])>=0,w=l?E=>o(E,f[g][0])>0:E=>o(E,f[g][0])>=0;let S=b;const A=new this.Collection(this,()=>Vt(f[0][0],f[f.length-1][1],!l,!a));return A._ondirectionchange=E=>{E==="next"?(S=b,y=i):(S=w,y=o),f.sort(m)},A._addAlgorithm((E,x,N)=>{for(var k=E.key;S(k);)if(++g,g===f.length)return x(N),!1;return!!function(D){return!b(D)&&!w(D)}(k)||(this._cmp(k,f[g][1])===0||this._cmp(k,f[g][0])===0||x(()=>{y===i?E.continue(f[g][0]):E.continue(f[g][1])}),!1)}),A}startsWithAnyOf(){const t=Nt.apply(wn,arguments);return t.every(n=>typeof n=="string")?t.length===0?vn(this):this.inAnyRange(t.map(n=>[n,n+tn])):it(this,"startsWithAnyOf() only works with strings")}}function At(e){return Ce(function(t){return ir(t),e(t.target.error),!1})}function ir(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}const Gt=Jn(null,"storagemutated");class $u{_lock(){return Mn(!Q.global),++this._reculock,this._reculock!==1||Q.global||(Q.lockOwnerFor=this),this}_unlock(){if(Mn(!Q.global),--this._reculock==0)for(Q.global||(Q.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var t=this._blockedFuncs.shift();try{Bn(t[1],t[0])}catch{}}return this}_locked(){return this._reculock&&Q.lockOwnerFor!==this}create(t){if(!this.mode)return this;const n=this.db.idbdb,r=this.db._state.dbOpenError;if(Mn(!this.idbtrans),!t&&!n)switch(r&&r.name){case"DatabaseClosedError":throw new re.DatabaseClosed(r);case"MissingAPIError":throw new re.MissingAPI(r.message,r);default:throw new re.OpenFailed(r)}if(!this.active)throw new re.TransactionInactive;return Mn(this._completion._state===null),(t=this.idbtrans=t||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):n.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}))).onerror=Ce(i=>{ir(i),this._reject(t.error)}),t.onabort=Ce(i=>{ir(i),this.active&&this._reject(new re.Abort(t.error)),this.active=!1,this.on("abort").fire(i)}),t.oncomplete=Ce(()=>{this.active=!1,this._resolve(),"mutatedParts"in t&&Gt.storagemutated.fire(t.mutatedParts)}),this}_promise(t,n,r){if(t==="readwrite"&&this.mode!=="readwrite")return Fe(new re.ReadOnly("Transaction is readonly"));if(!this.active)return Fe(new re.TransactionInactive);if(this._locked())return new V((o,s)=>{this._blockedFuncs.push([()=>{this._promise(t,n,r).then(o,s)},Q])});if(r)return Ht(()=>{var o=new V((s,c)=>{this._lock();const l=n(s,c,this);l&&l.then&&l.then(s,c)});return o.finally(()=>this._unlock()),o._lib=!0,o});var i=new V((o,s)=>{var c=n(o,s,this);c&&c.then&&c.then(o,s)});return i._lib=!0,i}_root(){return this.parent?this.parent._root():this}waitFor(t){var n=this._root();const r=V.resolve(t);if(n._waitingFor)n._waitingFor=n._waitingFor.then(()=>r);else{n._waitingFor=r,n._waitingQueue=[];var i=n.idbtrans.objectStore(n.storeNames[0]);(function s(){for(++n._spinCount;n._waitingQueue.length;)n._waitingQueue.shift()();n._waitingFor&&(i.get(-1/0).onsuccess=s)})()}var o=n._waitingFor;return new V((s,c)=>{r.then(l=>n._waitingQueue.push(Ce(s.bind(null,l))),l=>n._waitingQueue.push(Ce(c.bind(null,l)))).finally(()=>{n._waitingFor===o&&(n._waitingFor=null)})})}abort(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new re.Abort))}table(t){const n=this._memoizedTables||(this._memoizedTables={});if(st(n,t))return n[t];const r=this.schema[t];if(!r)throw new re.NotFound("Table "+t+" not part of transaction");const i=new this.db.Table(t,r,this);return i.core=this.db.core.table(t),n[t]=i,i}}function Li(e,t,n,r,i,o,s){return{name:e,keyPath:t,unique:n,multi:r,auto:i,compound:o,src:(n&&!s?"&":"")+(r?"*":"")+(i?"++":"")+ra(t)}}function ra(e){return typeof e=="string"?e:e?"["+[].join.call(e,"+")+"]":""}function ia(e,t,n){return{name:e,primKey:t,indexes:n,mappedClass:null,idxByName:Ls(n,r=>[r.name,r])}}let or=e=>{try{return e.only([[]]),or=()=>[[]],[[]]}catch{return or=()=>tn,tn}};function Fi(e){return e==null?()=>{}:typeof e=="string"?function(t){return t.split(".").length===1?n=>n[t]:n=>jt(n,t)}(e):t=>jt(t,e)}function ns(e){return[].slice.call(e)}let Uu=0;function Gn(e){return e==null?":id":typeof e=="string"?e:`[${e.join("+")}]`}function Wu(e,t,n){function r(l){if(l.type===3)return null;if(l.type===4)throw new Error("Cannot convert never type to IDBKeyRange");const{lower:a,upper:f,lowerOpen:y,upperOpen:m}=l;return a===void 0?f===void 0?null:t.upperBound(f,!!m):f===void 0?t.lowerBound(a,!!y):t.bound(a,f,!!y,!!m)}const{schema:i,hasGetAll:o}=function(l,a){const f=ns(l.objectStoreNames);return{schema:{name:l.name,tables:f.map(y=>a.objectStore(y)).map(y=>{const{keyPath:m,autoIncrement:g}=y,b=qe(m),w=m==null,S={},A={name:y.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:w,compound:b,keyPath:m,autoIncrement:g,unique:!0,extractKey:Fi(m)},indexes:ns(y.indexNames).map(E=>y.index(E)).map(E=>{const{name:x,unique:N,multiEntry:k,keyPath:D}=E,P={name:x,compound:qe(D),keyPath:D,unique:N,multiEntry:k,extractKey:Fi(D)};return S[Gn(D)]=P,P}),getIndexByKeyPath:E=>S[Gn(E)]};return S[":id"]=A.primaryKey,m!=null&&(S[Gn(m)]=A.primaryKey),A})},hasGetAll:f.length>0&&"getAll"in a.objectStore(f[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}(e,n),s=i.tables.map(l=>function(a){const f=a.name;return{name:f,schema:a,mutate:function({trans:y,type:m,keys:g,values:b,range:w}){return new Promise((S,A)=>{S=Ce(S);const E=y.objectStore(f),x=E.keyPath==null,N=m==="put"||m==="add";if(!N&&m!=="delete"&&m!=="deleteRange")throw new Error("Invalid operation type: "+m);const{length:k}=g||b||{length:1};if(g&&b&&g.length!==b.length)throw new Error("Given keys array must have same length as given values array.");if(k===0)return S({numFailures:0,failures:{},results:[],lastResult:void 0});let D;const P=[],L=[];let v=0;const d=T=>{++v,ir(T)};if(m==="deleteRange"){if(w.type===4)return S({numFailures:v,failures:L,results:[],lastResult:void 0});w.type===3?P.push(D=E.clear()):P.push(D=E.delete(r(w)))}else{const[T,z]=N?x?[b,g]:[b,null]:[g,null];if(N)for(let $=0;$<k;++$)P.push(D=z&&z[$]!==void 0?E[m](T[$],z[$]):E[m](T[$])),D.onerror=d;else for(let $=0;$<k;++$)P.push(D=E[m](T[$])),D.onerror=d}const C=T=>{const z=T.target.result;P.forEach(($,ie)=>$.error!=null&&(L[ie]=$.error)),S({numFailures:v,failures:L,results:m==="delete"?g:P.map($=>$.result),lastResult:z})};D.onerror=T=>{d(T),C(T)},D.onsuccess=C})},getMany:({trans:y,keys:m})=>new Promise((g,b)=>{g=Ce(g);const w=y.objectStore(f),S=m.length,A=new Array(S);let E,x=0,N=0;const k=P=>{const L=P.target;A[L._pos]=L.result,++N===x&&g(A)},D=At(b);for(let P=0;P<S;++P)m[P]!=null&&(E=w.get(m[P]),E._pos=P,E.onsuccess=k,E.onerror=D,++x);x===0&&g(A)}),get:({trans:y,key:m})=>new Promise((g,b)=>{g=Ce(g);const w=y.objectStore(f).get(m);w.onsuccess=S=>g(S.target.result),w.onerror=At(b)}),query:function(y){return m=>new Promise((g,b)=>{g=Ce(g);const{trans:w,values:S,limit:A,query:E}=m,x=A===1/0?void 0:A,{index:N,range:k}=E,D=w.objectStore(f),P=N.isPrimaryKey?D:D.index(N.name),L=r(k);if(A===0)return g({result:[]});if(y){const v=S?P.getAll(L,x):P.getAllKeys(L,x);v.onsuccess=d=>g({result:d.target.result}),v.onerror=At(b)}else{let v=0;const d=S||!("openKeyCursor"in P)?P.openCursor(L):P.openKeyCursor(L),C=[];d.onsuccess=T=>{const z=d.result;return z?(C.push(S?z.value:z.primaryKey),++v===A?g({result:C}):void z.continue()):g({result:C})},d.onerror=At(b)}})}(o),openCursor:function({trans:y,values:m,query:g,reverse:b,unique:w}){return new Promise((S,A)=>{S=Ce(S);const{index:E,range:x}=g,N=y.objectStore(f),k=E.isPrimaryKey?N:N.index(E.name),D=b?w?"prevunique":"prev":w?"nextunique":"next",P=m||!("openKeyCursor"in k)?k.openCursor(r(x),D):k.openKeyCursor(r(x),D);P.onerror=At(A),P.onsuccess=Ce(L=>{const v=P.result;if(!v)return void S(null);v.___id=++Uu,v.done=!1;const d=v.continue.bind(v);let C=v.continuePrimaryKey;C&&(C=C.bind(v));const T=v.advance.bind(v),z=()=>{throw new Error("Cursor not stopped")};v.trans=y,v.stop=v.continue=v.continuePrimaryKey=v.advance=()=>{throw new Error("Cursor not started")},v.fail=Ce(A),v.next=function(){let $=1;return this.start(()=>$--?this.continue():this.stop()).then(()=>this)},v.start=$=>{const ie=new Promise((ee,se)=>{ee=Ce(ee),P.onerror=At(se),v.fail=se,v.stop=Ie=>{v.stop=v.continue=v.continuePrimaryKey=v.advance=z,ee(Ie)}}),oe=()=>{if(P.result)try{$()}catch(ee){v.fail(ee)}else v.done=!0,v.start=()=>{throw new Error("Cursor behind last entry")},v.stop()};return P.onsuccess=Ce(ee=>{P.onsuccess=oe,oe()}),v.continue=d,v.continuePrimaryKey=C,v.advance=T,oe(),ie},S(v)},A)})},count({query:y,trans:m}){const{index:g,range:b}=y;return new Promise((w,S)=>{const A=m.objectStore(f),E=g.isPrimaryKey?A:A.index(g.name),x=r(b),N=x?E.count(x):E.count();N.onsuccess=Ce(k=>w(k.target.result)),N.onerror=At(S)})}}}(l)),c={};return s.forEach(l=>c[l.name]=l),{stack:"dbcore",transaction:e.transaction.bind(e),table(l){if(!c[l])throw new Error(`Table '${l}' not found`);return c[l]},MIN_KEY:-1/0,MAX_KEY:or(t),schema:i}}function Mi({_novip:e},t){const n=t.db,r=function(i,o,{IDBKeyRange:s,indexedDB:c},l){return{dbcore:function(f,y){return y.reduce((m,{create:g})=>({...m,...g(m)}),f)}(Wu(o,s,l),i.dbcore)}}(e._middlewares,n,e._deps,t);e.core=r.dbcore,e.tables.forEach(i=>{const o=i.name;e.core.schema.tables.some(s=>s.name===o)&&(i.core=e.core.table(o),e[o]instanceof e.Table&&(e[o].core=i.core))})}function Hr({_novip:e},t,n,r){n.forEach(i=>{const o=r[i];t.forEach(s=>{const c=co(s,i);(!c||"value"in c&&c.value===void 0)&&(s===e.Transaction.prototype||s instanceof e.Transaction?Rt(s,i,{get(){return this.table(i)},set(l){Bs(this,i,{value:l,writable:!0,configurable:!0,enumerable:!0})}}):s[i]=new e.Table(i,o))})})}function Ki({_novip:e},t){t.forEach(n=>{for(let r in n)n[r]instanceof e.Table&&delete n[r]})}function Vu(e,t){return e._cfg.version-t._cfg.version}function qu(e,t,n,r){const i=e._dbSchema,o=e._createTransaction("readwrite",e._storeNames,i);o.create(n),o._completion.catch(r);const s=o._reject.bind(o),c=Q.transless||Q;Ht(()=>{Q.trans=o,Q.transless=c,t===0?(je(i).forEach(l=>{vi(n,l,i[l].primKey,i[l].indexes)}),Mi(e,n),V.follow(()=>e.on.populate.fire(o)).catch(s)):function({_novip:l},a,f,y){const m=[],g=l._versions;let b=l._dbSchema=Ui(l,l.idbdb,y),w=!1;function S(){return m.length?V.resolve(m.shift()(f.idbtrans)).then(S):V.resolve()}return g.filter(A=>A._cfg.version>=a).forEach(A=>{m.push(()=>{const E=b,x=A._cfg.dbschema;Wi(l,E,y),Wi(l,x,y),b=l._dbSchema=x;const N=oa(E,x);N.add.forEach(D=>{vi(y,D[0],D[1].primKey,D[1].indexes)}),N.change.forEach(D=>{if(D.recreate)throw new re.Upgrade("Not yet support for changing primary key");{const P=y.objectStore(D.name);D.add.forEach(L=>$i(P,L)),D.change.forEach(L=>{P.deleteIndex(L.name),$i(P,L)}),D.del.forEach(L=>P.deleteIndex(L))}});const k=A._cfg.contentUpgrade;if(k&&A._cfg.version>a){Mi(l,y),f._memoizedTables={},w=!0;let D=Fs(x);N.del.forEach(d=>{D[d]=E[d]}),Ki(l,[l.Transaction.prototype]),Hr(l,[l.Transaction.prototype],je(D),D),f.schema=D;const P=uo(k);let L;P&&Nn();const v=V.follow(()=>{if(L=k(f),L&&P){var d=Ft.bind(null,null);L.then(d,d)}});return L&&typeof L.then=="function"?V.resolve(L):v.then(()=>L)}}),m.push(E=>{(!w||!Bu)&&function(x,N){[].slice.call(N.db.objectStoreNames).forEach(k=>x[k]==null&&N.db.deleteObjectStore(k))}(A._cfg.dbschema,E),Ki(l,[l.Transaction.prototype]),Hr(l,[l.Transaction.prototype],l._storeNames,l._dbSchema),f.schema=l._dbSchema})}),S().then(()=>{var A,E;E=y,je(A=b).forEach(x=>{E.db.objectStoreNames.contains(x)||vi(E,x,A[x].primKey,A[x].indexes)})})}(e,t,o,n).catch(s)})}function oa(e,t){const n={del:[],add:[],change:[]};let r;for(r in e)t[r]||n.del.push(r);for(r in t){const i=e[r],o=t[r];if(i){const s={name:r,def:o,recreate:!1,del:[],add:[],change:[]};if(""+(i.primKey.keyPath||"")!=""+(o.primKey.keyPath||"")||i.primKey.auto!==o.primKey.auto&&!si)s.recreate=!0,n.change.push(s);else{const c=i.idxByName,l=o.idxByName;let a;for(a in c)l[a]||s.del.push(a);for(a in l){const f=c[a],y=l[a];f?f.src!==y.src&&s.change.push(y):s.add.push(y)}(s.del.length>0||s.add.length>0||s.change.length>0)&&n.change.push(s)}}else n.add.push([r,o])}return n}function vi(e,t,n,r){const i=e.db.createObjectStore(t,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return r.forEach(o=>$i(i,o)),i}function $i(e,t){e.createIndex(t.name,t.keyPath,{unique:t.unique,multiEntry:t.multi})}function Ui(e,t,n){const r={};return Ur(t.objectStoreNames,0).forEach(i=>{const o=n.objectStore(i);let s=o.keyPath;const c=Li(ra(s),s||"",!1,!1,!!o.autoIncrement,s&&typeof s!="string",!0),l=[];for(let f=0;f<o.indexNames.length;++f){const y=o.index(o.indexNames[f]);s=y.keyPath;var a=Li(y.name,s,!!y.unique,!!y.multiEntry,!1,s&&typeof s!="string",!1);l.push(a)}r[i]=ia(i,c,l)}),r}function Wi({_novip:e},t,n){const r=n.db.objectStoreNames;for(let i=0;i<r.length;++i){const o=r[i],s=n.objectStore(o);e._hasGetAll="getAll"in s;for(let c=0;c<s.indexNames.length;++c){const l=s.indexNames[c],a=s.index(l).keyPath,f=typeof a=="string"?a:"["+Ur(a).join("+")+"]";if(t[o]){const y=t[o].idxByName[f];y&&(y.name=l,delete t[o].idxByName[f],t[o].idxByName[l]=y)}}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&ke.WorkerGlobalScope&&ke instanceof ke.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(e._hasGetAll=!1)}class Yu{_parseStoresSpec(t,n){je(t).forEach(r=>{if(t[r]!==null){var i=t[r].split(",").map((s,c)=>{const l=(s=s.trim()).replace(/([&*]|\+\+)/g,""),a=/^\[/.test(l)?l.match(/^\[(.*)\]$/)[1].split("+"):l;return Li(l,a||null,/\&/.test(s),/\*/.test(s),/\+\+/.test(s),qe(a),c===0)}),o=i.shift();if(o.multi)throw new re.Schema("Primary key cannot be multi-valued");i.forEach(s=>{if(s.auto)throw new re.Schema("Only primary key can be marked as autoIncrement (++)");if(!s.keyPath)throw new re.Schema("Index must have a name and cannot be an empty string")}),n[r]=ia(r,o,i)}})}stores(t){const n=this.db;this._cfg.storesSource=this._cfg.storesSource?Ge(this._cfg.storesSource,t):t;const r=n._versions,i={};let o={};return r.forEach(s=>{Ge(i,s._cfg.storesSource),o=s._cfg.dbschema={},s._parseStoresSpec(i,o)}),n._dbSchema=o,Ki(n,[n._allTables,n,n.Transaction.prototype]),Hr(n,[n._allTables,n,n.Transaction.prototype,this._cfg.tables],je(o),o),n._storeNames=je(o),this}upgrade(t){return this._cfg.contentUpgrade=ho(this._cfg.contentUpgrade||Ae,t),this}}function go(e,t){let n=e._dbNamesDB;return n||(n=e._dbNamesDB=new Pe("__dbnames",{addons:[],indexedDB:e,IDBKeyRange:t}),n.version(1).stores({dbnames:"name"})),n.table("dbnames")}function vo(e){return e&&typeof e.databases=="function"}function Vi(e){return Ht(function(){return Q.letThrough=!0,e()})}function zu(){var e;return!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(t){var n=function(){return indexedDB.databases().finally(t)};e=setInterval(n,100),n()}).finally(function(){return clearInterval(e)}):Promise.resolve()}function Hu(e){const t=e._state,{indexedDB:n}=e._deps;if(t.isBeingOpened||e.idbdb)return t.dbReadyPromise.then(()=>t.dbOpenError?Fe(t.dbOpenError):e);kt&&(t.openCanceller._stackHolder=hn()),t.isBeingOpened=!0,t.dbOpenError=null,t.openComplete=!1;const r=t.openCanceller;function i(){if(t.openCanceller!==r)throw new re.DatabaseClosed("db.open() was cancelled")}let o=t.dbReadyResolve,s=null,c=!1;return V.race([r,(typeof navigator>"u"?V.resolve():zu()).then(()=>new V((l,a)=>{if(i(),!n)throw new re.MissingAPI;const f=e.name,y=t.autoSchema?n.open(f):n.open(f,Math.round(10*e.verno));if(!y)throw new re.MissingAPI;y.onerror=At(a),y.onblocked=Ce(e._fireOnBlocked),y.onupgradeneeded=Ce(m=>{if(s=y.transaction,t.autoSchema&&!e._options.allowEmptyDB){y.onerror=ir,s.abort(),y.result.close();const b=n.deleteDatabase(f);b.onsuccess=b.onerror=Ce(()=>{a(new re.NoSuchDatabase(`Database ${f} doesnt exist`))})}else{s.onerror=At(a);var g=m.oldVersion>Math.pow(2,62)?0:m.oldVersion;c=g<1,e._novip.idbdb=y.result,qu(e,g/10,s,a)}},a),y.onsuccess=Ce(()=>{s=null;const m=e._novip.idbdb=y.result,g=Ur(m.objectStoreNames);if(g.length>0)try{const w=m.transaction((b=g).length===1?b[0]:b,"readonly");t.autoSchema?function({_novip:S},A,E){S.verno=A.version/10;const x=S._dbSchema=Ui(0,A,E);S._storeNames=Ur(A.objectStoreNames,0),Hr(S,[S._allTables],je(x),x)}(e,m,w):(Wi(e,e._dbSchema,w),function(S,A){const E=oa(Ui(0,S.idbdb,A),S._dbSchema);return!(E.add.length||E.change.some(x=>x.add.length||x.change.length))}(e,w)||console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Some queries may fail.")),Mi(e,w)}catch{}var b;Hn.push(e),m.onversionchange=Ce(w=>{t.vcFired=!0,e.on("versionchange").fire(w)}),m.onclose=Ce(w=>{e.on("close").fire(w)}),c&&function({indexedDB:w,IDBKeyRange:S},A){!vo(w)&&A!=="__dbnames"&&go(w,S).put({name:A}).catch(Ae)}(e._deps,f),l()},a)}))]).then(()=>(i(),t.onReadyBeingFired=[],V.resolve(Vi(()=>e.on.ready.fire(e.vip))).then(function l(){if(t.onReadyBeingFired.length>0){let a=t.onReadyBeingFired.reduce(ho,Ae);return t.onReadyBeingFired=[],V.resolve(Vi(()=>a(e.vip))).then(l)}}))).finally(()=>{t.onReadyBeingFired=null,t.isBeingOpened=!1}).then(()=>e).catch(l=>{t.dbOpenError=l;try{s&&s.abort()}catch{}return r===t.openCanceller&&e._close(),Fe(l)}).finally(()=>{t.openComplete=!0,o()})}function qi(e){var t=o=>e.next(o),n=i(t),r=i(o=>e.throw(o));function i(o){return s=>{var c=o(s),l=c.value;return c.done?l:l&&typeof l.then=="function"?l.then(n,r):qe(l)?Promise.all(l).then(n,r):n(l)}}return i(t)()}function Ju(e,t,n){var r=arguments.length;if(r<2)throw new re.InvalidArgument("Too few arguments");for(var i=new Array(r-1);--r;)i[r-1]=arguments[r];n=i.pop();var o=Ms(i);return[e,o,n]}function sa(e,t,n,r,i){return V.resolve().then(()=>{const o=Q.transless||Q,s=e._createTransaction(t,n,e._dbSchema,r),c={trans:s,transless:o};if(r)s.idbtrans=r.idbtrans;else try{s.create(),e._state.PR1398_maxLoop=3}catch(y){return y.name===fo.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),e._close(),e.open().then(()=>sa(e,t,n,null,i))):Fe(y)}const l=uo(i);let a;l&&Nn();const f=V.follow(()=>{if(a=i.call(s,s),a)if(l){var y=Ft.bind(null,null);a.then(y,y)}else typeof a.next=="function"&&typeof a.throw=="function"&&(a=qi(a))},c);return(a&&typeof a.then=="function"?V.resolve(a).then(y=>s.active?y:Fe(new re.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))):f.then(()=>a)).then(y=>(r&&s._resolve(),s._completion.then(()=>y))).catch(y=>(s._reject(y),Fe(y)))})}function Tr(e,t,n){const r=qe(e)?e.slice():[e];for(let i=0;i<n;++i)r.push(t);return r}const Gu={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(e){return{...e,table(t){const n=e.table(t),{schema:r}=n,i={},o=[];function s(f,y,m){const g=Gn(f),b=i[g]=i[g]||[],w=f==null?0:typeof f=="string"?1:f.length,S=y>0,A={...m,isVirtual:S,keyTail:y,keyLength:w,extractKey:Fi(f),unique:!S&&m.unique};return b.push(A),A.isPrimaryKey||o.push(A),w>1&&s(w===2?f[0]:f.slice(0,w-1),y+1,m),b.sort((E,x)=>E.keyTail-x.keyTail),A}const c=s(r.primaryKey.keyPath,0,r.primaryKey);i[":id"]=[c];for(const f of r.indexes)s(f.keyPath,0,f);function l(f){const y=f.query.index;return y.isVirtual?{...f,query:{index:y,range:(m=f.query.range,g=y.keyTail,{type:m.type===1?2:m.type,lower:Tr(m.lower,m.lowerOpen?e.MAX_KEY:e.MIN_KEY,g),lowerOpen:!0,upper:Tr(m.upper,m.upperOpen?e.MIN_KEY:e.MAX_KEY,g),upperOpen:!0})}}:f;var m,g}return{...n,schema:{...r,primaryKey:c,indexes:o,getIndexByKeyPath:function(f){const y=i[Gn(f)];return y&&y[0]}},count:f=>n.count(l(f)),query:f=>n.query(l(f)),openCursor(f){const{keyTail:y,isVirtual:m,keyLength:g}=f.query.index;return m?n.openCursor(l(f)).then(b=>b&&function(w){return Object.create(w,{continue:{value:function(A){A!=null?w.continue(Tr(A,f.reverse?e.MAX_KEY:e.MIN_KEY,y)):f.unique?w.continue(w.key.slice(0,g).concat(f.reverse?e.MIN_KEY:e.MAX_KEY,y)):w.continue()}},continuePrimaryKey:{value(A,E){w.continuePrimaryKey(Tr(A,e.MAX_KEY,y),E)}},primaryKey:{get:()=>w.primaryKey},key:{get(){const A=w.key;return g===1?A[0]:A.slice(0,g)}},value:{get:()=>w.value}})}(b)):n.openCursor(f)}}}}}};function bo(e,t,n,r){return n=n||{},r=r||"",je(e).forEach(i=>{if(st(t,i)){var o=e[i],s=t[i];if(typeof o=="object"&&typeof s=="object"&&o&&s){const c=Ei(o);c!==Ei(s)?n[r+i]=t[i]:c==="Object"?bo(o,s,n,r+i+"."):o!==s&&(n[r+i]=t[i])}else o!==s&&(n[r+i]=t[i])}else n[r+i]=void 0}),je(t).forEach(i=>{st(e,i)||(n[r+i]=t[i])}),n}const Xu={stack:"dbcore",name:"HooksMiddleware",level:2,create:e=>({...e,table(t){const n=e.table(t),{primaryKey:r}=n.schema;return{...n,mutate(o){const s=Q.trans,{deleting:c,creating:l,updating:a}=s.table(t).hook;switch(o.type){case"add":if(l.fire===Ae)break;return s._promise("readwrite",()=>f(o),!0);case"put":if(l.fire===Ae&&a.fire===Ae)break;return s._promise("readwrite",()=>f(o),!0);case"delete":if(c.fire===Ae)break;return s._promise("readwrite",()=>f(o),!0);case"deleteRange":if(c.fire===Ae)break;return s._promise("readwrite",()=>function(m){return y(m.trans,m.range,1e4)}(o),!0)}return n.mutate(o);function f(m){const g=Q.trans,b=m.keys||function(w,S){return S.type==="delete"?S.keys:S.keys||S.values.map(w.extractKey)}(r,m);if(!b)throw new Error("Keys missing");return(m=m.type==="add"||m.type==="put"?{...m,keys:b}:{...m}).type!=="delete"&&(m.values=[...m.values]),m.keys&&(m.keys=[...m.keys]),function(w,S,A){return S.type==="add"?Promise.resolve([]):w.getMany({trans:S.trans,keys:A,cache:"immutable"})}(n,m,b).then(w=>{const S=b.map((A,E)=>{const x=w[E],N={onerror:null,onsuccess:null};if(m.type==="delete")c.fire.call(N,A,x,g);else if(m.type==="add"||x===void 0){const k=l.fire.call(N,A,m.values[E],g);A==null&&k!=null&&(A=k,m.keys[E]=A,r.outbound||vt(m.values[E],r.keyPath,A))}else{const k=bo(x,m.values[E]),D=a.fire.call(N,k,A,x,g);if(D){const P=m.values[E];Object.keys(D).forEach(L=>{st(P,L)?P[L]=D[L]:vt(P,L,D[L])})}}return N});return n.mutate(m).then(({failures:A,results:E,numFailures:x,lastResult:N})=>{for(let k=0;k<b.length;++k){const D=E?E[k]:b[k],P=S[k];D==null?P.onerror&&P.onerror(A[k]):P.onsuccess&&P.onsuccess(m.type==="put"&&w[k]?m.values[k]:D)}return{failures:A,results:E,numFailures:x,lastResult:N}}).catch(A=>(S.forEach(E=>E.onerror&&E.onerror(A)),Promise.reject(A)))})}function y(m,g,b){return n.query({trans:m,values:!1,query:{index:r,range:g},limit:b}).then(({result:w})=>f({type:"delete",keys:w,trans:m}).then(S=>S.numFailures>0?Promise.reject(S.failures[0]):w.length<b?{failures:[],numFailures:0,lastResult:void 0}:y(m,{...g,lower:w[w.length-1],lowerOpen:!0},b)))}}}}})};function aa(e,t,n){try{if(!t||t.keys.length<e.length)return null;const r=[];for(let i=0,o=0;i<t.keys.length&&o<e.length;++i)Je(t.keys[i],e[o])===0&&(r.push(n?fr(t.values[i]):t.values[i]),++o);return r.length===e.length?r:null}catch{return null}}const Qu={stack:"dbcore",level:-1,create:e=>({table:t=>{const n=e.table(t);return{...n,getMany:r=>{if(!r.cache)return n.getMany(r);const i=aa(r.keys,r.trans._cache,r.cache==="clone");return i?V.resolve(i):n.getMany(r).then(o=>(r.trans._cache={keys:r.keys,values:r.cache==="clone"?fr(o):o},o))},mutate:r=>(r.type!=="add"&&(r.trans._cache=null),n.mutate(r))}}})};function wo(e){return!("from"in e)}const Dt=function(e,t){if(!this){const n=new Dt;return e&&"d"in e&&Ge(n,e),n}Ge(this,arguments.length?{d:1,from:e,to:arguments.length>1?t:e}:{d:0})};function sr(e,t,n){const r=Je(t,n);if(isNaN(r))return;if(r>0)throw RangeError();if(wo(e))return Ge(e,{from:t,to:n,d:1});const i=e.l,o=e.r;if(Je(n,e.from)<0)return i?sr(i,t,n):e.l={from:t,to:n,d:1,l:null,r:null},rs(e);if(Je(t,e.to)>0)return o?sr(o,t,n):e.r={from:t,to:n,d:1,l:null,r:null},rs(e);Je(t,e.from)<0&&(e.from=t,e.l=null,e.d=o?o.d+1:1),Je(n,e.to)>0&&(e.to=n,e.r=null,e.d=e.l?e.l.d+1:1);const s=!e.r;i&&!e.l&&Jr(e,i),o&&s&&Jr(e,o)}function Jr(e,t){wo(t)||function n(r,{from:i,to:o,l:s,r:c}){sr(r,i,o),s&&n(r,s),c&&n(r,c)}(e,t)}function Zu(e,t){const n=Yi(t);let r=n.next();if(r.done)return!1;let i=r.value;const o=Yi(e);let s=o.next(i.from),c=s.value;for(;!r.done&&!s.done;){if(Je(c.from,i.to)<=0&&Je(c.to,i.from)>=0)return!0;Je(i.from,c.from)<0?i=(r=n.next(c.from)).value:c=(s=o.next(i.from)).value}return!1}function Yi(e){let t=wo(e)?null:{s:0,n:e};return{next(n){const r=arguments.length>0;for(;t;)switch(t.s){case 0:if(t.s=1,r)for(;t.n.l&&Je(n,t.n.from)<0;)t={up:t,n:t.n.l,s:1};else for(;t.n.l;)t={up:t,n:t.n.l,s:1};case 1:if(t.s=2,!r||Je(n,t.n.to)<=0)return{value:t.n,done:!1};case 2:if(t.n.r){t.s=3,t={up:t,n:t.n.r,s:0};continue}case 3:t=t.up}return{done:!0}}}}function rs(e){var t,n;const r=(((t=e.r)===null||t===void 0?void 0:t.d)||0)-(((n=e.l)===null||n===void 0?void 0:n.d)||0),i=r>1?"r":r<-1?"l":"";if(i){const o=i==="r"?"l":"r",s={...e},c=e[i];e.from=c.from,e.to=c.to,e[i]=c[i],s[i]=c[o],e[o]=s,s.d=is(s)}e.d=is(e)}function is({r:e,l:t}){return(e?t?Math.max(e.d,t.d):e.d:t?t.d:0)+1}Dn(Dt.prototype,{add(e){return Jr(this,e),this},addKey(e){return sr(this,e,e),this},addKeys(e){return e.forEach(t=>sr(this,t,t)),this},[Oi](){return Yi(this)}});const el={stack:"dbcore",level:0,create:e=>{const t=e.schema.name,n=new Dt(e.MIN_KEY,e.MAX_KEY);return{...e,table:r=>{const i=e.table(r),{schema:o}=i,{primaryKey:s}=o,{extractKey:c,outbound:l}=s,a={...i,mutate:m=>{const g=m.trans,b=g.mutatedParts||(g.mutatedParts={}),w=D=>{const P=`idb://${t}/${r}/${D}`;return b[P]||(b[P]=new Dt)},S=w(""),A=w(":dels"),{type:E}=m;let[x,N]=m.type==="deleteRange"?[m.range]:m.type==="delete"?[m.keys]:m.values.length<50?[[],m.values]:[];const k=m.trans._cache;return i.mutate(m).then(D=>{if(qe(x)){E!=="delete"&&(x=D.results),S.addKeys(x);const P=aa(x,k);P||E==="add"||A.addKeys(x),(P||N)&&function(L,v,d,C){function T(z){const $=L(z.name||"");function ie(ee){return ee!=null?z.extractKey(ee):null}const oe=ee=>z.multiEntry&&qe(ee)?ee.forEach(se=>$.addKey(se)):$.addKey(ee);(d||C).forEach((ee,se)=>{const Ie=d&&ie(d[se]),Le=C&&ie(C[se]);Je(Ie,Le)!==0&&(Ie!=null&&oe(Ie),Le!=null&&oe(Le))})}v.indexes.forEach(T)}(w,o,P,N)}else if(x){const P={from:x.lower,to:x.upper};A.add(P),S.add(P)}else S.add(n),A.add(n),o.indexes.forEach(P=>w(P.name).add(n));return D})}},f=({query:{index:m,range:g}})=>{var b,w;return[m,new Dt((b=g.lower)!==null&&b!==void 0?b:e.MIN_KEY,(w=g.upper)!==null&&w!==void 0?w:e.MAX_KEY)]},y={get:m=>[s,new Dt(m.key)],getMany:m=>[s,new Dt().addKeys(m.keys)],count:f,query:f,openCursor:f};return je(y).forEach(m=>{a[m]=function(g){const{subscr:b}=Q;if(b){const w=N=>{const k=`idb://${t}/${r}/${N}`;return b[k]||(b[k]=new Dt)},S=w(""),A=w(":dels"),[E,x]=y[m](g);if(w(E.name||"").add(x),!E.isPrimaryKey){if(m!=="count"){const N=m==="query"&&l&&g.values&&i.query({...g,values:!1});return i[m].apply(this,arguments).then(k=>{if(m==="query"){if(l&&g.values)return N.then(({result:P})=>(S.addKeys(P),k));const D=g.values?k.result.map(c):k.result;g.values?S.addKeys(D):A.addKeys(D)}else if(m==="openCursor"){const D=k,P=g.values;return D&&Object.create(D,{key:{get:()=>(A.addKey(D.primaryKey),D.key)},primaryKey:{get(){const L=D.primaryKey;return A.addKey(L),L}},value:{get:()=>(P&&S.addKey(D.primaryKey),D.value)}})}return k})}A.add(n)}}return i[m].apply(this,arguments)}}),a}}}};class Pe{constructor(t,n){this._middlewares={},this.verno=0;const r=Pe.dependencies;this._options=n={addons:Pe.addons,autoOpen:!0,indexedDB:r.indexedDB,IDBKeyRange:r.IDBKeyRange,...n},this._deps={indexedDB:n.indexedDB,IDBKeyRange:n.IDBKeyRange};const{addons:i}=n;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;const o={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:Ae,dbReadyPromise:null,cancelOpen:Ae,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3};var s;o.dbReadyPromise=new V(c=>{o.dbReadyResolve=c}),o.openCanceller=new V((c,l)=>{o.cancelOpen=l}),this._state=o,this.name=t,this.on=Jn(this,"populate","blocked","versionchange","close",{ready:[ho,Ae]}),this.on.ready.subscribe=Rs(this.on.ready.subscribe,c=>(l,a)=>{Pe.vip(()=>{const f=this._state;if(f.openComplete)f.dbOpenError||V.resolve().then(l),a&&c(l);else if(f.onReadyBeingFired)f.onReadyBeingFired.push(l),a&&c(l);else{c(l);const y=this;a||c(function m(){y.on.ready.unsubscribe(l),y.on.ready.unsubscribe(m)})}})}),this.Collection=(s=this,Fn(Lu.prototype,function(c,l){this.db=s;let a=ea,f=null;if(l)try{a=l()}catch(b){f=b}const y=c._ctx,m=y.table,g=m.hook.reading.fire;this._ctx={table:m,index:y.index,isPrimKey:!y.index||m.schema.primKey.keyPath&&y.index===m.schema.primKey.name,range:a,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:f,or:y.or,valueMapper:g!==nr?g:null}})),this.Table=function(c){return Fn(ju.prototype,function(l,a,f){this.db=c,this._tx=f,this.name=l,this.schema=a,this.hook=c._allTables[l]?c._allTables[l].hook:Jn(null,{creating:[xu,Ae],reading:[Au,nr],updating:[Ou,Ae],deleting:[Eu,Ae]})})}(this),this.Transaction=function(c){return Fn($u.prototype,function(l,a,f,y,m){this.db=c,this.mode=l,this.storeNames=a,this.schema=f,this.chromeTransactionDurability=y,this.idbtrans=null,this.on=Jn(this,"complete","error","abort"),this.parent=m||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new V((g,b)=>{this._resolve=g,this._reject=b}),this._completion.then(()=>{this.active=!1,this.on.complete.fire()},g=>{var b=this.active;return this.active=!1,this.on.error.fire(g),this.parent?this.parent._reject(g):b&&this.idbtrans&&this.idbtrans.abort(),Fe(g)})})}(this),this.Version=function(c){return Fn(Yu.prototype,function(l){this.db=c,this._cfg={version:l,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})}(this),this.WhereClause=function(c){return Fn(na.prototype,function(l,a,f){this.db=c,this._ctx={table:l,index:a===":id"?null:a,or:f};const y=c._deps.indexedDB;if(!y)throw new re.MissingAPI;this._cmp=this._ascending=y.cmp.bind(y),this._descending=(m,g)=>y.cmp(g,m),this._max=(m,g)=>y.cmp(m,g)>0?m:g,this._min=(m,g)=>y.cmp(m,g)<0?m:g,this._IDBKeyRange=c._deps.IDBKeyRange})}(this),this.on("versionchange",c=>{c.newVersion>0?console.warn(`Another connection wants to upgrade database '${this.name}'. Closing db now to resume the upgrade.`):console.warn(`Another connection wants to delete database '${this.name}'. Closing db now to resume the delete request.`),this.close()}),this.on("blocked",c=>{!c.newVersion||c.newVersion<c.oldVersion?console.warn(`Dexie.delete('${this.name}') was blocked`):console.warn(`Upgrade '${this.name}' blocked by other connection holding version ${c.oldVersion/10}`)}),this._maxKey=or(n.IDBKeyRange),this._createTransaction=(c,l,a,f)=>new this.Transaction(c,l,a,this._options.chromeTransactionDurability,f),this._fireOnBlocked=c=>{this.on("blocked").fire(c),Hn.filter(l=>l.name===this.name&&l!==this&&!l._state.vcFired).map(l=>l.on("versionchange").fire(c))},this.use(Gu),this.use(Xu),this.use(el),this.use(Qu),this.vip=Object.create(this,{_vip:{value:!0}}),i.forEach(c=>c(this))}version(t){if(isNaN(t)||t<.1)throw new re.Type("Given version is not a positive number");if(t=Math.round(10*t)/10,this.idbdb||this._state.isBeingOpened)throw new re.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,t);const n=this._versions;var r=n.filter(i=>i._cfg.version===t)[0];return r||(r=new this.Version(t),n.push(r),n.sort(Vu),r.stores({}),this._state.autoSchema=!1,r)}_whenReady(t){return this.idbdb&&(this._state.openComplete||Q.letThrough||this._vip)?t():new V((n,r)=>{if(this._state.openComplete)return r(new re.DatabaseClosed(this._state.dbOpenError));if(!this._state.isBeingOpened){if(!this._options.autoOpen)return void r(new re.DatabaseClosed);this.open().catch(Ae)}this._state.dbReadyPromise.then(n,r)}).then(t)}use({stack:t,create:n,level:r,name:i}){i&&this.unuse({stack:t,name:i});const o=this._middlewares[t]||(this._middlewares[t]=[]);return o.push({stack:t,create:n,level:r??10,name:i}),o.sort((s,c)=>s.level-c.level),this}unuse({stack:t,name:n,create:r}){return t&&this._middlewares[t]&&(this._middlewares[t]=this._middlewares[t].filter(i=>r?i.create!==r:!!n&&i.name!==n)),this}open(){return Hu(this)}_close(){const t=this._state,n=Hn.indexOf(this);if(n>=0&&Hn.splice(n,1),this.idbdb){try{this.idbdb.close()}catch{}this._novip.idbdb=null}t.dbReadyPromise=new V(r=>{t.dbReadyResolve=r}),t.openCanceller=new V((r,i)=>{t.cancelOpen=i})}close(){this._close();const t=this._state;this._options.autoOpen=!1,t.dbOpenError=new re.DatabaseClosed,t.isBeingOpened&&t.cancelOpen(t.dbOpenError)}delete(){const t=arguments.length>0,n=this._state;return new V((r,i)=>{const o=()=>{this.close();var s=this._deps.indexedDB.deleteDatabase(this.name);s.onsuccess=Ce(()=>{(function({indexedDB:c,IDBKeyRange:l},a){!vo(c)&&a!=="__dbnames"&&go(c,l).delete(a).catch(Ae)})(this._deps,this.name),r()}),s.onerror=At(i),s.onblocked=this._fireOnBlocked};if(t)throw new re.InvalidArgument("Arguments not allowed in db.delete()");n.isBeingOpened?n.dbReadyPromise.then(o):o()})}backendDB(){return this.idbdb}isOpen(){return this.idbdb!==null}hasBeenClosed(){const t=this._state.dbOpenError;return t&&t.name==="DatabaseClosed"}hasFailed(){return this._state.dbOpenError!==null}dynamicallyOpened(){return this._state.autoSchema}get tables(){return je(this._allTables).map(t=>this._allTables[t])}transaction(){const t=Ju.apply(this,arguments);return this._transaction.apply(this,t)}_transaction(t,n,r){let i=Q.trans;i&&i.db===this&&t.indexOf("!")===-1||(i=null);const o=t.indexOf("?")!==-1;let s,c;t=t.replace("!","").replace("?","");try{if(c=n.map(a=>{var f=a instanceof this.Table?a.name:a;if(typeof f!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return f}),t=="r"||t==="readonly")s="readonly";else{if(t!="rw"&&t!="readwrite")throw new re.InvalidArgument("Invalid transaction mode: "+t);s="readwrite"}if(i){if(i.mode==="readonly"&&s==="readwrite"){if(!o)throw new re.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");i=null}i&&c.forEach(a=>{if(i&&i.storeNames.indexOf(a)===-1){if(!o)throw new re.SubTransaction("Table "+a+" not included in parent transaction.");i=null}}),o&&i&&!i.active&&(i=null)}}catch(a){return i?i._promise(null,(f,y)=>{y(a)}):Fe(a)}const l=sa.bind(null,this,s,c,i,r);return i?i._promise(s,l,"lock"):Q.trans?Bn(Q.transless,()=>this._whenReady(l)):this._whenReady(l)}table(t){if(!st(this._allTables,t))throw new re.InvalidTable(`Table ${t} does not exist`);return this._allTables[t]}}const tl=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable";class nl{constructor(t){this._subscribe=t}subscribe(t,n,r){return this._subscribe(t&&typeof t!="function"?t:{next:t,error:n,complete:r})}[tl](){return this}}function ca(e,t){return je(t).forEach(n=>{Jr(e[n]||(e[n]=new Dt),t[n])}),e}function rl(e){return new nl(t=>{const n=uo(e);let r=!1,i={},o={};const s={get closed(){return r},unsubscribe:()=>{r=!0,Gt.storagemutated.unsubscribe(f)}};t.start&&t.start(s);let c=!1,l=!1;function a(){return je(o).some(m=>i[m]&&Zu(i[m],o[m]))}const f=m=>{ca(i,m),a()&&y()},y=()=>{if(c||r)return;i={};const m={},g=function(b){n&&Nn();const w=()=>Ht(e,{subscr:b,trans:null}),S=Q.trans?Bn(Q.transless,w):w();return n&&S.then(Ft,Ft),S}(m);l||(Gt("storagemutated",f),l=!0),c=!0,Promise.resolve(g).then(b=>{c=!1,r||(a()?y():(i={},o=m,t.next&&t.next(b)))},b=>{c=!1,t.error&&t.error(b),s.unsubscribe()})};return y(),s})}let zi;try{zi={indexedDB:ke.indexedDB||ke.mozIndexedDB||ke.webkitIndexedDB||ke.msIndexedDB,IDBKeyRange:ke.IDBKeyRange||ke.webkitIDBKeyRange}}catch{zi={indexedDB:null,IDBKeyRange:null}}const en=Pe;function jr(e){let t=Bt;try{Bt=!0,Gt.storagemutated.fire(e)}finally{Bt=t}}Dn(en,{...Pr,delete:e=>new en(e,{addons:[]}).delete(),exists:e=>new en(e,{addons:[]}).open().then(t=>(t.close(),!0)).catch("NoSuchDatabaseError",()=>!1),getDatabaseNames(e){try{return function({indexedDB:t,IDBKeyRange:n}){return vo(t)?Promise.resolve(t.databases()).then(r=>r.map(i=>i.name).filter(i=>i!=="__dbnames")):go(t,n).toCollection().primaryKeys()}(en.dependencies).then(e)}catch{return Fe(new re.MissingAPI)}},defineClass:()=>function(e){Ge(this,e)},ignoreTransaction:e=>Q.trans?Bn(Q.transless,e):e(),vip:Vi,async:function(e){return function(){try{var t=qi(e.apply(this,arguments));return t&&typeof t.then=="function"?t:V.resolve(t)}catch(n){return Fe(n)}}},spawn:function(e,t,n){try{var r=qi(e.apply(n,t||[]));return r&&typeof r.then=="function"?r:V.resolve(r)}catch(i){return Fe(i)}},currentTransaction:{get:()=>Q.trans||null},waitFor:function(e,t){const n=V.resolve(typeof e=="function"?en.ignoreTransaction(e):e).timeout(t||6e4);return Q.trans?Q.trans.waitFor(n):n},Promise:V,debug:{get:()=>kt,set:e=>{$s(e,e==="dexie"?()=>!0:Zs)}},derive:En,extend:Ge,props:Dn,override:Rs,Events:Jn,on:Gt,liveQuery:rl,extendObservabilitySet:ca,getByKeyPath:jt,setByKeyPath:vt,delByKeyPath:function(e,t){typeof t=="string"?vt(e,t,void 0):"length"in t&&[].map.call(t,function(n){vt(e,n,void 0)})},shallowClone:Fs,deepClone:fr,getObjectDiff:bo,cmp:Je,asap:js,minKey:-(1/0),addons:[],connections:Hn,errnames:fo,dependencies:zi,semVer:"3.2.3",version:"3.2.3".split(".").map(e=>parseInt(e)).reduce((e,t,n)=>e+t/Math.pow(10,2*n))}),en.maxKey=or(en.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(Gt("storagemutated",e=>{if(!Bt){let t;si?(t=document.createEvent("CustomEvent"),t.initCustomEvent("x-storagemutated-1",!0,!0,e)):t=new CustomEvent("x-storagemutated-1",{detail:e}),Bt=!0,dispatchEvent(t),Bt=!1}}),addEventListener("x-storagemutated-1",({detail:e})=>{Bt||jr(e)}));let Bt=!1;if(typeof BroadcastChannel<"u"){const e=new BroadcastChannel("x-storagemutated-1");typeof e.unref=="function"&&e.unref(),Gt("storagemutated",t=>{Bt||e.postMessage(t)}),e.onmessage=t=>{t.data&&jr(t.data)}}else if(typeof self<"u"&&typeof navigator<"u"){Gt("storagemutated",t=>{try{Bt||(typeof localStorage<"u"&&localStorage.setItem("x-storagemutated-1",JSON.stringify({trig:Math.random(),changedParts:t})),typeof self.clients=="object"&&[...self.clients.matchAll({includeUncontrolled:!0})].forEach(n=>n.postMessage({type:"x-storagemutated-1",changedParts:t})))}catch{}}),typeof addEventListener<"u"&&addEventListener("storage",t=>{if(t.key==="x-storagemutated-1"){const n=JSON.parse(t.newValue);n&&jr(n.changedParts)}});const e=self.document&&navigator.serviceWorker;e&&e.addEventListener("message",function({data:t}){t&&t.type==="x-storagemutated-1"&&jr(t.changedParts)})}V.rejectionMapper=function(e,t){if(!e||e instanceof On||e instanceof TypeError||e instanceof SyntaxError||!e.name||!Jo[e.name])return e;var n=new Jo[e.name](t||e.message,e);return"stack"in e&&Rt(n,"stack",{get:function(){return this.inner.stack}}),n},$s(kt,Zs);/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function Xt(e,t,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function c(f){try{a(r.next(f))}catch(y){s(y)}}function l(f){try{a(r.throw(f))}catch(y){s(y)}}function a(f){f.done?o(f.value):i(f.value).then(c,l)}a((r=r.apply(e,t||[])).next())})}function gt(e,t){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,s;return s={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function c(a){return function(f){return l([a,f])}}function l(a){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(o=a[0]&2?i.return:a[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,a[1])).done)return o;switch(i=0,o&&(a=[a[0]&2,o.value]),a[0]){case 0:case 1:o=a;break;case 4:return n.label++,{value:a[1],done:!1};case 5:n.label++,i=a[1],a=[0];continue;case 7:a=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(a[0]===6||a[0]===2)){n=0;continue}if(a[0]===3&&(!o||a[1]>o[0]&&a[1]<o[3])){n.label=a[1];break}if(a[0]===6&&n.label<o[1]){n.label=o[1],o=a;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(a);break}o[2]&&n.ops.pop(),n.trys.pop();continue}a=t.call(e,n)}catch(f){a=[6,f],i=0}finally{r=o=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}}function il(e){var t=[e.schema.primKey].concat(e.schema.indexes);return t.map(function(n){return n.src}).join(",")}function ol(e){for(var t={},n=0,r=e.tables;n<r.length;n++){var i=r[n];t[i.name]=i.schema}return t}function ua(e,t){return new Promise(function(n,r){var i=new FileReader;i.onabort=function(o){return r(new Error("file read aborted"))},i.onerror=function(o){return r(o.target.error)},i.onload=function(o){return n(o.target.result)},t==="binary"?i.readAsArrayBuffer(e):i.readAsText(e)})}function la(e,t){if(typeof FileReaderSync>"u")throw new Error("FileReaderSync missing. Reading blobs synchronously requires code to run from within a web worker. Use TSON.encapsulateAsync() to do it from the main thread.");var n=new FileReaderSync,r=t==="binary"?n.readAsArrayBuffer(e):n.readAsText(e);return r}var Hi=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function _o(e,t){return t={exports:{}},e(t,t.exports),t.exports}var ai=_o(function(e,t){(function(n,r){e.exports=r()})(Hi,function(){function n(I){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?n=function(B){return typeof B}:n=function(B){return B&&typeof Symbol=="function"&&B.constructor===Symbol&&B!==Symbol.prototype?"symbol":typeof B},n(I)}function r(I,B,R,j,U,de,ye){try{var fe=I[de](ye),G=fe.value}catch(Ke){R(Ke);return}fe.done?B(G):Promise.resolve(G).then(j,U)}function i(I){return function(){var B=this,R=arguments;return new Promise(function(j,U){var de=I.apply(B,R);function ye(G){r(de,j,U,ye,fe,"next",G)}function fe(G){r(de,j,U,ye,fe,"throw",G)}ye(void 0)})}}function o(I,B){if(!(I instanceof B))throw new TypeError("Cannot call a class as a function")}function s(I,B){for(var R=0;R<B.length;R++){var j=B[R];j.enumerable=j.enumerable||!1,j.configurable=!0,"value"in j&&(j.writable=!0),Object.defineProperty(I,j.key,j)}}function c(I,B,R){return B&&s(I.prototype,B),R&&s(I,R),I}function l(I,B,R){return B in I?Object.defineProperty(I,B,{value:R,enumerable:!0,configurable:!0,writable:!0}):I[B]=R,I}function a(I,B){var R=Object.keys(I);if(Object.getOwnPropertySymbols){var j=Object.getOwnPropertySymbols(I);B&&(j=j.filter(function(U){return Object.getOwnPropertyDescriptor(I,U).enumerable})),R.push.apply(R,j)}return R}function f(I){for(var B=1;B<arguments.length;B++){var R=arguments[B]!=null?arguments[B]:{};B%2?a(Object(R),!0).forEach(function(j){l(I,j,R[j])}):Object.getOwnPropertyDescriptors?Object.defineProperties(I,Object.getOwnPropertyDescriptors(R)):a(Object(R)).forEach(function(j){Object.defineProperty(I,j,Object.getOwnPropertyDescriptor(R,j))})}return I}function y(I,B){return b(I)||S(I,B)||E()}function m(I){return g(I)||w(I)||A()}function g(I){if(Array.isArray(I)){for(var B=0,R=new Array(I.length);B<I.length;B++)R[B]=I[B];return R}}function b(I){if(Array.isArray(I))return I}function w(I){if(Symbol.iterator in Object(I)||Object.prototype.toString.call(I)==="[object Arguments]")return Array.from(I)}function S(I,B){if(Symbol.iterator in Object(I)||Object.prototype.toString.call(I)==="[object Arguments]"){var R=[],j=!0,U=!1,de=void 0;try{for(var ye=I[Symbol.iterator](),fe;!(j=(fe=ye.next()).done)&&(R.push(fe.value),!(B&&R.length===B));j=!0);}catch(G){U=!0,de=G}finally{try{!j&&ye.return!=null&&ye.return()}finally{if(U)throw de}}return R}}function A(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function E(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}var x=function I(B){o(this,I),this.p=new Promise(B)};x.__typeson__type__="TypesonPromise",typeof Symbol<"u"&&(x.prototype[Symbol.toStringTag]="TypesonPromise"),x.prototype.then=function(I,B){var R=this;return new x(function(j,U){R.p.then(function(de){j(I?I(de):de)}).catch(function(de){return B?B(de):Promise.reject(de)}).then(j,U)})},x.prototype.catch=function(I){return this.then(null,I)},x.resolve=function(I){return new x(function(B){B(I)})},x.reject=function(I){return new x(function(B,R){R(I)})},["all","race"].forEach(function(I){x[I]=function(B){return new x(function(R,j){Promise[I](B.map(function(U){return U&&U.constructor&&U.constructor.__typeson__type__==="TypesonPromise"?U.p:U})).then(R,j)})}});var N={},k=N.toString,D={}.hasOwnProperty,P=Object.getPrototypeOf,L=D.toString;function v(I,B){return $(I)&&typeof I.then=="function"&&(!B||typeof I.catch=="function")}function d(I){return k.call(I).slice(8,-1)}function C(I,B){if(!I||n(I)!=="object")return!1;var R=P(I);if(!R)return B===null;var j=D.call(R,"constructor")&&R.constructor;return typeof j!="function"?B===null:B===j||B!==null&&L.call(j)===L.call(B)||typeof B=="function"&&typeof j.__typeson__type__=="string"&&j.__typeson__type__===B.__typeson__type__}function T(I){if(!I||d(I)!=="Object")return!1;var B=P(I);return B?C(I,Object):!0}function z(I){if(!I||d(I)!=="Object")return!1;var B=P(I);return B?C(I,Object)||z(B):!0}function $(I){return I&&n(I)==="object"}function ie(I){return I.replace(/~/g,"~0").replace(/\./g,"~1")}function oe(I){return I.replace(/~1/g,".").replace(/~0/g,"~")}function ee(I,B){if(B==="")return I;var R=B.indexOf(".");if(R>-1){var j=I[oe(B.slice(0,R))];return j===void 0?void 0:ee(j,B.slice(R+1))}return I[oe(B)]}function se(I,B,R){if(B==="")return R;var j=B.indexOf(".");if(j>-1){var U=I[oe(B.slice(0,j))];return se(U,B.slice(j+1),R)}return I[oe(B)]=R,I}function Ie(I){return I===null?"null":Array.isArray(I)?"array":n(I)}var Le=Object.keys,We=Array.isArray,Ye={}.hasOwnProperty,ft=["type","replaced","iterateIn","iterateUnsetNumeric"];function J(I,B){if(I.keypath==="")return-1;var R=I.keypath.match(/\./g)||0,j=B.keypath.match(/\./g)||0;return R&&(R=R.length),j&&(j=j.length),R>j?-1:R<j?1:I.keypath<B.keypath?-1:I.keypath>B.keypath}var be=function(){function I(B){o(this,I),this.options=B,this.plainObjectReplacers=[],this.nonplainObjectReplacers=[],this.revivers={},this.types={}}return c(I,[{key:"stringify",value:function(R,j,U,de){de=f({},this.options,{},de,{stringification:!0});var ye=this.encapsulate(R,null,de);return We(ye)?JSON.stringify(ye[0],j,U):ye.then(function(fe){return JSON.stringify(fe,j,U)})}},{key:"stringifySync",value:function(R,j,U,de){return this.stringify(R,j,U,f({throwOnBadSyncType:!0},de,{sync:!0}))}},{key:"stringifyAsync",value:function(R,j,U,de){return this.stringify(R,j,U,f({throwOnBadSyncType:!0},de,{sync:!1}))}},{key:"parse",value:function(R,j,U){return U=f({},this.options,{},U,{parse:!0}),this.revive(JSON.parse(R,j),U)}},{key:"parseSync",value:function(R,j,U){return this.parse(R,j,f({throwOnBadSyncType:!0},U,{sync:!0}))}},{key:"parseAsync",value:function(R,j,U){return this.parse(R,j,f({throwOnBadSyncType:!0},U,{sync:!1}))}},{key:"specialTypeNames",value:function(R,j){var U=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return U.returnTypeNames=!0,this.encapsulate(R,j,U)}},{key:"rootTypeName",value:function(R,j){var U=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return U.iterateNone=!0,this.encapsulate(R,j,U)}},{key:"encapsulate",value:function(R,j,U){U=f({sync:!0},this.options,{},U);var de=U,ye=de.sync,fe=this,G={},Ke=[],Xe=[],et=[],dt="cyclic"in U?U.cyclic:!0,ht=U,Ct=ht.encapsulateObserver,tt=_e("",R,dt,j||{},et);function pt(Y){var p=Object.values(G);if(U.iterateNone)return p.length?p[0]:I.getJSONType(Y);if(p.length){if(U.returnTypeNames)return m(new Set(p));!Y||!T(Y)||Ye.call(Y,"$types")?Y={$:Y,$types:{$:G}}:Y.$types=G}else $(Y)&&Ye.call(Y,"$types")&&(Y={$:Y,$types:!0});return U.returnTypeNames?!1:Y}function De(Y,p){return we.apply(this,arguments)}function we(){return we=i(regeneratorRuntime.mark(function Y(p,u){var h;return regeneratorRuntime.wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return O.next=2,Promise.all(u.map(function(F){return F[1].p}));case 2:return h=O.sent,O.next=5,Promise.all(h.map(function(){var F=i(regeneratorRuntime.mark(function K(H){var W,te,ce,ue,ge,pe,he,xe,Ee,ae,$e,q,M,Z;return regeneratorRuntime.wrap(function(ne){for(;;)switch(ne.prev=ne.next){case 0:if(W=[],te=u.splice(0,1),ce=y(te,1),ue=ce[0],ge=y(ue,7),pe=ge[0],he=ge[2],xe=ge[3],Ee=ge[4],ae=ge[5],$e=ge[6],q=_e(pe,H,he,xe,W,!0,$e),M=C(q,x),!(pe&&M)){ne.next=11;break}return ne.next=8,q.p;case 8:return Z=ne.sent,Ee[ae]=Z,ne.abrupt("return",De(p,W));case 11:return pe?Ee[ae]=q:M?p=q.p:p=q,ne.abrupt("return",De(p,W));case 13:case"end":return ne.stop()}},K)}));return function(K){return F.apply(this,arguments)}}()));case 5:return O.abrupt("return",p);case 6:case"end":return O.stop()}},Y)})),we.apply(this,arguments)}function me(Y,p,u){Object.assign(Y,p);var h=ft.map(function(_){var O=Y[_];return delete Y[_],O});u(),ft.forEach(function(_,O){Y[_]=h[O]})}function _e(Y,p,u,h,_,O,F){var K,H={},W=n(p),te=Ct?function(M){var Z=F||h.type||I.getJSONType(p);Ct(Object.assign(M||H,{keypath:Y,value:p,cyclic:u,stateObj:h,promisesData:_,resolvingTypesonPromise:O,awaitingTypesonPromise:C(p,x)},{type:Z}))}:null;if(["string","boolean","number","undefined"].includes(W))return p===void 0||W==="number"&&(isNaN(p)||p===-1/0||p===1/0)?(h.replaced?K=p:K=Ne(Y,p,h,_,!1,O,te),K!==p&&(H={replaced:K})):K=p,te&&te(),K;if(p===null)return te&&te(),p;if(u&&!h.iterateIn&&!h.iterateUnsetNumeric&&p&&n(p)==="object"){var ce=Ke.indexOf(p);if(ce<0)u===!0&&(Ke.push(p),Xe.push(Y));else return G[Y]="#",te&&te({cyclicKeypath:Xe[ce]}),"#"+Xe[ce]}var ue=T(p),ge=We(p),pe=(ue||ge)&&(!fe.plainObjectReplacers.length||h.replaced)||h.iterateIn?p:Ne(Y,p,h,_,ue||ge,null,te),he;if(pe!==p?(K=pe,H={replaced:pe}):Y===""&&C(p,x)?(_.push([Y,p,u,h,void 0,void 0,h.type]),K=p):ge&&h.iterateIn!=="object"||h.iterateIn==="array"?(he=new Array(p.length),H={clone:he}):!["function","symbol"].includes(n(p))&&!("toJSON"in p)&&!C(p,x)&&!C(p,Promise)&&!C(p,ArrayBuffer)||ue||h.iterateIn==="object"?(he={},h.addLength&&(he.length=p.length),H={clone:he}):K=p,te&&te(),U.iterateNone)return he||K;if(!he)return K;if(h.iterateIn){var xe=function(Z){var X={ownKeys:Ye.call(p,Z)};me(h,X,function(){var ne=Y+(Y?".":"")+ie(Z),le=_e(ne,p[Z],!!u,h,_,O);C(le,x)?_.push([ne,le,!!u,h,he,Z,h.type]):le!==void 0&&(he[Z]=le)})};for(var Ee in p)xe(Ee);te&&te({endIterateIn:!0,end:!0})}else Le(p).forEach(function(M){var Z=Y+(Y?".":"")+ie(M),X={ownKeys:!0};me(h,X,function(){var ne=_e(Z,p[M],!!u,h,_,O);C(ne,x)?_.push([Z,ne,!!u,h,he,M,h.type]):ne!==void 0&&(he[M]=ne)})}),te&&te({endIterateOwn:!0,end:!0});if(h.iterateUnsetNumeric){for(var ae=p.length,$e=function(Z){if(!(Z in p)){var X=Y+(Y?".":"")+Z,ne={ownKeys:!1};me(h,ne,function(){var le=_e(X,void 0,!!u,h,_,O);C(le,x)?_.push([X,le,!!u,h,he,Z,h.type]):le!==void 0&&(he[Z]=le)})}},q=0;q<ae;q++)$e(q);te&&te({endIterateUnsetNumeric:!0,end:!0})}return he}function Ne(Y,p,u,h,_,O,F){for(var K=_?fe.plainObjectReplacers:fe.nonplainObjectReplacers,H=K.length;H--;){var W=K[H];if(W.test(p,u)){var te=W.type;if(fe.revivers[te]){var ce=G[Y];G[Y]=ce?[te].concat(ce):te}if(Object.assign(u,{type:te,replaced:!0}),(ye||!W.replaceAsync)&&!W.replace)return F&&F({typeDetected:!0}),_e(Y,p,dt&&"readonly",u,h,O,te);F&&F({replacing:!0});var ue=ye||!W.replaceAsync?"replace":"replaceAsync";return _e(Y,W[ue](p,u),dt&&"readonly",u,h,O,te)}}return p}return et.length?ye&&U.throwOnBadSyncType?function(){throw new TypeError("Sync method requested but async result obtained")}():Promise.resolve(De(tt,et)).then(pt):!ye&&U.throwOnBadSyncType?function(){throw new TypeError("Async method requested but sync result obtained")}():U.stringification&&ye?[pt(tt)]:ye?pt(tt):Promise.resolve(pt(tt))}},{key:"encapsulateSync",value:function(R,j,U){return this.encapsulate(R,j,f({throwOnBadSyncType:!0},U,{sync:!0}))}},{key:"encapsulateAsync",value:function(R,j,U){return this.encapsulate(R,j,f({throwOnBadSyncType:!0},U,{sync:!1}))}},{key:"revive",value:function(R,j){var U=R&&R.$types;if(!U)return R;if(U===!0)return R.$;j=f({sync:!0},this.options,{},j);var de=j,ye=de.sync,fe=[],G={},Ke=!0;U.$&&T(U.$)&&(R=R.$,U=U.$,Ke=!1);var Xe=this;function et(we,me){var _e=Xe.revivers[we]||[],Ne=y(_e,1),Y=Ne[0];if(!Y)throw new Error("Unregistered type: "+we);return ye&&!("revive"in Y)?me:Y[ye&&Y.revive?"revive":!ye&&Y.reviveAsync?"reviveAsync":"revive"](me,G)}function dt(){var we=[];if(Object.entries(U).forEach(function(me){var _e=y(me,2),Ne=_e[0],Y=_e[1];Y!=="#"&&[].concat(Y).forEach(function(p){var u=Xe.revivers[p]||[null,{}],h=y(u,2),_=h[1].plain;_&&(we.push({keypath:Ne,type:p}),delete U[Ne])})}),!!we.length)return we.sort(J).reduce(function me(_e,Ne){var Y=Ne.keypath,p=Ne.type;if(v(_e))return _e.then(function(_){return me(_,{keypath:Y,type:p})});var u=ee(R,Y);if(u=et(p,u),C(u,x))return u.then(function(_){var O=se(R,Y,_);O===_&&(R=O)});var h=se(R,Y,u);h===u&&(R=h)},void 0)}var ht=[];function Ct(we,me,_e,Ne,Y){if(!(Ke&&we==="$types")){var p=U[we],u=We(me);if(u||T(me)){var h=u?new Array(me.length):{};for(Le(me).forEach(function(ce){var ue=Ct(we+(we?".":"")+ie(ce),me[ce],_e||h,h,ce),ge=function(he){return C(he,Me)?h[ce]=void 0:he!==void 0&&(h[ce]=he),he};C(ue,x)?ht.push(ue.then(function(pe){return ge(pe)})):ge(ue)}),me=h;fe.length;){var _=y(fe[0],4),O=_[0],F=_[1],K=_[2],H=_[3],W=ee(O,F);if(W!==void 0)K[H]=W;else break;fe.splice(0,1)}}if(!p)return me;if(p==="#"){var te=ee(_e,me.slice(1));return te===void 0&&fe.push([_e,me.slice(1),Ne,Y]),te}return[].concat(p).reduce(function ce(ue,ge){return C(ue,x)?ue.then(function(pe){return ce(pe,ge)}):et(ge,ue)},me)}}function tt(we){return C(we,Me)?void 0:we}var pt=dt(),De;return C(pt,x)?De=pt.then(function(){return R}):(De=Ct("",R,null),ht.length&&(De=x.resolve(De).then(function(we){return x.all([we].concat(ht))}).then(function(we){var me=y(we,1),_e=me[0];return _e}))),v(De)?ye&&j.throwOnBadSyncType?function(){throw new TypeError("Sync method requested but async result obtained")}():C(De,x)?De.p.then(tt):De:!ye&&j.throwOnBadSyncType?function(){throw new TypeError("Async method requested but sync result obtained")}():ye?tt(De):Promise.resolve(tt(De))}},{key:"reviveSync",value:function(R,j){return this.revive(R,f({throwOnBadSyncType:!0},j,{sync:!0}))}},{key:"reviveAsync",value:function(R,j){return this.revive(R,f({throwOnBadSyncType:!0},j,{sync:!1}))}},{key:"register",value:function(R,j){return j=j||{},[].concat(R).forEach(function U(de){var ye=this;if(We(de))return de.map(function(fe){return U.call(ye,fe)});de&&Le(de).forEach(function(fe){if(fe==="#")throw new TypeError("# cannot be used as a type name as it is reserved for cyclic objects");if(I.JSON_TYPES.includes(fe))throw new TypeError("Plain JSON object types are reserved as type names");var G=de[fe],Ke=G&&G.testPlainObjects?this.plainObjectReplacers:this.nonplainObjectReplacers,Xe=Ke.filter(function(_e){return _e.type===fe});if(Xe.length&&(Ke.splice(Ke.indexOf(Xe[0]),1),delete this.revivers[fe],delete this.types[fe]),typeof G=="function"){var et=G;G={test:function(Ne){return Ne&&Ne.constructor===et},replace:function(Ne){return f({},Ne)},revive:function(Ne){return Object.assign(Object.create(et.prototype),Ne)}}}else if(We(G)){var dt=G,ht=y(dt,3),Ct=ht[0],tt=ht[1],pt=ht[2];G={test:Ct,replace:tt,revive:pt}}if(!(!G||!G.test)){var De={type:fe,test:G.test.bind(G)};G.replace&&(De.replace=G.replace.bind(G)),G.replaceAsync&&(De.replaceAsync=G.replaceAsync.bind(G));var we=typeof j.fallback=="number"?j.fallback:j.fallback?0:1/0;if(G.testPlainObjects?this.plainObjectReplacers.splice(we,0,De):this.nonplainObjectReplacers.splice(we,0,De),G.revive||G.reviveAsync){var me={};G.revive&&(me.revive=G.revive.bind(G)),G.reviveAsync&&(me.reviveAsync=G.reviveAsync.bind(G)),this.revivers[fe]=[me,{plain:G.testPlainObjects}]}this.types[fe]=G}},this)},this),this}}]),I}(),Me=function I(){o(this,I)};return Me.__typeson__type__="TypesonUndefined",be.Undefined=Me,be.Promise=x,be.isThenable=v,be.toStringTag=d,be.hasConstructorOf=C,be.isObject=$,be.isPlainObject=T,be.isUserObject=z,be.escapeKeyPathComponent=ie,be.unescapeKeyPathComponent=oe,be.getByKeyPath=ee,be.getJSONType=Ie,be.JSON_TYPES=["null","boolean","number","string","array","object"],be})}),sl=_o(function(e,t){(function(n,r){e.exports=r()})(Hi,function(){function n(p){return(n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(u){return typeof u}:function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u})(p)}function r(p,u){if(!(p instanceof u))throw new TypeError("Cannot call a class as a function")}function i(p,u){for(var h=0;h<u.length;h++){var _=u[h];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(p,_.key,_)}}function o(p,u,h){return u in p?Object.defineProperty(p,u,{value:h,enumerable:!0,configurable:!0,writable:!0}):p[u]=h,p}function s(p,u){var h=Object.keys(p);if(Object.getOwnPropertySymbols){var _=Object.getOwnPropertySymbols(p);u&&(_=_.filter(function(O){return Object.getOwnPropertyDescriptor(p,O).enumerable})),h.push.apply(h,_)}return h}function c(p){return function(h){if(Array.isArray(h))return l(h)}(p)||function(h){if(typeof Symbol<"u"&&Symbol.iterator in Object(h))return Array.from(h)}(p)||function(h,_){if(h){if(typeof h=="string")return l(h,_);var O=Object.prototype.toString.call(h).slice(8,-1);if(O==="Object"&&h.constructor&&(O=h.constructor.name),O==="Map"||O==="Set")return Array.from(h);if(O==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(O))return l(h,_)}}(p)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function l(p,u){(u==null||u>p.length)&&(u=p.length);for(var h=0,_=new Array(u);h<u;h++)_[h]=p[h];return _}function a(p){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(h){return typeof h}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h})(p)}function f(p,u){if(!(p instanceof u))throw new TypeError("Cannot call a class as a function")}function y(p,u){for(var h=0;h<u.length;h++){var _=u[h];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(p,_.key,_)}}function m(p,u,h){return u in p?Object.defineProperty(p,u,{value:h,enumerable:!0,configurable:!0,writable:!0}):p[u]=h,p}function g(p,u){var h=Object.keys(p);if(Object.getOwnPropertySymbols){var _=Object.getOwnPropertySymbols(p);u&&(_=_.filter(function(O){return Object.getOwnPropertyDescriptor(p,O).enumerable})),h.push.apply(h,_)}return h}function b(p){for(var u=1;u<arguments.length;u++){var h=arguments[u]!=null?arguments[u]:{};u%2?g(Object(h),!0).forEach(function(_){m(p,_,h[_])}):Object.getOwnPropertyDescriptors?Object.defineProperties(p,Object.getOwnPropertyDescriptors(h)):g(Object(h)).forEach(function(_){Object.defineProperty(p,_,Object.getOwnPropertyDescriptor(h,_))})}return p}function w(p,u){return function(_){if(Array.isArray(_))return _}(p)||function(_,O){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(_)))){var F=[],K=!0,H=!1,W=void 0;try{for(var te,ce=_[Symbol.iterator]();!(K=(te=ce.next()).done)&&(F.push(te.value),!O||F.length!==O);K=!0);}catch(ue){H=!0,W=ue}finally{try{K||ce.return==null||ce.return()}finally{if(H)throw W}}return F}}(p,u)||A(p,u)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function S(p){return function(h){if(Array.isArray(h))return E(h)}(p)||function(h){if(typeof Symbol<"u"&&Symbol.iterator in Object(h))return Array.from(h)}(p)||A(p)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function A(p,u){if(p){if(typeof p=="string")return E(p,u);var h=Object.prototype.toString.call(p).slice(8,-1);return h==="Object"&&p.constructor&&(h=p.constructor.name),h==="Map"||h==="Set"?Array.from(p):h==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(h)?E(p,u):void 0}}function E(p,u){(u==null||u>p.length)&&(u=p.length);for(var h=0,_=new Array(u);h<u;h++)_[h]=p[h];return _}var x=function p(u){f(this,p),this.p=new Promise(u)};x.__typeson__type__="TypesonPromise",typeof Symbol<"u"&&(x.prototype[Symbol.toStringTag]="TypesonPromise"),x.prototype.then=function(p,u){var h=this;return new x(function(_,O){h.p.then(function(F){_(p?p(F):F)}).catch(function(F){return u?u(F):Promise.reject(F)}).then(_,O)})},x.prototype.catch=function(p){return this.then(null,p)},x.resolve=function(p){return new x(function(u){u(p)})},x.reject=function(p){return new x(function(u,h){h(p)})},["all","race"].forEach(function(p){x[p]=function(u){return new x(function(h,_){Promise[p](u.map(function(O){return O&&O.constructor&&O.constructor.__typeson__type__==="TypesonPromise"?O.p:O})).then(h,_)})}});var N={}.toString,k={}.hasOwnProperty,D=Object.getPrototypeOf,P=k.toString;function L(p,u){return T(p)&&typeof p.then=="function"&&(!u||typeof p.catch=="function")}function v(p){return N.call(p).slice(8,-1)}function d(p,u){if(!p||a(p)!=="object")return!1;var h=D(p);if(!h)return u===null;var _=k.call(h,"constructor")&&h.constructor;return typeof _!="function"?u===null:u===_||u!==null&&P.call(_)===P.call(u)||typeof u=="function"&&typeof _.__typeson__type__=="string"&&_.__typeson__type__===u.__typeson__type__}function C(p){return!(!p||v(p)!=="Object")&&(!D(p)||d(p,Object))}function T(p){return p&&a(p)==="object"}function z(p){return p.replace(/~/g,"~0").replace(/\./g,"~1")}function $(p){return p.replace(/~1/g,".").replace(/~0/g,"~")}function ie(p,u){if(u==="")return p;var h=u.indexOf(".");if(h>-1){var _=p[$(u.slice(0,h))];return _===void 0?void 0:ie(_,u.slice(h+1))}return p[$(u)]}function oe(p,u,h){if(u==="")return h;var _=u.indexOf(".");return _>-1?oe(p[$(u.slice(0,_))],u.slice(_+1),h):(p[$(u)]=h,p)}function ee(p,u,h){return h?u?u(p):p:(p&&p.then||(p=Promise.resolve(p)),u?p.then(u):p)}var se=Object.keys,Ie=Array.isArray,Le={}.hasOwnProperty,We=["type","replaced","iterateIn","iterateUnsetNumeric"];function Ye(p){return function(){for(var u=[],h=0;h<arguments.length;h++)u[h]=arguments[h];try{return Promise.resolve(p.apply(this,u))}catch(_){return Promise.reject(_)}}}function ft(p,u){if(p.keypath==="")return-1;var h=p.keypath.match(/\./g)||0,_=u.keypath.match(/\./g)||0;return h&&(h=h.length),_&&(_=_.length),h>_?-1:h<_?1:p.keypath<u.keypath?-1:p.keypath>u.keypath}var J=function(){function p(u){f(this,p),this.options=u,this.plainObjectReplacers=[],this.nonplainObjectReplacers=[],this.revivers={},this.types={}}return function(h,_,O){return _&&y(h.prototype,_),O&&y(h,O),h}(p,[{key:"stringify",value:function(h,_,O,F){F=b(b(b({},this.options),F),{},{stringification:!0});var K=this.encapsulate(h,null,F);return Ie(K)?JSON.stringify(K[0],_,O):K.then(function(H){return JSON.stringify(H,_,O)})}},{key:"stringifySync",value:function(h,_,O,F){return this.stringify(h,_,O,b(b({throwOnBadSyncType:!0},F),{},{sync:!0}))}},{key:"stringifyAsync",value:function(h,_,O,F){return this.stringify(h,_,O,b(b({throwOnBadSyncType:!0},F),{},{sync:!1}))}},{key:"parse",value:function(h,_,O){return O=b(b(b({},this.options),O),{},{parse:!0}),this.revive(JSON.parse(h,_),O)}},{key:"parseSync",value:function(h,_,O){return this.parse(h,_,b(b({throwOnBadSyncType:!0},O),{},{sync:!0}))}},{key:"parseAsync",value:function(h,_,O){return this.parse(h,_,b(b({throwOnBadSyncType:!0},O),{},{sync:!1}))}},{key:"specialTypeNames",value:function(h,_){var O=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return O.returnTypeNames=!0,this.encapsulate(h,_,O)}},{key:"rootTypeName",value:function(h,_){var O=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return O.iterateNone=!0,this.encapsulate(h,_,O)}},{key:"encapsulate",value:function(h,_,O){var F=Ye(function(q,M){return ee(Promise.all(M.map(function(Z){return Z[1].p})),function(Z){return ee(Promise.all(Z.map(Ye(function(X){var ne=!1,le=[],nt=w(M.splice(0,1),1),Be=w(nt[0],7),Qe=Be[0],at=Be[2],Se=Be[3],ct=Be[4],Te=Be[5],rt=Be[6],ze=ae(Qe,X,at,Se,le,!0,rt),yt=d(ze,x);return function(li,gr){var pn=li();return pn&&pn.then?pn.then(gr):gr(pn)}(function(){if(Qe&&yt)return ee(ze.p,function(mt){return ct[Te]=mt,ne=!0,F(q,le)})},function(mt){return ne?mt:(Qe?ct[Te]=ze:q=yt?ze.p:ze,F(q,le))})}))),function(){return q})})}),K=(O=b(b({sync:!0},this.options),O)).sync,H=this,W={},te=[],ce=[],ue=[],ge=!("cyclic"in O)||O.cyclic,pe=O.encapsulateObserver,he=ae("",h,ge,_||{},ue);function xe(q){var M=Object.values(W);if(O.iterateNone)return M.length?M[0]:p.getJSONType(q);if(M.length){if(O.returnTypeNames)return S(new Set(M));q&&C(q)&&!Le.call(q,"$types")?q.$types=W:q={$:q,$types:{$:W}}}else T(q)&&Le.call(q,"$types")&&(q={$:q,$types:!0});return!O.returnTypeNames&&q}function Ee(q,M,Z){Object.assign(q,M);var X=We.map(function(ne){var le=q[ne];return delete q[ne],le});Z(),We.forEach(function(ne,le){q[ne]=X[le]})}function ae(q,M,Z,X,ne,le,nt){var Be,Qe={},at=a(M),Se=pe?function(Wt){var He=nt||X.type||p.getJSONType(M);pe(Object.assign(Wt||Qe,{keypath:q,value:M,cyclic:Z,stateObj:X,promisesData:ne,resolvingTypesonPromise:le,awaitingTypesonPromise:d(M,x)},{type:He}))}:null;if(["string","boolean","number","undefined"].includes(at))return M===void 0||Number.isNaN(M)||M===Number.NEGATIVE_INFINITY||M===Number.POSITIVE_INFINITY?(Be=X.replaced?M:$e(q,M,X,ne,!1,le,Se))!==M&&(Qe={replaced:Be}):Be=M,Se&&Se(),Be;if(M===null)return Se&&Se(),M;if(Z&&!X.iterateIn&&!X.iterateUnsetNumeric&&M&&a(M)==="object"){var ct=te.indexOf(M);if(!(ct<0))return W[q]="#",Se&&Se({cyclicKeypath:ce[ct]}),"#"+ce[ct];Z===!0&&(te.push(M),ce.push(q))}var Te,rt=C(M),ze=Ie(M),yt=(rt||ze)&&(!H.plainObjectReplacers.length||X.replaced)||X.iterateIn?M:$e(q,M,X,ne,rt||ze,null,Se);if(yt!==M?(Be=yt,Qe={replaced:yt}):q===""&&d(M,x)?(ne.push([q,M,Z,X,void 0,void 0,X.type]),Be=M):ze&&X.iterateIn!=="object"||X.iterateIn==="array"?(Te=new Array(M.length),Qe={clone:Te}):(["function","symbol"].includes(a(M))||"toJSON"in M||d(M,x)||d(M,Promise)||d(M,ArrayBuffer))&&!rt&&X.iterateIn!=="object"?Be=M:(Te={},X.addLength&&(Te.length=M.length),Qe={clone:Te}),Se&&Se(),O.iterateNone)return Te||Be;if(!Te)return Be;if(X.iterateIn){var mt=function(He){var Pt={ownKeys:Le.call(M,He)};Ee(X,Pt,function(){var Zt=q+(q?".":"")+z(He),vr=ae(Zt,M[He],!!Z,X,ne,le);d(vr,x)?ne.push([Zt,vr,!!Z,X,Te,He,X.type]):vr!==void 0&&(Te[He]=vr)})};for(var li in M)mt(li);Se&&Se({endIterateIn:!0,end:!0})}else se(M).forEach(function(Wt){var He=q+(q?".":"")+z(Wt);Ee(X,{ownKeys:!0},function(){var Pt=ae(He,M[Wt],!!Z,X,ne,le);d(Pt,x)?ne.push([He,Pt,!!Z,X,Te,Wt,X.type]):Pt!==void 0&&(Te[Wt]=Pt)})}),Se&&Se({endIterateOwn:!0,end:!0});if(X.iterateUnsetNumeric){for(var gr=M.length,pn=function(He){if(!(He in M)){var Pt=q+(q?".":"")+He;Ee(X,{ownKeys:!1},function(){var Zt=ae(Pt,void 0,!!Z,X,ne,le);d(Zt,x)?ne.push([Pt,Zt,!!Z,X,Te,He,X.type]):Zt!==void 0&&(Te[He]=Zt)})}},fi=0;fi<gr;fi++)pn(fi);Se&&Se({endIterateUnsetNumeric:!0,end:!0})}return Te}function $e(q,M,Z,X,ne,le,nt){for(var Be=ne?H.plainObjectReplacers:H.nonplainObjectReplacers,Qe=Be.length;Qe--;){var at=Be[Qe];if(at.test(M,Z)){var Se=at.type;if(H.revivers[Se]){var ct=W[q];W[q]=ct?[Se].concat(ct):Se}return Object.assign(Z,{type:Se,replaced:!0}),!K&&at.replaceAsync||at.replace?(nt&&nt({replacing:!0}),ae(q,at[K||!at.replaceAsync?"replace":"replaceAsync"](M,Z),ge&&"readonly",Z,X,le,Se)):(nt&&nt({typeDetected:!0}),ae(q,M,ge&&"readonly",Z,X,le,Se))}}return M}return ue.length?K&&O.throwOnBadSyncType?function(){throw new TypeError("Sync method requested but async result obtained")}():Promise.resolve(F(he,ue)).then(xe):!K&&O.throwOnBadSyncType?function(){throw new TypeError("Async method requested but sync result obtained")}():O.stringification&&K?[xe(he)]:K?xe(he):Promise.resolve(xe(he))}},{key:"encapsulateSync",value:function(h,_,O){return this.encapsulate(h,_,b(b({throwOnBadSyncType:!0},O),{},{sync:!0}))}},{key:"encapsulateAsync",value:function(h,_,O){return this.encapsulate(h,_,b(b({throwOnBadSyncType:!0},O),{},{sync:!1}))}},{key:"revive",value:function(h,_){var O=h&&h.$types;if(!O)return h;if(O===!0)return h.$;var F=(_=b(b({sync:!0},this.options),_)).sync,K=[],H={},W=!0;O.$&&C(O.$)&&(h=h.$,O=O.$,W=!1);var te=this;function ce(xe,Ee){var ae=w(te.revivers[xe]||[],1)[0];if(!ae)throw new Error("Unregistered type: "+xe);return F&&!("revive"in ae)?Ee:ae[F&&ae.revive?"revive":!F&&ae.reviveAsync?"reviveAsync":"revive"](Ee,H)}var ue=[];function ge(xe){return d(xe,be)?void 0:xe}var pe,he=function(){var Ee=[];if(Object.entries(O).forEach(function(ae){var $e=w(ae,2),q=$e[0],M=$e[1];M!=="#"&&[].concat(M).forEach(function(Z){w(te.revivers[Z]||[null,{}],2)[1].plain&&(Ee.push({keypath:q,type:Z}),delete O[q])})}),Ee.length)return Ee.sort(ft).reduce(function ae($e,q){var M=q.keypath,Z=q.type;if(L($e))return $e.then(function(le){return ae(le,{keypath:M,type:Z})});var X=ie(h,M);if(d(X=ce(Z,X),x))return X.then(function(le){var nt=oe(h,M,le);nt===le&&(h=nt)});var ne=oe(h,M,X);ne===X&&(h=ne)},void 0)}();return d(he,x)?pe=he.then(function(){return h}):(pe=function xe(Ee,ae,$e,q,M){if(!W||Ee!=="$types"){var Z=O[Ee],X=Ie(ae);if(X||C(ae)){var ne=X?new Array(ae.length):{};for(se(ae).forEach(function(Te){var rt=xe(Ee+(Ee?".":"")+z(Te),ae[Te],$e||ne,ne,Te),ze=function(mt){return d(mt,be)?ne[Te]=void 0:mt!==void 0&&(ne[Te]=mt),mt};d(rt,x)?ue.push(rt.then(function(yt){return ze(yt)})):ze(rt)}),ae=ne;K.length;){var le=w(K[0],4),nt=le[0],Be=le[1],Qe=le[2],at=le[3],Se=ie(nt,Be);if(Se===void 0)break;Qe[at]=Se,K.splice(0,1)}}if(!Z)return ae;if(Z==="#"){var ct=ie($e,ae.slice(1));return ct===void 0&&K.push([$e,ae.slice(1),q,M]),ct}return[].concat(Z).reduce(function Te(rt,ze){return d(rt,x)?rt.then(function(yt){return Te(yt,ze)}):ce(ze,rt)},ae)}}("",h,null),ue.length&&(pe=x.resolve(pe).then(function(xe){return x.all([xe].concat(ue))}).then(function(xe){return w(xe,1)[0]}))),L(pe)?F&&_.throwOnBadSyncType?function(){throw new TypeError("Sync method requested but async result obtained")}():d(pe,x)?pe.p.then(ge):pe:!F&&_.throwOnBadSyncType?function(){throw new TypeError("Async method requested but sync result obtained")}():F?ge(pe):Promise.resolve(ge(pe))}},{key:"reviveSync",value:function(h,_){return this.revive(h,b(b({throwOnBadSyncType:!0},_),{},{sync:!0}))}},{key:"reviveAsync",value:function(h,_){return this.revive(h,b(b({throwOnBadSyncType:!0},_),{},{sync:!1}))}},{key:"register",value:function(h,_){return _=_||{},[].concat(h).forEach(function O(F){var K=this;if(Ie(F))return F.map(function(H){return O.call(K,H)});F&&se(F).forEach(function(H){if(H==="#")throw new TypeError("# cannot be used as a type name as it is reserved for cyclic objects");if(p.JSON_TYPES.includes(H))throw new TypeError("Plain JSON object types are reserved as type names");var W=F[H],te=W&&W.testPlainObjects?this.plainObjectReplacers:this.nonplainObjectReplacers,ce=te.filter(function(Ee){return Ee.type===H});if(ce.length&&(te.splice(te.indexOf(ce[0]),1),delete this.revivers[H],delete this.types[H]),typeof W=="function"){var ue=W;W={test:function(ae){return ae&&ae.constructor===ue},replace:function(ae){return b({},ae)},revive:function(ae){return Object.assign(Object.create(ue.prototype),ae)}}}else if(Ie(W)){var ge=w(W,3);W={test:ge[0],replace:ge[1],revive:ge[2]}}if(W&&W.test){var pe={type:H,test:W.test.bind(W)};W.replace&&(pe.replace=W.replace.bind(W)),W.replaceAsync&&(pe.replaceAsync=W.replaceAsync.bind(W));var he=typeof _.fallback=="number"?_.fallback:_.fallback?0:Number.POSITIVE_INFINITY;if(W.testPlainObjects?this.plainObjectReplacers.splice(he,0,pe):this.nonplainObjectReplacers.splice(he,0,pe),W.revive||W.reviveAsync){var xe={};W.revive&&(xe.revive=W.revive.bind(W)),W.reviveAsync&&(xe.reviveAsync=W.reviveAsync.bind(W)),this.revivers[H]=[xe,{plain:W.testPlainObjects}]}this.types[H]=W}},this)},this),this}}]),p}(),be=function p(){f(this,p)};be.__typeson__type__="TypesonUndefined",J.Undefined=be,J.Promise=x,J.isThenable=L,J.toStringTag=v,J.hasConstructorOf=d,J.isObject=T,J.isPlainObject=C,J.isUserObject=function p(u){if(!u||v(u)!=="Object")return!1;var h=D(u);return!h||d(u,Object)||p(h)},J.escapeKeyPathComponent=z,J.unescapeKeyPathComponent=$,J.getByKeyPath=ie,J.getJSONType=function(u){return u===null?"null":Array.isArray(u)?"array":a(u)},J.JSON_TYPES=["null","boolean","number","string","array","object"];for(var Me={userObject:{test:function(u,h){return J.isUserObject(u)},replace:function(u){return function(_){for(var O=1;O<arguments.length;O++){var F=arguments[O]!=null?arguments[O]:{};O%2?s(Object(F),!0).forEach(function(K){o(_,K,F[K])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_,Object.getOwnPropertyDescriptors(F)):s(Object(F)).forEach(function(K){Object.defineProperty(_,K,Object.getOwnPropertyDescriptor(F,K))})}return _}({},u)},revive:function(u){return u}}},I=[{arrayNonindexKeys:{testPlainObjects:!0,test:function(u,h){return!!Array.isArray(u)&&(Object.keys(u).some(function(_){return String(Number.parseInt(_))!==_})&&(h.iterateIn="object",h.addLength=!0),!0)},replace:function(u,h){return h.iterateUnsetNumeric=!0,u},revive:function(u){if(Array.isArray(u))return u;var h=[];return Object.keys(u).forEach(function(_){var O=u[_];h[_]=O}),h}}},{sparseUndefined:{test:function(u,h){return u===void 0&&h.ownKeys===!1},replace:function(u){return 0},revive:function(u){}}}],B={undef:{test:function(u,h){return u===void 0&&(h.ownKeys||!("ownKeys"in h))},replace:function(u){return 0},revive:function(u){return new J.Undefined}}},R={StringObject:{test:function(u){return J.toStringTag(u)==="String"&&n(u)==="object"},replace:function(u){return String(u)},revive:function(u){return new String(u)}},BooleanObject:{test:function(u){return J.toStringTag(u)==="Boolean"&&n(u)==="object"},replace:function(u){return!!u},revive:function(u){return new Boolean(u)}},NumberObject:{test:function(u){return J.toStringTag(u)==="Number"&&n(u)==="object"},replace:function(u){return Number(u)},revive:function(u){return new Number(u)}}},j=[{nan:{test:function(u){return Number.isNaN(u)},replace:function(u){return"NaN"},revive:function(u){return Number.NaN}}},{infinity:{test:function(u){return u===Number.POSITIVE_INFINITY},replace:function(u){return"Infinity"},revive:function(u){return Number.POSITIVE_INFINITY}}},{negativeInfinity:{test:function(u){return u===Number.NEGATIVE_INFINITY},replace:function(u){return"-Infinity"},revive:function(u){return Number.NEGATIVE_INFINITY}}}],U={date:{test:function(u){return J.toStringTag(u)==="Date"},replace:function(u){var h=u.getTime();return Number.isNaN(h)?"NaN":h},revive:function(u){return u==="NaN"?new Date(Number.NaN):new Date(u)}}},de={regexp:{test:function(u){return J.toStringTag(u)==="RegExp"},replace:function(u){return{source:u.source,flags:(u.global?"g":"")+(u.ignoreCase?"i":"")+(u.multiline?"m":"")+(u.sticky?"y":"")+(u.unicode?"u":"")}},revive:function(u){var h=u.source,_=u.flags;return new RegExp(h,_)}}},ye={map:{test:function(u){return J.toStringTag(u)==="Map"},replace:function(u){return c(u.entries())},revive:function(u){return new Map(u)}}},fe={set:{test:function(u){return J.toStringTag(u)==="Set"},replace:function(u){return c(u.values())},revive:function(u){return new Set(u)}}},G="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ke=new Uint8Array(256),Xe=0;Xe<G.length;Xe++)Ke[G.charCodeAt(Xe)]=Xe;var et=function(u,h,_){_==null&&(_=u.byteLength);for(var O=new Uint8Array(u,h||0,_),F=O.length,K="",H=0;H<F;H+=3)K+=G[O[H]>>2],K+=G[(3&O[H])<<4|O[H+1]>>4],K+=G[(15&O[H+1])<<2|O[H+2]>>6],K+=G[63&O[H+2]];return F%3==2?K=K.slice(0,-1)+"=":F%3==1&&(K=K.slice(0,-2)+"=="),K},dt=function(u){var h,_,O,F,K=u.length,H=.75*u.length,W=0;u[u.length-1]==="="&&(H--,u[u.length-2]==="="&&H--);for(var te=new ArrayBuffer(H),ce=new Uint8Array(te),ue=0;ue<K;ue+=4)h=Ke[u.charCodeAt(ue)],_=Ke[u.charCodeAt(ue+1)],O=Ke[u.charCodeAt(ue+2)],F=Ke[u.charCodeAt(ue+3)],ce[W++]=h<<2|_>>4,ce[W++]=(15&_)<<4|O>>2,ce[W++]=(3&O)<<6|63&F;return te},ht={arraybuffer:{test:function(u){return J.toStringTag(u)==="ArrayBuffer"},replace:function(u,h){h.buffers||(h.buffers=[]);var _=h.buffers.indexOf(u);return _>-1?{index:_}:(h.buffers.push(u),et(u))},revive:function(u,h){if(h.buffers||(h.buffers=[]),n(u)==="object")return h.buffers[u.index];var _=dt(u);return h.buffers.push(_),_}}},Ct=typeof self>"u"?Hi:self,tt={};["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array"].forEach(function(p){var u=p,h=Ct[u];h&&(tt[p.toLowerCase()]={test:function(O){return J.toStringTag(O)===u},replace:function(O,F){var K=O.buffer,H=O.byteOffset,W=O.length;F.buffers||(F.buffers=[]);var te=F.buffers.indexOf(K);return te>-1?{index:te,byteOffset:H,length:W}:(F.buffers.push(K),{encoded:et(K),byteOffset:H,length:W})},revive:function(O,F){F.buffers||(F.buffers=[]);var K,H=O.byteOffset,W=O.length,te=O.encoded,ce=O.index;return"index"in O?K=F.buffers[ce]:(K=dt(te),F.buffers.push(K)),new h(K,H,W)}})});var pt={dataview:{test:function(u){return J.toStringTag(u)==="DataView"},replace:function(u,h){var _=u.buffer,O=u.byteOffset,F=u.byteLength;h.buffers||(h.buffers=[]);var K=h.buffers.indexOf(_);return K>-1?{index:K,byteOffset:O,byteLength:F}:(h.buffers.push(_),{encoded:et(_),byteOffset:O,byteLength:F})},revive:function(u,h){h.buffers||(h.buffers=[]);var _,O=u.byteOffset,F=u.byteLength,K=u.encoded,H=u.index;return"index"in u?_=h.buffers[H]:(_=dt(K),h.buffers.push(_)),new DataView(_,O,F)}}},De={IntlCollator:{test:function(u){return J.hasConstructorOf(u,Intl.Collator)},replace:function(u){return u.resolvedOptions()},revive:function(u){return new Intl.Collator(u.locale,u)}},IntlDateTimeFormat:{test:function(u){return J.hasConstructorOf(u,Intl.DateTimeFormat)},replace:function(u){return u.resolvedOptions()},revive:function(u){return new Intl.DateTimeFormat(u.locale,u)}},IntlNumberFormat:{test:function(u){return J.hasConstructorOf(u,Intl.NumberFormat)},replace:function(u){return u.resolvedOptions()},revive:function(u){return new Intl.NumberFormat(u.locale,u)}}};function we(p){for(var u=new Uint8Array(p.length),h=0;h<p.length;h++)u[h]=p.charCodeAt(h);return u.buffer}var me={file:{test:function(u){return J.toStringTag(u)==="File"},replace:function(u){var h=new XMLHttpRequest;if(h.overrideMimeType("text/plain; charset=x-user-defined"),h.open("GET",URL.createObjectURL(u),!1),h.send(),h.status!==200&&h.status!==0)throw new Error("Bad File access: "+h.status);return{type:u.type,stringContents:h.responseText,name:u.name,lastModified:u.lastModified}},revive:function(u){var h=u.name,_=u.type,O=u.stringContents,F=u.lastModified;return new File([we(O)],h,{type:_,lastModified:F})},replaceAsync:function(u){return new J.Promise(function(h,_){var O=new FileReader;O.addEventListener("load",function(){h({type:u.type,stringContents:O.result,name:u.name,lastModified:u.lastModified})}),O.addEventListener("error",function(){_(O.error)}),O.readAsBinaryString(u)})}}},_e={bigint:{test:function(u){return typeof u=="bigint"},replace:function(u){return String(u)},revive:function(u){return BigInt(u)}}},Ne={bigintObject:{test:function(u){return n(u)==="object"&&J.hasConstructorOf(u,BigInt)},replace:function(u){return String(u)},revive:function(u){return new Object(BigInt(u))}}},Y={cryptokey:{test:function(u){return J.toStringTag(u)==="CryptoKey"&&u.extractable},replaceAsync:function(u){return new J.Promise(function(h,_){crypto.subtle.exportKey("jwk",u).catch(function(O){_(O)}).then(function(O){h({jwk:O,algorithm:u.algorithm,usages:u.usages})})})},revive:function(u){var h=u.jwk,_=u.algorithm,O=u.usages;return crypto.subtle.importKey("jwk",h,_,!0,O)}}};return[Me,B,I,R,j,U,de,{imagedata:{test:function(u){return J.toStringTag(u)==="ImageData"},replace:function(u){return{array:c(u.data),width:u.width,height:u.height}},revive:function(u){return new ImageData(new Uint8ClampedArray(u.array),u.width,u.height)}}},{imagebitmap:{test:function(u){return J.toStringTag(u)==="ImageBitmap"||u&&u.dataset&&u.dataset.toStringTag==="ImageBitmap"},replace:function(u){var h=document.createElement("canvas");return h.getContext("2d").drawImage(u,0,0),h.toDataURL()},revive:function(u){var h=document.createElement("canvas"),_=h.getContext("2d"),O=document.createElement("img");return O.addEventListener("load",function(){_.drawImage(O,0,0)}),O.src=u,h},reviveAsync:function(u){var h=document.createElement("canvas"),_=h.getContext("2d"),O=document.createElement("img");return O.addEventListener("load",function(){_.drawImage(O,0,0)}),O.src=u,createImageBitmap(h)}}},me,{file:me.file,filelist:{test:function(u){return J.toStringTag(u)==="FileList"},replace:function(u){for(var h=[],_=0;_<u.length;_++)h[_]=u.item(_);return h},revive:function(u){return new(function(){function h(){r(this,h),this._files=arguments[0],this.length=this._files.length}return function(O,F,K){return F&&i(O.prototype,F),K&&i(O,K),O}(h,[{key:"item",value:function(O){return this._files[O]}},{key:Symbol.toStringTag,get:function(){return"FileList"}}]),h}())(u)}}},{blob:{test:function(u){return J.toStringTag(u)==="Blob"},replace:function(u){var h=new XMLHttpRequest;if(h.overrideMimeType("text/plain; charset=x-user-defined"),h.open("GET",URL.createObjectURL(u),!1),h.send(),h.status!==200&&h.status!==0)throw new Error("Bad Blob access: "+h.status);return{type:u.type,stringContents:h.responseText}},revive:function(u){var h=u.type,_=u.stringContents;return new Blob([we(_)],{type:h})},replaceAsync:function(u){return new J.Promise(function(h,_){var O=new FileReader;O.addEventListener("load",function(){h({type:u.type,stringContents:O.result})}),O.addEventListener("error",function(){_(O.error)}),O.readAsBinaryString(u)})}}}].concat(typeof Map=="function"?ye:[],typeof Set=="function"?fe:[],typeof ArrayBuffer=="function"?ht:[],typeof Uint8Array=="function"?tt:[],typeof DataView=="function"?pt:[],typeof Intl<"u"?De:[],typeof crypto<"u"?Y:[],typeof BigInt<"u"?[_e,Ne]:[])})}),_n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",$n=new Uint8Array(256);for(var kr=0;kr<_n.length;kr++)$n[_n.codePointAt(kr)]=kr;var Ji=function(t,n,r){r==null&&(r=t.byteLength);for(var i=new Uint8Array(t,n||0,r),o=i.length,s="",c=0;c<o;c+=3)s+=_n[i[c]>>2],s+=_n[(i[c]&3)<<4|i[c+1]>>4],s+=_n[(i[c+1]&15)<<2|i[c+2]>>6],s+=_n[i[c+2]&63];return o%3===2?s=s.slice(0,-1)+"=":o%3===1&&(s=s.slice(0,-2)+"=="),s},fa=function(t){var n=t.length,r=t.length*.75,i=0,o,s,c,l;t[t.length-1]==="="&&(r--,t[t.length-2]==="="&&r--);for(var a=new ArrayBuffer(r),f=new Uint8Array(a),y=0;y<n;y+=4)o=$n[t.codePointAt(y)],s=$n[t.codePointAt(y+1)],c=$n[t.codePointAt(y+2)],l=$n[t.codePointAt(y+3)],f[i++]=o<<2|s>>4,f[i++]=(s&15)<<4|c>>2,f[i++]=(c&3)<<6|l&63;return a},al=typeof self>"u"?global:self,da={};["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array"].forEach(function(e){var t=e,n=al[t];n&&(da[e.toLowerCase()+"2"]={test:function(r){return ai.toStringTag(r)===t},replace:function(r){var i=r.buffer,o=r.byteOffset,s=r.length;return{buffer:i,byteOffset:o,length:s}},revive:function(r){var i=r.buffer,o=r.byteOffset,s=r.length;return new n(i,o,s)}})});var cl={arraybuffer:{test:function(e){return ai.toStringTag(e)==="ArrayBuffer"},replace:function(e){return Ji(e,0,e.byteLength)},revive:function(e){var t=fa(e);return t}}},ut=new ai().register(sl),ul="FileReaderSync"in self,Gr=[],bi=0;ut.register([cl,da,{blob2:{test:function(e){return ai.toStringTag(e)==="Blob"},replace:function(e){if(e.isClosed)throw new Error("The Blob is closed");if(ul){var t=la(e,"binary"),n=Ji(t,0,t.byteLength);return{type:e.type,data:n}}else{Gr.push(e);var r={type:e.type,data:{start:bi,end:bi+e.size}};return bi+=e.size,r}},finalize:function(e,t){e.data=Ji(t,0,t.byteLength)},revive:function(e){var t=e.type,n=e.data;return new Blob([fa(n)],{type:t})}}}]);ut.mustFinalize=function(){return Gr.length>0};ut.finalize=function(e){return Xt(void 0,void 0,void 0,function(){var t,n,r,i,o,s,c,l,a,f;return gt(this,function(y){switch(y.label){case 0:return[4,ua(new Blob(Gr),"binary")];case 1:if(t=y.sent(),e){for(n=0,r=e;n<r.length;n++)if(i=r[n],i.$types){o=i.$types,s=o.$,s&&(o=o.$);for(c in o)l=o[c],a=ut.types[l],a&&a.finalize&&(f=Pe.getByKeyPath(i,s?"$."+c:c),a.finalize(f,t.slice(f.start,f.end)))}}return Gr=[],[2]}})})};var ll=2e3;function ha(e,t){return Xt(this,void 0,void 0,function(){function n(){return Xt(this,void 0,void 0,function(){var a,f,y,m,g,b,w,S,A;return gt(this,function(E){switch(E.label){case 0:return[4,Promise.all(e.tables.map(function(x){return x.count()}))];case 1:a=E.sent(),a.forEach(function(x,N){return i[N].rowCount=x}),l.totalRows=a.reduce(function(x,N){return x+N}),f=JSON.stringify(s,void 0,o?2:void 0),y=f.lastIndexOf("]"),m=f.substring(0,y),r.push(m),g=t.filter,b=function(x){var N,k,D,P,L,v,d,C,T,z,$,ie;return gt(this,function(oe){switch(oe.label){case 0:N=e.table(x),k=N.schema.primKey,D=!!k.keyPath,P=t.numRowsPerChunk||ll,L=D?{tableName:N.name,inbound:!0,rows:[]}:{tableName:N.name,inbound:!1,rows:[]},v=JSON.stringify(L,void 0,o?2:void 0),o&&(v=v.split(`
`).join(`
    `)),d=v.lastIndexOf("]"),r.push(v.substring(0,d)),C=null,T=0,z=!0,$=function(){var ee,se,Ie,Le,J,We,Ye,ft,J;return gt(this,function(be){switch(be.label){case 0:return c&&Pe.ignoreTransaction(function(){return c(l)}),ee=C==null?N.limit(P):N.where(":id").above(C).limit(P),[4,ee.toArray()];case 1:return se=be.sent(),se.length===0?[2,"break"]:(C!=null&&T>0&&(r.push(","),o&&r.push(`
      `)),z=se.length===P,D?(Ie=g?se.filter(function(Me){return g(x,Me)}):se,Le=Ie.map(function(Me){return ut.encapsulate(Me)}),ut.mustFinalize()?[4,Pe.waitFor(ut.finalize(Le))]:[3,3]):[3,4]);case 2:be.sent(),be.label=3;case 3:return J=JSON.stringify(Le,void 0,o?2:void 0),o&&(J=J.split(`
`).join(`
      `)),r.push(new Blob([J.substring(1,J.length-1)])),T=Ie.length,C=se.length>0?Pe.getByKeyPath(se[se.length-1],k.keyPath):null,[3,8];case 4:return[4,ee.primaryKeys()];case 5:return We=be.sent(),Ye=We.map(function(Me,I){return[Me,se[I]]}),g&&(Ye=Ye.filter(function(Me){var I=Me[0],B=Me[1];return g(x,B,I)})),ft=Ye.map(function(Me){return ut.encapsulate(Me)}),ut.mustFinalize()?[4,Pe.waitFor(ut.finalize(ft))]:[3,7];case 6:be.sent(),be.label=7;case 7:J=JSON.stringify(ft,void 0,o?2:void 0),o&&(J=J.split(`
`).join(`
      `)),r.push(new Blob([J.substring(1,J.length-1)])),T=Ye.length,C=We.length>0?We[We.length-1]:null,be.label=8;case 8:return l.completedRows+=se.length,[2]}})},oe.label=1;case 1:return z?[5,$()]:[3,3];case 2:return ie=oe.sent(),ie==="break"?[3,3]:[3,1];case 3:return r.push(v.substr(d)),l.completedTables+=1,l.completedTables<l.totalTables&&r.push(","),[2]}})},w=0,S=i,E.label=2;case 2:return w<S.length?(A=S[w].name,[5,b(A)]):[3,5];case 3:E.sent(),E.label=4;case 4:return w++,[3,2];case 5:return r.push(f.substr(y)),l.done=!0,c&&Pe.ignoreTransaction(function(){return c(l)}),[2]}})})}var r,i,o,s,c,l;return gt(this,function(a){switch(a.label){case 0:t=t||{},r=[],i=e.tables.map(function(f){return{name:f.name,schema:il(f),rowCount:0}}),o=t.prettyJson,s={formatName:"dexie",formatVersion:1,data:{databaseName:e.name,databaseVersion:e.verno,tables:i,data:[]}},c=t.progressCallback,l={done:!1,completedRows:0,completedTables:0,totalRows:NaN,totalTables:e.tables.length},a.label=1;case 1:return a.trys.push([1,,6,7]),t.noTransaction?[4,n()]:[3,3];case 2:return a.sent(),[3,5];case 3:return[4,e.transaction("r",e.tables,n)];case 4:a.sent(),a.label=5;case 5:return[3,7];case 6:return ut.finalize(),[7];case 7:return[2,new Blob(r,{type:"text/json"})]}})})}var fl=1,dl={Stream:function(){}},hl=_o(function(e,t){(function(n){var r=typeof process=="object"&&process.env?process.env:self;n.parser=function(v){return new g(v)},n.CParser=g,n.CStream=w,n.createStream=b,n.MAX_BUFFER_LENGTH=10*1024*1024,n.DEBUG=r.CDEBUG==="debug",n.INFO=r.CDEBUG==="debug"||r.CDEBUG==="info",n.EVENTS=["value","string","key","openobject","closeobject","openarray","closearray","error","end","ready"];var i={textNode:void 0,numberNode:""},o=n.EVENTS.filter(function(v){return v!=="error"&&v!=="end"}),s=0,c;n.STATE={BEGIN:s++,VALUE:s++,OPEN_OBJECT:s++,CLOSE_OBJECT:s++,OPEN_ARRAY:s++,CLOSE_ARRAY:s++,TEXT_ESCAPE:s++,STRING:s++,BACKSLASH:s++,END:s++,OPEN_KEY:s++,CLOSE_KEY:s++,TRUE:s++,TRUE2:s++,TRUE3:s++,FALSE:s++,FALSE2:s++,FALSE3:s++,FALSE4:s++,NULL:s++,NULL2:s++,NULL3:s++,NUMBER_DECIMAL_POINT:s++,NUMBER_DIGIT:s++};for(var l in n.STATE)n.STATE[n.STATE[l]]=l;s=n.STATE;const a={tab:9,lineFeed:10,carriageReturn:13,space:32,doubleQuote:34,plus:43,comma:44,minus:45,period:46,_0:48,_9:57,colon:58,E:69,openBracket:91,backslash:92,closeBracket:93,a:97,b:98,e:101,f:102,l:108,n:110,r:114,s:115,t:116,u:117,openBrace:123,closeBrace:125};Object.create||(Object.create=function(v){function d(){this.__proto__=v}return d.prototype=v,new d}),Object.getPrototypeOf||(Object.getPrototypeOf=function(v){return v.__proto__}),Object.keys||(Object.keys=function(v){var d=[];for(var C in v)v.hasOwnProperty(C)&&d.push(C);return d});function f(v){var d=Math.max(n.MAX_BUFFER_LENGTH,10),C=0;for(var T in i){var z=v[T]===void 0?0:v[T].length;if(z>d)switch(T){case"text":closeText(v);break;default:k(v,"Max buffer length exceeded: "+T)}C=Math.max(C,z)}v.bufferCheckPosition=n.MAX_BUFFER_LENGTH-C+v.position}function y(v){for(var d in i)v[d]=i[d]}var m=/[\\"\n]/g;function g(v){if(!(this instanceof g))return new g(v);var d=this;y(d),d.bufferCheckPosition=n.MAX_BUFFER_LENGTH,d.q=d.c=d.p="",d.opt=v||{},d.closed=d.closedRoot=d.sawRoot=!1,d.tag=d.error=null,d.state=s.BEGIN,d.stack=new Array,d.position=d.column=0,d.line=1,d.slashed=!1,d.unicodeI=0,d.unicodeS=null,d.depth=0,S(d,"onready")}g.prototype={end:function(){D(this)},write:L,resume:function(){return this.error=null,this},close:function(){return this.write(null)}};try{c=dl.Stream}catch{c=function(){}}function b(v){return new w(v)}function w(v){if(!(this instanceof w))return new w(v);this._parser=new g(v),this.writable=!0,this.readable=!0,this.bytes_remaining=0,this.bytes_in_sequence=0,this.temp_buffs={2:new Buffer(2),3:new Buffer(3),4:new Buffer(4)},this.string="";var d=this;c.apply(d),this._parser.onend=function(){d.emit("end")},this._parser.onerror=function(C){d.emit("error",C),d._parser.error=null},o.forEach(function(C){Object.defineProperty(d,"on"+C,{get:function(){return d._parser["on"+C]},set:function(T){if(!T)return d.removeAllListeners(C),d._parser["on"+C]=T,T;d.on(C,T)},enumerable:!0,configurable:!1})})}w.prototype=Object.create(c.prototype,{constructor:{value:w}}),w.prototype.write=function(v){v=new Buffer(v);for(var d=0;d<v.length;d++){var C=v[d];if(this.bytes_remaining>0){for(var T=0;T<this.bytes_remaining;T++)this.temp_buffs[this.bytes_in_sequence][this.bytes_in_sequence-this.bytes_remaining+T]=v[T];this.string=this.temp_buffs[this.bytes_in_sequence].toString(),this.bytes_in_sequence=this.bytes_remaining=0,d=d+T-1,this._parser.write(this.string),this.emit("data",this.string);continue}if(this.bytes_remaining===0&&C>=128)if(C>=194&&C<=223&&(this.bytes_in_sequence=2),C>=224&&C<=239&&(this.bytes_in_sequence=3),C>=240&&C<=244&&(this.bytes_in_sequence=4),this.bytes_in_sequence+d>v.length){for(var z=0;z<=v.length-1-d;z++)this.temp_buffs[this.bytes_in_sequence][z]=v[d+z];return this.bytes_remaining=d+this.bytes_in_sequence-v.length,!0}else{this.string=v.slice(d,d+this.bytes_in_sequence).toString(),d=d+this.bytes_in_sequence-1,this._parser.write(this.string),this.emit("data",this.string);continue}for(var $=d;$<v.length&&!(v[$]>=128);$++);this.string=v.slice(d,$).toString(),this._parser.write(this.string),this.emit("data",this.string),d=$-1}},w.prototype.end=function(v){return v&&v.length&&this._parser.write(v.toString()),this._parser.end(),!0},w.prototype.on=function(v,d){var C=this;return!C._parser["on"+v]&&o.indexOf(v)!==-1&&(C._parser["on"+v]=function(){var T=arguments.length===1?[arguments[0]]:Array.apply(null,arguments);T.splice(0,0,v),C.emit.apply(C,T)}),c.prototype.on.call(C,v,d)},w.prototype.destroy=function(){y(this._parser),this.emit("close")};function S(v,d,C){n.INFO&&console.log("-- emit",d,C),v[d]&&v[d](C)}function A(v,d,C){E(v),S(v,d,C)}function E(v,d){v.textNode=N(v.opt,v.textNode),v.textNode!==void 0&&S(v,d||"onvalue",v.textNode),v.textNode=void 0}function x(v){v.numberNode&&S(v,"onvalue",parseFloat(v.numberNode)),v.numberNode=""}function N(v,d){return d===void 0||(v.trim&&(d=d.trim()),v.normalize&&(d=d.replace(/\s+/g," "))),d}function k(v,d){return E(v),d+=`
Line: `+v.line+`
Column: `+v.column+`
Char: `+v.c,d=new Error(d),v.error=d,S(v,"onerror",d),v}function D(v){return(v.state!==s.VALUE||v.depth!==0)&&k(v,"Unexpected end"),E(v),v.c="",v.closed=!0,S(v,"onend"),g.call(v,v.opt),v}function P(v){return v===a.carriageReturn||v===a.lineFeed||v===a.space||v===a.tab}function L(v){var d=this;if(this.error)throw this.error;if(d.closed)return k(d,"Cannot write after close. Assign an onready handler.");if(v===null)return D(d);var C=0,T=v.charCodeAt(0),z=d.p;for(n.DEBUG&&console.log("write -> ["+v+"]");T&&(z=T,d.c=T=v.charCodeAt(C++),z!==T?d.p=z:z=d.p,!!T);)switch(n.DEBUG&&console.log(C,T,n.STATE[d.state]),d.position++,T===a.lineFeed?(d.line++,d.column=0):d.column++,d.state){case s.BEGIN:T===a.openBrace?d.state=s.OPEN_OBJECT:T===a.openBracket?d.state=s.OPEN_ARRAY:P(T)||k(d,"Non-whitespace before {[.");continue;case s.OPEN_KEY:case s.OPEN_OBJECT:if(P(T))continue;if(d.state===s.OPEN_KEY)d.stack.push(s.CLOSE_KEY);else if(T===a.closeBrace){S(d,"onopenobject"),this.depth++,S(d,"oncloseobject"),this.depth--,d.state=d.stack.pop()||s.VALUE;continue}else d.stack.push(s.CLOSE_OBJECT);T===a.doubleQuote?d.state=s.STRING:k(d,'Malformed object key should start with "');continue;case s.CLOSE_KEY:case s.CLOSE_OBJECT:if(P(T))continue;d.state,s.CLOSE_KEY,T===a.colon?(d.state===s.CLOSE_OBJECT?(d.stack.push(s.CLOSE_OBJECT),E(d,"onopenobject"),this.depth++):E(d,"onkey"),d.state=s.VALUE):T===a.closeBrace?(A(d,"oncloseobject"),this.depth--,d.state=d.stack.pop()||s.VALUE):T===a.comma?(d.state===s.CLOSE_OBJECT&&d.stack.push(s.CLOSE_OBJECT),E(d),d.state=s.OPEN_KEY):k(d,"Bad object");continue;case s.OPEN_ARRAY:case s.VALUE:if(P(T))continue;if(d.state===s.OPEN_ARRAY)if(S(d,"onopenarray"),this.depth++,d.state=s.VALUE,T===a.closeBracket){S(d,"onclosearray"),this.depth--,d.state=d.stack.pop()||s.VALUE;continue}else d.stack.push(s.CLOSE_ARRAY);T===a.doubleQuote?d.state=s.STRING:T===a.openBrace?d.state=s.OPEN_OBJECT:T===a.openBracket?d.state=s.OPEN_ARRAY:T===a.t?d.state=s.TRUE:T===a.f?d.state=s.FALSE:T===a.n?d.state=s.NULL:T===a.minus?d.numberNode+="-":a._0<=T&&T<=a._9?(d.numberNode+=String.fromCharCode(T),d.state=s.NUMBER_DIGIT):k(d,"Bad value");continue;case s.CLOSE_ARRAY:if(T===a.comma)d.stack.push(s.CLOSE_ARRAY),E(d,"onvalue"),d.state=s.VALUE;else if(T===a.closeBracket)A(d,"onclosearray"),this.depth--,d.state=d.stack.pop()||s.VALUE;else{if(P(T))continue;k(d,"Bad array")}continue;case s.STRING:d.textNode===void 0&&(d.textNode="");var $=C-1,ie=d.slashed,oe=d.unicodeI;e:for(;;){for(n.DEBUG&&console.log(C,T,n.STATE[d.state],ie);oe>0;)if(d.unicodeS+=String.fromCharCode(T),T=v.charCodeAt(C++),d.position++,oe===4?(d.textNode+=String.fromCharCode(parseInt(d.unicodeS,16)),oe=0,$=C-1):oe++,!T)break e;if(T===a.doubleQuote&&!ie){d.state=d.stack.pop()||s.VALUE,d.textNode+=v.substring($,C-1),d.position+=C-1-$;break}if(T===a.backslash&&!ie&&(ie=!0,d.textNode+=v.substring($,C-1),d.position+=C-1-$,T=v.charCodeAt(C++),d.position++,!T))break;if(ie){if(ie=!1,T===a.n?d.textNode+=`
`:T===a.r?d.textNode+="\r":T===a.t?d.textNode+="	":T===a.f?d.textNode+="\f":T===a.b?d.textNode+="\b":T===a.u?(oe=1,d.unicodeS=""):d.textNode+=String.fromCharCode(T),T=v.charCodeAt(C++),d.position++,$=C-1,T)continue;break}m.lastIndex=C;var ee=m.exec(v);if(ee===null){C=v.length+1,d.textNode+=v.substring($,C-1),d.position+=C-1-$;break}if(C=ee.index+1,T=v.charCodeAt(ee.index),!T){d.textNode+=v.substring($,C-1),d.position+=C-1-$;break}}d.slashed=ie,d.unicodeI=oe;continue;case s.TRUE:T===a.r?d.state=s.TRUE2:k(d,"Invalid true started with t"+T);continue;case s.TRUE2:T===a.u?d.state=s.TRUE3:k(d,"Invalid true started with tr"+T);continue;case s.TRUE3:T===a.e?(S(d,"onvalue",!0),d.state=d.stack.pop()||s.VALUE):k(d,"Invalid true started with tru"+T);continue;case s.FALSE:T===a.a?d.state=s.FALSE2:k(d,"Invalid false started with f"+T);continue;case s.FALSE2:T===a.l?d.state=s.FALSE3:k(d,"Invalid false started with fa"+T);continue;case s.FALSE3:T===a.s?d.state=s.FALSE4:k(d,"Invalid false started with fal"+T);continue;case s.FALSE4:T===a.e?(S(d,"onvalue",!1),d.state=d.stack.pop()||s.VALUE):k(d,"Invalid false started with fals"+T);continue;case s.NULL:T===a.u?d.state=s.NULL2:k(d,"Invalid null started with n"+T);continue;case s.NULL2:T===a.l?d.state=s.NULL3:k(d,"Invalid null started with nu"+T);continue;case s.NULL3:T===a.l?(S(d,"onvalue",null),d.state=d.stack.pop()||s.VALUE):k(d,"Invalid null started with nul"+T);continue;case s.NUMBER_DECIMAL_POINT:T===a.period?(d.numberNode+=".",d.state=s.NUMBER_DIGIT):k(d,"Leading zero not followed by .");continue;case s.NUMBER_DIGIT:a._0<=T&&T<=a._9?d.numberNode+=String.fromCharCode(T):T===a.period?(d.numberNode.indexOf(".")!==-1&&k(d,"Invalid number has two dots"),d.numberNode+="."):T===a.e||T===a.E?((d.numberNode.indexOf("e")!==-1||d.numberNode.indexOf("E")!==-1)&&k(d,"Invalid number has two exponential"),d.numberNode+="e"):T===a.plus||T===a.minus?(z===a.e||z===a.E||k(d,"Invalid symbol in number"),d.numberNode+=String.fromCharCode(T)):(x(d),C--,d.state=d.stack.pop()||s.VALUE);continue;default:k(d,"Unknown state: "+d.state)}return d.position>=d.bufferCheckPosition&&f(d),d}})(t)});function pl(e){var t=0,n=yl(!0),r={pullAsync:function(i){return Xt(this,void 0,void 0,function(){var o,s,c;return gt(this,function(l){switch(l.label){case 0:return o=e.slice(t,t+i),t+=i,[4,ua(o,"text")];case 1:return s=l.sent(),c=n.write(s),r.result=c||{},[2,c]}})})},pullSync:function(i){var o=e.slice(t,t+i);t+=i;var s=la(o,"text"),c=n.write(s);return r.result=c||{},c},done:function(){return n.done()},eof:function(){return t>=e.size},result:{}};return r}function yl(e){var t=hl.parser(),n=0,r,i=[],o,s,c=!1,l=!1;return t.onopenobject=function(a){var f={};f.incomplete=!0,r||(r=f),o&&(i.push([s,o,l]),e&&(l?o.push(f):o[s]=f)),o=f,s=a,l=!1,++n},t.onkey=function(a){return s=a},t.onvalue=function(a){return l?o.push(a):o[s]=a},t.oncloseobject=function(){var a;if(delete o.incomplete,s=null,--n===0)c=!0;else{var f=o;a=i.pop(),s=a[0],o=a[1],l=a[2],e||(l?o.push(f):o[s]=f)}},t.onopenarray=function(){var a=[];a.incomplete=!0,r||(r=a),o&&(i.push([s,o,l]),e&&(l?o.push(a):o[s]=a)),o=a,l=!0,s=null,++n},t.onclosearray=function(){var a;if(delete o.incomplete,s=null,--n===0)c=!0;else{var f=o;a=i.pop(),s=a[0],o=a[1],l=a[2],e||(l?o.push(f):o[s]=f)}},{write:function(a){return t.write(a),r},done:function(){return c}}}var pa=1024;function ml(e,t){return Xt(this,void 0,void 0,function(){var n,r,i,o;return gt(this,function(s){switch(s.label){case 0:return t=t||{},n=t.chunkSizeBytes||pa*1024,[4,ma(e,n)];case 1:return r=s.sent(),i=r.result.data,o=new Pe(i.databaseName),o.version(i.databaseVersion).stores(ol(i)),[4,ya(o,r,t)];case 2:return s.sent(),[2,o]}})})}function ya(e,t,n){return Xt(this,void 0,void 0,function(){function r(){return Xt(this,void 0,void 0,function(){var b,w,S,A,E;return gt(this,function(x){switch(x.label){case 0:b=function(N){var k,D,P,L,v,d,C,T,z,$,ie,oe;return gt(this,function(ee){switch(ee.label){case 0:if(!N.rows)return[2,"break"];if(!N.rows.incomplete&&N.rows.length===0)return[2,"continue"];if(a&&Pe.ignoreTransaction(function(){return a(f)}),k=N.tableName,D=e.table(k),P=l.tables.filter(function(se){return se.name===k})[0].schema,!D){if(n.acceptMissingTables)return[2,"continue"];throw new Error("Exported table ".concat(N.tableName," is missing in installed database"))}if(!n.acceptChangedPrimaryKey&&P.split(",")[0]!=D.schema.primKey.src)throw new Error("Primary key differs for table ".concat(N.tableName,". "));for(L=N.rows,v=[],d=0;d<L.length&&(C=L[d],!C.incomplete);d++)v.push(ut.revive(C));return T=n.filter,z=T?N.inbound?v.filter(function(se){return T(k,se)}):v.filter(function(se){var Ie=se[0],Le=se[1];return T(k,Le,Ie)}):v,$=N.inbound?[void 0,z]:[z.map(function(se){return se[0]}),v.map(function(se){return se[1]})],ie=$[0],oe=$[1],n.overwriteValues?[4,D.bulkPut(oe,ie)]:[3,2];case 1:return ee.sent(),[3,4];case 2:return[4,D.bulkAdd(oe,ie)];case 3:ee.sent(),ee.label=4;case 4:return f.completedRows+=v.length,v.incomplete||(f.completedTables+=1),L.splice(0,v.length),[2]}})},w=0,S=l.data,x.label=1;case 1:return w<S.length?(A=S[w],[5,b(A)]):[3,4];case 2:if(E=x.sent(),E==="break")return[3,4];x.label=3;case 3:return w++,[3,1];case 4:for(;l.data.length>0&&l.data[0].rows&&!l.data[0].rows.incomplete;)l.data.splice(0,1);return!o.done()&&!o.eof()?c?(o.pullSync(i),[3,7]):[3,5]:[3,8];case 5:return[4,Pe.waitFor(o.pullAsync(i))];case 6:x.sent(),x.label=7;case 7:return[3,9];case 8:return[3,10];case 9:return[3,0];case 10:return[2]}})})}var i,o,s,c,l,a,f,y,m,g;return gt(this,function(b){switch(b.label){case 0:return n=n||{},i=n.chunkSizeBytes||pa*1024,[4,ma(t,i)];case 1:if(o=b.sent(),s=o.result,c="FileReaderSync"in self,l=s.data,!n.acceptNameDiff&&e.name!==l.databaseName)throw new Error("Name differs. Current database name is ".concat(e.name," but export is ").concat(l.databaseName));if(!n.acceptVersionDiff&&e.verno!==l.databaseVersion)throw new Error("Database version differs. Current database is in version ".concat(e.verno," but export is ").concat(l.databaseVersion));if(a=n.progressCallback,f={done:!1,completedRows:0,completedTables:0,totalRows:l.tables.reduce(function(w,S){return w+S.rowCount},0),totalTables:l.tables.length},a&&Pe.ignoreTransaction(function(){return a(f)}),!n.clearTablesBeforeImport)return[3,5];y=0,m=e.tables,b.label=2;case 2:return y<m.length?(g=m[y],[4,g.clear()]):[3,5];case 3:b.sent(),b.label=4;case 4:return y++,[3,2];case 5:return n.noTransaction?[4,r()]:[3,7];case 6:return b.sent(),[3,9];case 7:return[4,e.transaction("rw",e.tables,r)];case 8:b.sent(),b.label=9;case 9:return f.done=!0,a&&Pe.ignoreTransaction(function(){return a(f)}),[2]}})})}function ma(e,t){return Xt(this,void 0,void 0,function(){var n,r;return gt(this,function(i){switch(i.label){case 0:n="slice"in e?pl(e):e,i.label=1;case 1:return n.eof()?[3,3]:[4,n.pullAsync(t)];case 2:return i.sent(),n.result.data&&n.result.data.data?[3,3]:[3,1];case 3:if(r=n.result,!r||r.formatName!="dexie")throw new Error("Given file is not a dexie export");if(r.formatVersion>fl)throw new Error("Format version ".concat(r.formatVersion," not supported"));if(!r.data)throw new Error("No data in export file");if(!r.data.databaseName)throw new Error("Missing databaseName in export file");if(!r.data.databaseVersion)throw new Error("Missing databaseVersion in export file");if(!r.data.tables)throw new Error("Missing tables in export file");return[2,n]}})})}Pe.prototype.export=function(e){return ha(this,e)};Pe.prototype.import=function(e,t){return ya(this,e,t)};Pe.import=function(e,t){return ml(e,t)};class ga extends Pe{constructor(){super("AppDB");Oe(this,"dictionary");Oe(this,"practiceSettings");Oe(this,"statistic");Oe(this,"appSettings");Oe(this,"idleMode");this.version(1).stores({dictionary:"id",practiceSettings:"",statistic:"year",appSettings:"",idleMode:""})}static recreateFromImport(n){Re=n}}let Re=new ga;const gl=e=>Re.dictionary.add({...e}),vl=e=>Re.dictionary.put(e),bl=e=>Re.dictionary.delete(e),wl=()=>Re.dictionary.toArray(),_l=()=>Re.dictionary.clear(),So=0,Sl=()=>Re.practiceSettings.get(So),Al=e=>Re.practiceSettings.put({...e},So),xl=e=>Re.practiceSettings.update(So,e),El=e=>Re.statistic.put(e),Ol=()=>Re.statistic.toArray(),Tl=async e=>Re.statistic.add({...e}),kl=()=>Re.statistic.clear(),Cl=async()=>ha(Re),Pl=async e=>{await Re.delete(),ga.recreateFromImport(await Pe.import(e))},Ao=0,Il=()=>Re.appSettings.get(Ao),Dl=e=>Re.appSettings.put({...e},Ao),Nl=e=>Re.appSettings.update(Ao,e),xo=0,Bl=()=>Re.idleMode.get(xo),Rl=e=>Re.idleMode.put({...e},xo),jl=e=>Re.idleMode.update(xo,e),ve={onAddWord:gl,onEditWord:vl,onDeleteWord:bl,getDictionaryDataAsArray:wl,onDictionaryClear:_l,getPracticeData:Sl,initPracticeData:Al,updatePracticeData:xl,updateStatistic:El,getStatisticDataAsArray:Ol,initStatisticData:Tl,onStatisticClear:kl,exportAppDBData:Cl,importAppDBData:Pl,getAppSettings:Il,initAppSettingsData:Dl,updateAppSettingsData:Nl,getIdleModeData:Bl,initIdleModeData:Rl,updateIdleModeData:jl};class va{constructor(){Oe(this,"totalWordsAmount");Oe(this,"addedWordsAmount");Oe(this,"deletedWordsAmount");Oe(this,"wordTotalPracticeAmount");Oe(this,"wordOriginPracticeAmount");Oe(this,"wordTranslationPracticeAmount");Oe(this,"averagePracticeSuccess");Oe(this,"successfulPracticeCount");Oe(this,"unsuccessfulPracticeCount");this.totalWordsAmount=0,this.addedWordsAmount=0,this.deletedWordsAmount=0,this.wordTotalPracticeAmount=0,this.wordOriginPracticeAmount=0,this.wordTranslationPracticeAmount=0,this.averagePracticeSuccess=0,this.successfulPracticeCount=0,this.unsuccessfulPracticeCount=0}}const Ll=""+new URL("octopus-white-14148693.svg",import.meta.url).href;class Fl{constructor(t){Oe(this,"prevValue");Oe(this,"checker");Oe(this,"resolveCallback");Oe(this,"rejectCallback");this.prevValue=t.prevValue||"",this.checker=t.checker,this.resolveCallback=t.resolveCallback,this.rejectCallback=t.rejectCallback}handleEvent(t){const n=String(t.target.value);this.checker(n)?this.onResolveInput(n,t):this.onRejectInput(n,t)}onResolveInput(t,n){var r;this.updatePrevValue(t),(r=this.resolveCallback)==null||r.call(this,{event:n,curValue:t,prevValue:this.prevValue})}onRejectInput(t,n){var i;const r=n.target.selectionStart||0;this.restore(n.target,t,r),(i=this.rejectCallback)==null||i.call(this,{event:n,curValue:t,prevValue:this.prevValue})}restore(t,n,r){this.restorePrevValue(t),this.restorePrevCaretPos(t,n,r)}restorePrevValue(t){t.value=this.prevValue}restorePrevCaretPos(t,n,r){const i=n.length,o=r-(i-this.prevValue.length);t.setSelectionRange(o,o)}updatePrevValue(t){this.prevValue=t}getPrevValue(){return this.prevValue}}const Ml=(e,t)=>Math.floor(Math.random()*(t-e)+e),Yh=e=>e[Ml(0,e.length)],Kl=()=>{bt.trigger({type:"component",component:"addWord",backdropClasses:"!bg-cyan-200 !bg-opacity-50 backdrop-blur-sm cursor-pointer !z-40 h-[calc(100vh-24px)] bottom-0 top-auto"})},$l=()=>{bt.trigger({type:"component",component:"editWord",backdropClasses:"!bg-purple-200 !bg-opacity-50 backdrop-blur-sm cursor-pointer !z-40 h-[calc(100vh-24px)] bottom-0 top-auto"})},zh=(e,t)=>{let n;return(...r)=>{clearTimeout(n),n=setTimeout(e,t,...r)}},Eo=`<img class='h-8' src='${Ll}' alt='octa icon'/>`,Ul="break-all text-white cursor-default !rounded-md [&_.text-base]:flex [&_.text-base]:gap-4 [&_.text-base]:items-center",Wl="break-all bg-red-400 text-white cursor-default !rounded-md [&_.text-base]:flex [&_.text-base]:gap-4 [&_.text-base]:items-center",Vl="break-all bg-yellow-500 text-white cursor-default !rounded-md [&_.text-base]:flex [&_.text-base]:gap-4 [&_.text-base]:items-center",Hh=e=>`-webkit-mask: url(${e}) no-repeat center / contain; mask: url(${e}) no-repeat center / contain;`,Jh=e=>[...e].sort(()=>Math.random()-.5);function*Gh(e){const t=e.length;for(let n=0;n<t;n+=1)yield e[n]}const Xh=e=>new Fl(e),Qh=(e=0)=>e===0?"bg-slate-400":e<40?"bg-orange-400":e<75?"bg-amber-400":"bg-green-400",Zh=e=>e===0?"bg-slate-300 hover:bg-slate-400 focus:bg-slate-400":e<40?"bg-orange-300 hover:bg-orange-400 focus:bg-orange-400":e<75?"bg-amber-300 hover:bg-amber-400 focus:bg-amber-400":"bg-green-300 hover:bg-green-400 focus:bg-green-400",Oo=["January","February","March","April","May","June","July","August","September","October","November","December"],ql=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],ep={Mon:"Monday",Tue:"Tuesday",Wed:"Wednesday",Thu:"Thursday",Fri:"Friday",Sat:"Saturday",Sun:"Sunday"},tp=ql.map(e=>e.slice(0,3)),os={Sun:0,Mon:1,Tue:2,Wed:3,Thu:4,Fri:5,Sat:6},np=e=>{e.sort((t,n)=>os[t]-os[n])},rp=(e,t)=>{let n=e.indexOf(t);for(;n!==-1;)e.splice(n,1),n=e.indexOf(t,n+1)},ip=e=>{e.sort(({from:t},{from:n})=>Number(t.replace(":",""))-Number(n.replace(":","")))},ba=e=>{e.code==="Escape"&&e.stopPropagation()},Yl=()=>{document.addEventListener("keydown",ba)},zl=()=>{document.removeEventListener("keydown",ba)},Hl=e=>{e.preventDefault()},Jl=()=>{document.addEventListener("contextmenu",Hl)},op=(e,t,n)=>{oi.trigger({message:Eo+`<div>${e}</div>`,background:`${Ul} ${t}`,timeout:n})},wa=e=>{oi.trigger({message:Eo+`<div>${e}</div>`,background:Wl,autohide:!1})},sp=e=>{oi.trigger({message:Eo+`<div>${e}</div>`,background:Vl})},Gl=async e=>{wa("UnexpectedException: "+e),(await an(()=>import("./ipcUtils-e02d1c64.js").then(t=>t.i),[],import.meta.url)).sendToIpcMain("mainWinErr",e)},Xl=async({reason:e})=>{const t=`Unhandledrejection: ${e}`;wa(t),(await an(()=>import("./ipcUtils-e02d1c64.js").then(n=>n.i),[],import.meta.url)).sendToIpcMain("mainWinErr",t)},Ql=()=>{window.onerror=Gl,window.onunhandledrejection=Xl},Zl=()=>{if(window.electron===void 0)throw"electron API is missing in window"},ap=e=>{const t=Math.floor(e/3600),n=Math.floor(e%3600/60),r=String(t).padStart(2,"0"),i=String(n).padStart(2,"0"),o=String(e%60).padStart(2,"0");return`${r}:${i}:${o}`},To=()=>{const e=String(new Date().getFullYear()),t={};return Oo.forEach(n=>{t[n]=new va}),t.year=e,[t]},_a=Ze();class Sa{constructor(t){Oe(this,"value");Oe(this,"subscriptions",[]);this.value=t}subscribe(t){return t(this.value),this.subscriptions.push(t),()=>this.unsubscribe(t)}update(t){this.set(t(this.value))}set(t){this.value=t,this.broadcast()}get(){return this.value}broadcast(){this.subscriptions.forEach(t=>t(this.value))}unsubscribe(t){this.subscriptions=this.subscriptions.filter(n=>n!==t)}}const $t=(e,t)=>{const n=new Sa(e);return Object.assign(n,t),n};class ef extends Sa{subscribe(t){return this.subscriptions.push(t),()=>this.unsubscribe(t)}}const ko=(e,t)=>{const n=new ef(e);return Object.assign(n,t),n},Qt=ko(),tf=e=>{const t={...e,learnSuccess:0,practiceCount:0,successfulPracticeCount:0};pr(t),Qt.set(["edit",t])},pr=e=>{wt.update(t=>t.set(e.id,e))},Co=e=>wt.value.get(e),nf=e=>{const n={id:String(new Date().getTime()),learnSuccess:0,practiceCount:0,successfulPracticeCount:0,...e};pr(n),Qt.set(["add",n])},rf=(e,t)=>{const{learnSuccess:n,practiceCount:r,successfulPracticeCount:i}=e,o={id:e.id,learnSuccess:n,practiceCount:r,successfulPracticeCount:i,...t};pr(o),Qt.set(["edit",o])},of=e=>{wt.update(t=>(t.delete(e),t)),Qt.set(["delete",e])},Aa=2,sf=e=>{const t=Co(e),n=t.practiceCount+1,r=t.successfulPracticeCount*100/n,i=Number(r.toFixed(Aa)),o={...t,practiceCount:n,learnSuccess:i};pr(o),Qt.set(["edit",o])},af=e=>{const t=Co(e),n=t.practiceCount+1,r=t.successfulPracticeCount+1,i=r*100/n,o=Number(i.toFixed(Aa)),s={...t,practiceCount:n,successfulPracticeCount:r,learnSuccess:o};pr(s),Qt.set(["edit",s])},cf=()=>{wt.value.clear()},uf=async()=>{const e=await ve.getDictionaryDataAsArray();wt.value=xa(e)},xa=e=>{const t=new Map;return e.forEach(({id:n,...r})=>{t.set(n,{id:n,...r})}),t},lf=e=>{wt=$t(xa(e),{getById:Co,removeWord:of,resetWordPractice:tf,editWord:rf,addWord:nf,onUnsuccessfulPractice:sf,onSuccessfulPractice:af,clear:cf,reInitFromDB:uf})};let wt;const ff=ko(),df=e=>{Rn.set(e)},hf=async()=>{Rn.set(await ve.getPracticeData())},pf=e=>{Rn=$t({...e},{reInit:df,reInitFromDB:hf})};let Rn;const ci=ko();let Ea;const yf=({practiceTarget:e})=>{Ea=e},mf=e=>{const t={};return Oo.forEach(n=>{t[n]=new va}),t.year=e,t},Po=(e,t)=>e.has(t)?e.get(t):mf(t),Io=()=>new Date().toLocaleString("en-US",{month:"long",year:"numeric"}).split(" "),gf=([e,t])=>{e in ss&&ss[e](t)},vf=()=>{Tt.update(e=>{const[t,n]=Io(),r=Po(e,n);return r[t].totalWordsAmount=wt.value.size,r[t].deletedWordsAmount+=1,e.set(n,r),ci.set(r),e})},bf=()=>{Tt.update(e=>{const[t,n]=Io(),r=Po(e,n);return r[t].totalWordsAmount=wt.value.size,r[t].addedWordsAmount+=1,e.set(n,r),ci.set(r),e})},ss={add:bf,delete:vf},Oa=(e,t)=>{Tt.update(n=>{const[r,i]=Io(),o=Po(n,i);return e==="successful"?o[r].successfulPracticeCount+=1:o[r].unsuccessfulPracticeCount+=1,t==="original"?o[r].wordOriginPracticeAmount+=1:o[r].wordTranslationPracticeAmount+=1,o[r].wordTotalPracticeAmount+=1,o[r].averagePracticeSuccess=Number((o[r].successfulPracticeCount/o[r].wordTotalPracticeAmount).toFixed(2))*100,n.set(i,o),ci.set(o),n})},wf=e=>{Oa(e,Ea)},_f=()=>{Rn.subscribe(yf),Qt.subscribe(gf),ff.subscribe(wf)},cp=(e,t)=>{Oa(e,t)};let Tt;const Do=e=>{const t=new Map;return e.forEach(n=>{t.set(n.year,n)}),t},Sf=e=>{Tt.value=Do(e)},Af=async()=>{Tt.set(Do(await ve.getStatisticDataAsArray()))},xf=e=>{Tt=$t(Do(e),{reInit:Sf,reInitFromDB:Af}),_f()};class Ta{constructor(t,n){Oe(this,"label");Oe(this,"borderColor");Oe(this,"data",[]);Oe(this,"borderWidth",1);Oe(this,"tension",.1);this.label=t,this.borderColor=n}}const ka={addedWordsAmount:"red",deletedWordsAmount:"black",totalWordsAmount:"orange",wordTranslation:"pink",averagePracticeSuccess:"teal",successfulPracticeCount:"deepskyblue",unsuccessfulPracticeCount:"grey",wordOriginPracticeAmount:"maroon",wordTranslationPracticeAmount:"green",wordTotalPracticeAmount:"blue"},xt=["addedWordsAmount","deletedWordsAmount","totalWordsAmount","averagePracticeSuccess","successfulPracticeCount","unsuccessfulPracticeCount","wordOriginPracticeAmount","wordTranslationPracticeAmount","wordTotalPracticeAmount"],Ef=[xt[0],xt[1],xt[2]],Of=[xt[3],xt[4],xt[5],xt[6],xt[7],xt[8]],as={all:xt,words:Ef,practice:Of},Tf=({year:e,...t},n)=>{const r=new Map;return n.forEach(i=>{r.set(i,new Ta(i,ka[i]))}),Object.values(t).forEach(i=>{n.forEach(o=>{r.get(o).data.push(i[o])})}),[...r.values()]},kf=(e,t)=>{const n=new Map;t.forEach(i=>{n.set(i,new Ta(i,ka[i]))});const r=new Map;return e.forEach(({year:i,...o})=>{Object.values(o).forEach(s=>{t.forEach(c=>{r.set(c,r.get(c)||0+s[c])})}),t.forEach(s=>{n.get(s).data.push(r.get(s)),r.set(s,0)})}),[...n.values()]},up=(e,t,n)=>t==="all"?kf(n,as[e]):Tf(n,as[e]),Cf=()=>(_a.set([...Tt.value.keys()]),[...Tt.value.values()]),Pf=e=>(_a.set(Oo),Tt.value.get(e)),lp=e=>e==="all"?Cf():Pf(e),If=e=>{const t=String(new Date().getFullYear());if(e.some(({year:r})=>r===t))return;const n=To()[0];return e.push(n),ve.updateStatistic(n)},Df={startWithSystem:!0,openAppWindowAtStart:!0},Nf={enabled:!1,soundNotification:!0,daySettings:{general:{interval:"02:00",timeFrames:[]}}},Bf={enabled:!1,soundNotification:!0,daySettings:{general:{interval:"02:00",timeFrames:[]}}},Rf={basic:Df,practice:{passive:Nf,active:Bf}},Ca=()=>structuredClone(Rf),jf={isEnabled:!1,timerStart:0,timerValue:null},No=()=>({...jf}),Lf={practiceTarget:"original",practiceType:"section",sectionLastWordId:null,sectionSize:10},Pa=()=>({...Lf}),Ff=async()=>{(await an(()=>import("./DBUtilsFacadeDesktopBuild-541b5943.js"),["./DBUtilsFacadeDesktopBuild-541b5943.js","./ipcUtils-e02d1c64.js"],import.meta.url)).initDBUtilsFacadeDesktopBuild()},Mf=async()=>{let[e,t,n,r,i]=await Promise.all([ve.getDictionaryDataAsArray(),ve.getPracticeData(),ve.getStatisticDataAsArray(),ve.getAppSettings(),ve.getIdleModeData()]);return t===void 0&&(t=Pa(),ve.initPracticeData(t)),n.length===0&&(n=To(),ve.initStatisticData(n[0])),If(n),r===void 0&&(r=Ca(),ve.initAppSettingsData(r)),i===void 0&&(i=No(),ve.initIdleModeData(i)),[e,t,n,r,i]},Kf=$t(),$f=(e,t)=>{t.daySettings[e]={enabled:!1,interval:"00:05",timeFrames:[]}},Uf=(e,t)=>{_t.update(n=>(n.daySettings[e].interval=t,n))},Wf=(e,t)=>{_t.update(n=>(n.daySettings[e].enabled=t,n))},Vf=e=>{_t.update(t=>($f(e,t),t))},qf=e=>{_t.update(t=>(delete t.daySettings[e],t))},Yf=(e,t)=>{_t.update(n=>(n.daySettings[e].timeFrames=t,n))},zf=(e,t)=>{_t.update(n=>{const{enabled:r,interval:i,timeFrames:o}=n.daySettings[t];return n.daySettings[e]={enabled:r,interval:i,timeFrames:o.map(({from:s,to:c})=>({from:s,to:c}))},Kf.set(e),n})},Hf=e=>{_t.set(e)},Jf=async()=>{_t.set((await ve.getAppSettings()).practice.active)},Gf=e=>{_t=$t(e,{updateSettingKeyIntervalProp:Uf,updateSettingKeyEnabledProp:Wf,addSettingKey:Vf,removeSettingKey:qf,updateTimeFrames:Yf,copySettingsForDay:zf,reInit:Hf,reInitFromDB:Jf})};let _t,yr;const Xf=e=>{yr.value=e},Qf=async()=>{yr.set((await ve.getAppSettings()).basic)},Zf=e=>{yr=$t(e,{reInit:Xf,reInitFromDB:Qf})},ed=$t(),td=(e,t)=>{t.daySettings[e]={enabled:!1,interval:"00:05",timeFrames:[]}},nd=(e,t)=>{St.update(n=>(n.daySettings[e].interval=t,n))},rd=(e,t)=>{St.update(n=>(n.daySettings[e].enabled=t,n))},id=e=>{St.update(t=>(td(e,t),t))},od=e=>{St.update(t=>(delete t.daySettings[e],t))},sd=(e,t)=>{St.update(n=>(n.daySettings[e].timeFrames=t,n))},ad=(e,t)=>{St.update(n=>{const{enabled:r,interval:i,timeFrames:o}=n.daySettings[t];return n.daySettings[e]={enabled:r,interval:i,timeFrames:o.map(({from:s,to:c})=>({from:s,to:c}))},ed.set(e),n})},cd=e=>{St.set(e)},ud=async()=>{St.set((await ve.getAppSettings()).practice.passive)},ld=e=>{St=$t(e,{updateSettingKeyIntervalProp:nd,updateSettingKeyEnabledProp:rd,addSettingKey:id,removeSettingKey:od,updateTimeFrames:sd,copySettingsForDay:ad,reInit:cd,reInitFromDB:ud})};let St,Ia;const fd=()=>{Ia=au([yr,St,_t],([e,t,n])=>({basic:{...e},practice:{passive:{...t},active:{...n}}}))},dd=e=>{ve.updateAppSettingsData(e)};let Da;const hd=()=>{Da=Ia.subscribe(dd)},fp=()=>{Da()},pd=e=>{ve.updatePracticeData(e)},yd=()=>{Rn.subscribe(pd)},md=e=>{ve.updateStatistic(e)},gd=()=>{ci.subscribe(md)};let Na;const vd=()=>{Na={add:ve.onAddWord,edit:ve.onEditWord,delete:ve.onDeleteWord}},bd=([e,t])=>{Na[e](t)},wd=()=>{vd(),Qt.subscribe(bd)},_d=e=>{ve.updateIdleModeData(e)},Sd=()=>{Ut.subscribe(_d)},jn=Ze(null),dp=()=>{Ut.update(e=>(e.timerValue=Pn(jn),e))};let Xr=!1,Ba;const Ad=()=>{jn.update(e=>e===0?(ui(),Ut.set(No()),null):e-1)},ui=()=>{Xr=!1,clearInterval(Ba)},xd=(e,t)=>{Xr&&ui(),e&&Bo(t)},Bo=e=>{Xr&&ui(),e!==null&&(Xr=!0,Ba=setInterval(Ad,1e3))},hp=(e,t,n)=>{Ut.set({isEnabled:!0,timerStart:t,timerValue:n}),jn.set(n),Bo(n)};let Ut;const Ed=e=>{Ut.set(e)},Od=async()=>{const e=await ve.getIdleModeData();return Ut.set(e),e},Ra=e=>{Ut=$t(e,{reInit:Ed,reInitFromDB:Od}),jn.set(e.timerValue),Sd()},Td=e=>{if(e.isEnabled){an(()=>import("./ipcUtils-e02d1c64.js").then(t=>t.i),[],import.meta.url).then(({sendToIpcMain:t})=>{t("getIdleModeMainWin")});return}Ra(e)},pp=(e,t,n,r)=>{Ra({isEnabled:t,timerStart:n,timerValue:r}),t&&Bo(r)},yp=(e,t,n,r)=>{Ut.reInit({isEnabled:t,timerStart:n,timerValue:r}),jn.set(r),xd(t,r)},mr=({backdropColor:e,backdropClasses:t=`!bg-${e}-200 !bg-opacity-50 backdrop-blur-sm cursor-pointer !z-40`,title:n="Confirm to proceed",body:r,color:i,okBtnText:o,noBtnText:s,backdropActionName:c,response:l})=>({type:"component",component:"confirm",backdropClasses:t+" h-[calc(100vh-24px)] bottom-0 top-auto",response:a=>{a!==void 0&&l(a)},meta:{title:n,body:r,color:i,okBtnText:o,noBtnText:s,backdropActionName:c}}),ja=Ze({newWordVariantsInput:"",newWordVariantsList:[],newWordTranslationsInput:"",newWordTranslationsList:[],newWordDescription:""}),La=()=>{ja.set({newWordVariantsInput:"",newWordVariantsList:[],newWordTranslationsInput:"",newWordTranslationsList:[],newWordDescription:""})},Fa=e=>{e?La():Kl()},kd=()=>{bt.close();const e=Pn(ja);e.newWordVariantsList.length!==0||e.newWordVariantsInput!==""||e.newWordTranslationsList.length!==0||e.newWordTranslationsInput!==""||e.newWordDescription.trim()!==""?bt.trigger(mr({backdropColor:"cyan",color:"cyan",body:'All entered word data will be <i class="text-cyan-400 bg-white rounded-md p-1">lost</i>.',backdropActionName:"addWordModalCloseConfirmAnswer",response:Fa})):La()},Ma=Ze();let Gi;Ma.subscribe(e=>Gi=e);const Cd=()=>{bt.close()},Pd=e=>{e&&(wt.resetWordPractice(Gi),Ma.set(wt.getById(Gi.id))),bt.trigger({type:"component",component:"wordPractice",backdropClasses:"!bg-pink-200 !bg-opacity-50 backdrop-blur-sm cursor-pointer !z-40 h-[calc(100vh-24px)] bottom-0 top-auto"})},Ka=Ze(null);let Ro=!1,Un,Wn,Vn;const Id=Ze(),$a=()=>{Wn="",Vn="",Ro=!1},Dd=()=>{bt.close(),{variantInputValue:Wn,translationInputValue:Vn,...Un}=Pn(Id);const e=Pn(Ka);Wn=Wn.trim(),Vn=Vn.trim(),Ro||Wn||Vn||Un.description!==e.description||Un.variants.join("")!==e.variants.join("")||Un.translations.join("")!==e.translations.join("")?bt.trigger(mr({backdropColor:"purple",color:"purple",body:'All edited word data will be <i class="text-purple-400 bg-white rounded-md p-1">lost</i>.',backdropActionName:"onEditWordModalCloseConfirmAnswer",response:Ua})):$a()},Ua=e=>{if(e){$a();return}Ro=!0,Ka.set(Un),$l()},Nd=Ze(),cs={id:"loading",bgDrawer:"text-white",bgBackdrop:"bg-opacity-50 !z-30 h-[calc(100vh-24px)] bottom-0 top-auto",width:"w-full",height:"h-full",padding:"",rounded:"rounded-md"},jo=e=>{Nd.set({OctaIconColor:e.OctaIconColor}),Yl(),Ns.open({...cs,bgBackdrop:`${cs.bgBackdrop} bg-${e.bgBackdropColor}-500`})},Lo=()=>{Ns.close(),zl()},Fo={bgBackdropColor:"red",OctaIconColor:"red"},Wa=async()=>{wt.clear(),await ve.onDictionaryClear()},Va=async e=>{e&&(jo(Fo),await Wa(),Lo())},mp=()=>{bt.trigger(mr({backdropColor:"red",color:"red",body:"All words in the dictionary and their data (e.g. practice) will be <i class='px-1 bg-white text-red-700 rounded-md'>deleted</i><br>This action doesn't affects app statistic",backdropActionName:"dictionaryResetConfirmAnswer",response:Va}))},qa=async()=>{const e=To();Tt.reInit(e),await ve.onStatisticClear(),await ve.initStatisticData(e[0])},Ya=async e=>{e&&(jo(Fo),await qa(),Lo())},gp=()=>{bt.trigger(mr({backdropColor:"red",color:"red",body:"All statistic data (e.g. number of practice per month etc.) will be <i class='px-1 bg-white text-red-700 rounded-md'>deleted</i>",backdropActionName:"statisticResetConfirmAnswer",response:Ya}))},Bd=async()=>{const e=Ca();St.reInit(e.practice.passive),_t.reInit(e.practice.active),yr.reInit(e.basic),await ve.initAppSettingsData(e)},Rd=async()=>{const e=No();Ut.reInit(e),jn.set(e.timerValue),ui();{const{sendToIpcMain:t}=await an(()=>import("./ipcUtils-e02d1c64.js").then(n=>n.i),[],import.meta.url);t("updateIdleModeStateMainWin",e.isEnabled)}},jd=async()=>{const e=Pa();Rn.reInit(e),await ve.initPracticeData(e)},za=async e=>{e&&(jo(Fo),await Wa(),await jd(),await qa(),await Bd(),await Rd(),Lo())},vp=()=>{bt.trigger(mr({backdropColor:"red",color:"red",body:"All app data (e.g. dictionary, statistic etc.) will be <i class='px-1 bg-white text-red-700 rounded-md'>deleted</i>",backdropActionName:"appResetConfirmAnswer",response:za}))};let Ha,Ja,Ga;const bp=e=>Ga=e,wp=e=>Ja=e,_p=e=>Ha=e,Ld=e=>{e&&Ha.copySettingsForDay(Ja,Ga)},us=Ze(null),Fd=e=>{us.set(e),us.set(null)};let Xa;const Md=()=>{Xa={addWordModalClose:kd,addWordModalCloseConfirmAnswer:Fa,checkForChangesToCancel:Dd,onEditWordModalCloseConfirmAnswer:Ua,wordPracticeModalClose:Cd,wordPracticeModalCloseConfirmAnswer:Pd,transferImportConfirmAnswer:Fd,dictionaryResetConfirmAnswer:Va,statisticResetConfirmAnswer:Ya,appResetConfirmAnswer:za,copyPracticeDaySettingsConfirmAnswer:Ld}},Sp=(e,...t)=>{Qr=e,Mo=t},Kd=()=>{Qr=null,Mo=[]};let Qr,Mo;const $d=()=>{window.addEventListener("keydown",Ud)},Ud=({code:e})=>{!Qr||e!=="Escape"||setTimeout(()=>{Xa[Qr](...Mo),Kd()},180)};Ds.set({computePosition:jc,autoUpdate:Dc,offset:hc,shift:Nc,flip:Bc,arrow:Rc});Ql();Ff().then(Mf).then(async([e,t,n,r,i])=>{lf(e),pf(t),xf(n),ld(r.practice.passive),Gf(r.practice.active),Td(i),Zf(r.basic),fd(),wd(),yd(),gd(),hd(),Md(),$d(),Jl(),(await an(()=>import("./ipcUtils-e02d1c64.js").then(s=>s.i),[],import.meta.url)).initDesktopActionListeners();const o=(await an(()=>import("./App-04b7e123.js"),["./App-04b7e123.js","./ipcUtils-e02d1c64.js","./App-a8d6acd0.css"],import.meta.url)).default;new o({target:document.getElementById("app")}),Zl()});export{mh as $,Qd as A,Eh as B,Th as C,In as D,Rh as E,Ue as F,no as G,kh as H,Os as I,uh as J,vh as K,Mh as L,Xd as M,yh as N,dh as O,ih as P,Ah as Q,fh as R,Vh as S,Fh as T,Lh as U,Sh as V,_h as W,Yo as X,gh as Y,lh as Z,ph as _,qc as a,Ch as a$,sh as a0,qd as a1,bt as a2,th as a3,wh as a4,Uh as a5,ru as a6,Kh as a7,iu as a8,Vd as a9,Gh as aA,Jh as aB,Pn as aC,ff as aD,sp as aE,yr as aF,mp as aG,gp as aH,vp as aI,dp as aJ,ve as aK,us as aL,jo as aM,fp as aN,St as aO,_t as aP,Tt as aQ,If as aR,Ut as aS,jn as aT,Bo as aU,hd as aV,Lo as aW,mr as aX,Fd as aY,nu as aZ,hh as a_,bh as aa,Ns as ab,rh as ac,Nh as ad,Bh as ae,oi as af,Xc as ag,Hh as ah,ch as ai,Kl as aj,xh as ak,$h as al,Ph as am,wt as an,eh as ao,zh as ap,au as aq,Zh as ar,Ka as as,Id as at,$l as au,Ma as av,op as aw,Rn as ax,Xh as ay,tu as az,Wc as b,an as b0,hp as b1,ap as b2,ui as b3,tp as b4,jh as b5,wp as b6,_p as b7,bp as b8,ep as b9,Xa as bA,Mo as bB,Kd as bC,Yh as bD,Ml as bE,gl as bF,vl as bG,bl as bH,_l as bI,Tl as bJ,Al as bK,xl as bL,El as bM,Dl as bN,Nl as bO,Rl as bP,jl as bQ,Pl as bR,cp as bS,pp as bT,yp as bU,Ld as ba,Dc as bb,jc as bc,Nc as bd,Bc as be,Zd as bf,ip as bg,qh as bh,rp as bi,np as bj,ed as bk,Kf as bl,lp as bm,up as bn,_a as bo,Ll as bp,Nd as bq,kd as br,ja as bs,La as bt,Sp as bu,Dd as bv,Qh as bw,Cd as bx,Pd as by,Qr as bz,Yd as c,zd as d,Es as e,eu as f,Jd as g,io as h,Wh as i,Oh as j,Lc as k,Gd as l,ni as m,nh as n,dn as o,oh as p,Vc as q,Kc as r,Fc as s,Is as t,Hd as u,ah as v,Ze as w,Ih as x,Dh as y,Kt as z};

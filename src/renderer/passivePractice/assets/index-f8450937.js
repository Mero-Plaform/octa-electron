var es=Object.defineProperty;var ts=(t,e,n)=>e in t?es(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var _n=(t,e,n)=>(ts(t,typeof e!="symbol"?e+"":e,n),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function J(){}const jt=t=>t;function oe(t,e){for(const n in e)t[n]=e[n];return t}function ai(t){return t()}function Tr(){return Object.create(null)}function fe(t){t.forEach(ai)}function Ge(t){return typeof t=="function"}function Ce(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function ns(t){return Object.keys(t).length===0}function li(t,...e){if(t==null){for(const r of e)r(void 0);return J}const n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function rs(t){let e;return li(t,n=>e=n)(),e}function ui(t,e,n){t.$$.on_destroy.push(li(e,n))}function ir(t,e,n,r){if(t){const i=ci(t,e,n,r);return t[0](i)}}function ci(t,e,n,r){return t[1]&&r?oe(n.ctx.slice(),t[1](r(e))):n.ctx}function sr(t,e,n,r){if(t[2]&&r){const i=t[2](r(n));if(e.dirty===void 0)return i;if(typeof i=="object"){const s=[],o=Math.max(e.dirty.length,i.length);for(let a=0;a<o;a+=1)s[a]=e.dirty[a]|i[a];return s}return e.dirty|i}return e.dirty}function or(t,e,n,r,i,s){if(i){const o=ci(e,n,r,s);t.p(o,i)}}function ar(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let r=0;r<n;r++)e[r]=-1;return e}return-1}function De(t){const e={};for(const n in t)n[0]!=="$"&&(e[n]=t[n]);return e}function $t(t,e){const n={};e=new Set(e);for(const r in t)!e.has(r)&&r[0]!=="$"&&(n[r]=t[r]);return n}function is(t){const e={};for(const n in t)e[n]=!0;return e}const fi=typeof window<"u";let gn=fi?()=>window.performance.now():()=>Date.now(),lr=fi?t=>requestAnimationFrame(t):J;const it=new Set;function di(t){it.forEach(e=>{e.c(t)||(it.delete(e),e.f())}),it.size!==0&&lr(di)}function yn(t){let e;return it.size===0&&lr(di),{promise:new Promise(n=>{it.add(e={c:t,f:n})}),abort(){it.delete(e)}}}function I(t,e){t.appendChild(e)}function hi(t){if(!t)return document;const e=t.getRootNode?t.getRootNode():t.ownerDocument;return e&&e.host?e:t.ownerDocument}function ss(t){const e=R("style");return e.textContent="/* empty */",os(hi(t),e),e.sheet}function os(t,e){return I(t.head||t,e),e.sheet}function Q(t,e,n){t.insertBefore(e,n||null)}function V(t){t.parentNode&&t.parentNode.removeChild(t)}function R(t){return document.createElement(t)}function Se(t){return document.createTextNode(t)}function Z(){return Se(" ")}function as(){return Se("")}function W(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function x(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}const ls=["width","height"];function en(t,e){const n=Object.getOwnPropertyDescriptors(t.__proto__);for(const r in e)e[r]==null?t.removeAttribute(r):r==="style"?t.style.cssText=e[r]:r==="__value"?t.value=t[r]=e[r]:n[r]&&n[r].set&&ls.indexOf(r)===-1?t[r]=e[r]:x(t,r,e[r])}function us(t){let e;return{p(...n){e=n,e.forEach(r=>t.push(r))},r(){e.forEach(n=>t.splice(t.indexOf(n),1))}}}function cs(t){return Array.from(t.childNodes)}function ur(t,e){e=""+e,t.data!==e&&(t.data=e)}function re(t,e,n){t.classList.toggle(e,!!n)}function mi(t,e,{bubbles:n=!1,cancelable:r=!1}={}){return new CustomEvent(t,{detail:e,bubbles:n,cancelable:r})}const tn=new Map;let nn=0;function fs(t){let e=5381,n=t.length;for(;n--;)e=(e<<5)-e^t.charCodeAt(n);return e>>>0}function ds(t,e){const n={stylesheet:ss(e),rules:{}};return tn.set(t,n),n}function kt(t,e,n,r,i,s,o,a=0){const l=16.666/r;let d=`{
`;for(let b=0;b<=1;b+=l){const m=e+(n-e)*s(b);d+=b*100+`%{${o(m,1-m)}}
`}const c=d+`100% {${o(n,1-n)}}
}`,u=`__svelte_${fs(c)}_${a}`,f=hi(t),{stylesheet:h,rules:y}=tn.get(f)||ds(f,t);y[u]||(y[u]=!0,h.insertRule(`@keyframes ${u} ${c}`,h.cssRules.length));const g=t.style.animation||"";return t.style.animation=`${g?`${g}, `:""}${u} ${r}ms linear ${i}ms 1 both`,nn+=1,u}function Et(t,e){const n=(t.style.animation||"").split(", "),r=n.filter(e?s=>s.indexOf(e)<0:s=>s.indexOf("__svelte")===-1),i=n.length-r.length;i&&(t.style.animation=r.join(", "),nn-=i,nn||hs())}function hs(){lr(()=>{nn||(tn.forEach(t=>{const{ownerNode:e}=t.stylesheet;e&&V(e)}),tn.clear())})}function ms(t,e,n,r){if(!e)return J;const i=t.getBoundingClientRect();if(e.left===i.left&&e.right===i.right&&e.top===i.top&&e.bottom===i.bottom)return J;const{delay:s=0,duration:o=300,easing:a=jt,start:l=gn()+s,end:d=l+o,tick:c=J,css:u}=n(t,{from:e,to:i},r);let f=!0,h=!1,y;function g(){u&&(y=kt(t,0,1,o,s,a,u)),s||(h=!0)}function b(){u&&Et(t,y),f=!1}return yn(m=>{if(!h&&m>=l&&(h=!0),h&&m>=d&&(c(1,0),b()),!f)return!1;if(h){const p=m-l,v=0+1*a(p/o);c(v,1-v)}return!0}),g(),c(0,1),b}function gs(t){const e=getComputedStyle(t);if(e.position!=="absolute"&&e.position!=="fixed"){const{width:n,height:r}=e,i=t.getBoundingClientRect();t.style.position="absolute",t.style.width=n,t.style.height=r,gi(t,i)}}function gi(t,e){const n=t.getBoundingClientRect();if(e.left!==n.left||e.top!==n.top){const r=getComputedStyle(t),i=r.transform==="none"?"":r.transform;t.style.transform=`${i} translate(${e.left-n.left}px, ${e.top-n.top}px)`}}let Pt;function yt(t){Pt=t}function cr(){if(!Pt)throw new Error("Function called outside component initialization");return Pt}function ys(){const t=cr();return(e,n,{cancelable:r=!1}={})=>{const i=t.$$.callbacks[e];if(i){const s=mi(e,n,{cancelable:r});return i.slice().forEach(o=>{o.call(t,s)}),!s.defaultPrevented}return!0}}function Xe(t,e){return cr().$$.context.set(t,e),e}function Je(t){return cr().$$.context.get(t)}function se(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach(r=>r.call(this,e))}const nt=[],Ve=[];let st=[];const Tn=[],ps=Promise.resolve();let Kn=!1;function bs(){Kn||(Kn=!0,ps.then(yi))}function je(t){st.push(t)}function rn(t){Tn.push(t)}const wn=new Set;let Ze=0;function yi(){if(Ze!==0)return;const t=Pt;do{try{for(;Ze<nt.length;){const e=nt[Ze];Ze++,yt(e),vs(e.$$)}}catch(e){throw nt.length=0,Ze=0,e}for(yt(null),nt.length=0,Ze=0;Ve.length;)Ve.pop()();for(let e=0;e<st.length;e+=1){const n=st[e];wn.has(n)||(wn.add(n),n())}st.length=0}while(nt.length);for(;Tn.length;)Tn.pop()();Kn=!1,wn.clear(),yt(t)}function vs(t){if(t.fragment!==null){t.update(),fe(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(je)}}function _s(t){const e=[],n=[];st.forEach(r=>t.indexOf(r)===-1?e.push(r):n.push(r)),n.forEach(r=>r()),st=e}let dt;function fr(){return dt||(dt=Promise.resolve(),dt.then(()=>{dt=null})),dt}function Le(t,e,n){t.dispatchEvent(mi(`${e?"intro":"outro"}${n}`))}const Ut=new Set;let me;function dr(){me={r:0,c:[],p:me}}function hr(){me.r||fe(me.c),me=me.p}function U(t,e){t&&t.i&&(Ut.delete(t),t.i(e))}function X(t,e,n,r){if(t&&t.o){if(Ut.has(t))return;Ut.add(t),me.c.push(()=>{Ut.delete(t),r&&(n&&t.d(1),r())}),t.o(e)}else r&&r()}const mr={duration:0};function ws(t,e,n){const r={direction:"in"};let i=e(t,n,r),s=!1,o,a,l=0;function d(){o&&Et(t,o)}function c(){const{delay:f=0,duration:h=300,easing:y=jt,tick:g=J,css:b}=i||mr;b&&(o=kt(t,0,1,h,f,y,b,l++)),g(0,1);const m=gn()+f,p=m+h;a&&a.abort(),s=!0,je(()=>Le(t,!0,"start")),a=yn(v=>{if(s){if(v>=p)return g(1,0),Le(t,!0,"end"),d(),s=!1;if(v>=m){const w=y((v-m)/h);g(w,1-w)}}return s})}let u=!1;return{start(){u||(u=!0,Et(t),Ge(i)?(i=i(r),fr().then(c)):c())},invalidate(){u=!1},end(){s&&(d(),s=!1)}}}function ks(t,e,n){const r={direction:"out"};let i=e(t,n,r),s=!0,o;const a=me;a.r+=1;let l;function d(){const{delay:c=0,duration:u=300,easing:f=jt,tick:h=J,css:y}=i||mr;y&&(o=kt(t,1,0,u,c,f,y));const g=gn()+c,b=g+u;je(()=>Le(t,!1,"start")),"inert"in t&&(l=t.inert,t.inert=!0),yn(m=>{if(s){if(m>=b)return h(0,1),Le(t,!1,"end"),--a.r||fe(a.c),!1;if(m>=g){const p=f((m-g)/u);h(1-p,p)}}return s})}return Ge(i)?fr().then(()=>{i=i(r),d()}):d(),{end(c){c&&"inert"in t&&(t.inert=l),c&&i.tick&&i.tick(1,0),s&&(o&&Et(t,o),s=!1)}}}function Kr(t,e,n,r){let s=e(t,n,{direction:"both"}),o=r?0:1,a=null,l=null,d=null,c;function u(){d&&Et(t,d)}function f(y,g){const b=y.b-o;return g*=Math.abs(b),{a:o,b:y.b,d:b,duration:g,start:y.start,end:y.start+g,group:y.group}}function h(y){const{delay:g=0,duration:b=300,easing:m=jt,tick:p=J,css:v}=s||mr,w={start:gn()+g,b:y};y||(w.group=me,me.r+=1),"inert"in t&&(y?c!==void 0&&(t.inert=c):(c=t.inert,t.inert=!0)),a||l?l=w:(v&&(u(),d=kt(t,o,y,b,g,m,v)),y&&p(0,1),a=f(w,b),je(()=>Le(t,y,"start")),yn(P=>{if(l&&P>l.start&&(a=f(l,b),l=null,Le(t,a.b,"start"),v&&(u(),d=kt(t,o,a.b,a.duration,0,m,s.css))),a){if(P>=a.end)p(o=a.b,1-o),Le(t,a.b,"end"),l||(a.b?u():--a.group.r||fe(a.group.c)),a=null;else if(P>=a.start){const E=P-a.start;o=a.a+a.d*m(E/a.duration),p(o,1-o)}}return!!(a||l)}))}return{run(y){Ge(s)?fr().then(()=>{s=s({direction:y?"in":"out"}),h(y)}):h(y)},end(){u(),a=l=null}}}function sn(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function Es(t,e){t.d(1),e.delete(t.key)}function Ps(t,e){X(t,1,1,()=>{e.delete(t.key)})}function Ss(t,e){t.f(),Ps(t,e)}function pi(t,e,n,r,i,s,o,a,l,d,c,u){let f=t.length,h=s.length,y=f;const g={};for(;y--;)g[t[y].key]=y;const b=[],m=new Map,p=new Map,v=[];for(y=h;y--;){const _=u(i,s,y),S=n(_);let k=o.get(S);k?r&&v.push(()=>k.p(_,e)):(k=d(S,_),k.c()),m.set(S,b[y]=k),S in g&&p.set(S,Math.abs(y-g[S]))}const w=new Set,P=new Set;function E(_){U(_,1),_.m(a,c),o.set(_.key,_),c=_.first,h--}for(;f&&h;){const _=b[h-1],S=t[f-1],k=_.key,j=S.key;_===S?(c=_.first,f--,h--):m.has(j)?!o.has(k)||w.has(k)?E(_):P.has(j)?f--:p.get(k)>p.get(j)?(P.add(k),E(_)):(w.add(j),f--):(l(S,o),f--)}for(;f--;){const _=t[f];m.has(_.key)||l(_,o)}for(;h;)E(b[h-1]);return fe(v),b}function bi(t,e){const n={},r={},i={$$scope:1};let s=t.length;for(;s--;){const o=t[s],a=e[s];if(a){for(const l in o)l in a||(r[l]=1);for(const l in a)i[l]||(n[l]=a[l],i[l]=1);t[s]=a}else for(const l in o)i[l]=1}for(const o in r)o in n||(n[o]=void 0);return n}function on(t,e,n){const r=t.$$.props[e];r!==void 0&&(t.$$.bound[r]=n,n(t.$$.ctx[r]))}function we(t){t&&t.c()}function ge(t,e,n){const{fragment:r,after_update:i}=t.$$;r&&r.m(e,n),je(()=>{const s=t.$$.on_mount.map(ai).filter(Ge);t.$$.on_destroy?t.$$.on_destroy.push(...s):fe(s),t.$$.on_mount=[]}),i.forEach(je)}function ye(t,e){const n=t.$$;n.fragment!==null&&(_s(n.after_update),fe(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function xs(t,e){t.$$.dirty[0]===-1&&(nt.push(t),bs(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function Me(t,e,n,r,i,s,o,a=[-1]){const l=Pt;yt(t);const d=t.$$={fragment:null,ctx:[],props:s,update:J,not_equal:i,bound:Tr(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(l?l.$$.context:[])),callbacks:Tr(),dirty:a,skip_bound:!1,root:e.target||l.$$.root};o&&o(d.root);let c=!1;if(d.ctx=n?n(t,e.props||{},(u,f,...h)=>{const y=h.length?h[0]:f;return d.ctx&&i(d.ctx[u],d.ctx[u]=y)&&(!d.skip_bound&&d.bound[u]&&d.bound[u](y),c&&xs(t,u)),f}):[],d.update(),c=!0,fe(d.before_update),d.fragment=r?r(d.ctx):!1,e.target){if(e.hydrate){const u=cs(e.target);d.fragment&&d.fragment.l(u),u.forEach(V)}else d.fragment&&d.fragment.c();e.intro&&U(t.$$.fragment),ge(t,e.target,e.anchor),yi()}yt(l)}class Ne{constructor(){_n(this,"$$");_n(this,"$$set")}$destroy(){ye(this,1),this.$destroy=J}$on(e,n){if(!Ge(n))return J;const r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(n),()=>{const i=r.indexOf(n);i!==-1&&r.splice(i,1)}}$set(e){this.$$set&&!ns(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Cs="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Cs);const $e=[];function gr(t,e=J){let n;const r=new Set;function i(a){if(Ce(t,a)&&(t=a,n)){const l=!$e.length;for(const d of r)d[1](),$e.push(d,t);if(l){for(let d=0;d<$e.length;d+=2)$e[d][0]($e[d+1]);$e.length=0}}}function s(a){i(a(t))}function o(a,l=J){const d=[a,l];return r.add(d),r.size===1&&(n=e(i,s)||J),a(t),()=>{r.delete(d),r.size===0&&n&&(n(),n=null)}}return{set:i,update:s,subscribe:o}}const Os={message:"Missing Toast Message",autohide:!0,timeout:5e3};function As(){const t=Math.random();return Number(t).toString(32)}function Dr(t){if(t.autohide===!0)return setTimeout(()=>{Te.close(t.id)},t.timeout)}function Ts(){const{subscribe:t,set:e,update:n}=gr([]);return{subscribe:t,trigger:r=>{const i=As();return n(s=>{r&&r.callback&&r.callback({id:i,status:"queued"}),r.hideDismiss&&(r.autohide=!0);const o={...Os,...r,id:i};return o.timeoutId=Dr(o),s.push(o),s}),i},close:r=>n(i=>{if(i.length>0){const s=i.findIndex(a=>a.id===r),o=i[s];o&&(o.callback&&o.callback({id:r,status:"closed"}),o.timeoutId&&clearTimeout(o.timeoutId),i.splice(s,1))}return i}),freeze:r=>n(i=>(i.length>0&&clearTimeout(i[r].timeoutId),i)),unfreeze:r=>n(i=>(i.length>0&&(i[r].timeoutId=Dr(i[r])),i)),clear:()=>e([])}}const Te=Ts(),kn={};function jr(t){return t==="local"?localStorage:sessionStorage}function yr(t,e,n){const r=(n==null?void 0:n.serializer)??JSON,i=(n==null?void 0:n.storage)??"local";function s(o,a){jr(i).setItem(o,r.stringify(a))}if(!kn[t]){const o=gr(e,d=>{const c=jr(i).getItem(t);c&&d(r.parse(c));{const u=f=>{f.key===t&&d(f.newValue?r.parse(f.newValue):null)};return window.addEventListener("storage",u),()=>window.removeEventListener("storage",u)}}),{subscribe:a,set:l}=o;kn[t]={set(d){s(t,d),l(d)},update(d){const c=d(rs(o));s(t,c),l(c)},subscribe:a}}return kn[t]}yr("modeOsPrefers",!1);yr("modeUserPrefers",void 0);yr("modeCurrent",!1);function Ks(t){return t<.5?4*t*t*t:.5*Math.pow(2*t-2,3)+1}function vi(t){const e=t-1;return e*e*e+1}function Br(t,{delay:e=0,duration:n=400,easing:r=jt}={}){const i=+getComputedStyle(t).opacity;return{delay:e,duration:n,easing:r,css:s=>`opacity: ${s*i}`}}function Ds({fallback:t,...e}){const n=new Map,r=new Map;function i(o,a,l){const{delay:d=0,duration:c=E=>Math.sqrt(E)*30,easing:u=vi}=oe(oe({},e),l),f=o.getBoundingClientRect(),h=a.getBoundingClientRect(),y=f.left-h.left,g=f.top-h.top,b=f.width/h.width,m=f.height/h.height,p=Math.sqrt(y*y+g*g),v=getComputedStyle(a),w=v.transform==="none"?"":v.transform,P=+v.opacity;return{delay:d,duration:Ge(c)?c(p):c,easing:u,css:(E,_)=>`
				opacity: ${E*P};
				transform-origin: top left;
				transform: ${w} translate(${_*y}px,${_*g}px) scale(${E+(1-E)*b}, ${E+(1-E)*m});
			`}}function s(o,a,l){return(d,c)=>(o.set(c.key,d),()=>{if(a.has(c.key)){const u=a.get(c.key);return a.delete(c.key),i(u,d,c)}return o.delete(c.key),t&&t(d,c,l)})}return[s(r,n,!1),s(n,r,!0)]}function js(t,{from:e,to:n},r={}){const i=getComputedStyle(t),s=i.transform==="none"?"":i.transform,[o,a]=i.transformOrigin.split(" ").map(parseFloat),l=e.left+e.width*o/n.width-(n.left+o),d=e.top+e.height*a/n.height-(n.top+a),{delay:c=0,duration:u=h=>Math.sqrt(h)*120,easing:f=vi}=r;return{delay:c,duration:Ge(u)?u(Math.sqrt(l*l+d*d)):u,easing:f,css:(h,y)=>{const g=y*l,b=y*d,m=h+y*e.width/n.width,p=h+y*e.height/n.height;return`transform: ${s} translate(${g}px, ${b}px) scale(${m}, ${p});`}}}function Bs(t){let e,n,r;const i=t[13].default,s=ir(i,t,t[12],null);return{c(){e=R("div"),s&&s.c(),x(e,"class",n="radio-group "+t[1]),x(e,"data-testid","radio-group"),x(e,"role","radiogroup"),x(e,"aria-labelledby",t[0])},m(o,a){Q(o,e,a),s&&s.m(e,null),r=!0},p(o,[a]){s&&s.p&&(!r||a&4096)&&or(s,i,o,o[12],r?sr(i,o[12],a,null):ar(o[12]),null),(!r||a&2&&n!==(n="radio-group "+o[1]))&&x(e,"class",n),(!r||a&1)&&x(e,"aria-labelledby",o[0])},i(o){r||(U(s,o),r=!0)},o(o){X(s,o),r=!1},d(o){o&&V(e),s&&s.d(o)}}}const Is="p-1";function Rs(t,e,n){let r,{$$slots:i={},$$scope:s}=e,{display:o="inline-flex"}=e,{background:a="bg-surface-200-700-token"}=e,{border:l="border-token border-surface-400-500-token"}=e,{spacing:d=""}=e,{rounded:c="rounded-token"}=e,{padding:u="px-4 py-1"}=e,{active:f="variant-filled"}=e,{hover:h="hover:variant-soft"}=e,{color:y=""}=e,{fill:g=""}=e,{labelledby:b=""}=e;return Xe("rounded",c),Xe("padding",u),Xe("active",f),Xe("hover",h),Xe("color",y),Xe("fill",g),t.$$set=m=>{n(14,e=oe(oe({},e),De(m))),"display"in m&&n(3,o=m.display),"background"in m&&n(4,a=m.background),"border"in m&&n(5,l=m.border),"spacing"in m&&n(2,d=m.spacing),"rounded"in m&&n(6,c=m.rounded),"padding"in m&&n(7,u=m.padding),"active"in m&&n(8,f=m.active),"hover"in m&&n(9,h=m.hover),"color"in m&&n(10,y=m.color),"fill"in m&&n(11,g=m.fill),"labelledby"in m&&n(0,b=m.labelledby),"$$scope"in m&&n(12,s=m.$$scope)},t.$$.update=()=>{t.$$.dirty&8&&n(2,d=`${o.includes("flex-col")?"":"space-x-1"}`),n(1,r=`${Is} ${o} ${a} ${l} ${d} ${c} ${e.class??""}`)},e=De(e),[b,r,d,o,a,l,c,u,f,h,y,g,s,i]}class Ms extends Ne{constructor(e){super(),Me(this,e,Rs,Bs,Ce,{display:3,background:4,border:5,spacing:2,rounded:6,padding:7,active:8,hover:9,color:10,fill:11,labelledby:0})}}function Ns(t){let e,n,r,i,s,o,a,l,d,c,u=[{type:"radio"},{name:t[1]},{__value:t[2]},t[9](),{tabindex:"-1"}],f={};for(let g=0;g<u.length;g+=1)f=oe(f,u[g]);const h=t[19].default,y=ir(h,t,t[18],null);return l=us(t[27][0]),{c(){e=R("label"),n=R("div"),r=R("div"),i=R("input"),s=Z(),y&&y.c(),en(i,f),x(r,"class","h-0 w-0 overflow-hidden"),x(n,"class",o="radio-item "+t[7]),x(n,"data-testid","radio-item"),x(n,"role","radio"),x(n,"aria-checked",t[5]),x(n,"aria-label",t[4]),x(n,"tabindex","0"),x(n,"title",t[3]),l.p(i)},m(g,b){Q(g,e,b),I(e,n),I(n,r),I(r,i),i.autofocus&&i.focus(),t[25](i),i.checked=i.__value===t[0],I(n,s),y&&y.m(n,null),a=!0,d||(c=[W(i,"change",t[26]),W(i,"click",t[23]),W(i,"change",t[24]),W(n,"keydown",t[8]),W(n,"keydown",t[20]),W(n,"keyup",t[21]),W(n,"keypress",t[22])],d=!0)},p(g,[b]){en(i,f=bi(u,[{type:"radio"},(!a||b&2)&&{name:g[1]},(!a||b&4)&&{__value:g[2]},g[9](),{tabindex:"-1"}])),b&1&&(i.checked=i.__value===g[0]),y&&y.p&&(!a||b&262144)&&or(y,h,g,g[18],a?sr(h,g[18],b,null):ar(g[18]),null),(!a||b&128&&o!==(o="radio-item "+g[7]))&&x(n,"class",o),(!a||b&32)&&x(n,"aria-checked",g[5]),(!a||b&16)&&x(n,"aria-label",g[4]),(!a||b&8)&&x(n,"title",g[3])},i(g){a||(U(y,g),a=!0)},o(g){X(y,g),a=!1},d(g){g&&V(e),t[25](null),y&&y.d(g),l.r(),d=!1,fe(c)}}}const Fs="flex-auto text-base text-center cursor-pointer",qs="opacity-50 cursor-not-allowed";function Ls(t,e,n){let r,i,s,o;const a=["group","name","value","title","label","rounded","padding","active","hover","color","fill"];let l=$t(e,a),{$$slots:d={},$$scope:c}=e,{group:u}=e,{name:f}=e,{value:h}=e,{title:y=""}=e,{label:g=""}=e,{rounded:b=Je("rounded")}=e,{padding:m=Je("padding")}=e,{active:p=Je("active")}=e,{hover:v=Je("hover")}=e,{color:w=Je("color")}=e,{fill:P=Je("fill")}=e,E;function _(A){["Enter","Space"].includes(A.code)&&(A.preventDefault(),E.click())}function S(){return delete l.class,l}const k=[[]];function j(A){se.call(this,t,A)}function B(A){se.call(this,t,A)}function F(A){se.call(this,t,A)}function q(A){se.call(this,t,A)}function M(A){se.call(this,t,A)}function le(A){Ve[A?"unshift":"push"](()=>{E=A,n(6,E)})}function ue(){u=this.__value,n(0,u)}return t.$$set=A=>{n(29,e=oe(oe({},e),De(A))),n(28,l=$t(e,a)),"group"in A&&n(0,u=A.group),"name"in A&&n(1,f=A.name),"value"in A&&n(2,h=A.value),"title"in A&&n(3,y=A.title),"label"in A&&n(4,g=A.label),"rounded"in A&&n(10,b=A.rounded),"padding"in A&&n(11,m=A.padding),"active"in A&&n(12,p=A.active),"hover"in A&&n(13,v=A.hover),"color"in A&&n(14,w=A.color),"fill"in A&&n(15,P=A.fill),"$$scope"in A&&n(18,c=A.$$scope)},t.$$.update=()=>{t.$$.dirty&5&&n(5,r=h===u),t.$$.dirty&61472&&n(17,i=r?`${p} ${w} ${P}`:v),n(16,s=e.disabled?qs:""),n(7,o=`${Fs} ${m} ${b} ${i} ${s} ${e.class??""}`)},e=De(e),[u,f,h,y,g,r,E,o,_,S,b,m,p,v,w,P,s,i,c,d,j,B,F,q,M,le,ue,k]}class Ir extends Ne{constructor(e){super(),Me(this,e,Ls,Ns,Ce,{group:0,name:1,value:2,title:3,label:4,rounded:10,padding:11,active:12,hover:13,color:14,fill:15})}}function Rr(t){let e,n;const r=t[22].default,i=ir(r,t,t[21],null);return{c(){e=R("div"),i&&i.c(),x(e,"class","slide-toggle-text ml-3")},m(s,o){Q(s,e,o),i&&i.m(e,null),n=!0},p(s,o){i&&i.p&&(!n||o[0]&2097152)&&or(i,r,s,s[21],n?sr(r,s[21],o,null):ar(s[21]),null)},i(s){n||(U(i,s),n=!0)},o(s){X(i,s),n=!1},d(s){s&&V(e),i&&i.d(s)}}}function zs(t){let e,n,r,i,s,o,a,l,d,c,u,f,h,y,g,b=[{type:"checkbox"},{class:"slide-toggle-input hidden"},{name:t[1]},t[8](),{disabled:i=t[9].disabled}],m={};for(let v=0;v<b.length;v+=1)m=oe(m,b[v]);let p=t[10].default&&Rr(t);return{c(){e=R("div"),n=R("label"),r=R("input"),s=Z(),o=R("div"),a=R("div"),c=Z(),p&&p.c(),en(r,m),x(a,"class",l="slide-toggle-thumb "+t[3]),re(a,"cursor-not-allowed",t[9].disabled),x(o,"class",d="slide-toggle-track "+t[4]),re(o,"cursor-not-allowed",t[9].disabled),x(n,"class",u="slide-toggle-label "+t[5]),x(e,"id",t[2]),x(e,"class",f="slide-toggle "+t[6]),x(e,"data-testid","slide-toggle"),x(e,"role","switch"),x(e,"aria-label",t[2]),x(e,"aria-checked",t[0]),x(e,"tabindex","0")},m(v,w){Q(v,e,w),I(e,n),I(n,r),r.autofocus&&r.focus(),r.checked=t[0],I(n,s),I(n,o),I(o,a),I(n,c),p&&p.m(n,null),h=!0,y||(g=[W(r,"change",t[31]),W(r,"click",t[23]),W(r,"keydown",t[24]),W(r,"keyup",t[25]),W(r,"keypress",t[26]),W(r,"mouseover",t[27]),W(r,"change",t[28]),W(r,"focus",t[29]),W(r,"blur",t[30]),W(e,"keydown",t[7])],y=!0)},p(v,w){en(r,m=bi(b,[{type:"checkbox"},{class:"slide-toggle-input hidden"},(!h||w[0]&2)&&{name:v[1]},v[8](),(!h||w[0]&512&&i!==(i=v[9].disabled))&&{disabled:i}])),w[0]&1&&(r.checked=v[0]),(!h||w[0]&8&&l!==(l="slide-toggle-thumb "+v[3]))&&x(a,"class",l),(!h||w[0]&520)&&re(a,"cursor-not-allowed",v[9].disabled),(!h||w[0]&16&&d!==(d="slide-toggle-track "+v[4]))&&x(o,"class",d),(!h||w[0]&528)&&re(o,"cursor-not-allowed",v[9].disabled),v[10].default?p?(p.p(v,w),w[0]&1024&&U(p,1)):(p=Rr(v),p.c(),U(p,1),p.m(n,null)):p&&(dr(),X(p,1,1,()=>{p=null}),hr()),(!h||w[0]&32&&u!==(u="slide-toggle-label "+v[5]))&&x(n,"class",u),(!h||w[0]&4)&&x(e,"id",v[2]),(!h||w[0]&64&&f!==(f="slide-toggle "+v[6]))&&x(e,"class",f),(!h||w[0]&4)&&x(e,"aria-label",v[2]),(!h||w[0]&1)&&x(e,"aria-checked",v[0])},i(v){h||(U(p),h=!0)},o(v){X(p),h=!1},d(v){v&&V(e),p&&p.d(),y=!1,fe(g)}}}const Ws="inline-block",Us="unstyled flex items-center",Vs="flex transition-all duration-[200ms] cursor-pointer",Ys="w-[50%] h-full scale-[0.8] transition-all duration-[200ms] shadow";function Hs(t,e,n){let r,i,s,o,a,l,d,c;const u=["name","checked","size","background","active","border","rounded","label"];let f=$t(e,u),{$$slots:h={},$$scope:y}=e;const g=is(h),b=ys();let{name:m}=e,{checked:p=!1}=e,{size:v="md"}=e,{background:w="bg-surface-400 dark:bg-surface-700"}=e,{active:P="bg-surface-900 dark:bg-surface-300"}=e,{border:E=""}=e,{rounded:_="rounded-full"}=e,{label:S=""}=e,k;switch(v){case"sm":k="w-12 h-6";break;case"lg":k="w-20 h-10";break;default:k="w-16 h-8"}function j(D){["Enter","Space"].includes(D.code)&&(D.preventDefault(),b("keyup",D),D.currentTarget.firstChild.click())}function B(){return delete f.class,f}function F(D){se.call(this,t,D)}function q(D){se.call(this,t,D)}function M(D){se.call(this,t,D)}function le(D){se.call(this,t,D)}function ue(D){se.call(this,t,D)}function A(D){se.call(this,t,D)}function O(D){se.call(this,t,D)}function H(D){se.call(this,t,D)}function de(){p=this.checked,n(0,p)}return t.$$set=D=>{n(9,e=oe(oe({},e),De(D))),n(33,f=$t(e,u)),"name"in D&&n(1,m=D.name),"checked"in D&&n(0,p=D.checked),"size"in D&&n(11,v=D.size),"background"in D&&n(12,w=D.background),"active"in D&&n(13,P=D.active),"border"in D&&n(14,E=D.border),"rounded"in D&&n(15,_=D.rounded),"label"in D&&n(2,S=D.label),"$$scope"in D&&n(21,y=D.$$scope)},t.$$.update=()=>{t.$$.dirty[0]&12289&&n(19,r=p?P:`${w} cursor-pointer`),t.$$.dirty[0]&1&&n(18,i=p?"bg-white/75":"bg-white"),t.$$.dirty[0]&1&&n(17,s=p?"translate-x-full":""),n(20,o=e.disabled===!0?"opacity-50":"hover:brightness-[105%] dark:hover:brightness-110 cursor-pointer"),n(6,a=`${Ws} ${_} ${o} ${e.class??""}`),t.$$.dirty[0]&638976&&n(4,d=`${Vs} ${E} ${_} ${k} ${r}`),t.$$.dirty[0]&425984&&n(3,c=`${Ys} ${_} ${i} ${s}`)},n(5,l=`${Us}`),e=De(e),[p,m,S,c,d,l,a,j,B,e,g,v,w,P,E,_,k,s,i,r,o,y,h,F,q,M,le,ue,A,O,H,de]}class Gs extends Ne{constructor(e){super(),Me(this,e,Hs,zs,Ce,{name:1,checked:0,size:11,background:12,active:13,border:14,rounded:15,label:2},null,[-1,-1])}}function Mr(t,e,n){const r=t.slice();return r[32]=e[n],r[34]=n,r}function Nr(t){let e,n,r=[],i=new Map,s,o,a,l=sn(t[6]);const d=c=>c[32];for(let c=0;c<l.length;c+=1){let u=Mr(t,l,c),f=d(u);i.set(f,r[c]=zr(f,u))}return{c(){e=R("div"),n=R("div");for(let c=0;c<r.length;c+=1)r[c].c();x(n,"class",s="snackbar "+t[8]),x(e,"class",o="snackbar-wrapper "+t[9]),x(e,"data-testid","snackbar-wrapper")},m(c,u){Q(c,e,u),I(e,n);for(let f=0;f<r.length;f+=1)r[f]&&r[f].m(n,null);a=!0},p(c,u){if(u[0]&7390){l=sn(c[6]),dr();for(let f=0;f<r.length;f+=1)r[f].r();r=pi(r,u,d,1,c,l,i,n,Ss,zr,null,Mr);for(let f=0;f<r.length;f+=1)r[f].a();hr()}(!a||u[0]&256&&s!==(s="snackbar "+c[8]))&&x(n,"class",s),(!a||u[0]&512&&o!==(o="snackbar-wrapper "+c[9]))&&x(e,"class",o)},i(c){if(!a){for(let u=0;u<l.length;u+=1)U(r[u]);a=!0}},o(c){for(let u=0;u<r.length;u+=1)X(r[u]);a=!1},d(c){c&&V(e);for(let u=0;u<r.length;u+=1)r[u].d()}}}function Fr(t){let e,n,r=t[32].action&&qr(t),i=!t[32].hideDismiss&&Lr(t);return{c(){e=R("div"),r&&r.c(),n=Z(),i&&i.c(),x(e,"class","toast-actions "+$s)},m(s,o){Q(s,e,o),r&&r.m(e,null),I(e,n),i&&i.m(e,null)},p(s,o){s[32].action?r?r.p(s,o):(r=qr(s),r.c(),r.m(e,n)):r&&(r.d(1),r=null),s[32].hideDismiss?i&&(i.d(1),i=null):i?i.p(s,o):(i=Lr(s),i.c(),i.m(e,null))},d(s){s&&V(e),r&&r.d(),i&&i.d()}}}function qr(t){let e,n=t[32].action.label+"",r,i;function s(){return t[26](t[34])}return{c(){e=R("button"),x(e,"class",t[2])},m(o,a){Q(o,e,a),e.innerHTML=n,r||(i=W(e,"click",s),r=!0)},p(o,a){t=o,a[0]&64&&n!==(n=t[32].action.label+"")&&(e.innerHTML=n),a[0]&4&&x(e,"class",t[2])},d(o){o&&V(e),r=!1,i()}}}function Lr(t){let e,n,r,i;function s(){return t[27](t[32])}return{c(){e=R("button"),n=Se(t[4]),x(e,"class",t[3]),x(e,"aria-label","Dismiss toast")},m(o,a){Q(o,e,a),I(e,n),r||(i=W(e,"click",s),r=!0)},p(o,a){t=o,a[0]&16&&ur(n,t[4]),a[0]&8&&x(e,"class",t[3])},d(o){o&&V(e),r=!1,i()}}}function zr(t,e){let n,r,i,s=e[32].message+"",o,a,l,d,c,u,f,h=J,y,g,b,m=(e[32].action||!e[32].hideDismiss)&&Fr(e);function p(){return e[28](e[34])}function v(){return e[29](e[34])}return{key:t,first:null,c(){n=R("div"),r=R("div"),i=R("div"),o=Z(),m&&m.c(),l=Z(),x(i,"class","text-base"),x(r,"class",a="toast "+e[7]+" "+(e[32].background??e[1])+" "+(e[32].classes??"")),x(r,"data-testid","toast"),x(n,"role",d=e[32].hideDismiss?"alert":"alertdialog"),x(n,"aria-live","polite"),this.first=n},m(w,P){Q(w,n,P),I(n,r),I(r,i),i.innerHTML=s,I(r,o),m&&m.m(r,null),I(n,l),y=!0,g||(b=[W(n,"mouseenter",p),W(n,"mouseleave",v)],g=!0)},p(w,P){e=w,(!y||P[0]&64)&&s!==(s=e[32].message+"")&&(i.innerHTML=s),e[32].action||!e[32].hideDismiss?m?m.p(e,P):(m=Fr(e),m.c(),m.m(r,null)):m&&(m.d(1),m=null),(!y||P[0]&194&&a!==(a="toast "+e[7]+" "+(e[32].background??e[1])+" "+(e[32].classes??"")))&&x(r,"class",a),(!y||P[0]&64&&d!==(d=e[32].hideDismiss?"alert":"alertdialog"))&&x(n,"role",d)},r(){f=n.getBoundingClientRect()},f(){gs(n),h(),gi(n,f)},a(){h(),h=ms(n,f,js,{duration:e[0]})},i(w){y||(je(()=>{y&&(u&&u.end(1),c=ws(n,e[14],{key:e[32].id}),c.start())}),y=!0)},o(w){c&&c.invalidate(),u=ks(n,e[13],{key:e[32].id}),y=!1},d(w){w&&V(n),m&&m.d(),w&&u&&u.end(),g=!1,fe(b)}}}function Qs(t){let e,n,r=t[5].length&&Nr(t);return{c(){r&&r.c(),e=as()},m(i,s){r&&r.m(i,s),Q(i,e,s),n=!0},p(i,s){i[5].length?r?(r.p(i,s),s[0]&32&&U(r,1)):(r=Nr(i),r.c(),U(r,1),r.m(e.parentNode,e)):r&&(dr(),X(r,1,1,()=>{r=null}),hr())},i(i){n||(U(r),n=!0)},o(i){X(r),n=!1},d(i){i&&V(e),r&&r.d(i)}}}const Xs="flex fixed top-0 left-0 right-0 bottom-0 pointer-events-none",Js="flex flex-col gap-y-2",Zs="flex justify-between items-center pointer-events-auto",$s="flex items-center space-x-2";function eo(t,e,n){let r,i,s,o,a;ui(t,Te,O=>n(5,a=O));let{position:l="b"}=e,{max:d=3}=e,{duration:c=250}=e,{background:u="variant-filled-secondary"}=e,{width:f="max-w-[640px]"}=e,{color:h=""}=e,{padding:y="p-4"}=e,{spacing:g="space-x-4"}=e,{rounded:b="rounded-container-token"}=e,{shadow:m="shadow-lg"}=e,{zIndex:p="z-[888]"}=e,{buttonAction:v="btn variant-filled"}=e,{buttonDismiss:w="btn-icon btn-icon-sm variant-filled"}=e,{buttonDismissLabel:P="✕"}=e,E,_,S={x:0,y:0};switch(l){case"t":E="justify-center items-start",_="items-center",S={x:0,y:-100};break;case"b":E="justify-center items-end",_="items-center",S={x:0,y:100};break;case"l":E="justify-start items-center",_="items-start",S={x:-100,y:0};break;case"r":E="justify-end items-center",_="items-end",S={x:100,y:0};break;case"tl":E="justify-start items-start",_="items-start",S={x:-100,y:0};break;case"tr":E="justify-end items-start",_="items-end",S={x:100,y:0};break;case"bl":E="justify-start items-end",_="items-start",S={x:-100,y:0};break;case"br":E="justify-end items-end",_="items-end",S={x:100,y:0};break}function k(O){var H,de;(de=(H=a[O])==null?void 0:H.action)==null||de.response(),Te.close(a[O].id)}function j(O){var H;(H=a[O])!=null&&H.hoverable&&(Te.freeze(O),n(8,i+=" scale-[105%]"))}function B(O){var H;(H=a[O])!=null&&H.hoverable&&(Te.unfreeze(O),n(8,i=i.replace(" scale-[105%]","")))}const[F,q]=Ds({duration:O=>Math.sqrt(O*c),fallback(O){const H=getComputedStyle(O),de=H.transform==="none"?"":H.transform;return{duration:c,easing:Ks,css:(D,vn)=>`
					transform: ${de} scale(${D}) translate(${vn*S.x}%, ${vn*S.y}%);
					opacity: ${D}
				`}}}),M=O=>k(O),le=O=>Te.close(O.id),ue=O=>j(O),A=O=>B(O);return t.$$set=O=>{n(31,e=oe(oe({},e),De(O))),"position"in O&&n(15,l=O.position),"max"in O&&n(16,d=O.max),"duration"in O&&n(0,c=O.duration),"background"in O&&n(1,u=O.background),"width"in O&&n(17,f=O.width),"color"in O&&n(18,h=O.color),"padding"in O&&n(19,y=O.padding),"spacing"in O&&n(20,g=O.spacing),"rounded"in O&&n(21,b=O.rounded),"shadow"in O&&n(22,m=O.shadow),"zIndex"in O&&n(23,p=O.zIndex),"buttonAction"in O&&n(2,v=O.buttonAction),"buttonDismiss"in O&&n(3,w=O.buttonDismiss),"buttonDismissLabel"in O&&n(4,P=O.buttonDismissLabel)},t.$$.update=()=>{n(9,r=`${Xs} ${E} ${p} ${e.class||""}`),t.$$.dirty[0]&34078720&&n(8,i=`${Js} ${_} ${y}`),t.$$.dirty[0]&8257536&&n(7,s=`${Zs} ${f} ${h} ${y} ${g} ${b} ${m}`),t.$$.dirty[0]&65568&&n(6,o=Array.from(a).slice(0,d))},e=De(e),[c,u,v,w,P,a,o,s,i,r,k,j,B,F,q,l,d,f,h,y,g,b,m,p,E,_,M,le,ue,A]}class to extends Ne{constructor(e){super(),Me(this,e,eo,Qs,Ce,{position:15,max:16,duration:0,background:1,width:17,color:18,padding:19,spacing:20,rounded:21,shadow:22,zIndex:23,buttonAction:2,buttonDismiss:3,buttonDismissLabel:4},null,[-1,-1])}}function Wr(t,e,n){const r=t.slice();return r[7]=e[n],r[9]=n,r}function Ur(t,e){let n,r,i,s,o,a=e[7]+"",l,d;return{key:t,first:null,c(){n=R("span"),r=R("span"),i=Se("?"),o=Z(),l=Se(a),d=Z(),x(r,"class",s=`${e[3]} ${e[6][e[9]]}`),re(r,"translate-y-full",e[5]),re(r,"h-full",e[4]),re(r,"hidden",!e[4]),x(n,"class",e[2]),this.first=n},m(c,u){Q(c,n,u),I(n,r),I(r,i),I(n,o),I(n,l),I(n,d)},p(c,u){e=c,u&9&&s!==(s=`${e[3]} ${e[6][e[9]]}`)&&x(r,"class",s),u&41&&re(r,"translate-y-full",e[5]),u&25&&re(r,"h-full",e[4]),u&25&&re(r,"hidden",!e[4]),u&1&&a!==(a=e[7]+"")&&ur(l,a),u&4&&x(n,"class",e[2])},d(c){c&&V(n)}}}function no(t){let e,n=[],r=new Map,i=sn(t[0]);const s=o=>o[7];for(let o=0;o<i.length;o+=1){let a=Wr(t,i,o),l=s(a);r.set(l,n[o]=Ur(l,a))}return{c(){e=R("div");for(let o=0;o<n.length;o+=1)n[o].c();x(e,"class",t[1])},m(o,a){Q(o,e,a);for(let l=0;l<n.length;l+=1)n[l]&&n[l].m(e,null)},p(o,[a]){a&125&&(i=sn(o[0]),n=pi(n,a,s,1,o,i,r,e,Es,Ur,null,Wr)),a&2&&x(e,"class",o[1])},i:J,o:J,d(o){o&&V(e);for(let a=0;a<n.length;a+=1)n[a].d()}}}function ro(t,e,n){let{data:r}=e,{wrapStyles:i}=e,{chipStyles:s}=e,{coverStyles:o}=e,{hide:a=!1}=e,{show:l=!1}=e;const d=["delay-0","delay-75","delay-100","delay-150","delay-200","delay-300","delay-500","delay-700","delay-1000"];return t.$$set=c=>{"data"in c&&n(0,r=c.data),"wrapStyles"in c&&n(1,i=c.wrapStyles),"chipStyles"in c&&n(2,s=c.chipStyles),"coverStyles"in c&&n(3,o=c.coverStyles),"hide"in c&&n(4,a=c.hide),"show"in c&&n(5,l=c.show)},[r,i,s,o,a,l,d]}class Vr extends Ne{constructor(e){super(),Me(this,e,ro,no,Ce,{data:0,wrapStyles:1,chipStyles:2,coverStyles:3,hide:4,show:5})}}function io(t){let e,n,r,i,s,o,a,l;function d(u){t[1](u)}let c={name:"slide",class:"bg-slate-500 hover:brightness-95 focus:brightness-95 align-middle mx-2 ",active:"bg-pink-500",size:"sm"};return t[0]!==void 0&&(c.checked=t[0]),i=new Gs({props:c}),Ve.push(()=>on(i,"checked",d)),{c(){e=R("div"),n=R("span"),n.textContent="hide",r=Z(),we(i.$$.fragment),o=Z(),a=R("span"),a.textContent="show",x(n,"class","chip bg-slate-500 text-white cursor-default !filter-none"),re(n,"bg-opacity-50",t[0]),x(a,"class","chip bg-pink-500 text-white cursor-default !filter-none"),re(a,"bg-opacity-50",!t[0])},m(u,f){Q(u,e,f),I(e,n),I(e,r),ge(i,e,null),I(e,o),I(e,a),l=!0},p(u,[f]){(!l||f&1)&&re(n,"bg-opacity-50",u[0]);const h={};!s&&f&1&&(s=!0,h.checked=u[0],rn(()=>s=!1)),i.$set(h),(!l||f&1)&&re(a,"bg-opacity-50",!u[0])},i(u){l||(U(i.$$.fragment,u),l=!0)},o(u){X(i.$$.fragment,u),l=!1},d(u){u&&V(e),ye(i)}}}function so(t,e,n){let{showPracticeTarget:r}=e;function i(s){r=s,n(0,r)}return t.$$set=s=>{"showPracticeTarget"in s&&n(0,r=s.showPracticeTarget)},[r,i]}class oo extends Ne{constructor(e){super(),Me(this,e,so,io,Ce,{showPracticeTarget:0})}}const St=new Map,Vt=gr(),ao=async()=>{const t=await St.get("getDictionaryDataAsArray")(),e=t[Math.floor(Math.random()*t.length)];Vt.set({practiceTarget:Math.random()>=.5?"original":"translation",result:null,...e})},_i=2,lo=async t=>{const e=t.practiceCount+1,n=t.successfulPracticeCount*100/e,r=Number(n.toFixed(_i)),i={...t,practiceCount:e,learnSuccess:r};return await St.get("updateWord")(i),i},uo=async t=>{const e=t.practiceCount+1,n=t.successfulPracticeCount+1,r=n*100/e,i=Number(r.toFixed(_i)),s={...t,practiceCount:e,successfulPracticeCount:n,learnSuccess:i};return await St.get("updateWord")(s),s},co=t=>{window.electron.ipcRenderer.send("passivePracticeWinErr",t)};let wi,Dn;const fo=t=>{const{practiceTarget:e,result:n,...r}=t;Dn=r,wi=n,window.electron.ipcRenderer.send("passivePracticeResult",n,r)};window.electron.ipcRenderer.on("updateDBPracticeResult",async()=>{const t=await(wi?uo(Dn):lo(Dn));window.electron.ipcRenderer.send("updateDBPracticeResult",t)});function Yr(t){let e,n,r=t[1].description+"",i;return{c(){e=R("div"),n=R("div"),i=Se(r),x(n,"class","p-2 h-full max-h-28 overflow-auto bg-sky-300 rounded-md"),x(e,"class","p-2 break-all whitespace-normal max-h-28 overflow-y-auto bg-sky-300 bg-opacity-50 rounded-md")},m(s,o){Q(s,e,o),I(e,n),I(n,i)},p(s,o){o&2&&r!==(r=s[1].description+"")&&ur(i,r)},d(s){s&&V(e)}}}function ho(t){let e;return{c(){e=Se("success")},m(n,r){Q(n,e,r)},d(n){n&&V(e)}}}function mo(t){let e;return{c(){e=Se("fail")},m(n,r){Q(n,e,r)},d(n){n&&V(e)}}}function go(t){let e,n,r,i,s,o;function a(u){t[3](u)}let l={name:"curTaskResult",rounded:"rounded-md",class:"border-b-2 border-slate-400  text-slate-400 transition-all hover:text-white hover:bg-slate-400 hover:bg-opacity-40 focus:bg-slate-400 focus:text-white",fill:"!bg-slate-500 !text-white",value:!0,$$slots:{default:[ho]},$$scope:{ctx:t}};t[1].result!==void 0&&(l.group=t[1].result),e=new Ir({props:l}),Ve.push(()=>on(e,"group",a));function d(u){t[4](u)}let c={name:"curTaskResult",rounded:"rounded-md",class:"border-b-2 border-slate-400  text-slate-400 transition-all hover:text-white hover:bg-slate-400 hover:bg-opacity-40 focus:bg-slate-400 focus:text-white",fill:"!bg-slate-500 !text-white",value:!1,$$slots:{default:[mo]},$$scope:{ctx:t}};return t[1].result!==void 0&&(c.group=t[1].result),i=new Ir({props:c}),Ve.push(()=>on(i,"group",d)),{c(){we(e.$$.fragment),r=Z(),we(i.$$.fragment)},m(u,f){ge(e,u,f),Q(u,r,f),ge(i,u,f),o=!0},p(u,f){const h={};f&64&&(h.$$scope={dirty:f,ctx:u}),!n&&f&2&&(n=!0,h.group=u[1].result,rn(()=>n=!1)),e.$set(h);const y={};f&64&&(y.$$scope={dirty:f,ctx:u}),!s&&f&2&&(s=!0,y.group=u[1].result,rn(()=>s=!1)),i.$set(y)},i(u){o||(U(e.$$.fragment,u),U(i.$$.fragment,u),o=!0)},o(u){X(e.$$.fragment,u),X(i.$$.fragment,u),o=!1},d(u){u&&V(r),ye(e,u),ye(i,u)}}}function yo(t){let e,n,r,i,s,o,a,l,d,c,u,f,h,y,g,b,m,p,v,w;n=new Vr({props:{show:t[0],coverStyles:"absolute bg-orange-400 w-full transition-all rounded-md font-bold text-orange-800 flex justify-center items-center",hide:t[1].practiceTarget==="original",data:t[1].variants,wrapStyles:"overflow-y-auto flex flex-wrap gap-2 p-2 max-h-28 bg-orange-300 bg-opacity-50 rounded-md",chipStyles:"overflow-hidden relative chip text-orange-800 bg-orange-300 hover:filter-none hover:bg-orange-400 grow break-all whitespace-normal cursor-default"}});function P(S){t[2](S)}let E={};t[0]!==void 0&&(E.showPracticeTarget=t[0]),i=new oo({props:E}),Ve.push(()=>on(i,"showPracticeTarget",P)),a=new Vr({props:{show:t[0],coverStyles:"absolute bg-green-400 w-full transition-all rounded-md font-bold text-green-800 flex justify-center items-center",hide:t[1].practiceTarget==="translation",data:t[1].translations,wrapStyles:"flex flex-wrap gap-2 p-2 max-h-28 overflow-y-auto bg-green-300 bg-opacity-50 rounded-md",chipStyles:"overflow-hidden relative chip text-green-800 bg-green-300 hover:filter-none hover:bg-green-400 grow break-all whitespace-normal cursor-default"}});let _=t[1].description&&Yr(t);return u=new Ms({props:{border:"border-none",class:"gap-2",$$slots:{default:[go]},$$scope:{ctx:t}}}),{c(){e=R("div"),we(n.$$.fragment),r=Z(),we(i.$$.fragment),o=Z(),we(a.$$.fragment),l=Z(),_&&_.c(),d=Z(),c=R("div"),we(u.$$.fragment),f=Z(),h=R("div"),y=R("button"),g=Se("Confirm"),y.disabled=b=t[1].result===null,x(y,"class","btn mr-2 text-white bg-zinc-500 border-b-2 rounded-md hover:filter-none hover:bg-zinc-400 focus:bg-zinc-400"),x(e,"class","flex flex-col justify-center items-center gap-[3vh] h-full w-full p-2 absolute")},m(S,k){Q(S,e,k),ge(n,e,null),I(e,r),ge(i,e,null),I(e,o),ge(a,e,null),I(e,l),_&&_.m(e,null),I(e,d),I(e,c),ge(u,c,null),I(e,f),I(e,h),I(h,y),I(y,g),p=!0,v||(w=W(y,"click",t[5]),v=!0)},p(S,[k]){const j={};k&1&&(j.show=S[0]),k&2&&(j.hide=S[1].practiceTarget==="original"),k&2&&(j.data=S[1].variants),n.$set(j);const B={};!s&&k&1&&(s=!0,B.showPracticeTarget=S[0],rn(()=>s=!1)),i.$set(B);const F={};k&1&&(F.show=S[0]),k&2&&(F.hide=S[1].practiceTarget==="translation"),k&2&&(F.data=S[1].translations),a.$set(F),S[1].description?_?_.p(S,k):(_=Yr(S),_.c(),_.m(e,d)):_&&(_.d(1),_=null);const q={};k&66&&(q.$$scope={dirty:k,ctx:S}),u.$set(q),(!p||k&2&&b!==(b=S[1].result===null))&&(y.disabled=b)},i(S){p||(U(n.$$.fragment,S),U(i.$$.fragment,S),U(a.$$.fragment,S),U(u.$$.fragment,S),S&&je(()=>{p&&(m||(m=Kr(e,Br,{},!0)),m.run(1))}),p=!0)},o(S){X(n.$$.fragment,S),X(i.$$.fragment,S),X(a.$$.fragment,S),X(u.$$.fragment,S),S&&(m||(m=Kr(e,Br,{},!1)),m.run(0)),p=!1},d(S){S&&V(e),ye(n),ye(i),ye(a),_&&_.d(),ye(u),S&&m&&m.end(),v=!1,w()}}}function po(t,e,n){let r;ui(t,Vt,d=>n(1,r=d));let i=!1;function s(d){i=d,n(0,i)}function o(d){t.$$.not_equal(r.result,d)&&(r.result=d,Vt.set(r))}function a(d){t.$$.not_equal(r.result,d)&&(r.result=d,Vt.set(r))}return[i,r,s,o,a,()=>fo(r)]}class bo extends Ne{constructor(e){super(),Me(this,e,po,yo,Ce,{})}}function vo(t){let e,n,r,i;return e=new to({}),r=new bo({}),{c(){we(e.$$.fragment),n=Z(),we(r.$$.fragment)},m(s,o){ge(e,s,o),Q(s,n,o),ge(r,s,o),i=!0},p:J,i(s){i||(U(e.$$.fragment,s),U(r.$$.fragment,s),i=!0)},o(s){X(e.$$.fragment,s),X(r.$$.fragment,s),i=!1},d(s){s&&V(n),ye(e,s),ye(r,s)}}}class _o extends Ne{constructor(e){super(),Me(this,e,null,vo,Ce,{})}}const ki="bg-red-400 text-white cursor-default !rounded-md",Hr=async(t,e)=>{try{return await t(...e)}catch(n){Te.trigger({message:n.message||String(n),background:ki})}},Gr=t=>{Te.trigger({message:`Global app error: ${t}`,background:ki}),co(t)},wo=()=>{window.onerror=Gr,window.onunhandledrejection=Gr},L=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Y=Object.keys,ee=Array.isArray;function ne(t,e){return typeof e!="object"||Y(e).forEach(function(n){t[n]=e[n]}),t}typeof Promise>"u"||L.Promise||(L.Promise=Promise);const xt=Object.getPrototypeOf,ko={}.hasOwnProperty;function ae(t,e){return ko.call(t,e)}function ut(t,e){typeof e=="function"&&(e=e(xt(t))),(typeof Reflect>"u"?Y:Reflect.ownKeys)(e).forEach(n=>{Ee(t,n,e[n])})}const Ei=Object.defineProperty;function Ee(t,e,n,r){Ei(t,e,ne(n&&ae(n,"get")&&typeof n.get=="function"?{get:n.get,set:n.set,configurable:!0}:{value:n,configurable:!0,writable:!0},r))}function ot(t){return{from:function(e){return t.prototype=Object.create(e.prototype),Ee(t.prototype,"constructor",t),{extend:ut.bind(null,t.prototype)}}}}const Eo=Object.getOwnPropertyDescriptor;function pr(t,e){let n;return Eo(t,e)||(n=xt(t))&&pr(n,e)}const Po=[].slice;function an(t,e,n){return Po.call(t,e,n)}function Pi(t,e){return e(t)}function mt(t){if(!t)throw new Error("Assertion Failed")}function Si(t){L.setImmediate?setImmediate(t):setTimeout(t,0)}function xi(t,e){return t.reduce((n,r,i)=>{var s=e(r,i);return s&&(n[s[0]]=s[1]),n},{})}function Pe(t,e){if(ae(t,e))return t[e];if(!e)return t;if(typeof e!="string"){for(var n=[],r=0,i=e.length;r<i;++r){var s=Pe(t,e[r]);n.push(s)}return n}var o=e.indexOf(".");if(o!==-1){var a=t[e.substr(0,o)];return a===void 0?void 0:Pe(a,e.substr(o+1))}}function ce(t,e,n){if(t&&e!==void 0&&(!("isFrozen"in Object)||!Object.isFrozen(t)))if(typeof e!="string"&&"length"in e){mt(typeof n!="string"&&"length"in n);for(var r=0,i=e.length;r<i;++r)ce(t,e[r],n[r])}else{var s=e.indexOf(".");if(s!==-1){var o=e.substr(0,s),a=e.substr(s+1);if(a==="")n===void 0?ee(t)&&!isNaN(parseInt(o))?t.splice(o,1):delete t[o]:t[o]=n;else{var l=t[o];l&&ae(t,o)||(l=t[o]={}),ce(l,a,n)}}else n===void 0?ee(t)&&!isNaN(parseInt(e))?t.splice(e,1):delete t[e]:t[e]=n}}function Ci(t){var e={};for(var n in t)ae(t,n)&&(e[n]=t[n]);return e}const So=[].concat;function Oi(t){return So.apply([],t)}const Ai="Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(Oi([8,16,32,64].map(t=>["Int","Uint","Float"].map(e=>e+t+"Array")))).filter(t=>L[t]),xo=Ai.map(t=>L[t]);xi(Ai,t=>[t,!0]);let Ae=null;function Bt(t){Ae=typeof WeakMap<"u"&&new WeakMap;const e=jn(t);return Ae=null,e}function jn(t){if(!t||typeof t!="object")return t;let e=Ae&&Ae.get(t);if(e)return e;if(ee(t)){e=[],Ae&&Ae.set(t,e);for(var n=0,r=t.length;n<r;++n)e.push(jn(t[n]))}else if(xo.indexOf(t.constructor)>=0)e=t;else{const s=xt(t);for(var i in e=s===Object.prototype?{}:Object.create(s),Ae&&Ae.set(t,e),t)ae(t,i)&&(e[i]=jn(t[i]))}return e}const{toString:Co}={};function Bn(t){return Co.call(t).slice(8,-1)}const In=typeof Symbol<"u"?Symbol.iterator:"@@iterator",Oo=typeof In=="symbol"?function(t){var e;return t!=null&&(e=t[In])&&e.apply(t)}:function(){return null},rt={};function _e(t){var e,n,r,i;if(arguments.length===1){if(ee(t))return t.slice();if(this===rt&&typeof t=="string")return[t];if(i=Oo(t)){for(n=[];!(r=i.next()).done;)n.push(r.value);return n}if(t==null)return[t];if(typeof(e=t.length)=="number"){for(n=new Array(e);e--;)n[e]=t[e];return n}return[t]}for(e=arguments.length,n=new Array(e);e--;)n[e]=arguments[e];return n}const br=typeof Symbol<"u"?t=>t[Symbol.toStringTag]==="AsyncFunction":()=>!1;var pe=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function Ti(t,e){pe=t,Ki=e}var Ki=()=>!0;const Ao=!new Error("").stack;function Qe(){if(Ao)try{throw Qe.arguments,new Error}catch(t){return t}return new Error}function Rn(t,e){var n=t.stack;return n?(e=e||0,n.indexOf(t.name)===0&&(e+=(t.name+t.message).split(`
`).length),n.split(`
`).slice(e).filter(Ki).map(r=>`
`+r).join("")):""}var Di=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],vr=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(Di),To={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function at(t,e){this._e=Qe(),this.name=t,this.message=e}function ji(t,e){return t+". Errors: "+Object.keys(e).map(n=>e[n].toString()).filter((n,r,i)=>i.indexOf(n)===r).join(`
`)}function ln(t,e,n,r){this._e=Qe(),this.failures=e,this.failedKeys=r,this.successCount=n,this.message=ji(t,e)}function pt(t,e){this._e=Qe(),this.name="BulkError",this.failures=Object.keys(e).map(n=>e[n]),this.failuresByPos=e,this.message=ji(t,e)}ot(at).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+Rn(this._e,2))}},toString:function(){return this.name+": "+this.message}}),ot(ln).from(at),ot(pt).from(at);var _r=vr.reduce((t,e)=>(t[e]=e+"Error",t),{});const Ko=at;var K=vr.reduce((t,e)=>{var n=e+"Error";function r(i,s){this._e=Qe(),this.name=n,i?typeof i=="string"?(this.message=`${i}${s?`
 `+s:""}`,this.inner=s||null):typeof i=="object"&&(this.message=`${i.name} ${i.message}`,this.inner=i):(this.message=To[e]||n,this.inner=null)}return ot(r).from(Ko),t[e]=r,t},{});K.Syntax=SyntaxError,K.Type=TypeError,K.Range=RangeError;var Qr=Di.reduce((t,e)=>(t[e+"Error"]=K[e],t),{}),Yt=vr.reduce((t,e)=>(["Syntax","Type","Range"].indexOf(e)===-1&&(t[e+"Error"]=K[e]),t),{});function N(){}function Ct(t){return t}function Do(t,e){return t==null||t===Ct?e:function(n){return e(t(n))}}function Ye(t,e){return function(){t.apply(this,arguments),e.apply(this,arguments)}}function jo(t,e){return t===N?e:function(){var n=t.apply(this,arguments);n!==void 0&&(arguments[0]=n);var r=this.onsuccess,i=this.onerror;this.onsuccess=null,this.onerror=null;var s=e.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?Ye(r,this.onsuccess):r),i&&(this.onerror=this.onerror?Ye(i,this.onerror):i),s!==void 0?s:n}}function Bo(t,e){return t===N?e:function(){t.apply(this,arguments);var n=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null,e.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?Ye(n,this.onsuccess):n),r&&(this.onerror=this.onerror?Ye(r,this.onerror):r)}}function Io(t,e){return t===N?e:function(n){var r=t.apply(this,arguments);ne(n,r);var i=this.onsuccess,s=this.onerror;this.onsuccess=null,this.onerror=null;var o=e.apply(this,arguments);return i&&(this.onsuccess=this.onsuccess?Ye(i,this.onsuccess):i),s&&(this.onerror=this.onerror?Ye(s,this.onerror):s),r===void 0?o===void 0?void 0:o:ne(r,o)}}function Ro(t,e){return t===N?e:function(){return e.apply(this,arguments)!==!1&&t.apply(this,arguments)}}function wr(t,e){return t===N?e:function(){var n=t.apply(this,arguments);if(n&&typeof n.then=="function"){for(var r=this,i=arguments.length,s=new Array(i);i--;)s[i]=arguments[i];return n.then(function(){return e.apply(r,s)})}return e.apply(this,arguments)}}Yt.ModifyError=ln,Yt.DexieError=at,Yt.BulkError=pt;var Ot={};const Bi=100,[Mn,un,Nn]=typeof Promise>"u"?[]:(()=>{let t=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[t,xt(t),t];const e=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[e,xt(e),t]})(),Ii=un&&un.then,Ht=Mn&&Mn.constructor,kr=!!Nn;var Fn=!1,Mo=Nn?()=>{Nn.then(Mt)}:L.setImmediate?setImmediate.bind(null,Mt):L.MutationObserver?()=>{var t=document.createElement("div");new MutationObserver(()=>{Mt(),t=null}).observe(t,{attributes:!0}),t.setAttribute("i","1")}:()=>{setTimeout(Mt,0)},bt=function(t,e){gt.push([t,e]),cn&&(Mo(),cn=!1)},qn=!0,cn=!0,ze=[],Gt=[],Ln=null,zn=Ct,lt={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:Zr,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach(t=>{try{Zr(t[0],t[1])}catch{}})}},T=lt,gt=[],We=0,Qt=[];function C(t){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this.onuncatched=N,this._lib=!1;var e=this._PSD=T;if(pe&&(this._stackHolder=Qe(),this._prev=null,this._numPrev=0),typeof t!="function"){if(t!==Ot)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&Un(this,this._value))}this._state=null,this._value=null,++e.ref,Mi(this,t)}const Wn={get:function(){var t=T,e=fn;function n(r,i){var s=!t.global&&(t!==T||e!==fn);const o=s&&!xe();var a=new C((l,d)=>{Er(this,new Ri(dn(r,t,s,o),dn(i,t,s,o),l,d,t))});return pe&&qi(a,this),a}return n.prototype=Ot,n},set:function(t){Ee(this,"then",t&&t.prototype===Ot?Wn:{get:function(){return t},set:Wn.set})}};function Ri(t,e,n,r,i){this.onFulfilled=typeof t=="function"?t:null,this.onRejected=typeof e=="function"?e:null,this.resolve=n,this.reject=r,this.psd=i}function Mi(t,e){try{e(n=>{if(t._state===null){if(n===t)throw new TypeError("A promise cannot be resolved with itself.");var r=t._lib&&It();n&&typeof n.then=="function"?Mi(t,(i,s)=>{n instanceof C?n._then(i,s):n.then(i,s)}):(t._state=!0,t._value=n,Ni(t)),r&&Rt()}},Un.bind(null,t))}catch(n){Un(t,n)}}function Un(t,e){if(Gt.push(e),t._state===null){var n=t._lib&&It();e=zn(e),t._state=!1,t._value=e,pe&&e!==null&&typeof e=="object"&&!e._promise&&function(r,i,s){try{r.apply(null,s)}catch(o){i&&i(o)}}(()=>{var r=pr(e,"stack");e._promise=t,Ee(e,"stack",{get:()=>Fn?r&&(r.get?r.get.apply(e):r.value):t.stack})}),function(r){ze.some(i=>i._value===r._value)||ze.push(r)}(t),Ni(t),n&&Rt()}}function Ni(t){var e=t._listeners;t._listeners=[];for(var n=0,r=e.length;n<r;++n)Er(t,e[n]);var i=t._PSD;--i.ref||i.finalize(),We===0&&(++We,bt(()=>{--We==0&&Pr()},[]))}function Er(t,e){if(t._state!==null){var n=t._state?e.onFulfilled:e.onRejected;if(n===null)return(t._state?e.resolve:e.reject)(t._value);++e.psd.ref,++We,bt(No,[n,t,e])}else t._listeners.push(e)}function No(t,e,n){try{Ln=e;var r,i=e._value;e._state?r=t(i):(Gt.length&&(Gt=[]),r=t(i),Gt.indexOf(i)===-1&&function(s){for(var o=ze.length;o;)if(ze[--o]._value===s._value)return void ze.splice(o,1)}(e)),n.resolve(r)}catch(s){n.reject(s)}finally{Ln=null,--We==0&&Pr(),--n.psd.ref||n.psd.finalize()}}function Fi(t,e,n){if(e.length===n)return e;var r="";if(t._state===!1){var i,s,o=t._value;o!=null?(i=o.name||"Error",s=o.message||o,r=Rn(o,0)):(i=o,s=""),e.push(i+(s?": "+s:"")+r)}return pe&&((r=Rn(t._stackHolder,2))&&e.indexOf(r)===-1&&e.push(r),t._prev&&Fi(t._prev,e,n)),e}function qi(t,e){var n=e?e._numPrev+1:0;n<100&&(t._prev=e,t._numPrev=n)}function Mt(){It()&&Rt()}function It(){var t=qn;return qn=!1,cn=!1,t}function Rt(){var t,e,n;do for(;gt.length>0;)for(t=gt,gt=[],n=t.length,e=0;e<n;++e){var r=t[e];r[0].apply(null,r[1])}while(gt.length>0);qn=!0,cn=!0}function Pr(){var t=ze;ze=[],t.forEach(r=>{r._PSD.onunhandled.call(null,r._value,r)});for(var e=Qt.slice(0),n=e.length;n;)e[--n]()}function Nt(t){return new C(Ot,!1,t)}function z(t,e){var n=T;return function(){var r=It(),i=T;try{return Ie(n,!0),t.apply(this,arguments)}catch(s){e&&e(s)}finally{Ie(i,!1),r&&Rt()}}}ut(C.prototype,{then:Wn,_then:function(t,e){Er(this,new Ri(null,null,t,e,T))},catch:function(t){if(arguments.length===1)return this.then(null,t);var e=arguments[0],n=arguments[1];return typeof e=="function"?this.then(null,r=>r instanceof e?n(r):Nt(r)):this.then(null,r=>r&&r.name===e?n(r):Nt(r))},finally:function(t){return this.then(e=>(t(),e),e=>(t(),Nt(e)))},stack:{get:function(){if(this._stack)return this._stack;try{Fn=!0;var t=Fi(this,[],20).join(`
From previous: `);return this._state!==null&&(this._stack=t),t}finally{Fn=!1}}},timeout:function(t,e){return t<1/0?new C((n,r)=>{var i=setTimeout(()=>r(new K.Timeout(e)),t);this.then(n,r).finally(clearTimeout.bind(null,i))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&Ee(C.prototype,Symbol.toStringTag,"Dexie.Promise"),lt.env=Li(),ut(C,{all:function(){var t=_e.apply(null,arguments).map(Ft);return new C(function(e,n){t.length===0&&e([]);var r=t.length;t.forEach((i,s)=>C.resolve(i).then(o=>{t[s]=o,--r||e(t)},n))})},resolve:t=>{if(t instanceof C)return t;if(t&&typeof t.then=="function")return new C((n,r)=>{t.then(n,r)});var e=new C(Ot,!0,t);return qi(e,Ln),e},reject:Nt,race:function(){var t=_e.apply(null,arguments).map(Ft);return new C((e,n)=>{t.map(r=>C.resolve(r).then(e,n))})},PSD:{get:()=>T,set:t=>T=t},totalEchoes:{get:()=>fn},newPSD:Be,usePSD:ft,scheduler:{get:()=>bt,set:t=>{bt=t}},rejectionMapper:{get:()=>zn,set:t=>{zn=t}},follow:(t,e)=>new C((n,r)=>Be((i,s)=>{var o=T;o.unhandleds=[],o.onunhandled=s,o.finalize=Ye(function(){(function(a){function l(){a(),Qt.splice(Qt.indexOf(l),1)}Qt.push(l),++We,bt(()=>{--We==0&&Pr()},[])})(()=>{this.unhandleds.length===0?i():s(this.unhandleds[0])})},o.finalize),t()},e,n,r))}),Ht&&(Ht.allSettled&&Ee(C,"allSettled",function(){const t=_e.apply(null,arguments).map(Ft);return new C(e=>{t.length===0&&e([]);let n=t.length;const r=new Array(n);t.forEach((i,s)=>C.resolve(i).then(o=>r[s]={status:"fulfilled",value:o},o=>r[s]={status:"rejected",reason:o}).then(()=>--n||e(r)))})}),Ht.any&&typeof AggregateError<"u"&&Ee(C,"any",function(){const t=_e.apply(null,arguments).map(Ft);return new C((e,n)=>{t.length===0&&n(new AggregateError([]));let r=t.length;const i=new Array(r);t.forEach((s,o)=>C.resolve(s).then(a=>e(a),a=>{i[o]=a,--r||n(new AggregateError(i))}))})}));const $={awaits:0,echoes:0,id:0};var Fo=0,Xt=[],En=0,fn=0,qo=0;function Be(t,e,n,r){var i=T,s=Object.create(i);s.parent=i,s.ref=0,s.global=!1,s.id=++qo;var o=lt.env;s.env=kr?{Promise:C,PromiseProp:{value:C,configurable:!0,writable:!0},all:C.all,race:C.race,allSettled:C.allSettled,any:C.any,resolve:C.resolve,reject:C.reject,nthen:Xr(o.nthen,s),gthen:Xr(o.gthen,s)}:{},e&&ne(s,e),++i.ref,s.finalize=function(){--this.parent.ref||this.parent.finalize()};var a=ft(s,t,n,r);return s.ref===0&&s.finalize(),a}function ct(){return $.id||($.id=++Fo),++$.awaits,$.echoes+=Bi,$.id}function xe(){return!!$.awaits&&(--$.awaits==0&&($.id=0),$.echoes=$.awaits*Bi,!0)}function Ft(t){return $.echoes&&t&&t.constructor===Ht?(ct(),t.then(e=>(xe(),e),e=>(xe(),G(e)))):t}function Lo(t){++fn,$.echoes&&--$.echoes!=0||($.echoes=$.id=0),Xt.push(T),Ie(t,!0)}function zo(){var t=Xt[Xt.length-1];Xt.pop(),Ie(t,!1)}function Ie(t,e){var n=T;if((e?!$.echoes||En++&&t===T:!En||--En&&t===T)||zi(e?Lo.bind(null,t):zo),t!==T&&(T=t,n===lt&&(lt.env=Li()),kr)){var r=lt.env.Promise,i=t.env;un.then=i.nthen,r.prototype.then=i.gthen,(n.global||t.global)&&(Object.defineProperty(L,"Promise",i.PromiseProp),r.all=i.all,r.race=i.race,r.resolve=i.resolve,r.reject=i.reject,i.allSettled&&(r.allSettled=i.allSettled),i.any&&(r.any=i.any))}}function Li(){var t=L.Promise;return kr?{Promise:t,PromiseProp:Object.getOwnPropertyDescriptor(L,"Promise"),all:t.all,race:t.race,allSettled:t.allSettled,any:t.any,resolve:t.resolve,reject:t.reject,nthen:un.then,gthen:t.prototype.then}:{}}function ft(t,e,n,r,i){var s=T;try{return Ie(t,!0),e(n,r,i)}finally{Ie(s,!1)}}function zi(t){Ii.call(Mn,t)}function dn(t,e,n,r){return typeof t!="function"?t:function(){var i=T;n&&ct(),Ie(e,!0);try{return t.apply(this,arguments)}finally{Ie(i,!1),r&&zi(xe)}}}function Xr(t,e){return function(n,r){return t.call(this,dn(n,e),dn(r,e))}}(""+Ii).indexOf("[native code]")===-1&&(ct=xe=N);const Jr="unhandledrejection";function Zr(t,e){var n;try{n=e.onuncatched(t)}catch{}if(n!==!1)try{var r,i={promise:e,reason:t};if(L.document&&document.createEvent?((r=document.createEvent("Event")).initEvent(Jr,!0,!0),ne(r,i)):L.CustomEvent&&ne(r=new CustomEvent(Jr,{detail:i}),i),r&&L.dispatchEvent&&(dispatchEvent(r),!L.PromiseRejectionEvent&&L.onunhandledrejection))try{L.onunhandledrejection(r)}catch{}pe&&r&&!r.defaultPrevented&&console.warn(`Unhandled rejection: ${t.stack||t}`)}catch{}}var G=C.reject;function Vn(t,e,n,r){if(t.idbdb&&(t._state.openComplete||T.letThrough||t._vip)){var i=t._createTransaction(e,n,t._dbSchema);try{i.create(),t._state.PR1398_maxLoop=3}catch(s){return s.name===_r.InvalidState&&t.isOpen()&&--t._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),t._close(),t.open().then(()=>Vn(t,e,n,r))):G(s)}return i._promise(e,(s,o)=>Be(()=>(T.trans=i,r(s,o,i)))).then(s=>i._completion.then(()=>s))}if(t._state.openComplete)return G(new K.DatabaseClosed(t._state.dbOpenError));if(!t._state.isBeingOpened){if(!t._options.autoOpen)return G(new K.DatabaseClosed);t.open().catch(N)}return t._state.dbReadyPromise.then(()=>Vn(t,e,n,r))}const $r="3.2.4",qe=String.fromCharCode(65535),Yn=-1/0,be="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Wi="String expected.",vt=[],pn=typeof navigator<"u"&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),Wo=pn,Uo=pn,Ui=t=>!/(dexie\.js|dexie\.min\.js)/.test(t),bn="__dbnames",Pn="readonly",Sn="readwrite";function He(t,e){return t?e?function(){return t.apply(this,arguments)&&e.apply(this,arguments)}:t:e}const Vi={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function qt(t){return typeof t!="string"||/\./.test(t)?e=>e:e=>(e[t]===void 0&&t in e&&delete(e=Bt(e))[t],e)}class Vo{_trans(e,n,r){const i=this._tx||T.trans,s=this.name;function o(l,d,c){if(!c.schema[s])throw new K.NotFound("Table "+s+" not part of transaction");return n(c.idbtrans,c)}const a=It();try{return i&&i.db===this.db?i===T.trans?i._promise(e,o,r):Be(()=>i._promise(e,o,r),{trans:i,transless:T.transless||T}):Vn(this.db,e,[this.name],o)}finally{a&&Rt()}}get(e,n){return e&&e.constructor===Object?this.where(e).first(n):this._trans("readonly",r=>this.core.get({trans:r,key:e}).then(i=>this.hook.reading.fire(i))).then(n)}where(e){if(typeof e=="string")return new this.db.WhereClause(this,e);if(ee(e))return new this.db.WhereClause(this,`[${e.join("+")}]`);const n=Y(e);if(n.length===1)return this.where(n[0]).equals(e[n[0]]);const r=this.schema.indexes.concat(this.schema.primKey).filter(d=>d.compound&&n.every(c=>d.keyPath.indexOf(c)>=0)&&d.keyPath.every(c=>n.indexOf(c)>=0))[0];if(r&&this.db._maxKey!==qe)return this.where(r.name).equals(r.keyPath.map(d=>e[d]));!r&&pe&&console.warn(`The query ${JSON.stringify(e)} on ${this.name} would benefit of a compound index [${n.join("+")}]`);const{idxByName:i}=this.schema,s=this.db._deps.indexedDB;function o(d,c){try{return s.cmp(d,c)===0}catch{return!1}}const[a,l]=n.reduce(([d,c],u)=>{const f=i[u],h=e[u];return[d||f,d||!f?He(c,f&&f.multi?y=>{const g=Pe(y,u);return ee(g)&&g.some(b=>o(h,b))}:y=>o(h,Pe(y,u))):c]},[null,null]);return a?this.where(a.name).equals(e[a.keyPath]).filter(l):r?this.filter(l):this.where(n).equals("")}filter(e){return this.toCollection().and(e)}count(e){return this.toCollection().count(e)}offset(e){return this.toCollection().offset(e)}limit(e){return this.toCollection().limit(e)}each(e){return this.toCollection().each(e)}toArray(e){return this.toCollection().toArray(e)}toCollection(){return new this.db.Collection(new this.db.WhereClause(this))}orderBy(e){return new this.db.Collection(new this.db.WhereClause(this,ee(e)?`[${e.join("+")}]`:e))}reverse(){return this.toCollection().reverse()}mapToClass(e){this.schema.mappedClass=e;const n=r=>{if(!r)return r;const i=Object.create(e.prototype);for(var s in r)if(ae(r,s))try{i[s]=r[s]}catch{}return i};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=n,this.hook("reading",n),e}defineClass(){return this.mapToClass(function(e){ne(this,e)})}add(e,n){const{auto:r,keyPath:i}=this.schema.primKey;let s=e;return i&&r&&(s=qt(i)(e)),this._trans("readwrite",o=>this.core.mutate({trans:o,type:"add",keys:n!=null?[n]:null,values:[s]})).then(o=>o.numFailures?C.reject(o.failures[0]):o.lastResult).then(o=>{if(i)try{ce(e,i,o)}catch{}return o})}update(e,n){if(typeof e!="object"||ee(e))return this.where(":id").equals(e).modify(n);{const r=Pe(e,this.schema.primKey.keyPath);if(r===void 0)return G(new K.InvalidArgument("Given object does not contain its primary key"));try{typeof n!="function"?Y(n).forEach(i=>{ce(e,i,n[i])}):n(e,{value:e,primKey:r})}catch{}return this.where(":id").equals(r).modify(n)}}put(e,n){const{auto:r,keyPath:i}=this.schema.primKey;let s=e;return i&&r&&(s=qt(i)(e)),this._trans("readwrite",o=>this.core.mutate({trans:o,type:"put",values:[s],keys:n!=null?[n]:null})).then(o=>o.numFailures?C.reject(o.failures[0]):o.lastResult).then(o=>{if(i)try{ce(e,i,o)}catch{}return o})}delete(e){return this._trans("readwrite",n=>this.core.mutate({trans:n,type:"delete",keys:[e]})).then(n=>n.numFailures?C.reject(n.failures[0]):void 0)}clear(){return this._trans("readwrite",e=>this.core.mutate({trans:e,type:"deleteRange",range:Vi})).then(e=>e.numFailures?C.reject(e.failures[0]):void 0)}bulkGet(e){return this._trans("readonly",n=>this.core.getMany({keys:e,trans:n}).then(r=>r.map(i=>this.hook.reading.fire(i))))}bulkAdd(e,n,r){const i=Array.isArray(n)?n:void 0,s=(r=r||(i?void 0:n))?r.allKeys:void 0;return this._trans("readwrite",o=>{const{auto:a,keyPath:l}=this.schema.primKey;if(l&&i)throw new K.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(i&&i.length!==e.length)throw new K.InvalidArgument("Arguments objects and keys must have the same length");const d=e.length;let c=l&&a?e.map(qt(l)):e;return this.core.mutate({trans:o,type:"add",keys:i,values:c,wantResults:s}).then(({numFailures:u,results:f,lastResult:h,failures:y})=>{if(u===0)return s?f:h;throw new pt(`${this.name}.bulkAdd(): ${u} of ${d} operations failed`,y)})})}bulkPut(e,n,r){const i=Array.isArray(n)?n:void 0,s=(r=r||(i?void 0:n))?r.allKeys:void 0;return this._trans("readwrite",o=>{const{auto:a,keyPath:l}=this.schema.primKey;if(l&&i)throw new K.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(i&&i.length!==e.length)throw new K.InvalidArgument("Arguments objects and keys must have the same length");const d=e.length;let c=l&&a?e.map(qt(l)):e;return this.core.mutate({trans:o,type:"put",keys:i,values:c,wantResults:s}).then(({numFailures:u,results:f,lastResult:h,failures:y})=>{if(u===0)return s?f:h;throw new pt(`${this.name}.bulkPut(): ${u} of ${d} operations failed`,y)})})}bulkDelete(e){const n=e.length;return this._trans("readwrite",r=>this.core.mutate({trans:r,type:"delete",keys:e})).then(({numFailures:r,lastResult:i,failures:s})=>{if(r===0)return i;throw new pt(`${this.name}.bulkDelete(): ${r} of ${n} operations failed`,s)})}}function _t(t){var e={},n=function(o,a){if(a){for(var l=arguments.length,d=new Array(l-1);--l;)d[l-1]=arguments[l];return e[o].subscribe.apply(null,d),t}if(typeof o=="string")return e[o]};n.addEventType=s;for(var r=1,i=arguments.length;r<i;++r)s(arguments[r]);return n;function s(o,a,l){if(typeof o!="object"){var d;a||(a=Ro),l||(l=N);var c={subscribers:[],fire:l,subscribe:function(u){c.subscribers.indexOf(u)===-1&&(c.subscribers.push(u),c.fire=a(c.fire,u))},unsubscribe:function(u){c.subscribers=c.subscribers.filter(function(f){return f!==u}),c.fire=c.subscribers.reduce(a,l)}};return e[o]=n[o]=c,c}Y(d=o).forEach(function(u){var f=d[u];if(ee(f))s(u,d[u][0],d[u][1]);else{if(f!=="asap")throw new K.InvalidArgument("Invalid event config");var h=s(u,Ct,function(){for(var y=arguments.length,g=new Array(y);y--;)g[y]=arguments[y];h.subscribers.forEach(function(b){Si(function(){b.apply(null,g)})})})}})}}function ht(t,e){return ot(e).from({prototype:t}),e}function et(t,e){return!(t.filter||t.algorithm||t.or)&&(e?t.justLimit:!t.replayFilter)}function xn(t,e){t.filter=He(t.filter,e)}function Cn(t,e,n){var r=t.replayFilter;t.replayFilter=r?()=>He(r(),e()):e,t.justLimit=n&&!r}function Jt(t,e){if(t.isPrimKey)return e.primaryKey;const n=e.getIndexByKeyPath(t.index);if(!n)throw new K.Schema("KeyPath "+t.index+" on object store "+e.name+" is not indexed");return n}function ei(t,e,n){const r=Jt(t,e.schema);return e.openCursor({trans:n,values:!t.keysOnly,reverse:t.dir==="prev",unique:!!t.unique,query:{index:r,range:t.range}})}function Lt(t,e,n,r){const i=t.replayFilter?He(t.filter,t.replayFilter()):t.filter;if(t.or){const s={},o=(a,l,d)=>{if(!i||i(l,d,f=>l.stop(f),f=>l.fail(f))){var c=l.primaryKey,u=""+c;u==="[object ArrayBuffer]"&&(u=""+new Uint8Array(c)),ae(s,u)||(s[u]=!0,e(a,l,d))}};return Promise.all([t.or._iterate(o,n),ti(ei(t,r,n),t.algorithm,o,!t.keysOnly&&t.valueMapper)])}return ti(ei(t,r,n),He(t.algorithm,i),e,!t.keysOnly&&t.valueMapper)}function ti(t,e,n,r){var i=z(r?(s,o,a)=>n(r(s),o,a):n);return t.then(s=>{if(s)return s.start(()=>{var o=()=>s.continue();e&&!e(s,a=>o=a,a=>{s.stop(a),o=N},a=>{s.fail(a),o=N})||i(s.value,s,a=>o=a),o()})})}function te(t,e){try{const n=ni(t),r=ni(e);if(n!==r)return n==="Array"?1:r==="Array"?-1:n==="binary"?1:r==="binary"?-1:n==="string"?1:r==="string"?-1:n==="Date"?1:r!=="Date"?NaN:-1;switch(n){case"number":case"Date":case"string":return t>e?1:t<e?-1:0;case"binary":return function(i,s){const o=i.length,a=s.length,l=o<a?o:a;for(let d=0;d<l;++d)if(i[d]!==s[d])return i[d]<s[d]?-1:1;return o===a?0:o<a?-1:1}(ri(t),ri(e));case"Array":return function(i,s){const o=i.length,a=s.length,l=o<a?o:a;for(let d=0;d<l;++d){const c=te(i[d],s[d]);if(c!==0)return c}return o===a?0:o<a?-1:1}(t,e)}}catch{}return NaN}function ni(t){const e=typeof t;if(e!=="object")return e;if(ArrayBuffer.isView(t))return"binary";const n=Bn(t);return n==="ArrayBuffer"?"binary":n}function ri(t){return t instanceof Uint8Array?t:ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):new Uint8Array(t)}class Yo{_read(e,n){var r=this._ctx;return r.error?r.table._trans(null,G.bind(null,r.error)):r.table._trans("readonly",e).then(n)}_write(e){var n=this._ctx;return n.error?n.table._trans(null,G.bind(null,n.error)):n.table._trans("readwrite",e,"locked")}_addAlgorithm(e){var n=this._ctx;n.algorithm=He(n.algorithm,e)}_iterate(e,n){return Lt(this._ctx,e,n,this._ctx.table.core)}clone(e){var n=Object.create(this.constructor.prototype),r=Object.create(this._ctx);return e&&ne(r,e),n._ctx=r,n}raw(){return this._ctx.valueMapper=null,this}each(e){var n=this._ctx;return this._read(r=>Lt(n,e,r,n.table.core))}count(e){return this._read(n=>{const r=this._ctx,i=r.table.core;if(et(r,!0))return i.count({trans:n,query:{index:Jt(r,i.schema),range:r.range}}).then(o=>Math.min(o,r.limit));var s=0;return Lt(r,()=>(++s,!1),n,i).then(()=>s)}).then(e)}sortBy(e,n){const r=e.split(".").reverse(),i=r[0],s=r.length-1;function o(d,c){return c?o(d[r[c]],c-1):d[i]}var a=this._ctx.dir==="next"?1:-1;function l(d,c){var u=o(d,s),f=o(c,s);return u<f?-a:u>f?a:0}return this.toArray(function(d){return d.sort(l)}).then(n)}toArray(e){return this._read(n=>{var r=this._ctx;if(r.dir==="next"&&et(r,!0)&&r.limit>0){const{valueMapper:i}=r,s=Jt(r,r.table.core.schema);return r.table.core.query({trans:n,limit:r.limit,values:!0,query:{index:s,range:r.range}}).then(({result:o})=>i?o.map(i):o)}{const i=[];return Lt(r,s=>i.push(s),n,r.table.core).then(()=>i)}},e)}offset(e){var n=this._ctx;return e<=0||(n.offset+=e,et(n)?Cn(n,()=>{var r=e;return(i,s)=>r===0||(r===1?(--r,!1):(s(()=>{i.advance(r),r=0}),!1))}):Cn(n,()=>{var r=e;return()=>--r<0})),this}limit(e){return this._ctx.limit=Math.min(this._ctx.limit,e),Cn(this._ctx,()=>{var n=e;return function(r,i,s){return--n<=0&&i(s),n>=0}},!0),this}until(e,n){return xn(this._ctx,function(r,i,s){return!e(r.value)||(i(s),n)}),this}first(e){return this.limit(1).toArray(function(n){return n[0]}).then(e)}last(e){return this.reverse().first(e)}filter(e){var n,r;return xn(this._ctx,function(i){return e(i.value)}),n=this._ctx,r=e,n.isMatch=He(n.isMatch,r),this}and(e){return this.filter(e)}or(e){return new this.db.WhereClause(this._ctx.table,e,this)}reverse(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this}desc(){return this.reverse()}eachKey(e){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(r,i){e(i.key,i)})}eachUniqueKey(e){return this._ctx.unique="unique",this.eachKey(e)}eachPrimaryKey(e){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(r,i){e(i.primaryKey,i)})}keys(e){var n=this._ctx;n.keysOnly=!n.isMatch;var r=[];return this.each(function(i,s){r.push(s.key)}).then(function(){return r}).then(e)}primaryKeys(e){var n=this._ctx;if(n.dir==="next"&&et(n,!0)&&n.limit>0)return this._read(i=>{var s=Jt(n,n.table.core.schema);return n.table.core.query({trans:i,values:!1,limit:n.limit,query:{index:s,range:n.range}})}).then(({result:i})=>i).then(e);n.keysOnly=!n.isMatch;var r=[];return this.each(function(i,s){r.push(s.primaryKey)}).then(function(){return r}).then(e)}uniqueKeys(e){return this._ctx.unique="unique",this.keys(e)}firstKey(e){return this.limit(1).keys(function(n){return n[0]}).then(e)}lastKey(e){return this.reverse().firstKey(e)}distinct(){var e=this._ctx,n=e.index&&e.table.schema.idxByName[e.index];if(!n||!n.multi)return this;var r={};return xn(this._ctx,function(i){var s=i.primaryKey.toString(),o=ae(r,s);return r[s]=!0,!o}),this}modify(e){var n=this._ctx;return this._write(r=>{var i;if(typeof e=="function")i=e;else{var s=Y(e),o=s.length;i=function(g){for(var b=!1,m=0;m<o;++m){var p=s[m],v=e[p];Pe(g,p)!==v&&(ce(g,p,v),b=!0)}return b}}const a=n.table.core,{outbound:l,extractKey:d}=a.schema.primaryKey,c=this.db._options.modifyChunkSize||200,u=[];let f=0;const h=[],y=(g,b)=>{const{failures:m,numFailures:p}=b;f+=g-p;for(let v of Y(m))u.push(m[v])};return this.clone().primaryKeys().then(g=>{const b=m=>{const p=Math.min(c,g.length-m);return a.getMany({trans:r,keys:g.slice(m,m+p),cache:"immutable"}).then(v=>{const w=[],P=[],E=l?[]:null,_=[];for(let k=0;k<p;++k){const j=v[k],B={value:Bt(j),primKey:g[m+k]};i.call(B,B.value,B)!==!1&&(B.value==null?_.push(g[m+k]):l||te(d(j),d(B.value))===0?(P.push(B.value),l&&E.push(g[m+k])):(_.push(g[m+k]),w.push(B.value)))}const S=et(n)&&n.limit===1/0&&(typeof e!="function"||e===On)&&{index:n.index,range:n.range};return Promise.resolve(w.length>0&&a.mutate({trans:r,type:"add",values:w}).then(k=>{for(let j in k.failures)_.splice(parseInt(j),1);y(w.length,k)})).then(()=>(P.length>0||S&&typeof e=="object")&&a.mutate({trans:r,type:"put",keys:E,values:P,criteria:S,changeSpec:typeof e!="function"&&e}).then(k=>y(P.length,k))).then(()=>(_.length>0||S&&e===On)&&a.mutate({trans:r,type:"delete",keys:_,criteria:S}).then(k=>y(_.length,k))).then(()=>g.length>m+p&&b(m+c))})};return b(0).then(()=>{if(u.length>0)throw new ln("Error modifying one or more objects",u,f,h);return g.length})})})}delete(){var e=this._ctx,n=e.range;return et(e)&&(e.isPrimKey&&!Uo||n.type===3)?this._write(r=>{const{primaryKey:i}=e.table.core.schema,s=n;return e.table.core.count({trans:r,query:{index:i,range:s}}).then(o=>e.table.core.mutate({trans:r,type:"deleteRange",range:s}).then(({failures:a,lastResult:l,results:d,numFailures:c})=>{if(c)throw new ln("Could not delete some values",Object.keys(a).map(u=>a[u]),o-c);return o-c}))}):this.modify(On)}}const On=(t,e)=>e.value=null;function Ho(t,e){return t<e?-1:t===e?0:1}function Go(t,e){return t>e?-1:t===e?0:1}function ie(t,e,n){var r=t instanceof Hi?new t.Collection(t):t;return r._ctx.error=n?new n(e):new TypeError(e),r}function tt(t){return new t.Collection(t,()=>Yi("")).limit(0)}function Qo(t,e,n,r,i,s){for(var o=Math.min(t.length,r.length),a=-1,l=0;l<o;++l){var d=e[l];if(d!==r[l])return i(t[l],n[l])<0?t.substr(0,l)+n[l]+n.substr(l+1):i(t[l],r[l])<0?t.substr(0,l)+r[l]+n.substr(l+1):a>=0?t.substr(0,a)+e[a]+n.substr(a+1):null;i(t[l],d)<0&&(a=l)}return o<r.length&&s==="next"?t+n.substr(t.length):o<t.length&&s==="prev"?t.substr(0,n.length):a<0?null:t.substr(0,a)+r[a]+n.substr(a+1)}function zt(t,e,n,r){var i,s,o,a,l,d,c,u=n.length;if(!n.every(g=>typeof g=="string"))return ie(t,Wi);function f(g){i=function(m){return m==="next"?p=>p.toUpperCase():p=>p.toLowerCase()}(g),s=function(m){return m==="next"?p=>p.toLowerCase():p=>p.toUpperCase()}(g),o=g==="next"?Ho:Go;var b=n.map(function(m){return{lower:s(m),upper:i(m)}}).sort(function(m,p){return o(m.lower,p.lower)});a=b.map(function(m){return m.upper}),l=b.map(function(m){return m.lower}),d=g,c=g==="next"?"":r}f("next");var h=new t.Collection(t,()=>Oe(a[0],l[u-1]+r));h._ondirectionchange=function(g){f(g)};var y=0;return h._addAlgorithm(function(g,b,m){var p=g.key;if(typeof p!="string")return!1;var v=s(p);if(e(v,l,y))return!0;for(var w=null,P=y;P<u;++P){var E=Qo(p,v,a[P],l[P],o,d);E===null&&w===null?y=P+1:(w===null||o(w,E)>0)&&(w=E)}return b(w!==null?function(){g.continue(w+c)}:m),!1}),h}function Oe(t,e,n,r){return{type:2,lower:t,upper:e,lowerOpen:n,upperOpen:r}}function Yi(t){return{type:1,lower:t,upper:t}}class Hi{get Collection(){return this._ctx.table.db.Collection}between(e,n,r,i){r=r!==!1,i=i===!0;try{return this._cmp(e,n)>0||this._cmp(e,n)===0&&(r||i)&&(!r||!i)?tt(this):new this.Collection(this,()=>Oe(e,n,!r,!i))}catch{return ie(this,be)}}equals(e){return e==null?ie(this,be):new this.Collection(this,()=>Yi(e))}above(e){return e==null?ie(this,be):new this.Collection(this,()=>Oe(e,void 0,!0))}aboveOrEqual(e){return e==null?ie(this,be):new this.Collection(this,()=>Oe(e,void 0,!1))}below(e){return e==null?ie(this,be):new this.Collection(this,()=>Oe(void 0,e,!1,!0))}belowOrEqual(e){return e==null?ie(this,be):new this.Collection(this,()=>Oe(void 0,e))}startsWith(e){return typeof e!="string"?ie(this,Wi):this.between(e,e+qe,!0,!0)}startsWithIgnoreCase(e){return e===""?this.startsWith(e):zt(this,(n,r)=>n.indexOf(r[0])===0,[e],qe)}equalsIgnoreCase(e){return zt(this,(n,r)=>n===r[0],[e],"")}anyOfIgnoreCase(){var e=_e.apply(rt,arguments);return e.length===0?tt(this):zt(this,(n,r)=>r.indexOf(n)!==-1,e,"")}startsWithAnyOfIgnoreCase(){var e=_e.apply(rt,arguments);return e.length===0?tt(this):zt(this,(n,r)=>r.some(i=>n.indexOf(i)===0),e,qe)}anyOf(){const e=_e.apply(rt,arguments);let n=this._cmp;try{e.sort(n)}catch{return ie(this,be)}if(e.length===0)return tt(this);const r=new this.Collection(this,()=>Oe(e[0],e[e.length-1]));r._ondirectionchange=s=>{n=s==="next"?this._ascending:this._descending,e.sort(n)};let i=0;return r._addAlgorithm((s,o,a)=>{const l=s.key;for(;n(l,e[i])>0;)if(++i,i===e.length)return o(a),!1;return n(l,e[i])===0||(o(()=>{s.continue(e[i])}),!1)}),r}notEqual(e){return this.inAnyRange([[Yn,e],[e,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})}noneOf(){const e=_e.apply(rt,arguments);if(e.length===0)return new this.Collection(this);try{e.sort(this._ascending)}catch{return ie(this,be)}const n=e.reduce((r,i)=>r?r.concat([[r[r.length-1][1],i]]):[[Yn,i]],null);return n.push([e[e.length-1],this.db._maxKey]),this.inAnyRange(n,{includeLowers:!1,includeUppers:!1})}inAnyRange(e,n){const r=this._cmp,i=this._ascending,s=this._descending,o=this._min,a=this._max;if(e.length===0)return tt(this);if(!e.every(p=>p[0]!==void 0&&p[1]!==void 0&&i(p[0],p[1])<=0))return ie(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",K.InvalidArgument);const l=!n||n.includeLowers!==!1,d=n&&n.includeUppers===!0;let c,u=i;function f(p,v){return u(p[0],v[0])}try{c=e.reduce(function(p,v){let w=0,P=p.length;for(;w<P;++w){const E=p[w];if(r(v[0],E[1])<0&&r(v[1],E[0])>0){E[0]=o(E[0],v[0]),E[1]=a(E[1],v[1]);break}}return w===P&&p.push(v),p},[]),c.sort(f)}catch{return ie(this,be)}let h=0;const y=d?p=>i(p,c[h][1])>0:p=>i(p,c[h][1])>=0,g=l?p=>s(p,c[h][0])>0:p=>s(p,c[h][0])>=0;let b=y;const m=new this.Collection(this,()=>Oe(c[0][0],c[c.length-1][1],!l,!d));return m._ondirectionchange=p=>{p==="next"?(b=y,u=i):(b=g,u=s),c.sort(f)},m._addAlgorithm((p,v,w)=>{for(var P=p.key;b(P);)if(++h,h===c.length)return v(w),!1;return!!function(E){return!y(E)&&!g(E)}(P)||(this._cmp(P,c[h][1])===0||this._cmp(P,c[h][0])===0||v(()=>{u===i?p.continue(c[h][0]):p.continue(c[h][1])}),!1)}),m}startsWithAnyOf(){const e=_e.apply(rt,arguments);return e.every(n=>typeof n=="string")?e.length===0?tt(this):this.inAnyRange(e.map(n=>[n,n+qe])):ie(this,"startsWithAnyOf() only works with strings")}}function he(t){return z(function(e){return At(e),t(e.target.error),!1})}function At(t){t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault()}const Tt="storagemutated",Ke="x-storagemutated-1",Re=_t(null,Tt);class Xo{_lock(){return mt(!T.global),++this._reculock,this._reculock!==1||T.global||(T.lockOwnerFor=this),this}_unlock(){if(mt(!T.global),--this._reculock==0)for(T.global||(T.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var e=this._blockedFuncs.shift();try{ft(e[1],e[0])}catch{}}return this}_locked(){return this._reculock&&T.lockOwnerFor!==this}create(e){if(!this.mode)return this;const n=this.db.idbdb,r=this.db._state.dbOpenError;if(mt(!this.idbtrans),!e&&!n)switch(r&&r.name){case"DatabaseClosedError":throw new K.DatabaseClosed(r);case"MissingAPIError":throw new K.MissingAPI(r.message,r);default:throw new K.OpenFailed(r)}if(!this.active)throw new K.TransactionInactive;return mt(this._completion._state===null),(e=this.idbtrans=e||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):n.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}))).onerror=z(i=>{At(i),this._reject(e.error)}),e.onabort=z(i=>{At(i),this.active&&this._reject(new K.Abort(e.error)),this.active=!1,this.on("abort").fire(i)}),e.oncomplete=z(()=>{this.active=!1,this._resolve(),"mutatedParts"in e&&Re.storagemutated.fire(e.mutatedParts)}),this}_promise(e,n,r){if(e==="readwrite"&&this.mode!=="readwrite")return G(new K.ReadOnly("Transaction is readonly"));if(!this.active)return G(new K.TransactionInactive);if(this._locked())return new C((s,o)=>{this._blockedFuncs.push([()=>{this._promise(e,n,r).then(s,o)},T])});if(r)return Be(()=>{var s=new C((o,a)=>{this._lock();const l=n(o,a,this);l&&l.then&&l.then(o,a)});return s.finally(()=>this._unlock()),s._lib=!0,s});var i=new C((s,o)=>{var a=n(s,o,this);a&&a.then&&a.then(s,o)});return i._lib=!0,i}_root(){return this.parent?this.parent._root():this}waitFor(e){var n=this._root();const r=C.resolve(e);if(n._waitingFor)n._waitingFor=n._waitingFor.then(()=>r);else{n._waitingFor=r,n._waitingQueue=[];var i=n.idbtrans.objectStore(n.storeNames[0]);(function o(){for(++n._spinCount;n._waitingQueue.length;)n._waitingQueue.shift()();n._waitingFor&&(i.get(-1/0).onsuccess=o)})()}var s=n._waitingFor;return new C((o,a)=>{r.then(l=>n._waitingQueue.push(z(o.bind(null,l))),l=>n._waitingQueue.push(z(a.bind(null,l)))).finally(()=>{n._waitingFor===s&&(n._waitingFor=null)})})}abort(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new K.Abort))}table(e){const n=this._memoizedTables||(this._memoizedTables={});if(ae(n,e))return n[e];const r=this.schema[e];if(!r)throw new K.NotFound("Table "+e+" not part of transaction");const i=new this.db.Table(e,r,this);return i.core=this.db.core.table(e),n[e]=i,i}}function Hn(t,e,n,r,i,s,o){return{name:t,keyPath:e,unique:n,multi:r,auto:i,compound:s,src:(n&&!o?"&":"")+(r?"*":"")+(i?"++":"")+Gi(e)}}function Gi(t){return typeof t=="string"?t:t?"["+[].join.call(t,"+")+"]":""}function Qi(t,e,n){return{name:t,primKey:e,indexes:n,mappedClass:null,idxByName:xi(n,r=>[r.name,r])}}let Kt=t=>{try{return t.only([[]]),Kt=()=>[[]],[[]]}catch{return Kt=()=>qe,qe}};function Gn(t){return t==null?()=>{}:typeof t=="string"?function(e){return e.split(".").length===1?r=>r[e]:r=>Pe(r,e)}(t):e=>Pe(e,t)}function ii(t){return[].slice.call(t)}let Jo=0;function wt(t){return t==null?":id":typeof t=="string"?t:`[${t.join("+")}]`}function Zo(t,e,n){function r(l){if(l.type===3)return null;if(l.type===4)throw new Error("Cannot convert never type to IDBKeyRange");const{lower:d,upper:c,lowerOpen:u,upperOpen:f}=l;return d===void 0?c===void 0?null:e.upperBound(c,!!f):c===void 0?e.lowerBound(d,!!u):e.bound(d,c,!!u,!!f)}const{schema:i,hasGetAll:s}=function(l,d){const c=ii(l.objectStoreNames);return{schema:{name:l.name,tables:c.map(u=>d.objectStore(u)).map(u=>{const{keyPath:f,autoIncrement:h}=u,y=ee(f),g=f==null,b={},m={name:u.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:g,compound:y,keyPath:f,autoIncrement:h,unique:!0,extractKey:Gn(f)},indexes:ii(u.indexNames).map(p=>u.index(p)).map(p=>{const{name:v,unique:w,multiEntry:P,keyPath:E}=p,_={name:v,compound:ee(E),keyPath:E,unique:w,multiEntry:P,extractKey:Gn(E)};return b[wt(E)]=_,_}),getIndexByKeyPath:p=>b[wt(p)]};return b[":id"]=m.primaryKey,f!=null&&(b[wt(f)]=m.primaryKey),m})},hasGetAll:c.length>0&&"getAll"in d.objectStore(c[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}(t,n),o=i.tables.map(l=>function(d){const c=d.name;return{name:c,schema:d,mutate:function({trans:u,type:f,keys:h,values:y,range:g}){return new Promise((b,m)=>{b=z(b);const p=u.objectStore(c),v=p.keyPath==null,w=f==="put"||f==="add";if(!w&&f!=="delete"&&f!=="deleteRange")throw new Error("Invalid operation type: "+f);const{length:P}=h||y||{length:1};if(h&&y&&h.length!==y.length)throw new Error("Given keys array must have same length as given values array.");if(P===0)return b({numFailures:0,failures:{},results:[],lastResult:void 0});let E;const _=[],S=[];let k=0;const j=F=>{++k,At(F)};if(f==="deleteRange"){if(g.type===4)return b({numFailures:k,failures:S,results:[],lastResult:void 0});g.type===3?_.push(E=p.clear()):_.push(E=p.delete(r(g)))}else{const[F,q]=w?v?[y,h]:[y,null]:[h,null];if(w)for(let M=0;M<P;++M)_.push(E=q&&q[M]!==void 0?p[f](F[M],q[M]):p[f](F[M])),E.onerror=j;else for(let M=0;M<P;++M)_.push(E=p[f](F[M])),E.onerror=j}const B=F=>{const q=F.target.result;_.forEach((M,le)=>M.error!=null&&(S[le]=M.error)),b({numFailures:k,failures:S,results:f==="delete"?h:_.map(M=>M.result),lastResult:q})};E.onerror=F=>{j(F),B(F)},E.onsuccess=B})},getMany:({trans:u,keys:f})=>new Promise((h,y)=>{h=z(h);const g=u.objectStore(c),b=f.length,m=new Array(b);let p,v=0,w=0;const P=_=>{const S=_.target;m[S._pos]=S.result,++w===v&&h(m)},E=he(y);for(let _=0;_<b;++_)f[_]!=null&&(p=g.get(f[_]),p._pos=_,p.onsuccess=P,p.onerror=E,++v);v===0&&h(m)}),get:({trans:u,key:f})=>new Promise((h,y)=>{h=z(h);const g=u.objectStore(c).get(f);g.onsuccess=b=>h(b.target.result),g.onerror=he(y)}),query:function(u){return f=>new Promise((h,y)=>{h=z(h);const{trans:g,values:b,limit:m,query:p}=f,v=m===1/0?void 0:m,{index:w,range:P}=p,E=g.objectStore(c),_=w.isPrimaryKey?E:E.index(w.name),S=r(P);if(m===0)return h({result:[]});if(u){const k=b?_.getAll(S,v):_.getAllKeys(S,v);k.onsuccess=j=>h({result:j.target.result}),k.onerror=he(y)}else{let k=0;const j=b||!("openKeyCursor"in _)?_.openCursor(S):_.openKeyCursor(S),B=[];j.onsuccess=F=>{const q=j.result;return q?(B.push(b?q.value:q.primaryKey),++k===m?h({result:B}):void q.continue()):h({result:B})},j.onerror=he(y)}})}(s),openCursor:function({trans:u,values:f,query:h,reverse:y,unique:g}){return new Promise((b,m)=>{b=z(b);const{index:p,range:v}=h,w=u.objectStore(c),P=p.isPrimaryKey?w:w.index(p.name),E=y?g?"prevunique":"prev":g?"nextunique":"next",_=f||!("openKeyCursor"in P)?P.openCursor(r(v),E):P.openKeyCursor(r(v),E);_.onerror=he(m),_.onsuccess=z(S=>{const k=_.result;if(!k)return void b(null);k.___id=++Jo,k.done=!1;const j=k.continue.bind(k);let B=k.continuePrimaryKey;B&&(B=B.bind(k));const F=k.advance.bind(k),q=()=>{throw new Error("Cursor not stopped")};k.trans=u,k.stop=k.continue=k.continuePrimaryKey=k.advance=()=>{throw new Error("Cursor not started")},k.fail=z(m),k.next=function(){let M=1;return this.start(()=>M--?this.continue():this.stop()).then(()=>this)},k.start=M=>{const le=new Promise((A,O)=>{A=z(A),_.onerror=he(O),k.fail=O,k.stop=H=>{k.stop=k.continue=k.continuePrimaryKey=k.advance=q,A(H)}}),ue=()=>{if(_.result)try{M()}catch(A){k.fail(A)}else k.done=!0,k.start=()=>{throw new Error("Cursor behind last entry")},k.stop()};return _.onsuccess=z(A=>{_.onsuccess=ue,ue()}),k.continue=j,k.continuePrimaryKey=B,k.advance=F,ue(),le},b(k)},m)})},count({query:u,trans:f}){const{index:h,range:y}=u;return new Promise((g,b)=>{const m=f.objectStore(c),p=h.isPrimaryKey?m:m.index(h.name),v=r(y),w=v?p.count(v):p.count();w.onsuccess=z(P=>g(P.target.result)),w.onerror=he(b)})}}}(l)),a={};return o.forEach(l=>a[l.name]=l),{stack:"dbcore",transaction:t.transaction.bind(t),table(l){if(!a[l])throw new Error(`Table '${l}' not found`);return a[l]},MIN_KEY:-1/0,MAX_KEY:Kt(e),schema:i}}function Qn({_novip:t},e){const n=e.db,r=function(i,s,{IDBKeyRange:o,indexedDB:a},l){return{dbcore:function(c,u){return u.reduce((f,{create:h})=>({...f,...h(f)}),c)}(Zo(s,o,l),i.dbcore)}}(t._middlewares,n,t._deps,e);t.core=r.dbcore,t.tables.forEach(i=>{const s=i.name;t.core.schema.tables.some(o=>o.name===s)&&(i.core=t.core.table(s),t[s]instanceof t.Table&&(t[s].core=i.core))})}function hn({_novip:t},e,n,r){n.forEach(i=>{const s=r[i];e.forEach(o=>{const a=pr(o,i);(!a||"value"in a&&a.value===void 0)&&(o===t.Transaction.prototype||o instanceof t.Transaction?Ee(o,i,{get(){return this.table(i)},set(l){Ei(this,i,{value:l,writable:!0,configurable:!0,enumerable:!0})}}):o[i]=new t.Table(i,s))})})}function Xn({_novip:t},e){e.forEach(n=>{for(let r in n)n[r]instanceof t.Table&&delete n[r]})}function $o(t,e){return t._cfg.version-e._cfg.version}function ea(t,e,n,r){const i=t._dbSchema,s=t._createTransaction("readwrite",t._storeNames,i);s.create(n),s._completion.catch(r);const o=s._reject.bind(s),a=T.transless||T;Be(()=>{T.trans=s,T.transless=a,e===0?(Y(i).forEach(l=>{An(n,l,i[l].primKey,i[l].indexes)}),Qn(t,n),C.follow(()=>t.on.populate.fire(s)).catch(o)):function({_novip:l},d,c,u){const f=[],h=l._versions;let y=l._dbSchema=Zn(l,l.idbdb,u),g=!1;const b=h.filter(p=>p._cfg.version>=d);function m(){return f.length?C.resolve(f.shift()(c.idbtrans)).then(m):C.resolve()}return b.forEach(p=>{f.push(()=>{const v=y,w=p._cfg.dbschema;$n(l,v,u),$n(l,w,u),y=l._dbSchema=w;const P=Xi(v,w);P.add.forEach(_=>{An(u,_[0],_[1].primKey,_[1].indexes)}),P.change.forEach(_=>{if(_.recreate)throw new K.Upgrade("Not yet support for changing primary key");{const S=u.objectStore(_.name);_.add.forEach(k=>Jn(S,k)),_.change.forEach(k=>{S.deleteIndex(k.name),Jn(S,k)}),_.del.forEach(k=>S.deleteIndex(k))}});const E=p._cfg.contentUpgrade;if(E&&p._cfg.version>d){Qn(l,u),c._memoizedTables={},g=!0;let _=Ci(w);P.del.forEach(B=>{_[B]=v[B]}),Xn(l,[l.Transaction.prototype]),hn(l,[l.Transaction.prototype],Y(_),_),c.schema=_;const S=br(E);let k;S&&ct();const j=C.follow(()=>{if(k=E(c),k&&S){var B=xe.bind(null,null);k.then(B,B)}});return k&&typeof k.then=="function"?C.resolve(k):j.then(()=>k)}}),f.push(v=>{(!g||!Wo)&&function(w,P){[].slice.call(P.db.objectStoreNames).forEach(E=>w[E]==null&&P.db.deleteObjectStore(E))}(p._cfg.dbschema,v),Xn(l,[l.Transaction.prototype]),hn(l,[l.Transaction.prototype],l._storeNames,l._dbSchema),c.schema=l._dbSchema})}),m().then(()=>{var p,v;v=u,Y(p=y).forEach(w=>{v.db.objectStoreNames.contains(w)||An(v,w,p[w].primKey,p[w].indexes)})})}(t,e,s,n).catch(o)})}function Xi(t,e){const n={del:[],add:[],change:[]};let r;for(r in t)e[r]||n.del.push(r);for(r in e){const i=t[r],s=e[r];if(i){const o={name:r,def:s,recreate:!1,del:[],add:[],change:[]};if(""+(i.primKey.keyPath||"")!=""+(s.primKey.keyPath||"")||i.primKey.auto!==s.primKey.auto&&!pn)o.recreate=!0,n.change.push(o);else{const a=i.idxByName,l=s.idxByName;let d;for(d in a)l[d]||o.del.push(d);for(d in l){const c=a[d],u=l[d];c?c.src!==u.src&&o.change.push(u):o.add.push(u)}(o.del.length>0||o.add.length>0||o.change.length>0)&&n.change.push(o)}}else n.add.push([r,s])}return n}function An(t,e,n,r){const i=t.db.createObjectStore(e,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return r.forEach(s=>Jn(i,s)),i}function Jn(t,e){t.createIndex(e.name,e.keyPath,{unique:e.unique,multiEntry:e.multi})}function Zn(t,e,n){const r={};return an(e.objectStoreNames,0).forEach(i=>{const s=n.objectStore(i);let o=s.keyPath;const a=Hn(Gi(o),o||"",!1,!1,!!s.autoIncrement,o&&typeof o!="string",!0),l=[];for(let c=0;c<s.indexNames.length;++c){const u=s.index(s.indexNames[c]);o=u.keyPath;var d=Hn(u.name,o,!!u.unique,!!u.multiEntry,!1,o&&typeof o!="string",!1);l.push(d)}r[i]=Qi(i,a,l)}),r}function $n({_novip:t},e,n){const r=n.db.objectStoreNames;for(let i=0;i<r.length;++i){const s=r[i],o=n.objectStore(s);t._hasGetAll="getAll"in o;for(let a=0;a<o.indexNames.length;++a){const l=o.indexNames[a],d=o.index(l).keyPath,c=typeof d=="string"?d:"["+an(d).join("+")+"]";if(e[s]){const u=e[s].idxByName[c];u&&(u.name=l,delete e[s].idxByName[c],e[s].idxByName[l]=u)}}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&L.WorkerGlobalScope&&L instanceof L.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(t._hasGetAll=!1)}class ta{_parseStoresSpec(e,n){Y(e).forEach(r=>{if(e[r]!==null){var i=e[r].split(",").map((o,a)=>{const l=(o=o.trim()).replace(/([&*]|\+\+)/g,""),d=/^\[/.test(l)?l.match(/^\[(.*)\]$/)[1].split("+"):l;return Hn(l,d||null,/\&/.test(o),/\*/.test(o),/\+\+/.test(o),ee(d),a===0)}),s=i.shift();if(s.multi)throw new K.Schema("Primary key cannot be multi-valued");i.forEach(o=>{if(o.auto)throw new K.Schema("Only primary key can be marked as autoIncrement (++)");if(!o.keyPath)throw new K.Schema("Index must have a name and cannot be an empty string")}),n[r]=Qi(r,s,i)}})}stores(e){const n=this.db;this._cfg.storesSource=this._cfg.storesSource?ne(this._cfg.storesSource,e):e;const r=n._versions,i={};let s={};return r.forEach(o=>{ne(i,o._cfg.storesSource),s=o._cfg.dbschema={},o._parseStoresSpec(i,s)}),n._dbSchema=s,Xn(n,[n._allTables,n,n.Transaction.prototype]),hn(n,[n._allTables,n,n.Transaction.prototype,this._cfg.tables],Y(s),s),n._storeNames=Y(s),this}upgrade(e){return this._cfg.contentUpgrade=wr(this._cfg.contentUpgrade||N,e),this}}function Sr(t,e){let n=t._dbNamesDB;return n||(n=t._dbNamesDB=new Ue(bn,{addons:[],indexedDB:t,IDBKeyRange:e}),n.version(1).stores({dbnames:"name"})),n.table("dbnames")}function xr(t){return t&&typeof t.databases=="function"}function er(t){return Be(function(){return T.letThrough=!0,t()})}function na(){var t;return!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(e){var n=function(){return indexedDB.databases().finally(e)};t=setInterval(n,100),n()}).finally(function(){return clearInterval(t)}):Promise.resolve()}function ra(t){const e=t._state,{indexedDB:n}=t._deps;if(e.isBeingOpened||t.idbdb)return e.dbReadyPromise.then(()=>e.dbOpenError?G(e.dbOpenError):t);pe&&(e.openCanceller._stackHolder=Qe()),e.isBeingOpened=!0,e.dbOpenError=null,e.openComplete=!1;const r=e.openCanceller;function i(){if(e.openCanceller!==r)throw new K.DatabaseClosed("db.open() was cancelled")}let s=e.dbReadyResolve,o=null,a=!1;return C.race([r,(typeof navigator>"u"?C.resolve():na()).then(()=>new C((l,d)=>{if(i(),!n)throw new K.MissingAPI;const c=t.name,u=e.autoSchema?n.open(c):n.open(c,Math.round(10*t.verno));if(!u)throw new K.MissingAPI;u.onerror=he(d),u.onblocked=z(t._fireOnBlocked),u.onupgradeneeded=z(f=>{if(o=u.transaction,e.autoSchema&&!t._options.allowEmptyDB){u.onerror=At,o.abort(),u.result.close();const y=n.deleteDatabase(c);y.onsuccess=y.onerror=z(()=>{d(new K.NoSuchDatabase(`Database ${c} doesnt exist`))})}else{o.onerror=he(d);var h=f.oldVersion>Math.pow(2,62)?0:f.oldVersion;a=h<1,t._novip.idbdb=u.result,ea(t,h/10,o,d)}},d),u.onsuccess=z(()=>{o=null;const f=t._novip.idbdb=u.result,h=an(f.objectStoreNames);if(h.length>0)try{const g=f.transaction((y=h).length===1?y[0]:y,"readonly");e.autoSchema?function({_novip:b},m,p){b.verno=m.version/10;const v=b._dbSchema=Zn(0,m,p);b._storeNames=an(m.objectStoreNames,0),hn(b,[b._allTables],Y(v),v)}(t,f,g):($n(t,t._dbSchema,g),function(b,m){const p=Xi(Zn(0,b.idbdb,m),b._dbSchema);return!(p.add.length||p.change.some(v=>v.add.length||v.change.length))}(t,g)||console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Some queries may fail.")),Qn(t,g)}catch{}var y;vt.push(t),f.onversionchange=z(g=>{e.vcFired=!0,t.on("versionchange").fire(g)}),f.onclose=z(g=>{t.on("close").fire(g)}),a&&function({indexedDB:g,IDBKeyRange:b},m){!xr(g)&&m!==bn&&Sr(g,b).put({name:m}).catch(N)}(t._deps,c),l()},d)}))]).then(()=>(i(),e.onReadyBeingFired=[],C.resolve(er(()=>t.on.ready.fire(t.vip))).then(function l(){if(e.onReadyBeingFired.length>0){let d=e.onReadyBeingFired.reduce(wr,N);return e.onReadyBeingFired=[],C.resolve(er(()=>d(t.vip))).then(l)}}))).finally(()=>{e.onReadyBeingFired=null,e.isBeingOpened=!1}).then(()=>t).catch(l=>{e.dbOpenError=l;try{o&&o.abort()}catch{}return r===e.openCanceller&&t._close(),G(l)}).finally(()=>{e.openComplete=!0,s()})}function tr(t){var e=s=>t.next(s),n=i(e),r=i(s=>t.throw(s));function i(s){return o=>{var a=s(o),l=a.value;return a.done?l:l&&typeof l.then=="function"?l.then(n,r):ee(l)?Promise.all(l).then(n,r):n(l)}}return i(e)()}function ia(t,e,n){var r=arguments.length;if(r<2)throw new K.InvalidArgument("Too few arguments");for(var i=new Array(r-1);--r;)i[r-1]=arguments[r];return n=i.pop(),[t,Oi(i),n]}function Ji(t,e,n,r,i){return C.resolve().then(()=>{const s=T.transless||T,o=t._createTransaction(e,n,t._dbSchema,r),a={trans:o,transless:s};if(r)o.idbtrans=r.idbtrans;else try{o.create(),t._state.PR1398_maxLoop=3}catch(u){return u.name===_r.InvalidState&&t.isOpen()&&--t._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),t._close(),t.open().then(()=>Ji(t,e,n,null,i))):G(u)}const l=br(i);let d;l&&ct();const c=C.follow(()=>{if(d=i.call(o,o),d)if(l){var u=xe.bind(null,null);d.then(u,u)}else typeof d.next=="function"&&typeof d.throw=="function"&&(d=tr(d))},a);return(d&&typeof d.then=="function"?C.resolve(d).then(u=>o.active?u:G(new K.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))):c.then(()=>d)).then(u=>(r&&o._resolve(),o._completion.then(()=>u))).catch(u=>(o._reject(u),G(u)))})}function Wt(t,e,n){const r=ee(t)?t.slice():[t];for(let i=0;i<n;++i)r.push(e);return r}const sa={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(t){return{...t,table(e){const n=t.table(e),{schema:r}=n,i={},s=[];function o(c,u,f){const h=wt(c),y=i[h]=i[h]||[],g=c==null?0:typeof c=="string"?1:c.length,b=u>0,m={...f,isVirtual:b,keyTail:u,keyLength:g,extractKey:Gn(c),unique:!b&&f.unique};return y.push(m),m.isPrimaryKey||s.push(m),g>1&&o(g===2?c[0]:c.slice(0,g-1),u+1,f),y.sort((p,v)=>p.keyTail-v.keyTail),m}const a=o(r.primaryKey.keyPath,0,r.primaryKey);i[":id"]=[a];for(const c of r.indexes)o(c.keyPath,0,c);function l(c){const u=c.query.index;return u.isVirtual?{...c,query:{index:u,range:(f=c.query.range,h=u.keyTail,{type:f.type===1?2:f.type,lower:Wt(f.lower,f.lowerOpen?t.MAX_KEY:t.MIN_KEY,h),lowerOpen:!0,upper:Wt(f.upper,f.upperOpen?t.MIN_KEY:t.MAX_KEY,h),upperOpen:!0})}}:c;var f,h}return{...n,schema:{...r,primaryKey:a,indexes:s,getIndexByKeyPath:function(c){const u=i[wt(c)];return u&&u[0]}},count:c=>n.count(l(c)),query:c=>n.query(l(c)),openCursor(c){const{keyTail:u,isVirtual:f,keyLength:h}=c.query.index;return f?n.openCursor(l(c)).then(y=>y&&function(g){return Object.create(g,{continue:{value:function(m){m!=null?g.continue(Wt(m,c.reverse?t.MAX_KEY:t.MIN_KEY,u)):c.unique?g.continue(g.key.slice(0,h).concat(c.reverse?t.MIN_KEY:t.MAX_KEY,u)):g.continue()}},continuePrimaryKey:{value(m,p){g.continuePrimaryKey(Wt(m,t.MAX_KEY,u),p)}},primaryKey:{get:()=>g.primaryKey},key:{get(){const m=g.key;return h===1?m[0]:m.slice(0,h)}},value:{get:()=>g.value}})}(y)):n.openCursor(c)}}}}}};function Cr(t,e,n,r){return n=n||{},r=r||"",Y(t).forEach(i=>{if(ae(e,i)){var s=t[i],o=e[i];if(typeof s=="object"&&typeof o=="object"&&s&&o){const a=Bn(s);a!==Bn(o)?n[r+i]=e[i]:a==="Object"?Cr(s,o,n,r+i+"."):s!==o&&(n[r+i]=e[i])}else s!==o&&(n[r+i]=e[i])}else n[r+i]=void 0}),Y(e).forEach(i=>{ae(t,i)||(n[r+i]=e[i])}),n}const oa={stack:"dbcore",name:"HooksMiddleware",level:2,create:t=>({...t,table(e){const n=t.table(e),{primaryKey:r}=n.schema;return{...n,mutate(s){const o=T.trans,{deleting:a,creating:l,updating:d}=o.table(e).hook;switch(s.type){case"add":if(l.fire===N)break;return o._promise("readwrite",()=>c(s),!0);case"put":if(l.fire===N&&d.fire===N)break;return o._promise("readwrite",()=>c(s),!0);case"delete":if(a.fire===N)break;return o._promise("readwrite",()=>c(s),!0);case"deleteRange":if(a.fire===N)break;return o._promise("readwrite",()=>function(f){return u(f.trans,f.range,1e4)}(s),!0)}return n.mutate(s);function c(f){const h=T.trans,y=f.keys||function(g,b){return b.type==="delete"?b.keys:b.keys||b.values.map(g.extractKey)}(r,f);if(!y)throw new Error("Keys missing");return(f=f.type==="add"||f.type==="put"?{...f,keys:y}:{...f}).type!=="delete"&&(f.values=[...f.values]),f.keys&&(f.keys=[...f.keys]),function(g,b,m){return b.type==="add"?Promise.resolve([]):g.getMany({trans:b.trans,keys:m,cache:"immutable"})}(n,f,y).then(g=>{const b=y.map((m,p)=>{const v=g[p],w={onerror:null,onsuccess:null};if(f.type==="delete")a.fire.call(w,m,v,h);else if(f.type==="add"||v===void 0){const P=l.fire.call(w,m,f.values[p],h);m==null&&P!=null&&(m=P,f.keys[p]=m,r.outbound||ce(f.values[p],r.keyPath,m))}else{const P=Cr(v,f.values[p]),E=d.fire.call(w,P,m,v,h);if(E){const _=f.values[p];Object.keys(E).forEach(S=>{ae(_,S)?_[S]=E[S]:ce(_,S,E[S])})}}return w});return n.mutate(f).then(({failures:m,results:p,numFailures:v,lastResult:w})=>{for(let P=0;P<y.length;++P){const E=p?p[P]:y[P],_=b[P];E==null?_.onerror&&_.onerror(m[P]):_.onsuccess&&_.onsuccess(f.type==="put"&&g[P]?f.values[P]:E)}return{failures:m,results:p,numFailures:v,lastResult:w}}).catch(m=>(b.forEach(p=>p.onerror&&p.onerror(m)),Promise.reject(m)))})}function u(f,h,y){return n.query({trans:f,values:!1,query:{index:r,range:h},limit:y}).then(({result:g})=>c({type:"delete",keys:g,trans:f}).then(b=>b.numFailures>0?Promise.reject(b.failures[0]):g.length<y?{failures:[],numFailures:0,lastResult:void 0}:u(f,{...h,lower:g[g.length-1],lowerOpen:!0},y)))}}}}})};function Zi(t,e,n){try{if(!e||e.keys.length<t.length)return null;const r=[];for(let i=0,s=0;i<e.keys.length&&s<t.length;++i)te(e.keys[i],t[s])===0&&(r.push(n?Bt(e.values[i]):e.values[i]),++s);return r.length===t.length?r:null}catch{return null}}const aa={stack:"dbcore",level:-1,create:t=>({table:e=>{const n=t.table(e);return{...n,getMany:r=>{if(!r.cache)return n.getMany(r);const i=Zi(r.keys,r.trans._cache,r.cache==="clone");return i?C.resolve(i):n.getMany(r).then(s=>(r.trans._cache={keys:r.keys,values:r.cache==="clone"?Bt(s):s},s))},mutate:r=>(r.type!=="add"&&(r.trans._cache=null),n.mutate(r))}}})};function Or(t){return!("from"in t)}const ve=function(t,e){if(!this){const n=new ve;return t&&"d"in t&&ne(n,t),n}ne(this,arguments.length?{d:1,from:t,to:arguments.length>1?e:t}:{d:0})};function Dt(t,e,n){const r=te(e,n);if(isNaN(r))return;if(r>0)throw RangeError();if(Or(t))return ne(t,{from:e,to:n,d:1});const i=t.l,s=t.r;if(te(n,t.from)<0)return i?Dt(i,e,n):t.l={from:e,to:n,d:1,l:null,r:null},si(t);if(te(e,t.to)>0)return s?Dt(s,e,n):t.r={from:e,to:n,d:1,l:null,r:null},si(t);te(e,t.from)<0&&(t.from=e,t.l=null,t.d=s?s.d+1:1),te(n,t.to)>0&&(t.to=n,t.r=null,t.d=t.l?t.l.d+1:1);const o=!t.r;i&&!t.l&&mn(t,i),s&&o&&mn(t,s)}function mn(t,e){Or(e)||function n(r,{from:i,to:s,l:o,r:a}){Dt(r,i,s),o&&n(r,o),a&&n(r,a)}(t,e)}function la(t,e){const n=nr(e);let r=n.next();if(r.done)return!1;let i=r.value;const s=nr(t);let o=s.next(i.from),a=o.value;for(;!r.done&&!o.done;){if(te(a.from,i.to)<=0&&te(a.to,i.from)>=0)return!0;te(i.from,a.from)<0?i=(r=n.next(a.from)).value:a=(o=s.next(i.from)).value}return!1}function nr(t){let e=Or(t)?null:{s:0,n:t};return{next(n){const r=arguments.length>0;for(;e;)switch(e.s){case 0:if(e.s=1,r)for(;e.n.l&&te(n,e.n.from)<0;)e={up:e,n:e.n.l,s:1};else for(;e.n.l;)e={up:e,n:e.n.l,s:1};case 1:if(e.s=2,!r||te(n,e.n.to)<=0)return{value:e.n,done:!1};case 2:if(e.n.r){e.s=3,e={up:e,n:e.n.r,s:0};continue}case 3:e=e.up}return{done:!0}}}}function si(t){var e,n;const r=(((e=t.r)===null||e===void 0?void 0:e.d)||0)-(((n=t.l)===null||n===void 0?void 0:n.d)||0),i=r>1?"r":r<-1?"l":"";if(i){const s=i==="r"?"l":"r",o={...t},a=t[i];t.from=a.from,t.to=a.to,t[i]=a[i],o[i]=a[s],t[s]=o,o.d=oi(o)}t.d=oi(t)}function oi({r:t,l:e}){return(t?e?Math.max(t.d,e.d):t.d:e?e.d:0)+1}ut(ve.prototype,{add(t){return mn(this,t),this},addKey(t){return Dt(this,t,t),this},addKeys(t){return t.forEach(e=>Dt(this,e,e)),this},[In](){return nr(this)}});const ua={stack:"dbcore",level:0,create:t=>{const e=t.schema.name,n=new ve(t.MIN_KEY,t.MAX_KEY);return{...t,table:r=>{const i=t.table(r),{schema:s}=i,{primaryKey:o}=s,{extractKey:a,outbound:l}=o,d={...i,mutate:f=>{const h=f.trans,y=h.mutatedParts||(h.mutatedParts={}),g=E=>{const _=`idb://${e}/${r}/${E}`;return y[_]||(y[_]=new ve)},b=g(""),m=g(":dels"),{type:p}=f;let[v,w]=f.type==="deleteRange"?[f.range]:f.type==="delete"?[f.keys]:f.values.length<50?[[],f.values]:[];const P=f.trans._cache;return i.mutate(f).then(E=>{if(ee(v)){p!=="delete"&&(v=E.results),b.addKeys(v);const _=Zi(v,P);_||p==="add"||m.addKeys(v),(_||w)&&function(S,k,j,B){function F(q){const M=S(q.name||"");function le(A){return A!=null?q.extractKey(A):null}const ue=A=>q.multiEntry&&ee(A)?A.forEach(O=>M.addKey(O)):M.addKey(A);(j||B).forEach((A,O)=>{const H=j&&le(j[O]),de=B&&le(B[O]);te(H,de)!==0&&(H!=null&&ue(H),de!=null&&ue(de))})}k.indexes.forEach(F)}(g,s,_,w)}else if(v){const _={from:v.lower,to:v.upper};m.add(_),b.add(_)}else b.add(n),m.add(n),s.indexes.forEach(_=>g(_.name).add(n));return E})}},c=({query:{index:f,range:h}})=>{var y,g;return[f,new ve((y=h.lower)!==null&&y!==void 0?y:t.MIN_KEY,(g=h.upper)!==null&&g!==void 0?g:t.MAX_KEY)]},u={get:f=>[o,new ve(f.key)],getMany:f=>[o,new ve().addKeys(f.keys)],count:c,query:c,openCursor:c};return Y(u).forEach(f=>{d[f]=function(h){const{subscr:y}=T;if(y){const g=w=>{const P=`idb://${e}/${r}/${w}`;return y[P]||(y[P]=new ve)},b=g(""),m=g(":dels"),[p,v]=u[f](h);if(g(p.name||"").add(v),!p.isPrimaryKey){if(f!=="count"){const w=f==="query"&&l&&h.values&&i.query({...h,values:!1});return i[f].apply(this,arguments).then(P=>{if(f==="query"){if(l&&h.values)return w.then(({result:_})=>(b.addKeys(_),P));const E=h.values?P.result.map(a):P.result;h.values?b.addKeys(E):m.addKeys(E)}else if(f==="openCursor"){const E=P,_=h.values;return E&&Object.create(E,{key:{get:()=>(m.addKey(E.primaryKey),E.key)},primaryKey:{get(){const S=E.primaryKey;return m.addKey(S),S}},value:{get:()=>(_&&b.addKey(E.primaryKey),E.value)}})}return P})}m.add(n)}}return i[f].apply(this,arguments)}}),d}}}};class Ue{constructor(e,n){this._middlewares={},this.verno=0;const r=Ue.dependencies;this._options=n={addons:Ue.addons,autoOpen:!0,indexedDB:r.indexedDB,IDBKeyRange:r.IDBKeyRange,...n},this._deps={indexedDB:n.indexedDB,IDBKeyRange:n.IDBKeyRange};const{addons:i}=n;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;const s={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:N,dbReadyPromise:null,cancelOpen:N,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3};var o;s.dbReadyPromise=new C(a=>{s.dbReadyResolve=a}),s.openCanceller=new C((a,l)=>{s.cancelOpen=l}),this._state=s,this.name=e,this.on=_t(this,"populate","blocked","versionchange","close",{ready:[wr,N]}),this.on.ready.subscribe=Pi(this.on.ready.subscribe,a=>(l,d)=>{Ue.vip(()=>{const c=this._state;if(c.openComplete)c.dbOpenError||C.resolve().then(l),d&&a(l);else if(c.onReadyBeingFired)c.onReadyBeingFired.push(l),d&&a(l);else{a(l);const u=this;d||a(function f(){u.on.ready.unsubscribe(l),u.on.ready.unsubscribe(f)})}})}),this.Collection=(o=this,ht(Yo.prototype,function(a,l){this.db=o;let d=Vi,c=null;if(l)try{d=l()}catch(y){c=y}const u=a._ctx,f=u.table,h=f.hook.reading.fire;this._ctx={table:f,index:u.index,isPrimKey:!u.index||f.schema.primKey.keyPath&&u.index===f.schema.primKey.name,range:d,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:c,or:u.or,valueMapper:h!==Ct?h:null}})),this.Table=function(a){return ht(Vo.prototype,function(l,d,c){this.db=a,this._tx=c,this.name=l,this.schema=d,this.hook=a._allTables[l]?a._allTables[l].hook:_t(null,{creating:[jo,N],reading:[Do,Ct],updating:[Io,N],deleting:[Bo,N]})})}(this),this.Transaction=function(a){return ht(Xo.prototype,function(l,d,c,u,f){this.db=a,this.mode=l,this.storeNames=d,this.schema=c,this.chromeTransactionDurability=u,this.idbtrans=null,this.on=_t(this,"complete","error","abort"),this.parent=f||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new C((h,y)=>{this._resolve=h,this._reject=y}),this._completion.then(()=>{this.active=!1,this.on.complete.fire()},h=>{var y=this.active;return this.active=!1,this.on.error.fire(h),this.parent?this.parent._reject(h):y&&this.idbtrans&&this.idbtrans.abort(),G(h)})})}(this),this.Version=function(a){return ht(ta.prototype,function(l){this.db=a,this._cfg={version:l,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})}(this),this.WhereClause=function(a){return ht(Hi.prototype,function(l,d,c){this.db=a,this._ctx={table:l,index:d===":id"?null:d,or:c};const u=a._deps.indexedDB;if(!u)throw new K.MissingAPI;this._cmp=this._ascending=u.cmp.bind(u),this._descending=(f,h)=>u.cmp(h,f),this._max=(f,h)=>u.cmp(f,h)>0?f:h,this._min=(f,h)=>u.cmp(f,h)<0?f:h,this._IDBKeyRange=a._deps.IDBKeyRange})}(this),this.on("versionchange",a=>{a.newVersion>0?console.warn(`Another connection wants to upgrade database '${this.name}'. Closing db now to resume the upgrade.`):console.warn(`Another connection wants to delete database '${this.name}'. Closing db now to resume the delete request.`),this.close()}),this.on("blocked",a=>{!a.newVersion||a.newVersion<a.oldVersion?console.warn(`Dexie.delete('${this.name}') was blocked`):console.warn(`Upgrade '${this.name}' blocked by other connection holding version ${a.oldVersion/10}`)}),this._maxKey=Kt(n.IDBKeyRange),this._createTransaction=(a,l,d,c)=>new this.Transaction(a,l,d,this._options.chromeTransactionDurability,c),this._fireOnBlocked=a=>{this.on("blocked").fire(a),vt.filter(l=>l.name===this.name&&l!==this&&!l._state.vcFired).map(l=>l.on("versionchange").fire(a))},this.use(sa),this.use(oa),this.use(ua),this.use(aa),this.vip=Object.create(this,{_vip:{value:!0}}),i.forEach(a=>a(this))}version(e){if(isNaN(e)||e<.1)throw new K.Type("Given version is not a positive number");if(e=Math.round(10*e)/10,this.idbdb||this._state.isBeingOpened)throw new K.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,e);const n=this._versions;var r=n.filter(i=>i._cfg.version===e)[0];return r||(r=new this.Version(e),n.push(r),n.sort($o),r.stores({}),this._state.autoSchema=!1,r)}_whenReady(e){return this.idbdb&&(this._state.openComplete||T.letThrough||this._vip)?e():new C((n,r)=>{if(this._state.openComplete)return r(new K.DatabaseClosed(this._state.dbOpenError));if(!this._state.isBeingOpened){if(!this._options.autoOpen)return void r(new K.DatabaseClosed);this.open().catch(N)}this._state.dbReadyPromise.then(n,r)}).then(e)}use({stack:e,create:n,level:r,name:i}){i&&this.unuse({stack:e,name:i});const s=this._middlewares[e]||(this._middlewares[e]=[]);return s.push({stack:e,create:n,level:r??10,name:i}),s.sort((o,a)=>o.level-a.level),this}unuse({stack:e,name:n,create:r}){return e&&this._middlewares[e]&&(this._middlewares[e]=this._middlewares[e].filter(i=>r?i.create!==r:!!n&&i.name!==n)),this}open(){return ra(this)}_close(){const e=this._state,n=vt.indexOf(this);if(n>=0&&vt.splice(n,1),this.idbdb){try{this.idbdb.close()}catch{}this._novip.idbdb=null}e.dbReadyPromise=new C(r=>{e.dbReadyResolve=r}),e.openCanceller=new C((r,i)=>{e.cancelOpen=i})}close(){this._close();const e=this._state;this._options.autoOpen=!1,e.dbOpenError=new K.DatabaseClosed,e.isBeingOpened&&e.cancelOpen(e.dbOpenError)}delete(){const e=arguments.length>0,n=this._state;return new C((r,i)=>{const s=()=>{this.close();var o=this._deps.indexedDB.deleteDatabase(this.name);o.onsuccess=z(()=>{(function({indexedDB:a,IDBKeyRange:l},d){!xr(a)&&d!==bn&&Sr(a,l).delete(d).catch(N)})(this._deps,this.name),r()}),o.onerror=he(i),o.onblocked=this._fireOnBlocked};if(e)throw new K.InvalidArgument("Arguments not allowed in db.delete()");n.isBeingOpened?n.dbReadyPromise.then(s):s()})}backendDB(){return this.idbdb}isOpen(){return this.idbdb!==null}hasBeenClosed(){const e=this._state.dbOpenError;return e&&e.name==="DatabaseClosed"}hasFailed(){return this._state.dbOpenError!==null}dynamicallyOpened(){return this._state.autoSchema}get tables(){return Y(this._allTables).map(e=>this._allTables[e])}transaction(){const e=ia.apply(this,arguments);return this._transaction.apply(this,e)}_transaction(e,n,r){let i=T.trans;i&&i.db===this&&e.indexOf("!")===-1||(i=null);const s=e.indexOf("?")!==-1;let o,a;e=e.replace("!","").replace("?","");try{if(a=n.map(d=>{var c=d instanceof this.Table?d.name:d;if(typeof c!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return c}),e=="r"||e===Pn)o=Pn;else{if(e!="rw"&&e!=Sn)throw new K.InvalidArgument("Invalid transaction mode: "+e);o=Sn}if(i){if(i.mode===Pn&&o===Sn){if(!s)throw new K.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");i=null}i&&a.forEach(d=>{if(i&&i.storeNames.indexOf(d)===-1){if(!s)throw new K.SubTransaction("Table "+d+" not included in parent transaction.");i=null}}),s&&i&&!i.active&&(i=null)}}catch(d){return i?i._promise(null,(c,u)=>{u(d)}):G(d)}const l=Ji.bind(null,this,o,a,i,r);return i?i._promise(o,l,"lock"):T.trans?ft(T.transless,()=>this._whenReady(l)):this._whenReady(l)}table(e){if(!ae(this._allTables,e))throw new K.InvalidTable(`Table ${e} does not exist`);return this._allTables[e]}}const ca=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable";class fa{constructor(e){this._subscribe=e}subscribe(e,n,r){return this._subscribe(e&&typeof e!="function"?e:{next:e,error:n,complete:r})}[ca](){return this}}function $i(t,e){return Y(e).forEach(n=>{mn(t[n]||(t[n]=new ve),e[n])}),t}function da(t){let e,n=!1;const r=new fa(i=>{const s=br(t);let o=!1,a={},l={};const d={get closed(){return o},unsubscribe:()=>{o=!0,Re.storagemutated.unsubscribe(h)}};i.start&&i.start(d);let c=!1,u=!1;function f(){return Y(l).some(g=>a[g]&&la(a[g],l[g]))}const h=g=>{$i(a,g),f()&&y()},y=()=>{if(c||o)return;a={};const g={},b=function(m){s&&ct();const p=()=>Be(t,{subscr:m,trans:null}),v=T.trans?ft(T.transless,p):p();return s&&v.then(xe,xe),v}(g);u||(Re(Tt,h),u=!0),c=!0,Promise.resolve(b).then(m=>{n=!0,e=m,c=!1,o||(f()?y():(a={},l=g,i.next&&i.next(m)))},m=>{c=!1,n=!1,i.error&&i.error(m),d.unsubscribe()})};return y(),d});return r.hasValue=()=>n,r.getValue=()=>e,r}let rr;try{rr={indexedDB:L.indexedDB||L.mozIndexedDB||L.webkitIndexedDB||L.msIndexedDB,IDBKeyRange:L.IDBKeyRange||L.webkitIDBKeyRange}}catch{rr={indexedDB:null,IDBKeyRange:null}}const Fe=Ue;function Zt(t){let e=ke;try{ke=!0,Re.storagemutated.fire(t)}finally{ke=e}}ut(Fe,{...Yt,delete:t=>new Fe(t,{addons:[]}).delete(),exists:t=>new Fe(t,{addons:[]}).open().then(e=>(e.close(),!0)).catch("NoSuchDatabaseError",()=>!1),getDatabaseNames(t){try{return function({indexedDB:e,IDBKeyRange:n}){return xr(e)?Promise.resolve(e.databases()).then(r=>r.map(i=>i.name).filter(i=>i!==bn)):Sr(e,n).toCollection().primaryKeys()}(Fe.dependencies).then(t)}catch{return G(new K.MissingAPI)}},defineClass:()=>function(t){ne(this,t)},ignoreTransaction:t=>T.trans?ft(T.transless,t):t(),vip:er,async:function(t){return function(){try{var e=tr(t.apply(this,arguments));return e&&typeof e.then=="function"?e:C.resolve(e)}catch(n){return G(n)}}},spawn:function(t,e,n){try{var r=tr(t.apply(n,e||[]));return r&&typeof r.then=="function"?r:C.resolve(r)}catch(i){return G(i)}},currentTransaction:{get:()=>T.trans||null},waitFor:function(t,e){const n=C.resolve(typeof t=="function"?Fe.ignoreTransaction(t):t).timeout(e||6e4);return T.trans?T.trans.waitFor(n):n},Promise:C,debug:{get:()=>pe,set:t=>{Ti(t,t==="dexie"?()=>!0:Ui)}},derive:ot,extend:ne,props:ut,override:Pi,Events:_t,on:Re,liveQuery:da,extendObservabilitySet:$i,getByKeyPath:Pe,setByKeyPath:ce,delByKeyPath:function(t,e){typeof e=="string"?ce(t,e,void 0):"length"in e&&[].map.call(e,function(n){ce(t,n,void 0)})},shallowClone:Ci,deepClone:Bt,getObjectDiff:Cr,cmp:te,asap:Si,minKey:Yn,addons:[],connections:vt,errnames:_r,dependencies:rr,semVer:$r,version:$r.split(".").map(t=>parseInt(t)).reduce((t,e,n)=>t+e/Math.pow(10,2*n))}),Fe.maxKey=Kt(Fe.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(Re(Tt,t=>{if(!ke){let e;pn?(e=document.createEvent("CustomEvent"),e.initCustomEvent(Ke,!0,!0,t)):e=new CustomEvent(Ke,{detail:t}),ke=!0,dispatchEvent(e),ke=!1}}),addEventListener(Ke,({detail:t})=>{ke||Zt(t)}));let ke=!1;if(typeof BroadcastChannel<"u"){const t=new BroadcastChannel(Ke);typeof t.unref=="function"&&t.unref(),Re(Tt,e=>{ke||t.postMessage(e)}),t.onmessage=e=>{e.data&&Zt(e.data)}}else if(typeof self<"u"&&typeof navigator<"u"){Re(Tt,e=>{try{ke||(typeof localStorage<"u"&&localStorage.setItem(Ke,JSON.stringify({trig:Math.random(),changedParts:e})),typeof self.clients=="object"&&[...self.clients.matchAll({includeUncontrolled:!0})].forEach(n=>n.postMessage({type:Ke,changedParts:e})))}catch{}}),typeof addEventListener<"u"&&addEventListener("storage",e=>{if(e.key===Ke){const n=JSON.parse(e.newValue);n&&Zt(n.changedParts)}});const t=self.document&&navigator.serviceWorker;t&&t.addEventListener("message",function({data:e}){e&&e.type===Ke&&Zt(e.changedParts)})}C.rejectionMapper=function(t,e){if(!t||t instanceof at||t instanceof TypeError||t instanceof SyntaxError||!t.name||!Qr[t.name])return t;var n=new Qr[t.name](e||t.message,t);return"stack"in t&&Ee(n,"stack",{get:function(){return this.inner.stack}}),n},Ti(pe,Ui);const Ar=new Ue("AppDB");Ar.version(1).stores({dictionary:"id",practiceSettings:"",statistic:"year",appSettings:""});const ha=()=>Ar.table("dictionary").toArray(),ma=t=>Ar.table("dictionary").put(t),ga=()=>{St.set("updateWord",(...t)=>Hr(ma,t)),St.set("getDictionaryDataAsArray",(...t)=>Hr(ha,t))};wo();ga();ao().then(()=>{new _o({target:document.getElementById("app")})});
